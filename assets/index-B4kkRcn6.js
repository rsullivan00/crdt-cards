(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qf={exports:{}},rl={},Jf={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=Symbol.for("react.element"),Mm=Symbol.for("react.portal"),Lm=Symbol.for("react.fragment"),Am=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),Im=Symbol.for("react.provider"),Om=Symbol.for("react.context"),zm=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Pm=Symbol.for("react.memo"),Um=Symbol.for("react.lazy"),qc=Symbol.iterator;function Bm(e){return e===null||typeof e!="object"?null:(e=qc&&e[qc]||e["@@iterator"],typeof e=="function"?e:null)}var qf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xf=Object.assign,Zf={};function go(e,t,n){this.props=e,this.context=t,this.refs=Zf,this.updater=n||qf}go.prototype.isReactComponent={};go.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};go.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function eh(){}eh.prototype=go.prototype;function Eu(e,t,n){this.props=e,this.context=t,this.refs=Zf,this.updater=n||qf}var Tu=Eu.prototype=new eh;Tu.constructor=Eu;Xf(Tu,go.prototype);Tu.isPureReactComponent=!0;var Xc=Array.isArray,th=Object.prototype.hasOwnProperty,Ru={current:null},nh={key:!0,ref:!0,__self:!0,__source:!0};function rh(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)th.call(t,r)&&!nh.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];o.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:xi,type:e,key:i,ref:s,props:o,_owner:Ru.current}}function $m(e,t){return{$$typeof:xi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ju(e){return typeof e=="object"&&e!==null&&e.$$typeof===xi}function Wm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zc=/\/+/g;function jl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Wm(""+e.key):t.toString(36)}function ns(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case xi:case Mm:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+jl(s,0):r,Xc(o)?(n="",e!=null&&(n=e.replace(Zc,"$&/")+"/"),ns(o,t,n,"",function(d){return d})):o!=null&&(ju(o)&&(o=$m(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Zc,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",Xc(e))for(var a=0;a<e.length;a++){i=e[a];var u=r+jl(i,a);s+=ns(i,t,n,u,o)}else if(u=Bm(e),typeof u=="function")for(e=u.call(e),a=0;!(i=e.next()).done;)i=i.value,u=r+jl(i,a++),s+=ns(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Mi(e,t,n){if(e==null)return e;var r=[],o=0;return ns(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Hm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},rs={transition:null},Vm={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:rs,ReactCurrentOwner:Ru};function oh(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Mi,forEach:function(e,t,n){Mi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mi(e,function(){t++}),t},toArray:function(e){return Mi(e,function(t){return t})||[]},only:function(e){if(!ju(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};fe.Component=go;fe.Fragment=Lm;fe.Profiler=Nm;fe.PureComponent=Eu;fe.StrictMode=Am;fe.Suspense=Fm;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vm;fe.act=oh;fe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xf({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Ru.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)th.call(t,u)&&!nh.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:xi,type:e.type,key:o,ref:i,props:r,_owner:s}};fe.createContext=function(e){return e={$$typeof:Om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Im,_context:e},e.Consumer=e};fe.createElement=rh;fe.createFactory=function(e){var t=rh.bind(null,e);return t.type=e,t};fe.createRef=function(){return{current:null}};fe.forwardRef=function(e){return{$$typeof:zm,render:e}};fe.isValidElement=ju;fe.lazy=function(e){return{$$typeof:Um,_payload:{_status:-1,_result:e},_init:Hm}};fe.memo=function(e,t){return{$$typeof:Pm,type:e,compare:t===void 0?null:t}};fe.startTransition=function(e){var t=rs.transition;rs.transition={};try{e()}finally{rs.transition=t}};fe.unstable_act=oh;fe.useCallback=function(e,t){return lt.current.useCallback(e,t)};fe.useContext=function(e){return lt.current.useContext(e)};fe.useDebugValue=function(){};fe.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};fe.useEffect=function(e,t){return lt.current.useEffect(e,t)};fe.useId=function(){return lt.current.useId()};fe.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};fe.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};fe.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};fe.useMemo=function(e,t){return lt.current.useMemo(e,t)};fe.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};fe.useRef=function(e){return lt.current.useRef(e)};fe.useState=function(e){return lt.current.useState(e)};fe.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};fe.useTransition=function(){return lt.current.useTransition()};fe.version="18.3.1";Jf.exports=fe;var K=Jf.exports;const Ym=Gf(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km=K,Gm=Symbol.for("react.element"),Qm=Symbol.for("react.fragment"),Jm=Object.prototype.hasOwnProperty,qm=Km.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xm={key:!0,ref:!0,__self:!0,__source:!0};function ih(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)Jm.call(t,r)&&!Xm.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Gm,type:e,key:i,ref:s,props:o,_owner:qm.current}}rl.Fragment=Qm;rl.jsx=ih;rl.jsxs=ih;Qf.exports=rl;var v=Qf.exports,ba={},sh={exports:{}},kt={},lh={exports:{}},ah={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,U){var X=$.length;$.push(U);e:for(;0<X;){var ee=X-1>>>1,le=$[ee];if(0<o(le,U))$[ee]=U,$[X]=le,X=ee;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var U=$[0],X=$.pop();if(X!==U){$[0]=X;e:for(var ee=0,le=$.length,ue=le>>>1;ee<ue;){var ae=2*(ee+1)-1,Ce=$[ae],we=ae+1,Re=$[we];if(0>o(Ce,X))we<le&&0>o(Re,Ce)?($[ee]=Re,$[we]=X,ee=we):($[ee]=Ce,$[ae]=X,ee=ae);else if(we<le&&0>o(Re,X))$[ee]=Re,$[we]=X,ee=we;else break e}}return U}function o($,U){var X=$.sortIndex-U.sortIndex;return X!==0?X:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var u=[],d=[],m=1,c=null,h=3,g=!1,y=!1,S=!1,I=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f($){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=$)r(d),U.sortIndex=U.expirationTime,t(u,U);else break;U=n(d)}}function x($){if(S=!1,f($),!y)if(n(u)!==null)y=!0,H(b);else{var U=n(d);U!==null&&Y(x,U.startTime-$)}}function b($,U){y=!1,S&&(S=!1,k(D),D=-1),g=!0;var X=h;try{for(f(U),c=n(u);c!==null&&(!(c.expirationTime>U)||$&&!L());){var ee=c.callback;if(typeof ee=="function"){c.callback=null,h=c.priorityLevel;var le=ee(c.expirationTime<=U);U=e.unstable_now(),typeof le=="function"?c.callback=le:c===n(u)&&r(u),f(U)}else r(u);c=n(u)}if(c!==null)var ue=!0;else{var ae=n(d);ae!==null&&Y(x,ae.startTime-U),ue=!1}return ue}finally{c=null,h=X,g=!1}}var R=!1,_=null,D=-1,N=5,j=-1;function L(){return!(e.unstable_now()-j<N)}function F(){if(_!==null){var $=e.unstable_now();j=$;var U=!0;try{U=_(!0,$)}finally{U?V():(R=!1,_=null)}}else R=!1}var V;if(typeof C=="function")V=function(){C(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,J=Q.port2;Q.port1.onmessage=F,V=function(){J.postMessage(null)}}else V=function(){I(F,0)};function H($){_=$,R||(R=!0,V())}function Y($,U){D=I(function(){$(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,H(b))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var X=h;h=U;try{return $()}finally{h=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=h;h=$;try{return U()}finally{h=X}},e.unstable_scheduleCallback=function($,U,X){var ee=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=X+le,$={id:m++,callback:U,priorityLevel:$,startTime:X,expirationTime:le,sortIndex:-1},X>ee?($.sortIndex=X,t(d,$),n(u)===null&&$===n(d)&&(S?(k(D),D=-1):S=!0,Y(x,X-ee))):($.sortIndex=le,t(u,$),y||g||(y=!0,H(b))),$},e.unstable_shouldYield=L,e.unstable_wrapCallback=function($){var U=h;return function(){var X=h;h=U;try{return $.apply(this,arguments)}finally{h=X}}}})(ah);lh.exports=ah;var Zm=lh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=K,bt=Zm;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uh=new Set,Ko={};function wr(e,t){Xr(e,t),Xr(e+"Capture",t)}function Xr(e,t){for(Ko[e]=t,e=0;e<t.length;e++)uh.add(t[e])}var vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=Object.prototype.hasOwnProperty,ty=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ed={},td={};function ny(e){return Sa.call(td,e)?!0:Sa.call(ed,e)?!1:ty.test(e)?td[e]=!0:(ed[e]=!0,!1)}function ry(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function oy(e,t,n,r){if(t===null||typeof t>"u"||ry(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Du=/[\-:]([a-z])/g;function Mu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Du,Mu);Xe[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Du,Mu);Xe[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Du,Mu);Xe[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lu(e,t,n,r){var o=Xe.hasOwnProperty(t)?Xe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(oy(t,n,o,r)&&(n=null),r||o===null?ny(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Cn=ey.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Li=Symbol.for("react.element"),jr=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),Au=Symbol.for("react.strict_mode"),ka=Symbol.for("react.profiler"),ch=Symbol.for("react.provider"),dh=Symbol.for("react.context"),Nu=Symbol.for("react.forward_ref"),Ca=Symbol.for("react.suspense"),_a=Symbol.for("react.suspense_list"),Iu=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),fh=Symbol.for("react.offscreen"),nd=Symbol.iterator;function bo(e){return e===null||typeof e!="object"?null:(e=nd&&e[nd]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Dl;function Do(e){if(Dl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dl=t&&t[1]||""}return`
`+Dl+e}var Ml=!1;function Ll(e,t){if(!e||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var u=`
`+o[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=a);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Do(e):""}function iy(e){switch(e.tag){case 5:return Do(e.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return e=Ll(e.type,!1),e;case 11:return e=Ll(e.type.render,!1),e;case 1:return e=Ll(e.type,!0),e;default:return""}}function Ea(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dr:return"Fragment";case jr:return"Portal";case ka:return"Profiler";case Au:return"StrictMode";case Ca:return"Suspense";case _a:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dh:return(e.displayName||"Context")+".Consumer";case ch:return(e._context.displayName||"Context")+".Provider";case Nu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Iu:return t=e.displayName||null,t!==null?t:Ea(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return Ea(e(t))}catch{}}return null}function sy(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ea(t);case 8:return t===Au?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ly(e){var t=hh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ai(e){e._valueTracker||(e._valueTracker=ly(e))}function ph(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ta(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function gh(e,t){t=t.checked,t!=null&&Lu(e,"checked",t,!1)}function Ra(e,t){gh(e,t);var n=Vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ja(e,t.type,n):t.hasOwnProperty("defaultValue")&&ja(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function od(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ja(e,t,n){(t!=="number"||xs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mo=Array.isArray;function $r(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Da(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function id(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(Mo(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vn(n)}}function mh(e,t){var n=Vn(t.value),r=Vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ma(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ni,vh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Go(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ay=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){ay.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),No[t]=No[e]})});function wh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||No.hasOwnProperty(e)&&No[e]?(""+t).trim():t+"px"}function xh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=wh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var uy=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(e,t){if(t){if(uy[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Aa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Na=null;function Ou(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,Wr=null,Hr=null;function ld(e){if(e=ki(e)){if(typeof Ia!="function")throw Error(G(280));var t=e.stateNode;t&&(t=al(t),Ia(e.stateNode,e.type,t))}}function bh(e){Wr?Hr?Hr.push(e):Hr=[e]:Wr=e}function Sh(){if(Wr){var e=Wr,t=Hr;if(Hr=Wr=null,ld(e),t)for(e=0;e<t.length;e++)ld(t[e])}}function kh(e,t){return e(t)}function Ch(){}var Al=!1;function _h(e,t,n){if(Al)return e(t,n);Al=!0;try{return kh(e,t,n)}finally{Al=!1,(Wr!==null||Hr!==null)&&(Ch(),Sh())}}function Qo(e,t){var n=e.stateNode;if(n===null)return null;var r=al(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Oa=!1;if(vn)try{var So={};Object.defineProperty(So,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Oa=!1}function cy(e,t,n,r,o,i,s,a,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Io=!1,bs=null,Ss=!1,za=null,dy={onError:function(e){Io=!0,bs=e}};function fy(e,t,n,r,o,i,s,a,u){Io=!1,bs=null,cy.apply(dy,arguments)}function hy(e,t,n,r,o,i,s,a,u){if(fy.apply(this,arguments),Io){if(Io){var d=bs;Io=!1,bs=null}else throw Error(G(198));Ss||(Ss=!0,za=d)}}function xr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Eh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ad(e){if(xr(e)!==e)throw Error(G(188))}function py(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return ad(o),e;if(i===r)return ad(o),t;i=i.sibling}throw Error(G(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function Th(e){return e=py(e),e!==null?Rh(e):null}function Rh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Rh(e);if(t!==null)return t;e=e.sibling}return null}var jh=bt.unstable_scheduleCallback,ud=bt.unstable_cancelCallback,gy=bt.unstable_shouldYield,my=bt.unstable_requestPaint,Oe=bt.unstable_now,yy=bt.unstable_getCurrentPriorityLevel,zu=bt.unstable_ImmediatePriority,Dh=bt.unstable_UserBlockingPriority,ks=bt.unstable_NormalPriority,vy=bt.unstable_LowPriority,Mh=bt.unstable_IdlePriority,ol=null,qt=null;function wy(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(ol,e,void 0,(e.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:Sy,xy=Math.log,by=Math.LN2;function Sy(e){return e>>>=0,e===0?32:31-(xy(e)/by|0)|0}var Ii=64,Oi=4194304;function Lo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Lo(a):(i&=s,i!==0&&(r=Lo(i)))}else s=n&~o,s!==0?r=Lo(s):i!==0&&(r=Lo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$t(t),o=1<<n,r|=e[n],t&=~o;return r}function ky(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-$t(i),a=1<<s,u=o[s];u===-1?(!(a&n)||a&r)&&(o[s]=ky(a,t)):u<=t&&(e.expiredLanes|=a),i&=~a}}function Fa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lh(){var e=Ii;return Ii<<=1,!(Ii&4194240)&&(Ii=64),e}function Nl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$t(t),e[t]=n}function _y(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-$t(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Fu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$t(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ve=0;function Ah(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nh,Pu,Ih,Oh,zh,Pa=!1,zi=[],zn=null,Fn=null,Pn=null,Jo=new Map,qo=new Map,Mn=[],Ey="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(e,t){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Jo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(t.pointerId)}}function ko(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=ki(t),t!==null&&Pu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Ty(e,t,n,r,o){switch(t){case"focusin":return zn=ko(zn,e,t,n,r,o),!0;case"dragenter":return Fn=ko(Fn,e,t,n,r,o),!0;case"mouseover":return Pn=ko(Pn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Jo.set(i,ko(Jo.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,qo.set(i,ko(qo.get(i)||null,e,t,n,r,o)),!0}return!1}function Fh(e){var t=er(e.target);if(t!==null){var n=xr(t);if(n!==null){if(t=n.tag,t===13){if(t=Eh(n),t!==null){e.blockedOn=t,zh(e.priority,function(){Ih(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function os(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ua(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Na=r,n.target.dispatchEvent(r),Na=null}else return t=ki(n),t!==null&&Pu(t),e.blockedOn=n,!1;t.shift()}return!0}function dd(e,t,n){os(e)&&n.delete(t)}function Ry(){Pa=!1,zn!==null&&os(zn)&&(zn=null),Fn!==null&&os(Fn)&&(Fn=null),Pn!==null&&os(Pn)&&(Pn=null),Jo.forEach(dd),qo.forEach(dd)}function Co(e,t){e.blockedOn===t&&(e.blockedOn=null,Pa||(Pa=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,Ry)))}function Xo(e){function t(o){return Co(o,e)}if(0<zi.length){Co(zi[0],e);for(var n=1;n<zi.length;n++){var r=zi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zn!==null&&Co(zn,e),Fn!==null&&Co(Fn,e),Pn!==null&&Co(Pn,e),Jo.forEach(t),qo.forEach(t),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)Fh(n),n.blockedOn===null&&Mn.shift()}var Vr=Cn.ReactCurrentBatchConfig,_s=!0;function jy(e,t,n,r){var o=ve,i=Vr.transition;Vr.transition=null;try{ve=1,Uu(e,t,n,r)}finally{ve=o,Vr.transition=i}}function Dy(e,t,n,r){var o=ve,i=Vr.transition;Vr.transition=null;try{ve=4,Uu(e,t,n,r)}finally{ve=o,Vr.transition=i}}function Uu(e,t,n,r){if(_s){var o=Ua(e,t,n,r);if(o===null)Hl(e,t,r,Es,n),cd(e,r);else if(Ty(o,e,t,n,r))r.stopPropagation();else if(cd(e,r),t&4&&-1<Ey.indexOf(e)){for(;o!==null;){var i=ki(o);if(i!==null&&Nh(i),i=Ua(e,t,n,r),i===null&&Hl(e,t,r,Es,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Hl(e,t,r,null,n)}}var Es=null;function Ua(e,t,n,r){if(Es=null,e=Ou(r),e=er(e),e!==null)if(t=xr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Eh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Es=e,null}function Ph(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yy()){case zu:return 1;case Dh:return 4;case ks:case vy:return 16;case Mh:return 536870912;default:return 16}default:return 16}}var Nn=null,Bu=null,is=null;function Uh(){if(is)return is;var e,t=Bu,n=t.length,r,o="value"in Nn?Nn.value:Nn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return is=o.slice(e,1<r?1-r:void 0)}function ss(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fi(){return!0}function fd(){return!1}function Ct(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fi:fd,this.isPropagationStopped=fd,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),t}var mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$u=Ct(mo),Si=Le({},mo,{view:0,detail:0}),My=Ct(Si),Il,Ol,_o,il=Le({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_o&&(_o&&e.type==="mousemove"?(Il=e.screenX-_o.screenX,Ol=e.screenY-_o.screenY):Ol=Il=0,_o=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Ol}}),hd=Ct(il),Ly=Le({},il,{dataTransfer:0}),Ay=Ct(Ly),Ny=Le({},Si,{relatedTarget:0}),zl=Ct(Ny),Iy=Le({},mo,{animationName:0,elapsedTime:0,pseudoElement:0}),Oy=Ct(Iy),zy=Le({},mo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fy=Ct(zy),Py=Le({},mo,{data:0}),pd=Ct(Py),Uy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},By={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$y[e])?!!t[e]:!1}function Wu(){return Wy}var Hy=Le({},Si,{key:function(e){if(e.key){var t=Uy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?By[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(e){return e.type==="keypress"?ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vy=Ct(Hy),Yy=Le({},il,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gd=Ct(Yy),Ky=Le({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),Gy=Ct(Ky),Qy=Le({},mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jy=Ct(Qy),qy=Le({},il,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xy=Ct(qy),Zy=[9,13,27,32],Hu=vn&&"CompositionEvent"in window,Oo=null;vn&&"documentMode"in document&&(Oo=document.documentMode);var e0=vn&&"TextEvent"in window&&!Oo,Bh=vn&&(!Hu||Oo&&8<Oo&&11>=Oo),md=" ",yd=!1;function $h(e,t){switch(e){case"keyup":return Zy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mr=!1;function t0(e,t){switch(e){case"compositionend":return Wh(t);case"keypress":return t.which!==32?null:(yd=!0,md);case"textInput":return e=t.data,e===md&&yd?null:e;default:return null}}function n0(e,t){if(Mr)return e==="compositionend"||!Hu&&$h(e,t)?(e=Uh(),is=Bu=Nn=null,Mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bh&&t.locale!=="ko"?null:t.data;default:return null}}var r0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!r0[e.type]:t==="textarea"}function Hh(e,t,n,r){bh(r),t=Ts(t,"onChange"),0<t.length&&(n=new $u("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zo=null,Zo=null;function o0(e){tp(e,0)}function sl(e){var t=Nr(e);if(ph(t))return e}function i0(e,t){if(e==="change")return t}var Vh=!1;if(vn){var Fl;if(vn){var Pl="oninput"in document;if(!Pl){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),Pl=typeof wd.oninput=="function"}Fl=Pl}else Fl=!1;Vh=Fl&&(!document.documentMode||9<document.documentMode)}function xd(){zo&&(zo.detachEvent("onpropertychange",Yh),Zo=zo=null)}function Yh(e){if(e.propertyName==="value"&&sl(Zo)){var t=[];Hh(t,Zo,e,Ou(e)),_h(o0,t)}}function s0(e,t,n){e==="focusin"?(xd(),zo=t,Zo=n,zo.attachEvent("onpropertychange",Yh)):e==="focusout"&&xd()}function l0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sl(Zo)}function a0(e,t){if(e==="click")return sl(t)}function u0(e,t){if(e==="input"||e==="change")return sl(t)}function c0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:c0;function ei(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Sa.call(t,o)||!Ht(e[o],t[o]))return!1}return!0}function bd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sd(e,t){var n=bd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bd(n)}}function Kh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gh(){for(var e=window,t=xs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xs(e.document)}return t}function Vu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function d0(e){var t=Gh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Kh(n.ownerDocument.documentElement,n)){if(r!==null&&Vu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Sd(n,i);var s=Sd(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var f0=vn&&"documentMode"in document&&11>=document.documentMode,Lr=null,Ba=null,Fo=null,$a=!1;function kd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$a||Lr==null||Lr!==xs(r)||(r=Lr,"selectionStart"in r&&Vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fo&&ei(Fo,r)||(Fo=r,r=Ts(Ba,"onSelect"),0<r.length&&(t=new $u("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Lr)))}function Pi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ar={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionend:Pi("Transition","TransitionEnd")},Ul={},Qh={};vn&&(Qh=document.createElement("div").style,"AnimationEvent"in window||(delete Ar.animationend.animation,delete Ar.animationiteration.animation,delete Ar.animationstart.animation),"TransitionEvent"in window||delete Ar.transitionend.transition);function ll(e){if(Ul[e])return Ul[e];if(!Ar[e])return e;var t=Ar[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Qh)return Ul[e]=t[n];return e}var Jh=ll("animationend"),qh=ll("animationiteration"),Xh=ll("animationstart"),Zh=ll("transitionend"),ep=new Map,Cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qn(e,t){ep.set(e,t),wr(t,[e])}for(var Bl=0;Bl<Cd.length;Bl++){var $l=Cd[Bl],h0=$l.toLowerCase(),p0=$l[0].toUpperCase()+$l.slice(1);Qn(h0,"on"+p0)}Qn(Jh,"onAnimationEnd");Qn(qh,"onAnimationIteration");Qn(Xh,"onAnimationStart");Qn("dblclick","onDoubleClick");Qn("focusin","onFocus");Qn("focusout","onBlur");Qn(Zh,"onTransitionEnd");Xr("onMouseEnter",["mouseout","mouseover"]);Xr("onMouseLeave",["mouseout","mouseover"]);Xr("onPointerEnter",["pointerout","pointerover"]);Xr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function _d(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hy(r,t,void 0,e),e.currentTarget=null}function tp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==i&&o.isPropagationStopped())break e;_d(o,a,d),i=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,d=a.currentTarget,a=a.listener,u!==i&&o.isPropagationStopped())break e;_d(o,a,d),i=u}}}if(Ss)throw e=za,Ss=!1,za=null,e}function Se(e,t){var n=t[Ka];n===void 0&&(n=t[Ka]=new Set);var r=e+"__bubble";n.has(r)||(np(t,e,2,!1),n.add(r))}function Wl(e,t,n){var r=0;t&&(r|=4),np(n,e,r,t)}var Ui="_reactListening"+Math.random().toString(36).slice(2);function ti(e){if(!e[Ui]){e[Ui]=!0,uh.forEach(function(n){n!=="selectionchange"&&(g0.has(n)||Wl(n,!1,e),Wl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ui]||(t[Ui]=!0,Wl("selectionchange",!1,t))}}function np(e,t,n,r){switch(Ph(t)){case 1:var o=jy;break;case 4:o=Dy;break;default:o=Uu}n=o.bind(null,t,n,e),o=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hl(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;s=s.return}for(;a!==null;){if(s=er(a),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}a=a.parentNode}}r=r.return}_h(function(){var d=i,m=Ou(n),c=[];e:{var h=ep.get(e);if(h!==void 0){var g=$u,y=e;switch(e){case"keypress":if(ss(n)===0)break e;case"keydown":case"keyup":g=Vy;break;case"focusin":y="focus",g=zl;break;case"focusout":y="blur",g=zl;break;case"beforeblur":case"afterblur":g=zl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ay;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Gy;break;case Jh:case qh:case Xh:g=Oy;break;case Zh:g=Jy;break;case"scroll":g=My;break;case"wheel":g=Xy;break;case"copy":case"cut":case"paste":g=Fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=gd}var S=(t&4)!==0,I=!S&&e==="scroll",k=S?h!==null?h+"Capture":null:h;S=[];for(var C=d,f;C!==null;){f=C;var x=f.stateNode;if(f.tag===5&&x!==null&&(f=x,k!==null&&(x=Qo(C,k),x!=null&&S.push(ni(C,x,f)))),I)break;C=C.return}0<S.length&&(h=new g(h,y,null,n,m),c.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Na&&(y=n.relatedTarget||n.fromElement)&&(er(y)||y[wn]))break e;if((g||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=d,y=y?er(y):null,y!==null&&(I=xr(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=d),g!==y)){if(S=hd,x="onMouseLeave",k="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(S=gd,x="onPointerLeave",k="onPointerEnter",C="pointer"),I=g==null?h:Nr(g),f=y==null?h:Nr(y),h=new S(x,C+"leave",g,n,m),h.target=I,h.relatedTarget=f,x=null,er(m)===d&&(S=new S(k,C+"enter",y,n,m),S.target=f,S.relatedTarget=I,x=S),I=x,g&&y)t:{for(S=g,k=y,C=0,f=S;f;f=_r(f))C++;for(f=0,x=k;x;x=_r(x))f++;for(;0<C-f;)S=_r(S),C--;for(;0<f-C;)k=_r(k),f--;for(;C--;){if(S===k||k!==null&&S===k.alternate)break t;S=_r(S),k=_r(k)}S=null}else S=null;g!==null&&Ed(c,h,g,S,!1),y!==null&&I!==null&&Ed(c,I,y,S,!0)}}e:{if(h=d?Nr(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=i0;else if(vd(h))if(Vh)b=u0;else{b=l0;var R=s0}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=a0);if(b&&(b=b(e,d))){Hh(c,b,n,m);break e}R&&R(e,h,d),e==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&ja(h,"number",h.value)}switch(R=d?Nr(d):window,e){case"focusin":(vd(R)||R.contentEditable==="true")&&(Lr=R,Ba=d,Fo=null);break;case"focusout":Fo=Ba=Lr=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,kd(c,n,m);break;case"selectionchange":if(f0)break;case"keydown":case"keyup":kd(c,n,m)}var _;if(Hu)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Mr?$h(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Bh&&n.locale!=="ko"&&(Mr||D!=="onCompositionStart"?D==="onCompositionEnd"&&Mr&&(_=Uh()):(Nn=m,Bu="value"in Nn?Nn.value:Nn.textContent,Mr=!0)),R=Ts(d,D),0<R.length&&(D=new pd(D,e,null,n,m),c.push({event:D,listeners:R}),_?D.data=_:(_=Wh(n),_!==null&&(D.data=_)))),(_=e0?t0(e,n):n0(e,n))&&(d=Ts(d,"onBeforeInput"),0<d.length&&(m=new pd("onBeforeInput","beforeinput",null,n,m),c.push({event:m,listeners:d}),m.data=_))}tp(c,t)})}function ni(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ts(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Qo(e,n),i!=null&&r.unshift(ni(e,i,o)),i=Qo(e,t),i!=null&&r.push(ni(e,i,o))),e=e.return}return r}function _r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ed(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,o?(u=Qo(n,i),u!=null&&s.unshift(ni(n,u,a))):o||(u=Qo(n,i),u!=null&&s.push(ni(n,u,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var m0=/\r\n?/g,y0=/\u0000|\uFFFD/g;function Td(e){return(typeof e=="string"?e:""+e).replace(m0,`
`).replace(y0,"")}function Bi(e,t,n){if(t=Td(t),Td(e)!==t&&n)throw Error(G(425))}function Rs(){}var Wa=null,Ha=null;function Va(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ya=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Rd=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof Rd<"u"?function(e){return Rd.resolve(null).then(e).catch(x0)}:Ya;function x0(e){setTimeout(function(){throw e})}function Vl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Xo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Xo(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yo=Math.random().toString(36).slice(2),Jt="__reactFiber$"+yo,ri="__reactProps$"+yo,wn="__reactContainer$"+yo,Ka="__reactEvents$"+yo,b0="__reactListeners$"+yo,S0="__reactHandles$"+yo;function er(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jd(e);e!==null;){if(n=e[Jt])return n;e=jd(e)}return t}e=n,n=e.parentNode}return null}function ki(e){return e=e[Jt]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function al(e){return e[ri]||null}var Ga=[],Ir=-1;function Jn(e){return{current:e}}function ke(e){0>Ir||(e.current=Ga[Ir],Ga[Ir]=null,Ir--)}function be(e,t){Ir++,Ga[Ir]=e.current,e.current=t}var Yn={},ot=Jn(Yn),ft=Jn(!1),ur=Yn;function Zr(e,t){var n=e.type.contextTypes;if(!n)return Yn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ht(e){return e=e.childContextTypes,e!=null}function js(){ke(ft),ke(ot)}function Dd(e,t,n){if(ot.current!==Yn)throw Error(G(168));be(ot,t),be(ft,n)}function rp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(G(108,sy(e)||"Unknown",o));return Le({},n,r)}function Ds(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yn,ur=ot.current,be(ot,e),be(ft,ft.current),!0}function Md(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=rp(e,t,ur),r.__reactInternalMemoizedMergedChildContext=e,ke(ft),ke(ot),be(ot,e)):ke(ft),be(ft,n)}var dn=null,ul=!1,Yl=!1;function op(e){dn===null?dn=[e]:dn.push(e)}function k0(e){ul=!0,op(e)}function qn(){if(!Yl&&dn!==null){Yl=!0;var e=0,t=ve;try{var n=dn;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,ul=!1}catch(o){throw dn!==null&&(dn=dn.slice(e+1)),jh(zu,qn),o}finally{ve=t,Yl=!1}}return null}var Or=[],zr=0,Ms=null,Ls=0,Tt=[],Rt=0,cr=null,hn=1,pn="";function Xn(e,t){Or[zr++]=Ls,Or[zr++]=Ms,Ms=e,Ls=t}function ip(e,t,n){Tt[Rt++]=hn,Tt[Rt++]=pn,Tt[Rt++]=cr,cr=e;var r=hn;e=pn;var o=32-$t(r)-1;r&=~(1<<o),n+=1;var i=32-$t(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,hn=1<<32-$t(t)+o|n<<o|r,pn=i+e}else hn=1<<i|n<<o|r,pn=e}function Yu(e){e.return!==null&&(Xn(e,1),ip(e,1,0))}function Ku(e){for(;e===Ms;)Ms=Or[--zr],Or[zr]=null,Ls=Or[--zr],Or[zr]=null;for(;e===cr;)cr=Tt[--Rt],Tt[Rt]=null,pn=Tt[--Rt],Tt[Rt]=null,hn=Tt[--Rt],Tt[Rt]=null}var wt=null,yt=null,Te=!1,Ut=null;function sp(e,t){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ld(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,yt=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cr!==null?{id:hn,overflow:pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wt=e,yt=null,!0):!1;default:return!1}}function Qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ja(e){if(Te){var t=yt;if(t){var n=t;if(!Ld(e,t)){if(Qa(e))throw Error(G(418));t=Un(n.nextSibling);var r=wt;t&&Ld(e,t)?sp(r,n):(e.flags=e.flags&-4097|2,Te=!1,wt=e)}}else{if(Qa(e))throw Error(G(418));e.flags=e.flags&-4097|2,Te=!1,wt=e}}}function Ad(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function $i(e){if(e!==wt)return!1;if(!Te)return Ad(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Va(e.type,e.memoizedProps)),t&&(t=yt)){if(Qa(e))throw lp(),Error(G(418));for(;t;)sp(e,t),t=Un(t.nextSibling)}if(Ad(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){yt=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=wt?Un(e.stateNode.nextSibling):null;return!0}function lp(){for(var e=yt;e;)e=Un(e.nextSibling)}function eo(){yt=wt=null,Te=!1}function Gu(e){Ut===null?Ut=[e]:Ut.push(e)}var C0=Cn.ReactCurrentBatchConfig;function Eo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function Wi(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nd(e){var t=e._init;return t(e._payload)}function ap(e){function t(k,C){if(e){var f=k.deletions;f===null?(k.deletions=[C],k.flags|=16):f.push(C)}}function n(k,C){if(!e)return null;for(;C!==null;)t(k,C),C=C.sibling;return null}function r(k,C){for(k=new Map;C!==null;)C.key!==null?k.set(C.key,C):k.set(C.index,C),C=C.sibling;return k}function o(k,C){return k=Hn(k,C),k.index=0,k.sibling=null,k}function i(k,C,f){return k.index=f,e?(f=k.alternate,f!==null?(f=f.index,f<C?(k.flags|=2,C):f):(k.flags|=2,C)):(k.flags|=1048576,C)}function s(k){return e&&k.alternate===null&&(k.flags|=2),k}function a(k,C,f,x){return C===null||C.tag!==6?(C=Zl(f,k.mode,x),C.return=k,C):(C=o(C,f),C.return=k,C)}function u(k,C,f,x){var b=f.type;return b===Dr?m(k,C,f.props.children,x,f.key):C!==null&&(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Rn&&Nd(b)===C.type)?(x=o(C,f.props),x.ref=Eo(k,C,f),x.return=k,x):(x=hs(f.type,f.key,f.props,null,k.mode,x),x.ref=Eo(k,C,f),x.return=k,x)}function d(k,C,f,x){return C===null||C.tag!==4||C.stateNode.containerInfo!==f.containerInfo||C.stateNode.implementation!==f.implementation?(C=ea(f,k.mode,x),C.return=k,C):(C=o(C,f.children||[]),C.return=k,C)}function m(k,C,f,x,b){return C===null||C.tag!==7?(C=or(f,k.mode,x,b),C.return=k,C):(C=o(C,f),C.return=k,C)}function c(k,C,f){if(typeof C=="string"&&C!==""||typeof C=="number")return C=Zl(""+C,k.mode,f),C.return=k,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Li:return f=hs(C.type,C.key,C.props,null,k.mode,f),f.ref=Eo(k,null,C),f.return=k,f;case jr:return C=ea(C,k.mode,f),C.return=k,C;case Rn:var x=C._init;return c(k,x(C._payload),f)}if(Mo(C)||bo(C))return C=or(C,k.mode,f,null),C.return=k,C;Wi(k,C)}return null}function h(k,C,f,x){var b=C!==null?C.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return b!==null?null:a(k,C,""+f,x);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Li:return f.key===b?u(k,C,f,x):null;case jr:return f.key===b?d(k,C,f,x):null;case Rn:return b=f._init,h(k,C,b(f._payload),x)}if(Mo(f)||bo(f))return b!==null?null:m(k,C,f,x,null);Wi(k,f)}return null}function g(k,C,f,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return k=k.get(f)||null,a(C,k,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Li:return k=k.get(x.key===null?f:x.key)||null,u(C,k,x,b);case jr:return k=k.get(x.key===null?f:x.key)||null,d(C,k,x,b);case Rn:var R=x._init;return g(k,C,f,R(x._payload),b)}if(Mo(x)||bo(x))return k=k.get(f)||null,m(C,k,x,b,null);Wi(C,x)}return null}function y(k,C,f,x){for(var b=null,R=null,_=C,D=C=0,N=null;_!==null&&D<f.length;D++){_.index>D?(N=_,_=null):N=_.sibling;var j=h(k,_,f[D],x);if(j===null){_===null&&(_=N);break}e&&_&&j.alternate===null&&t(k,_),C=i(j,C,D),R===null?b=j:R.sibling=j,R=j,_=N}if(D===f.length)return n(k,_),Te&&Xn(k,D),b;if(_===null){for(;D<f.length;D++)_=c(k,f[D],x),_!==null&&(C=i(_,C,D),R===null?b=_:R.sibling=_,R=_);return Te&&Xn(k,D),b}for(_=r(k,_);D<f.length;D++)N=g(_,k,D,f[D],x),N!==null&&(e&&N.alternate!==null&&_.delete(N.key===null?D:N.key),C=i(N,C,D),R===null?b=N:R.sibling=N,R=N);return e&&_.forEach(function(L){return t(k,L)}),Te&&Xn(k,D),b}function S(k,C,f,x){var b=bo(f);if(typeof b!="function")throw Error(G(150));if(f=b.call(f),f==null)throw Error(G(151));for(var R=b=null,_=C,D=C=0,N=null,j=f.next();_!==null&&!j.done;D++,j=f.next()){_.index>D?(N=_,_=null):N=_.sibling;var L=h(k,_,j.value,x);if(L===null){_===null&&(_=N);break}e&&_&&L.alternate===null&&t(k,_),C=i(L,C,D),R===null?b=L:R.sibling=L,R=L,_=N}if(j.done)return n(k,_),Te&&Xn(k,D),b;if(_===null){for(;!j.done;D++,j=f.next())j=c(k,j.value,x),j!==null&&(C=i(j,C,D),R===null?b=j:R.sibling=j,R=j);return Te&&Xn(k,D),b}for(_=r(k,_);!j.done;D++,j=f.next())j=g(_,k,D,j.value,x),j!==null&&(e&&j.alternate!==null&&_.delete(j.key===null?D:j.key),C=i(j,C,D),R===null?b=j:R.sibling=j,R=j);return e&&_.forEach(function(F){return t(k,F)}),Te&&Xn(k,D),b}function I(k,C,f,x){if(typeof f=="object"&&f!==null&&f.type===Dr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Li:e:{for(var b=f.key,R=C;R!==null;){if(R.key===b){if(b=f.type,b===Dr){if(R.tag===7){n(k,R.sibling),C=o(R,f.props.children),C.return=k,k=C;break e}}else if(R.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Rn&&Nd(b)===R.type){n(k,R.sibling),C=o(R,f.props),C.ref=Eo(k,R,f),C.return=k,k=C;break e}n(k,R);break}else t(k,R);R=R.sibling}f.type===Dr?(C=or(f.props.children,k.mode,x,f.key),C.return=k,k=C):(x=hs(f.type,f.key,f.props,null,k.mode,x),x.ref=Eo(k,C,f),x.return=k,k=x)}return s(k);case jr:e:{for(R=f.key;C!==null;){if(C.key===R)if(C.tag===4&&C.stateNode.containerInfo===f.containerInfo&&C.stateNode.implementation===f.implementation){n(k,C.sibling),C=o(C,f.children||[]),C.return=k,k=C;break e}else{n(k,C);break}else t(k,C);C=C.sibling}C=ea(f,k.mode,x),C.return=k,k=C}return s(k);case Rn:return R=f._init,I(k,C,R(f._payload),x)}if(Mo(f))return y(k,C,f,x);if(bo(f))return S(k,C,f,x);Wi(k,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,C!==null&&C.tag===6?(n(k,C.sibling),C=o(C,f),C.return=k,k=C):(n(k,C),C=Zl(f,k.mode,x),C.return=k,k=C),s(k)):n(k,C)}return I}var to=ap(!0),up=ap(!1),As=Jn(null),Ns=null,Fr=null,Qu=null;function Ju(){Qu=Fr=Ns=null}function qu(e){var t=As.current;ke(As),e._currentValue=t}function qa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yr(e,t){Ns=e,Qu=Fr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Nt(e){var t=e._currentValue;if(Qu!==e)if(e={context:e,memoizedValue:t,next:null},Fr===null){if(Ns===null)throw Error(G(308));Fr=e,Ns.dependencies={lanes:0,firstContext:e}}else Fr=Fr.next=e;return t}var tr=null;function Xu(e){tr===null?tr=[e]:tr.push(e)}function cp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Xu(t)):(n.next=o.next,o.next=n),t.interleaved=n,xn(e,r)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function Zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,xn(e,n)}return o=r.interleaved,o===null?(t.next=t,Xu(r)):(t.next=o.next,o.next=t),r.interleaved=t,xn(e,n)}function ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}function Id(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Is(e,t,n,r){var o=e.updateQueue;jn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var u=a,d=u.next;u.next=null,s===null?i=d:s.next=d,s=u;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==s&&(a===null?m.firstBaseUpdate=d:a.next=d,m.lastBaseUpdate=u))}if(i!==null){var c=o.baseState;s=0,m=d=u=null,a=i;do{var h=a.lane,g=a.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,S=a;switch(h=t,g=n,S.tag){case 1:if(y=S.payload,typeof y=="function"){c=y.call(g,c,h);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=S.payload,h=typeof y=="function"?y.call(g,c,h):y,h==null)break e;c=Le({},c,h);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(d=m=g,u=c):m=m.next=g,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(m===null&&(u=c),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);fr|=s,e.lanes=s,e.memoizedState=c}}function Od(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(G(191,o));o.call(r)}}}var Ci={},Xt=Jn(Ci),oi=Jn(Ci),ii=Jn(Ci);function nr(e){if(e===Ci)throw Error(G(174));return e}function ec(e,t){switch(be(ii,t),be(oi,e),be(Xt,Ci),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ma(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ma(t,e)}ke(Xt),be(Xt,t)}function no(){ke(Xt),ke(oi),ke(ii)}function fp(e){nr(ii.current);var t=nr(Xt.current),n=Ma(t,e.type);t!==n&&(be(oi,e),be(Xt,n))}function tc(e){oi.current===e&&(ke(Xt),ke(oi))}var je=Jn(0);function Os(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Kl=[];function nc(){for(var e=0;e<Kl.length;e++)Kl[e]._workInProgressVersionPrimary=null;Kl.length=0}var as=Cn.ReactCurrentDispatcher,Gl=Cn.ReactCurrentBatchConfig,dr=0,Me=null,Fe=null,He=null,zs=!1,Po=!1,si=0,_0=0;function et(){throw Error(G(321))}function rc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function oc(e,t,n,r,o,i){if(dr=i,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,as.current=e===null||e.memoizedState===null?j0:D0,e=n(r,o),Po){i=0;do{if(Po=!1,si=0,25<=i)throw Error(G(301));i+=1,He=Fe=null,t.updateQueue=null,as.current=M0,e=n(r,o)}while(Po)}if(as.current=Fs,t=Fe!==null&&Fe.next!==null,dr=0,He=Fe=Me=null,zs=!1,t)throw Error(G(300));return e}function ic(){var e=si!==0;return si=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Me.memoizedState=He=e:He=He.next=e,He}function It(){if(Fe===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=He===null?Me.memoizedState:He.next;if(t!==null)He=t,Fe=e;else{if(e===null)throw Error(G(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},He===null?Me.memoizedState=He=e:He=He.next=e}return He}function li(e,t){return typeof t=="function"?t(e):t}function Ql(e){var t=It(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Fe,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,u=null,d=i;do{var m=d.lane;if((dr&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var c={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=c,s=r):u=u.next=c,Me.lanes|=m,fr|=m}d=d.next}while(d!==null&&d!==i);u===null?s=r:u.next=a,Ht(r,t.memoizedState)||(dt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Me.lanes|=i,fr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jl(e){var t=It(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Ht(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function hp(){}function pp(e,t){var n=Me,r=It(),o=t(),i=!Ht(r.memoizedState,o);if(i&&(r.memoizedState=o,dt=!0),r=r.queue,sc(yp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ai(9,mp.bind(null,n,r,o,t),void 0,null),Ke===null)throw Error(G(349));dr&30||gp(n,t,o)}return o}function gp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mp(e,t,n,r){t.value=n,t.getSnapshot=r,vp(t)&&wp(e)}function yp(e,t,n){return n(function(){vp(t)&&wp(e)})}function vp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function wp(e){var t=xn(e,1);t!==null&&Wt(t,e,1,-1)}function zd(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t.queue=e,e=e.dispatch=R0.bind(null,Me,e),[t.memoizedState,e]}function ai(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function xp(){return It().memoizedState}function us(e,t,n,r){var o=Qt();Me.flags|=e,o.memoizedState=ai(1|t,n,void 0,r===void 0?null:r)}function cl(e,t,n,r){var o=It();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var s=Fe.memoizedState;if(i=s.destroy,r!==null&&rc(r,s.deps)){o.memoizedState=ai(t,n,i,r);return}}Me.flags|=e,o.memoizedState=ai(1|t,n,i,r)}function Fd(e,t){return us(8390656,8,e,t)}function sc(e,t){return cl(2048,8,e,t)}function bp(e,t){return cl(4,2,e,t)}function Sp(e,t){return cl(4,4,e,t)}function kp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cp(e,t,n){return n=n!=null?n.concat([e]):null,cl(4,4,kp.bind(null,t,e),n)}function lc(){}function _p(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ep(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&rc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Tp(e,t,n){return dr&21?(Ht(n,t)||(n=Lh(),Me.lanes|=n,fr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=n)}function E0(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=Gl.transition;Gl.transition={};try{e(!1),t()}finally{ve=n,Gl.transition=r}}function Rp(){return It().memoizedState}function T0(e,t,n){var r=Wn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jp(e))Dp(t,n);else if(n=cp(e,t,n,r),n!==null){var o=st();Wt(n,e,r,o),Mp(n,t,r)}}function R0(e,t,n){var r=Wn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jp(e))Dp(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Ht(a,s)){var u=t.interleaved;u===null?(o.next=o,Xu(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=cp(e,t,o,r),n!==null&&(o=st(),Wt(n,e,r,o),Mp(n,t,r))}}function jp(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Dp(e,t){Po=zs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Mp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fu(e,n)}}var Fs={readContext:Nt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},j0={readContext:Nt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:Fd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,us(4194308,4,kp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return us(4194308,4,e,t)},useInsertionEffect:function(e,t){return us(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=T0.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:zd,useDebugValue:lc,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=zd(!1),t=e[0];return e=E0.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,o=Qt();if(Te){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),Ke===null)throw Error(G(349));dr&30||gp(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Fd(yp.bind(null,r,i,e),[e]),r.flags|=2048,ai(9,mp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Qt(),t=Ke.identifierPrefix;if(Te){var n=pn,r=hn;n=(r&~(1<<32-$t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=si++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},D0={readContext:Nt,useCallback:_p,useContext:Nt,useEffect:sc,useImperativeHandle:Cp,useInsertionEffect:bp,useLayoutEffect:Sp,useMemo:Ep,useReducer:Ql,useRef:xp,useState:function(){return Ql(li)},useDebugValue:lc,useDeferredValue:function(e){var t=It();return Tp(t,Fe.memoizedState,e)},useTransition:function(){var e=Ql(li)[0],t=It().memoizedState;return[e,t]},useMutableSource:hp,useSyncExternalStore:pp,useId:Rp,unstable_isNewReconciler:!1},M0={readContext:Nt,useCallback:_p,useContext:Nt,useEffect:sc,useImperativeHandle:Cp,useInsertionEffect:bp,useLayoutEffect:Sp,useMemo:Ep,useReducer:Jl,useRef:xp,useState:function(){return Jl(li)},useDebugValue:lc,useDeferredValue:function(e){var t=It();return Fe===null?t.memoizedState=e:Tp(t,Fe.memoizedState,e)},useTransition:function(){var e=Jl(li)[0],t=It().memoizedState;return[e,t]},useMutableSource:hp,useSyncExternalStore:pp,useId:Rp,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dl={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),o=Wn(e),i=gn(r,o);i.payload=t,n!=null&&(i.callback=n),t=Bn(e,i,o),t!==null&&(Wt(t,e,o,r),ls(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),o=Wn(e),i=gn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Bn(e,i,o),t!==null&&(Wt(t,e,o,r),ls(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=Wn(e),o=gn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Bn(e,o,r),t!==null&&(Wt(t,e,r,n),ls(t,e,r))}};function Pd(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!ei(n,r)||!ei(o,i):!0}function Lp(e,t,n){var r=!1,o=Yn,i=t.contextType;return typeof i=="object"&&i!==null?i=Nt(i):(o=ht(t)?ur:ot.current,r=t.contextTypes,i=(r=r!=null)?Zr(e,o):Yn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ud(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&dl.enqueueReplaceState(t,t.state,null)}function Za(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Zu(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Nt(i):(i=ht(t)?ur:ot.current,o.context=Zr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xa(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&dl.enqueueReplaceState(o,o.state,null),Is(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function ro(e,t){try{var n="",r=t;do n+=iy(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function ql(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eu(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var L0=typeof WeakMap=="function"?WeakMap:Map;function Ap(e,t,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Us||(Us=!0,cu=r),eu(e,t)},n}function Np(e,t,n){n=gn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){eu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eu(e,t),typeof r!="function"&&($n===null?$n=new Set([this]):$n.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Bd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new L0;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Y0.bind(null,e,t,n),t.then(e,e))}function $d(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=gn(-1,1),t.tag=2,Bn(n,t,1))),n.lanes|=1),e)}var A0=Cn.ReactCurrentOwner,dt=!1;function it(e,t,n,r){t.child=e===null?up(t,null,n,r):to(t,e.child,n,r)}function Hd(e,t,n,r,o){n=n.render;var i=t.ref;return Yr(t,o),r=oc(e,t,n,r,i,o),n=ic(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,bn(e,t,o)):(Te&&n&&Yu(t),t.flags|=1,it(e,t,r,o),t.child)}function Vd(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!gc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ip(e,t,i,r,o)):(e=hs(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ei,n(s,r)&&e.ref===t.ref)return bn(e,t,o)}return t.flags|=1,e=Hn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ip(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(ei(i,r)&&e.ref===t.ref)if(dt=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,bn(e,t,o)}return tu(e,t,n,r,o)}function Op(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ur,mt),mt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(Ur,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,be(Ur,mt),mt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,be(Ur,mt),mt|=r;return it(e,t,o,n),t.child}function zp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tu(e,t,n,r,o){var i=ht(n)?ur:ot.current;return i=Zr(t,i),Yr(t,o),n=oc(e,t,n,r,i,o),r=ic(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,bn(e,t,o)):(Te&&r&&Yu(t),t.flags|=1,it(e,t,n,o),t.child)}function Yd(e,t,n,r,o){if(ht(n)){var i=!0;Ds(t)}else i=!1;if(Yr(t,o),t.stateNode===null)cs(e,t),Lp(t,n,r),Za(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Nt(d):(d=ht(n)?ur:ot.current,d=Zr(t,d));var m=n.getDerivedStateFromProps,c=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function";c||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==d)&&Ud(t,s,r,d),jn=!1;var h=t.memoizedState;s.state=h,Is(t,r,s,o),u=t.memoizedState,a!==r||h!==u||ft.current||jn?(typeof m=="function"&&(Xa(t,n,m,r),u=t.memoizedState),(a=jn||Pd(t,n,a,r,h,u,d))?(c||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,dp(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Ft(t.type,a),s.props=d,c=t.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=ht(n)?ur:ot.current,u=Zr(t,u));var g=n.getDerivedStateFromProps;(m=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==c||h!==u)&&Ud(t,s,r,u),jn=!1,h=t.memoizedState,s.state=h,Is(t,r,s,o);var y=t.memoizedState;a!==c||h!==y||ft.current||jn?(typeof g=="function"&&(Xa(t,n,g,r),y=t.memoizedState),(d=jn||Pd(t,n,d,r,h,y,u)||!1)?(m||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),s.props=r,s.state=y,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return nu(e,t,n,r,i,o)}function nu(e,t,n,r,o,i){zp(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&Md(t,n,!1),bn(e,t,i);r=t.stateNode,A0.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=to(t,e.child,null,i),t.child=to(t,null,a,i)):it(e,t,a,i),t.memoizedState=r.state,o&&Md(t,n,!0),t.child}function Fp(e){var t=e.stateNode;t.pendingContext?Dd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Dd(e,t.context,!1),ec(e,t.containerInfo)}function Kd(e,t,n,r,o){return eo(),Gu(o),t.flags|=256,it(e,t,n,r),t.child}var ru={dehydrated:null,treeContext:null,retryLane:0};function ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Pp(e,t,n){var r=t.pendingProps,o=je.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),be(je,o&1),e===null)return Ja(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=pl(s,r,0,null),e=or(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ou(n),t.memoizedState=ru,e):ac(t,s));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return N0(e,t,s,r,a,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,a=o.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Hn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Hn(a,i):(i=or(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?ou(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=ru,r}return i=e.child,e=i.sibling,r=Hn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ac(e,t){return t=pl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hi(e,t,n,r){return r!==null&&Gu(r),to(t,e.child,null,n),e=ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function N0(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=ql(Error(G(422))),Hi(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=pl({mode:"visible",children:r.children},o,0,null),i=or(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&to(t,e.child,null,s),t.child.memoizedState=ou(s),t.memoizedState=ru,i);if(!(t.mode&1))return Hi(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(G(419)),r=ql(i,r,void 0),Hi(e,t,s,r)}if(a=(s&e.childLanes)!==0,dt||a){if(r=Ke,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,xn(e,o),Wt(r,e,o,-1))}return pc(),r=ql(Error(G(421))),Hi(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=K0.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,yt=Un(o.nextSibling),wt=t,Te=!0,Ut=null,e!==null&&(Tt[Rt++]=hn,Tt[Rt++]=pn,Tt[Rt++]=cr,hn=e.id,pn=e.overflow,cr=t),t=ac(t,r.children),t.flags|=4096,t)}function Gd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qa(e.return,t,n)}function Xl(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Up(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(it(e,t,r.children,n),r=je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gd(e,n,t);else if(e.tag===19)Gd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(be(je,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Os(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Xl(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Os(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Xl(t,!0,n,null,i);break;case"together":Xl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=Hn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function I0(e,t,n){switch(t.tag){case 3:Fp(t),eo();break;case 5:fp(t);break;case 1:ht(t.type)&&Ds(t);break;case 4:ec(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;be(As,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(be(je,je.current&1),t.flags|=128,null):n&t.child.childLanes?Pp(e,t,n):(be(je,je.current&1),e=bn(e,t,n),e!==null?e.sibling:null);be(je,je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Up(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),be(je,je.current),r)break;return null;case 22:case 23:return t.lanes=0,Op(e,t,n)}return bn(e,t,n)}var Bp,iu,$p,Wp;Bp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iu=function(){};$p=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,nr(Xt.current);var i=null;switch(n){case"input":o=Ta(e,o),r=Ta(e,r),i=[];break;case"select":o=Le({},o,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":o=Da(e,o),r=Da(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Rs)}La(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ko.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ko.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",e),i||a===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Wp=function(e,t,n,r){n!==r&&(t.flags|=4)};function To(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function O0(e,t,n){var r=t.pendingProps;switch(Ku(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return ht(t.type)&&js(),tt(t),null;case 3:return r=t.stateNode,no(),ke(ft),ke(ot),nc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($i(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(hu(Ut),Ut=null))),iu(e,t),tt(t),null;case 5:tc(t);var o=nr(ii.current);if(n=t.type,e!==null&&t.stateNode!=null)$p(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return tt(t),null}if(e=nr(Xt.current),$i(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Jt]=t,r[ri]=i,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(o=0;o<Ao.length;o++)Se(Ao[o],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":rd(r,i),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Se("invalid",r);break;case"textarea":id(r,i),Se("invalid",r)}La(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bi(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bi(r.textContent,a,e),o=["children",""+a]):Ko.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Se("scroll",r)}switch(n){case"input":Ai(r),od(r,i,!0);break;case"textarea":Ai(r),sd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Jt]=t,e[ri]=r,Bp(e,t,!1,!1),t.stateNode=e;e:{switch(s=Aa(n,r),n){case"dialog":Se("cancel",e),Se("close",e),o=r;break;case"iframe":case"object":case"embed":Se("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ao.length;o++)Se(Ao[o],e);o=r;break;case"source":Se("error",e),o=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),o=r;break;case"details":Se("toggle",e),o=r;break;case"input":rd(e,r),o=Ta(e,r),Se("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Le({},r,{value:void 0}),Se("invalid",e);break;case"textarea":id(e,r),o=Da(e,r),Se("invalid",e);break;default:o=r}La(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?xh(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vh(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Go(e,u):typeof u=="number"&&Go(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ko.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Se("scroll",e):u!=null&&Lu(e,i,u,s))}switch(n){case"input":Ai(e),od(e,r,!1);break;case"textarea":Ai(e),sd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?$r(e,!!r.multiple,i,!1):r.defaultValue!=null&&$r(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Rs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Wp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=nr(ii.current),nr(Xt.current),$i(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jt]=t,(i=r.nodeValue!==n)&&(e=wt,e!==null))switch(e.tag){case 3:Bi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=t,t.stateNode=r}return tt(t),null;case 13:if(ke(je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&yt!==null&&t.mode&1&&!(t.flags&128))lp(),eo(),t.flags|=98560,i=!1;else if(i=$i(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(G(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Jt]=t}else eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Ut!==null&&(hu(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Pe===0&&(Pe=3):pc())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return no(),iu(e,t),e===null&&ti(t.stateNode.containerInfo),tt(t),null;case 10:return qu(t.type._context),tt(t),null;case 17:return ht(t.type)&&js(),tt(t),null;case 19:if(ke(je),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)To(i,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Os(e),s!==null){for(t.flags|=128,To(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return be(je,je.current&1|2),t.child}e=e.sibling}i.tail!==null&&Oe()>oo&&(t.flags|=128,r=!0,To(i,!1),t.lanes=4194304)}else{if(!r)if(e=Os(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Te)return tt(t),null}else 2*Oe()-i.renderingStartTime>oo&&n!==1073741824&&(t.flags|=128,r=!0,To(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Oe(),t.sibling=null,n=je.current,be(je,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return hc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function z0(e,t){switch(Ku(t),t.tag){case 1:return ht(t.type)&&js(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return no(),ke(ft),ke(ot),nc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return tc(t),null;case 13:if(ke(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(je),null;case 4:return no(),null;case 10:return qu(t.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var Vi=!1,nt=!1,F0=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Pr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(e,t,r)}else n.current=null}function su(e,t,n){try{n()}catch(r){Ne(e,t,r)}}var Qd=!1;function P0(e,t){if(Wa=_s,e=Gh(),Vu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,u=-1,d=0,m=0,c=e,h=null;t:for(;;){for(var g;c!==n||o!==0&&c.nodeType!==3||(a=s+o),c!==i||r!==0&&c.nodeType!==3||(u=s+r),c.nodeType===3&&(s+=c.nodeValue.length),(g=c.firstChild)!==null;)h=c,c=g;for(;;){if(c===e)break t;if(h===n&&++d===o&&(a=s),h===i&&++m===r&&(u=s),(g=c.nextSibling)!==null)break;c=h,h=c.parentNode}c=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ha={focusedElem:e,selectionRange:n},_s=!1,ne=t;ne!==null;)if(t=ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ne=e;else for(;ne!==null;){t=ne;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var S=y.memoizedProps,I=y.memoizedState,k=t.stateNode,C=k.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ft(t.type,S),I);k.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(x){Ne(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ne=e;break}ne=t.return}return y=Qd,Qd=!1,y}function Uo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&su(t,n,i)}o=o.next}while(o!==r)}}function fl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Hp(e){var t=e.alternate;t!==null&&(e.alternate=null,Hp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[ri],delete t[Ka],delete t[b0],delete t[S0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Vp(e){return e.tag===5||e.tag===3||e.tag===4}function Jd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function au(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Rs));else if(r!==4&&(e=e.child,e!==null))for(au(e,t,n),e=e.sibling;e!==null;)au(e,t,n),e=e.sibling}function uu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(uu(e,t,n),e=e.sibling;e!==null;)uu(e,t,n),e=e.sibling}var Qe=null,Pt=!1;function Tn(e,t,n){for(n=n.child;n!==null;)Yp(e,t,n),n=n.sibling}function Yp(e,t,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(ol,n)}catch{}switch(n.tag){case 5:nt||Pr(n,t);case 6:var r=Qe,o=Pt;Qe=null,Tn(e,t,n),Qe=r,Pt=o,Qe!==null&&(Pt?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Pt?(e=Qe,n=n.stateNode,e.nodeType===8?Vl(e.parentNode,n):e.nodeType===1&&Vl(e,n),Xo(e)):Vl(Qe,n.stateNode));break;case 4:r=Qe,o=Pt,Qe=n.stateNode.containerInfo,Pt=!0,Tn(e,t,n),Qe=r,Pt=o;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&su(n,t,s),o=o.next}while(o!==r)}Tn(e,t,n);break;case 1:if(!nt&&(Pr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,t,a)}Tn(e,t,n);break;case 21:Tn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,Tn(e,t,n),nt=r):Tn(e,t,n);break;default:Tn(e,t,n)}}function qd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new F0),t.forEach(function(r){var o=G0.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Qe=a.stateNode,Pt=!1;break e;case 3:Qe=a.stateNode.containerInfo,Pt=!0;break e;case 4:Qe=a.stateNode.containerInfo,Pt=!0;break e}a=a.return}if(Qe===null)throw Error(G(160));Yp(i,s,o),Qe=null,Pt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){Ne(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Kp(t,e),t=t.sibling}function Kp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Yt(e),r&4){try{Uo(3,e,e.return),fl(3,e)}catch(S){Ne(e,e.return,S)}try{Uo(5,e,e.return)}catch(S){Ne(e,e.return,S)}}break;case 1:zt(t,e),Yt(e),r&512&&n!==null&&Pr(n,n.return);break;case 5:if(zt(t,e),Yt(e),r&512&&n!==null&&Pr(n,n.return),e.flags&32){var o=e.stateNode;try{Go(o,"")}catch(S){Ne(e,e.return,S)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&gh(o,i),Aa(a,s);var d=Aa(a,i);for(s=0;s<u.length;s+=2){var m=u[s],c=u[s+1];m==="style"?xh(o,c):m==="dangerouslySetInnerHTML"?vh(o,c):m==="children"?Go(o,c):Lu(o,m,c,d)}switch(a){case"input":Ra(o,i);break;case"textarea":mh(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?$r(o,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?$r(o,!!i.multiple,i.defaultValue,!0):$r(o,!!i.multiple,i.multiple?[]:"",!1))}o[ri]=i}catch(S){Ne(e,e.return,S)}}break;case 6:if(zt(t,e),Yt(e),r&4){if(e.stateNode===null)throw Error(G(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(S){Ne(e,e.return,S)}}break;case 3:if(zt(t,e),Yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xo(t.containerInfo)}catch(S){Ne(e,e.return,S)}break;case 4:zt(t,e),Yt(e);break;case 13:zt(t,e),Yt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(dc=Oe())),r&4&&qd(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(d=nt)||m,zt(t,e),nt=d):zt(t,e),Yt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(ne=e,m=e.child;m!==null;){for(c=ne=m;ne!==null;){switch(h=ne,g=h.child,h.tag){case 0:case 11:case 14:case 15:Uo(4,h,h.return);break;case 1:Pr(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(S){Ne(r,n,S)}}break;case 5:Pr(h,h.return);break;case 22:if(h.memoizedState!==null){Zd(c);continue}}g!==null?(g.return=h,ne=g):Zd(c)}m=m.sibling}e:for(m=null,c=e;;){if(c.tag===5){if(m===null){m=c;try{o=c.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=c.stateNode,u=c.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=wh("display",s))}catch(S){Ne(e,e.return,S)}}}else if(c.tag===6){if(m===null)try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(S){Ne(e,e.return,S)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:zt(t,e),Yt(e),r&4&&qd(e);break;case 21:break;default:zt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Vp(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Go(o,""),r.flags&=-33);var i=Jd(e);uu(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Jd(e);au(e,a,s);break;default:throw Error(G(161))}}catch(u){Ne(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function U0(e,t,n){ne=e,Gp(e)}function Gp(e,t,n){for(var r=(e.mode&1)!==0;ne!==null;){var o=ne,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Vi;if(!s){var a=o.alternate,u=a!==null&&a.memoizedState!==null||nt;a=Vi;var d=nt;if(Vi=s,(nt=u)&&!d)for(ne=o;ne!==null;)s=ne,u=s.child,s.tag===22&&s.memoizedState!==null?ef(o):u!==null?(u.return=s,ne=u):ef(o);for(;i!==null;)ne=i,Gp(i),i=i.sibling;ne=o,Vi=a,nt=d}Xd(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ne=i):Xd(e)}}function Xd(e){for(;ne!==null;){var t=ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||fl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Od(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Od(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var c=m.dehydrated;c!==null&&Xo(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}nt||t.flags&512&&lu(t)}catch(h){Ne(t,t.return,h)}}if(t===e){ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,ne=n;break}ne=t.return}}function Zd(e){for(;ne!==null;){var t=ne;if(t===e){ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ne=n;break}ne=t.return}}function ef(e){for(;ne!==null;){var t=ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fl(4,t)}catch(u){Ne(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Ne(t,o,u)}}var i=t.return;try{lu(t)}catch(u){Ne(t,i,u)}break;case 5:var s=t.return;try{lu(t)}catch(u){Ne(t,s,u)}}}catch(u){Ne(t,t.return,u)}if(t===e){ne=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ne=a;break}ne=t.return}}var B0=Math.ceil,Ps=Cn.ReactCurrentDispatcher,uc=Cn.ReactCurrentOwner,At=Cn.ReactCurrentBatchConfig,ge=0,Ke=null,ze=null,Je=0,mt=0,Ur=Jn(0),Pe=0,ui=null,fr=0,hl=0,cc=0,Bo=null,ct=null,dc=0,oo=1/0,cn=null,Us=!1,cu=null,$n=null,Yi=!1,In=null,Bs=0,$o=0,du=null,ds=-1,fs=0;function st(){return ge&6?Oe():ds!==-1?ds:ds=Oe()}function Wn(e){return e.mode&1?ge&2&&Je!==0?Je&-Je:C0.transition!==null?(fs===0&&(fs=Lh()),fs):(e=ve,e!==0||(e=window.event,e=e===void 0?16:Ph(e.type)),e):1}function Wt(e,t,n,r){if(50<$o)throw $o=0,du=null,Error(G(185));bi(e,n,r),(!(ge&2)||e!==Ke)&&(e===Ke&&(!(ge&2)&&(hl|=n),Pe===4&&Ln(e,Je)),pt(e,r),n===1&&ge===0&&!(t.mode&1)&&(oo=Oe()+500,ul&&qn()))}function pt(e,t){var n=e.callbackNode;Cy(e,t);var r=Cs(e,e===Ke?Je:0);if(r===0)n!==null&&ud(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ud(n),t===1)e.tag===0?k0(tf.bind(null,e)):op(tf.bind(null,e)),w0(function(){!(ge&6)&&qn()}),n=null;else{switch(Ah(r)){case 1:n=zu;break;case 4:n=Dh;break;case 16:n=ks;break;case 536870912:n=Mh;break;default:n=ks}n=ng(n,Qp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Qp(e,t){if(ds=-1,fs=0,ge&6)throw Error(G(327));var n=e.callbackNode;if(Kr()&&e.callbackNode!==n)return null;var r=Cs(e,e===Ke?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$s(e,r);else{t=r;var o=ge;ge|=2;var i=qp();(Ke!==e||Je!==t)&&(cn=null,oo=Oe()+500,rr(e,t));do try{H0();break}catch(a){Jp(e,a)}while(!0);Ju(),Ps.current=i,ge=o,ze!==null?t=0:(Ke=null,Je=0,t=Pe)}if(t!==0){if(t===2&&(o=Fa(e),o!==0&&(r=o,t=fu(e,o))),t===1)throw n=ui,rr(e,0),Ln(e,r),pt(e,Oe()),n;if(t===6)Ln(e,r);else{if(o=e.current.alternate,!(r&30)&&!$0(o)&&(t=$s(e,r),t===2&&(i=Fa(e),i!==0&&(r=i,t=fu(e,i))),t===1))throw n=ui,rr(e,0),Ln(e,r),pt(e,Oe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:Zn(e,ct,cn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=dc+500-Oe(),10<t)){if(Cs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ya(Zn.bind(null,e,ct,cn),t);break}Zn(e,ct,cn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-$t(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*B0(r/1960))-r,10<r){e.timeoutHandle=Ya(Zn.bind(null,e,ct,cn),r);break}Zn(e,ct,cn);break;case 5:Zn(e,ct,cn);break;default:throw Error(G(329))}}}return pt(e,Oe()),e.callbackNode===n?Qp.bind(null,e):null}function fu(e,t){var n=Bo;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=$s(e,t),e!==2&&(t=ct,ct=n,t!==null&&hu(t)),e}function hu(e){ct===null?ct=e:ct.push.apply(ct,e)}function $0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Ht(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~cc,t&=~hl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$t(t),r=1<<n;e[n]=-1,t&=~r}}function tf(e){if(ge&6)throw Error(G(327));Kr();var t=Cs(e,0);if(!(t&1))return pt(e,Oe()),null;var n=$s(e,t);if(e.tag!==0&&n===2){var r=Fa(e);r!==0&&(t=r,n=fu(e,r))}if(n===1)throw n=ui,rr(e,0),Ln(e,t),pt(e,Oe()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zn(e,ct,cn),pt(e,Oe()),null}function fc(e,t){var n=ge;ge|=1;try{return e(t)}finally{ge=n,ge===0&&(oo=Oe()+500,ul&&qn())}}function hr(e){In!==null&&In.tag===0&&!(ge&6)&&Kr();var t=ge;ge|=1;var n=At.transition,r=ve;try{if(At.transition=null,ve=1,e)return e()}finally{ve=r,At.transition=n,ge=t,!(ge&6)&&qn()}}function hc(){mt=Ur.current,ke(Ur)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,v0(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Ku(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&js();break;case 3:no(),ke(ft),ke(ot),nc();break;case 5:tc(r);break;case 4:no();break;case 13:ke(je);break;case 19:ke(je);break;case 10:qu(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ke=e,ze=e=Hn(e.current,null),Je=mt=t,Pe=0,ui=null,cc=hl=fr=0,ct=Bo=null,tr!==null){for(t=0;t<tr.length;t++)if(n=tr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}tr=null}return e}function Jp(e,t){do{var n=ze;try{if(Ju(),as.current=Fs,zs){for(var r=Me.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}zs=!1}if(dr=0,He=Fe=Me=null,Po=!1,si=0,uc.current=null,n===null||n.return===null){Pe=1,ui=t,ze=null;break}e:{var i=e,s=n.return,a=n,u=t;if(t=Je,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=a,c=m.tag;if(!(m.mode&1)&&(c===0||c===11||c===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var g=$d(s);if(g!==null){g.flags&=-257,Wd(g,s,a,i,t),g.mode&1&&Bd(i,d,t),t=g,u=d;var y=t.updateQueue;if(y===null){var S=new Set;S.add(u),t.updateQueue=S}else y.add(u);break e}else{if(!(t&1)){Bd(i,d,t),pc();break e}u=Error(G(426))}}else if(Te&&a.mode&1){var I=$d(s);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Wd(I,s,a,i,t),Gu(ro(u,a));break e}}i=u=ro(u,a),Pe!==4&&(Pe=2),Bo===null?Bo=[i]:Bo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var k=Ap(i,u,t);Id(i,k);break e;case 1:a=u;var C=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof C.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&($n===null||!$n.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var x=Np(i,a,t);Id(i,x);break e}}i=i.return}while(i!==null)}Zp(n)}catch(b){t=b,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function qp(){var e=Ps.current;return Ps.current=Fs,e===null?Fs:e}function pc(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Ke===null||!(fr&268435455)&&!(hl&268435455)||Ln(Ke,Je)}function $s(e,t){var n=ge;ge|=2;var r=qp();(Ke!==e||Je!==t)&&(cn=null,rr(e,t));do try{W0();break}catch(o){Jp(e,o)}while(!0);if(Ju(),ge=n,Ps.current=r,ze!==null)throw Error(G(261));return Ke=null,Je=0,Pe}function W0(){for(;ze!==null;)Xp(ze)}function H0(){for(;ze!==null&&!gy();)Xp(ze)}function Xp(e){var t=tg(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?Zp(e):ze=t,uc.current=null}function Zp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=z0(n,t),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,ze=null;return}}else if(n=O0(n,t,mt),n!==null){ze=n;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Pe===0&&(Pe=5)}function Zn(e,t,n){var r=ve,o=At.transition;try{At.transition=null,ve=1,V0(e,t,n,r)}finally{At.transition=o,ve=r}return null}function V0(e,t,n,r){do Kr();while(In!==null);if(ge&6)throw Error(G(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(_y(e,i),e===Ke&&(ze=Ke=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yi||(Yi=!0,ng(ks,function(){return Kr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=At.transition,At.transition=null;var s=ve;ve=1;var a=ge;ge|=4,uc.current=null,P0(e,n),Kp(n,e),d0(Ha),_s=!!Wa,Ha=Wa=null,e.current=n,U0(n),my(),ge=a,ve=s,At.transition=i}else e.current=n;if(Yi&&(Yi=!1,In=e,Bs=o),i=e.pendingLanes,i===0&&($n=null),wy(n.stateNode),pt(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Us)throw Us=!1,e=cu,cu=null,e;return Bs&1&&e.tag!==0&&Kr(),i=e.pendingLanes,i&1?e===du?$o++:($o=0,du=e):$o=0,qn(),null}function Kr(){if(In!==null){var e=Ah(Bs),t=At.transition,n=ve;try{if(At.transition=null,ve=16>e?16:e,In===null)var r=!1;else{if(e=In,In=null,Bs=0,ge&6)throw Error(G(331));var o=ge;for(ge|=4,ne=e.current;ne!==null;){var i=ne,s=i.child;if(ne.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(ne=d;ne!==null;){var m=ne;switch(m.tag){case 0:case 11:case 15:Uo(8,m,i)}var c=m.child;if(c!==null)c.return=m,ne=c;else for(;ne!==null;){m=ne;var h=m.sibling,g=m.return;if(Hp(m),m===d){ne=null;break}if(h!==null){h.return=g,ne=h;break}ne=g}}}var y=i.alternate;if(y!==null){var S=y.child;if(S!==null){y.child=null;do{var I=S.sibling;S.sibling=null,S=I}while(S!==null)}}ne=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ne=s;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uo(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,ne=k;break e}ne=i.return}}var C=e.current;for(ne=C;ne!==null;){s=ne;var f=s.child;if(s.subtreeFlags&2064&&f!==null)f.return=s,ne=f;else e:for(s=C;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fl(9,a)}}catch(b){Ne(a,a.return,b)}if(a===s){ne=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ne=x;break e}ne=a.return}}if(ge=o,qn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(ol,e)}catch{}r=!0}return r}finally{ve=n,At.transition=t}}return!1}function nf(e,t,n){t=ro(n,t),t=Ap(e,t,1),e=Bn(e,t,1),t=st(),e!==null&&(bi(e,1,t),pt(e,t))}function Ne(e,t,n){if(e.tag===3)nf(e,e,n);else for(;t!==null;){if(t.tag===3){nf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($n===null||!$n.has(r))){e=ro(n,e),e=Np(t,e,1),t=Bn(t,e,1),e=st(),t!==null&&(bi(t,1,e),pt(t,e));break}}t=t.return}}function Y0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Ke===e&&(Je&n)===n&&(Pe===4||Pe===3&&(Je&130023424)===Je&&500>Oe()-dc?rr(e,0):cc|=n),pt(e,t)}function eg(e,t){t===0&&(e.mode&1?(t=Oi,Oi<<=1,!(Oi&130023424)&&(Oi=4194304)):t=1);var n=st();e=xn(e,t),e!==null&&(bi(e,t,n),pt(e,n))}function K0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eg(e,n)}function G0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),eg(e,n)}var tg;tg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dt=!1,I0(e,t,n);dt=!!(e.flags&131072)}else dt=!1,Te&&t.flags&1048576&&ip(t,Ls,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;cs(e,t),e=t.pendingProps;var o=Zr(t,ot.current);Yr(t,n),o=oc(null,t,r,e,o,n);var i=ic();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ht(r)?(i=!0,Ds(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Zu(t),o.updater=dl,t.stateNode=o,o._reactInternals=t,Za(t,r,e,n),t=nu(null,t,r,!0,i,n)):(t.tag=0,Te&&i&&Yu(t),it(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(cs(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=J0(r),e=Ft(r,e),o){case 0:t=tu(null,t,r,e,n);break e;case 1:t=Yd(null,t,r,e,n);break e;case 11:t=Hd(null,t,r,e,n);break e;case 14:t=Vd(null,t,r,Ft(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ft(r,o),tu(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ft(r,o),Yd(e,t,r,o,n);case 3:e:{if(Fp(t),e===null)throw Error(G(387));r=t.pendingProps,i=t.memoizedState,o=i.element,dp(e,t),Is(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=ro(Error(G(423)),t),t=Kd(e,t,r,n,o);break e}else if(r!==o){o=ro(Error(G(424)),t),t=Kd(e,t,r,n,o);break e}else for(yt=Un(t.stateNode.containerInfo.firstChild),wt=t,Te=!0,Ut=null,n=up(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===o){t=bn(e,t,n);break e}it(e,t,r,n)}t=t.child}return t;case 5:return fp(t),e===null&&Ja(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Va(r,o)?s=null:i!==null&&Va(r,i)&&(t.flags|=32),zp(e,t),it(e,t,s,n),t.child;case 6:return e===null&&Ja(t),null;case 13:return Pp(e,t,n);case 4:return ec(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=to(t,null,r,n):it(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ft(r,o),Hd(e,t,r,o,n);case 7:return it(e,t,t.pendingProps,n),t.child;case 8:return it(e,t,t.pendingProps.children,n),t.child;case 12:return it(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,be(As,r._currentValue),r._currentValue=s,i!==null)if(Ht(i.value,s)){if(i.children===o.children&&!ft.current){t=bn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=gn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),qa(i.return,n,t),a.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(G(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),qa(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}it(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Yr(t,n),o=Nt(o),r=r(o),t.flags|=1,it(e,t,r,n),t.child;case 14:return r=t.type,o=Ft(r,t.pendingProps),o=Ft(r.type,o),Vd(e,t,r,o,n);case 15:return Ip(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ft(r,o),cs(e,t),t.tag=1,ht(r)?(e=!0,Ds(t)):e=!1,Yr(t,n),Lp(t,r,o),Za(t,r,o,n),nu(null,t,r,!0,e,n);case 19:return Up(e,t,n);case 22:return Op(e,t,n)}throw Error(G(156,t.tag))};function ng(e,t){return jh(e,t)}function Q0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,n,r){return new Q0(e,t,n,r)}function gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function J0(e){if(typeof e=="function")return gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Nu)return 11;if(e===Iu)return 14}return 2}function Hn(e,t){var n=e.alternate;return n===null?(n=Mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hs(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")gc(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Dr:return or(n.children,o,i,t);case Au:s=8,o|=8;break;case ka:return e=Mt(12,n,t,o|2),e.elementType=ka,e.lanes=i,e;case Ca:return e=Mt(13,n,t,o),e.elementType=Ca,e.lanes=i,e;case _a:return e=Mt(19,n,t,o),e.elementType=_a,e.lanes=i,e;case fh:return pl(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ch:s=10;break e;case dh:s=9;break e;case Nu:s=11;break e;case Iu:s=14;break e;case Rn:s=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=Mt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function or(e,t,n,r){return e=Mt(7,e,r,t),e.lanes=n,e}function pl(e,t,n,r){return e=Mt(22,e,r,t),e.elementType=fh,e.lanes=n,e.stateNode={isHidden:!1},e}function Zl(e,t,n){return e=Mt(6,e,null,t),e.lanes=n,e}function ea(e,t,n){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q0(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nl(0),this.expirationTimes=Nl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function mc(e,t,n,r,o,i,s,a,u){return e=new q0(e,t,n,a,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Mt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(i),e}function X0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:jr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rg(e){if(!e)return Yn;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(ht(n))return rp(e,n,t)}return t}function og(e,t,n,r,o,i,s,a,u){return e=mc(n,r,!0,e,o,i,s,a,u),e.context=rg(null),n=e.current,r=st(),o=Wn(n),i=gn(r,o),i.callback=t??null,Bn(n,i,o),e.current.lanes=o,bi(e,o,r),pt(e,r),e}function gl(e,t,n,r){var o=t.current,i=st(),s=Wn(o);return n=rg(n),t.context===null?t.context=n:t.pendingContext=n,t=gn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Bn(o,t,s),e!==null&&(Wt(e,o,s,i),ls(e,o,s)),s}function Ws(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function yc(e,t){rf(e,t),(e=e.alternate)&&rf(e,t)}function Z0(){return null}var ig=typeof reportError=="function"?reportError:function(e){console.error(e)};function vc(e){this._internalRoot=e}ml.prototype.render=vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));gl(e,t,null,null)};ml.prototype.unmount=vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hr(function(){gl(null,e,null,null)}),t[wn]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mn.length&&t!==0&&t<Mn[n].priority;n++);Mn.splice(n,0,e),n===0&&Fh(e)}};function wc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function of(){}function ev(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Ws(s);i.call(d)}}var s=og(t,r,e,0,null,!1,!1,"",of);return e._reactRootContainer=s,e[wn]=s.current,ti(e.nodeType===8?e.parentNode:e),hr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=Ws(u);a.call(d)}}var u=mc(e,0,!1,null,null,!1,!1,"",of);return e._reactRootContainer=u,e[wn]=u.current,ti(e.nodeType===8?e.parentNode:e),hr(function(){gl(t,u,n,r)}),u}function vl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var u=Ws(s);a.call(u)}}gl(t,s,e,o)}else s=ev(n,t,e,o,r);return Ws(s)}Nh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Lo(t.pendingLanes);n!==0&&(Fu(t,n|1),pt(t,Oe()),!(ge&6)&&(oo=Oe()+500,qn()))}break;case 13:hr(function(){var r=xn(e,1);if(r!==null){var o=st();Wt(r,e,1,o)}}),yc(e,1)}};Pu=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=st();Wt(t,e,134217728,n)}yc(e,134217728)}};Ih=function(e){if(e.tag===13){var t=Wn(e),n=xn(e,t);if(n!==null){var r=st();Wt(n,e,t,r)}yc(e,t)}};Oh=function(){return ve};zh=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};Ia=function(e,t,n){switch(t){case"input":if(Ra(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=al(r);if(!o)throw Error(G(90));ph(r),Ra(r,o)}}}break;case"textarea":mh(e,n);break;case"select":t=n.value,t!=null&&$r(e,!!n.multiple,t,!1)}};kh=fc;Ch=hr;var tv={usingClientEntryPoint:!1,Events:[ki,Nr,al,bh,Sh,fc]},Ro={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nv={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Th(e),e===null?null:e.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||Z0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ki.isDisabled&&Ki.supportsFiber)try{ol=Ki.inject(nv),qt=Ki}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tv;kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(t))throw Error(G(200));return X0(e,t,null,n)};kt.createRoot=function(e,t){if(!wc(e))throw Error(G(299));var n=!1,r="",o=ig;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=mc(e,1,!1,null,null,n,!1,r,o),e[wn]=t.current,ti(e.nodeType===8?e.parentNode:e),new vc(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Th(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return hr(e)};kt.hydrate=function(e,t,n){if(!yl(t))throw Error(G(200));return vl(null,e,t,!0,n)};kt.hydrateRoot=function(e,t,n){if(!wc(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=ig;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=og(t,null,e,1,n??null,o,!1,i,s),e[wn]=t.current,ti(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new ml(t)};kt.render=function(e,t,n){if(!yl(t))throw Error(G(200));return vl(null,e,t,!1,n)};kt.unmountComponentAtNode=function(e){if(!yl(e))throw Error(G(40));return e._reactRootContainer?(hr(function(){vl(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1};kt.unstable_batchedUpdates=fc;kt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!yl(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return vl(e,t,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function sg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sg)}catch(e){console.error(e)}}sg(),sh.exports=kt;var ci=sh.exports,sf=ci;ba.createRoot=sf.createRoot,ba.hydrateRoot=sf.hydrateRoot;const gt=()=>new Map,pu=e=>{const t=gt();return e.forEach((n,r)=>{t.set(r,n)}),t},St=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},rv=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},ov=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Kn=()=>new Set,ta=e=>e[e.length-1],iv=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Sn=Array.from,sv=Array.isArray;class lg{constructor(){this._observers=gt()}on(t,n){return St(this._observers,t,Kn).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Sn((this._observers.get(t)||gt()).values()).forEach(r=>r(...n))}destroy(){this._observers=gt()}}class ag{constructor(){this._observers=gt()}on(t,n){St(this._observers,t,Kn).add(n)}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Sn((this._observers.get(t)||gt()).values()).forEach(r=>r(...n))}destroy(){this._observers=gt()}}const tn=Math.floor,ps=Math.abs,lv=Math.log10,xc=(e,t)=>e<t?e:t,br=(e,t)=>e>t?e:t,ug=e=>e!==0?e<0:1/e<0,lf=1,af=2,na=4,ra=8,di=32,mn=64,xt=128,wl=31,gu=63,ir=127,av=2147483647,cg=Number.MAX_SAFE_INTEGER,uv=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&tn(e)===e),cv=String.fromCharCode,dv=e=>e.toLowerCase(),fv=/^\s*/g,hv=e=>e.replace(fv,""),pv=/([A-Z])/g,uf=(e,t)=>hv(e.replace(pv,n=>`${t}${dv(n)}`)),gv=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},fi=typeof TextEncoder<"u"?new TextEncoder:null,mv=e=>fi.encode(e),mu=fi?mv:gv;let Wo=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Wo&&Wo.decode(new Uint8Array).length===1&&(Wo=null);class _i{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ve=()=>new _i,yv=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},De=e=>{const t=new Uint8Array(yv(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},vv=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(br(n,t)*2),e.cpos=0)},$e=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},hi=$e,se=(e,t)=>{for(;t>ir;)$e(e,xt|ir&t),t=tn(t/128);$e(e,ir&t)},bc=(e,t)=>{const n=ug(t);for(n&&(t=-t),$e(e,(t>gu?xt:0)|(n?mn:0)|gu&t),t=tn(t/64);t>0;)$e(e,(t>ir?xt:0)|ir&t),t=tn(t/128)},yu=new Uint8Array(3e4),wv=yu.length/3,xv=(e,t)=>{if(t.length<wv){const n=fi.encodeInto(t,yu).written||0;se(e,n);for(let r=0;r<n;r++)$e(e,yu[r])}else Ae(e,mu(t))},bv=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;se(e,r);for(let o=0;o<r;o++)$e(e,n.codePointAt(o))},Zt=fi&&fi.encodeInto?xv:bv,xl=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=xc(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(br(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Ae=(e,t)=>{se(e,t.byteLength),xl(e,t)},Sc=(e,t)=>{vv(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Sv=(e,t)=>Sc(e,4).setFloat32(0,t,!1),kv=(e,t)=>Sc(e,8).setFloat64(0,t,!1),Cv=(e,t)=>Sc(e,8).setBigInt64(0,t,!1),cf=new DataView(new ArrayBuffer(4)),_v=e=>(cf.setFloat32(0,e),cf.getFloat32(0)===e),io=(e,t)=>{switch(typeof t){case"string":$e(e,119),Zt(e,t);break;case"number":uv(t)&&ps(t)<=av?($e(e,125),bc(e,t)):_v(t)?($e(e,124),Sv(e,t)):($e(e,123),kv(e,t));break;case"bigint":$e(e,122),Cv(e,t);break;case"object":if(t===null)$e(e,126);else if(sv(t)){$e(e,117),se(e,t.length);for(let n=0;n<t.length;n++)io(e,t[n])}else if(t instanceof Uint8Array)$e(e,116),Ae(e,t);else{$e(e,118);const n=Object.keys(t);se(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];Zt(e,o),io(e,t[o])}}break;case"boolean":$e(e,t?120:121);break;default:$e(e,127)}};class df extends _i{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&se(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const ff=e=>{e.count>0&&(bc(e.encoder,e.count===1?e.s:-e.s),e.count>1&&se(e.encoder,e.count-2))};class gs{constructor(){this.encoder=new _i,this.s=0,this.count=0}write(t){this.s===t?this.count++:(ff(this),this.count=1,this.s=t)}toUint8Array(){return ff(this),De(this.encoder)}}const hf=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);bc(e.encoder,t),e.count>1&&se(e.encoder,e.count-2)}};class oa{constructor(){this.encoder=new _i,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(hf(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return hf(this),De(this.encoder)}}class Ev{constructor(){this.sarr=[],this.s="",this.lensE=new gs}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new _i;return this.sarr.push(this.s),this.s="",Zt(t,this.sarr.join("")),xl(t,this.lensE.toUint8Array()),De(t)}}const nn=e=>new Error(e),en=()=>{throw nn("Method unimplemented")},rn=()=>{throw nn("Unexpected case")},dg=nn("Unexpected end of array"),fg=nn("Integer out of Range");class bl{constructor(t){this.arr=t,this.pos=0}}const ln=e=>new bl(e),Tv=e=>e.pos!==e.arr.length,Rv=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},We=e=>Rv(e,ce(e)),pr=e=>e.arr[e.pos++],ce=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&ir)*n,n*=128,o<xt)return t;if(t>cg)throw fg}throw dg},kc=e=>{let t=e.arr[e.pos++],n=t&gu,r=64;const o=(t&mn)>0?-1:1;if(!(t&xt))return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&ir)*r,r*=128,t<xt)return o*n;if(n>cg)throw fg}throw dg},jv=e=>{let t=ce(e);if(t===0)return"";{let n=String.fromCodePoint(pr(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(pr(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},Dv=e=>Wo.decode(We(e)),yn=Wo?Dv:jv,Cc=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Mv=e=>Cc(e,4).getFloat32(0,!1),Lv=e=>Cc(e,8).getFloat64(0,!1),Av=e=>Cc(e,8).getBigInt64(0,!1),Nv=[e=>{},e=>null,kc,Mv,Lv,Av,e=>!1,e=>!0,yn,e=>{const t=ce(e),n={};for(let r=0;r<t;r++){const o=yn(e);n[o]=so(e)}return n},e=>{const t=ce(e),n=[];for(let r=0;r<t;r++)n.push(so(e));return n},We],so=e=>Nv[127-pr(e)](e);class pf extends bl{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Tv(this)?this.count=ce(this)+1:this.count=-1),this.count--,this.s}}class ms extends bl{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=kc(this);const t=ug(this.s);this.count=1,t&&(this.s=-this.s,this.count=ce(this)+2)}return this.count--,this.s}}class ia extends bl{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=kc(this),n=t&1;this.diff=tn(t/2),this.count=1,n&&(this.count=ce(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Iv{constructor(t){this.decoder=new ms(t),this.str=yn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const Ov=crypto.getRandomValues.bind(crypto),zv=Math.random,hg=()=>Ov(new Uint32Array(1))[0],Fv="10000000-1000-4000-8000"+-1e11,pg=()=>Fv.replace(/[018]/g,e=>(e^hg()&15>>e/4).toString(16)),kn=Date.now,gf=e=>new Promise(e);Promise.all.bind(Promise);const Pv=e=>Promise.reject(e),_c=e=>Promise.resolve(e),mf=e=>e===void 0?null:e;class Uv{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let gg=new Uv,Ec=!0;try{typeof localStorage<"u"&&localStorage&&(gg=localStorage,Ec=!1)}catch{}const mg=gg,Bv=e=>Ec||addEventListener("storage",e),$v=e=>Ec||removeEventListener("storage",e),Wv=Object.assign,yg=Object.keys,Hv=(e,t)=>{for(const n in e)t(e[n],n)},yf=e=>yg(e).length,vf=e=>yg(e).length,Vv=e=>{for(const t in e)return!1;return!0},Yv=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},vg=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Kv=(e,t)=>e===t||vf(e)===vf(t)&&Yv(e,(n,r)=>(n!==void 0||vg(t,r))&&t[r]===n),Gv=Object.freeze,wg=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&wg(e[t])}return Gv(e)},wf=Symbol("Equality"),Tc=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Tc(e,t,n+1)}},Qv=()=>{},Jv=e=>e,Ho=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[wf]!=null)return e[wf](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Ho(e.get(n),t.get(n)))return!1;break}case Object:if(yf(e)!==yf(t))return!1;for(const n in e)if(!vg(e,n)||!Ho(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ho(e[n],t[n]))return!1;break;default:return!1}return!0},qv=(e,t)=>t.includes(e);var xg={};const lo=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",bg=typeof window<"u"&&typeof document<"u"&&!lo;let Kt;const Xv=()=>{if(Kt===void 0)if(lo){Kt=gt();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Kt.set(t,""),t=r):t!==null&&(Kt.set(t,r),t=null)}t!==null&&Kt.set(t,"")}else typeof location=="object"?(Kt=gt(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Kt.set(`--${uf(t,"-")}`,n),Kt.set(`-${uf(t,"-")}`,n)}})):Kt=gt();return Kt},vu=e=>Xv().has(e),pi=e=>mf(lo?xg[e.toUpperCase().replaceAll("-","_")]:mg.getItem(e)),Sg=e=>vu("--"+e)||pi(e)!==null;Sg("production");const Zv=lo&&qv(xg.FORCE_COLOR,["true","1","2"]),ew=Zv||!vu("--no-colors")&&!Sg("no-color")&&(!lo||process.stdout.isTTY)&&(!lo||vu("--color")||pi("COLORTERM")!==null||(pi("TERM")||"").includes("color")),kg=e=>new Uint8Array(e),tw=(e,t,n)=>new Uint8Array(e,t,n),nw=e=>new Uint8Array(e),rw=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=cv(e[n]);return btoa(t)},ow=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),iw=e=>{const t=atob(e),n=kg(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},sw=e=>{const t=Buffer.from(e,"base64");return tw(t.buffer,t.byteOffset,t.byteLength)},Cg=bg?rw:ow,_g=bg?iw:sw,lw=e=>{const t=kg(e.byteLength);return t.set(e),t};class aw{constructor(t,n){this.left=t,this.right=n}}const un=(e,t)=>new aw(e,t);typeof DOMParser<"u"&&new DOMParser;const uw=e=>rv(e,(t,n)=>`${n}:${t};`).join(""),cw=JSON.stringify,_n=Symbol,Lt=_n(),gr=_n(),Eg=_n(),Rc=_n(),Tg=_n(),Rg=_n(),jg=_n(),Sl=_n(),kl=_n(),dw=e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},xf=[Tg,jg,Sl,Eg];let sa=0,bf=kn();const fw=(e,t)=>{const n=xf[sa],r=pi("log"),o=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return sa=(sa+1)%xf.length,t+=": ",o?(...i)=>{var u;i.length===1&&((u=i[0])==null?void 0:u.constructor)===Function&&(i=i[0]());const s=kn(),a=s-bf;bf=s,e(n,t,kl,...i.map(d=>{switch(d!=null&&d.constructor===Uint8Array&&(d=Array.from(d)),typeof d){case"string":case"symbol":return d;default:return cw(d)}}),n," +"+a+"ms")}:Qv},hw={[Lt]:un("font-weight","bold"),[gr]:un("font-weight","normal"),[Eg]:un("color","blue"),[Tg]:un("color","green"),[Rc]:un("color","grey"),[Rg]:un("color","red"),[jg]:un("color","purple"),[Sl]:un("color","orange"),[kl]:un("color","black")},pw=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=gt();let o=[],i=0;for(;i<e.length;i++){const a=e[i],u=hw[a];if(u!==void 0)r.set(u.left,u.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const d=uw(r);i>0||d.length>0?(t.push("%c"+a),n.push(d)):t.push(a)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const a=e[i];a instanceof Symbol||o.push(a)}return o},Dg=ew?pw:dw,Mg=(...e)=>{console.log(...Dg(e)),Lg.forEach(t=>t.print(e))},gw=(...e)=>{console.warn(...Dg(e)),e.unshift(Sl),Lg.forEach(t=>t.print(e))},Lg=Kn(),mw=e=>fw(Mg,e),Ag=e=>({[Symbol.iterator](){return this},next:e}),yw=(e,t)=>Ag(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),la=(e,t)=>Ag(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class jc{constructor(t,n){this.clock=t,this.len=n}}class Ei{constructor(){this.clients=new Map}}const Ng=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let u=0,d=r[u];u<r.length&&d.clock<a;d=r[++u])Kg(e,i,d.clock,d.len,n)}}),vw=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=tn((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},Ig=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&vw(n,t.clock)!==null},Dc=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=br(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},ww=e=>{const t=new Ei;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)iv(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return Dc(t),t},Hs=(e,t,n,r)=>{St(e.clients,t,()=>[]).push(new jc(n,r))},xw=()=>new Ei,bw=e=>{const t=xw();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let u=s.length;if(i+1<n.length)for(let d=n[i+1];i+1<n.length&&d.deleted;d=n[++i+1])u+=d.length;o.push(new jc(a,u))}}o.length>0&&t.clients.set(r,o)}),t},vo=(e,t)=>{se(e.restEncoder,t.clients.size),Sn(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),se(e.restEncoder,n);const o=r.length;se(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},Mc=e=>{const t=new Ei,n=ce(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=ce(e.restDecoder),i=ce(e.restDecoder);if(i>0){const s=St(t.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new jc(e.readDsClock(),e.readDsLen()))}}return t},Sf=(e,t,n)=>{const r=new Ei,o=ce(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=ce(e.restDecoder),a=ce(e.restDecoder),u=n.clients.get(s)||[],d=Ye(n,s);for(let m=0;m<a;m++){const c=e.readDsClock(),h=c+e.readDsLen();if(c<d){d<h&&Hs(r,s,d,h-d);let g=on(u,c),y=u[g];for(!y.deleted&&y.id.clock<c&&(u.splice(g+1,0,qs(t,y,c-y.id.clock)),g++);g<u.length&&(y=u[g++],y.id.clock<h);)y.deleted||(h<y.id.clock+y.length&&u.splice(g,0,qs(t,y,h-y.id.clock)),y.delete(t))}else Hs(r,s,c,h-c)}}if(r.clients.size>0){const i=new mr;return se(i.restEncoder,0),vo(i,r),i.toUint8Array()}return null},Og=hg;class wo extends lg{constructor({guid:t=pg(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=Og(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Vg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=gf(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const u=()=>gf(d=>{const m=c=>{(c===void 0||c===!0)&&(this.off("sync",m),d())};this.on("sync",m)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const t=this._item;t!==null&&!this.shouldLoad&&xe(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Sn(this.subdocs).map(t=>t.guid))}transact(t,n=null){return xe(this,t,n)}get(t,n=qe){const r=St(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==qe&&o!==n)if(o===qe){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Qr)}getText(t=""){return this.get(t,co)}getMap(t=""){return this.get(t,uo)}getXmlElement(t=""){return this.get(t,fo)}getXmlFragment(t=""){return this.get(t,yr)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,Sn(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new wo({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,xe(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class zg{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return ce(this.restDecoder)}readDsLen(){return ce(this.restDecoder)}}class Fg extends zg{readLeftID(){return he(ce(this.restDecoder),ce(this.restDecoder))}readRightID(){return he(ce(this.restDecoder),ce(this.restDecoder))}readClient(){return ce(this.restDecoder)}readInfo(){return pr(this.restDecoder)}readString(){return yn(this.restDecoder)}readParentInfo(){return ce(this.restDecoder)===1}readTypeRef(){return ce(this.restDecoder)}readLen(){return ce(this.restDecoder)}readAny(){return so(this.restDecoder)}readBuf(){return lw(We(this.restDecoder))}readJSON(){return JSON.parse(yn(this.restDecoder))}readKey(){return yn(this.restDecoder)}}class Sw{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ce(this.restDecoder),this.dsCurrVal}readDsLen(){const t=ce(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class ao extends Sw{constructor(t){super(t),this.keys=[],ce(t),this.keyClockDecoder=new ia(We(t)),this.clientDecoder=new ms(We(t)),this.leftClockDecoder=new ia(We(t)),this.rightClockDecoder=new ia(We(t)),this.infoDecoder=new pf(We(t),pr),this.stringDecoder=new Iv(We(t)),this.parentInfoDecoder=new pf(We(t),pr),this.typeRefDecoder=new ms(We(t)),this.lenDecoder=new ms(We(t))}readLeftID(){return new Gr(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Gr(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return so(this.restDecoder)}readBuf(){return We(this.restDecoder)}readJSON(){return so(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Pg{constructor(){this.restEncoder=Ve()}toUint8Array(){return De(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){se(this.restEncoder,t)}writeDsLen(t){se(this.restEncoder,t)}}class Ti extends Pg{writeLeftID(t){se(this.restEncoder,t.client),se(this.restEncoder,t.clock)}writeRightID(t){se(this.restEncoder,t.client),se(this.restEncoder,t.clock)}writeClient(t){se(this.restEncoder,t)}writeInfo(t){hi(this.restEncoder,t)}writeString(t){Zt(this.restEncoder,t)}writeParentInfo(t){se(this.restEncoder,t?1:0)}writeTypeRef(t){se(this.restEncoder,t)}writeLen(t){se(this.restEncoder,t)}writeAny(t){io(this.restEncoder,t)}writeBuf(t){Ae(this.restEncoder,t)}writeJSON(t){Zt(this.restEncoder,JSON.stringify(t))}writeKey(t){Zt(this.restEncoder,t)}}class Ug{constructor(){this.restEncoder=Ve(),this.dsCurrVal=0}toUint8Array(){return De(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,se(this.restEncoder,n)}writeDsLen(t){t===0&&rn(),se(this.restEncoder,t-1),this.dsCurrVal+=t}}class mr extends Ug{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new oa,this.clientEncoder=new gs,this.leftClockEncoder=new oa,this.rightClockEncoder=new oa,this.infoEncoder=new df(hi),this.stringEncoder=new Ev,this.parentInfoEncoder=new df(hi),this.typeRefEncoder=new gs,this.lenEncoder=new gs}toUint8Array(){const t=Ve();return se(t,0),Ae(t,this.keyClockEncoder.toUint8Array()),Ae(t,this.clientEncoder.toUint8Array()),Ae(t,this.leftClockEncoder.toUint8Array()),Ae(t,this.rightClockEncoder.toUint8Array()),Ae(t,De(this.infoEncoder)),Ae(t,this.stringEncoder.toUint8Array()),Ae(t,De(this.parentInfoEncoder)),Ae(t,this.typeRefEncoder.toUint8Array()),Ae(t,this.lenEncoder.toUint8Array()),xl(t,De(this.restEncoder)),De(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){io(this.restEncoder,t)}writeBuf(t){Ae(this.restEncoder,t)}writeJSON(t){io(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const kw=(e,t,n,r)=>{r=br(r,t[0].id.clock);const o=on(t,r);se(e.restEncoder,t.length-o),e.writeClient(n),se(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},Lc=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{Ye(t,i)>o&&r.set(i,o)}),Cl(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),se(e.restEncoder,r.size),Sn(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{kw(e,t.clients.get(o),o,i)})},Cw=(e,t)=>{const n=gt(),r=ce(e.restDecoder);for(let o=0;o<r;o++){const i=ce(e.restDecoder),s=new Array(i),a=e.readClient();let u=ce(e.restDecoder);n.set(a,{i:0,refs:s});for(let d=0;d<i;d++){const m=e.readInfo();switch(wl&m){case 0:{const c=e.readLen();s[d]=new jt(he(a,u),c),u+=c;break}case 10:{const c=ce(e.restDecoder);s[d]=new Dt(he(a,u),c),u+=c;break}default:{const c=(m&(mn|xt))===0,h=new Ue(he(a,u),null,(m&xt)===xt?e.readLeftID():null,null,(m&mn)===mn?e.readRightID():null,c?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,c&&(m&di)===di?e.readString():null,fm(e,m));s[d]=h,u+=h.length}}}}return n},_w=(e,t,n)=>{const r=[];let o=Sn(n.keys()).sort((g,y)=>g-y);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let g=n.get(o[o.length-1]);for(;g.refs.length===g.i;)if(o.pop(),o.length>0)g=n.get(o[o.length-1]);else return null;return g};let s=i();if(s===null)return null;const a=new Vg,u=new Map,d=(g,y)=>{const S=u.get(g);(S==null||S>y)&&u.set(g,y)};let m=s.refs[s.i++];const c=new Map,h=()=>{for(const g of r){const y=g.id.client,S=n.get(y);S?(S.i--,a.clients.set(y,S.refs.slice(S.i)),n.delete(y),S.i=0,S.refs=[]):a.clients.set(y,[g]),o=o.filter(I=>I!==y)}r.length=0};for(;;){if(m.constructor!==Dt){const y=St(c,m.id.client,()=>Ye(t,m.id.client))-m.id.clock;if(y<0)r.push(m),d(m.id.client,m.id.clock-1),h();else{const S=m.getMissing(e,t);if(S!==null){r.push(m);const I=n.get(S)||{refs:[],i:0};if(I.refs.length===I.i)d(S,Ye(t,S)),h();else{m=I.refs[I.i++];continue}}else(y===0||y<m.length)&&(m.integrate(e,y),c.set(m.id.client,m.id.clock+m.length))}}if(r.length>0)m=r.pop();else if(s!==null&&s.i<s.refs.length)m=s.refs[s.i++];else{if(s=i(),s===null)break;m=s.refs[s.i++]}}if(a.clients.size>0){const g=new mr;return Lc(g,a,new Map),se(g.restEncoder,0),{missing:u,update:g.toUint8Array()}}return null},Ew=(e,t)=>Lc(e,t.doc.store,t.beforeState),Tw=(e,t,n,r=new ao(e))=>xe(t,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,u=Cw(r,s),d=_w(o,a,u),m=a.pendingStructs;if(m){for(const[h,g]of m.missing)if(g<Ye(a,h)){i=!0;break}if(d){for(const[h,g]of d.missing){const y=m.missing.get(h);(y==null||y>g)&&m.missing.set(h,g)}m.update=Vs([m.update,d.update])}}else a.pendingStructs=d;const c=Sf(r,o,a);if(a.pendingDs){const h=new ao(ln(a.pendingDs));ce(h.restDecoder);const g=Sf(h,o,a);c&&g?a.pendingDs=Vs([c,g]):a.pendingDs=c||g}else a.pendingDs=c;if(i){const h=a.pendingStructs.update;a.pendingStructs=null,Bg(o.doc,h)}},n,!1),Bg=(e,t,n,r=ao)=>{const o=ln(t);Tw(o,e,n,new r(o))},Rw=(e,t,n)=>Bg(e,t,n,Fg),jw=(e,t,n=new Map)=>{Lc(e,t.store,n),vo(e,bw(t.store))},Dw=(e,t=new Uint8Array([0]),n=new mr)=>{const r=$g(t);jw(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(Yw(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===Ti)return Hw(o.map((i,s)=>s===0?i:Gw(i)));if(n.constructor===mr)return Vs(o)}return o[0]},Mw=(e,t)=>Dw(e,t,new Ti),Lw=e=>{const t=new Map,n=ce(e.restDecoder);for(let r=0;r<n;r++){const o=ce(e.restDecoder),i=ce(e.restDecoder);t.set(o,i)}return t},$g=e=>Lw(new zg(ln(e))),Wg=(e,t)=>(se(e.restEncoder,t.size),Sn(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{se(e.restEncoder,n),se(e.restEncoder,r)}),e),Aw=(e,t)=>Wg(e,Cl(t.store)),Nw=(e,t=new Ug)=>(e instanceof Map?Wg(t,e):Aw(t,e),t.toUint8Array()),Iw=e=>Nw(e,new Pg);class Ow{constructor(){this.l=[]}}const kf=()=>new Ow,Cf=(e,t)=>e.l.push(t),_f=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Hg=(e,t,n)=>Tc(e.l,[t,n]);class Gr{constructor(t,n){this.client=t,this.clock=n}}const Gi=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,he=(e,t)=>new Gr(e,t),zw=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw rn()},Tr=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Ig(t.ds,e.id),wu=(e,t)=>{const n=St(e.meta,wu,Kn),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<Ye(r,i)&&Gn(e,he(i,o))}),Ng(e,t.ds,o=>{}),n.add(t))};class Vg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Cl=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},Ye=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Yg=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw rn()}n.push(t)},on=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=tn(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=tn((n+r)/2)}throw rn()},Fw=(e,t)=>{const n=e.clients.get(t.client);return n[on(n,t.clock)]},aa=Fw,xu=(e,t,n)=>{const r=on(t,n),o=t[r];return o.id.clock<n&&o instanceof Ue?(t.splice(r+1,0,qs(e,o,n-o.id.clock)),r+1):r},Gn=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[xu(e,n,t.clock)]},Ef=(e,t,n)=>{const r=t.clients.get(n.client),o=on(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==jt&&r.splice(o+1,0,qs(e,i,n.clock-i.id.clock+1)),i},Pw=(e,t,n)=>{const r=e.clients.get(t.id.client);r[on(r,t.id.clock)]=n},Kg=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=xu(e,t,n),a;do a=t[s++],i<a.id.clock+a.length&&xu(e,t,i),o(a);while(s<t.length&&t[s].id.clock<i)};class Uw{constructor(t,n,r){this.doc=t,this.deleteSet=new Ei,this.beforeState=Cl(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Tf=(e,t)=>t.deleteSet.clients.size===0&&!ov(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Dc(t.deleteSet),Ew(e,t),vo(e,t.deleteSet),!0),Rf=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&St(e.changed,t,Kn).add(n)},ys=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ue&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},Bw=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],u=a.clock+a.len;for(let d=on(i,a.clock),m=i[d];d<i.length&&m.id.clock<u;m=i[++d]){const c=i[d];if(a.clock+a.len<=c.id.clock)break;c instanceof Ue&&c.deleted&&!c.keep&&n(c)&&c.gc(t,!1)}}}},$w=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=xc(o.length-1,1+on(o,s.clock+s.len-1));for(let u=a,d=o[u];u>0&&d.id.clock>=s.clock;d=o[u])u-=1+ys(o,u)}})},Gg=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{Dc(i),n.afterState=Cl(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((u,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,u)})),a.push(()=>{n.changedParentTypes.forEach((u,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(u=u.filter(m=>m.target._item===null||!m.target._item.deleted),u.forEach(m=>{m.currentTarget=d,m._path=null}),u.sort((m,c)=>m.path.length-c.path.length),Hg(d._dEH,u,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),Tc(a,[]),n._needFormattingCleanup&&a1(n)}finally{r.gc&&Bw(i,o,r.gcFilter),$w(i,o),n.afterState.forEach((m,c)=>{const h=n.beforeState.get(c)||0;if(h!==m){const g=o.clients.get(c),y=br(on(g,h),1);for(let S=g.length-1;S>=y;)S-=1+ys(g,S)}});for(let m=s.length-1;m>=0;m--){const{client:c,clock:h}=s[m].id,g=o.clients.get(c),y=on(g,h);y+1<g.length&&ys(g,y+1)>1||y>0&&ys(g,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Mg(Sl,Lt,"[yjs] ",gr,Rg,"Changed the client-id because another client seems to be using it."),r.clientID=Og()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const m=new Ti;Tf(m,n)&&r.emit("update",[m.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const m=new mr;Tf(m,n)&&r.emit("updateV2",[m.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:u,subdocsRemoved:d}=n;(a.size>0||d.size>0||u.size>0)&&(a.forEach(m=>{m.clientID=r.clientID,m.collectionid==null&&(m.collectionid=r.collectionid),r.subdocs.add(m)}),d.forEach(m=>r.subdocs.delete(m)),r.emit("subdocs",[{loaded:u,added:a,removed:d},r,n]),d.forEach(m=>m.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Gg(e,t+1)}}},xe=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new Uw(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const a=e._transaction===o[0];e._transaction=null,a&&Gg(o,0)}}return s};function*Ww(e){const t=ce(e.restDecoder);for(let n=0;n<t;n++){const r=ce(e.restDecoder),o=e.readClient();let i=ce(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const u=ce(e.restDecoder);yield new Dt(he(o,i),u),i+=u}else if(wl&a){const u=(a&(mn|xt))===0,d=new Ue(he(o,i),null,(a&xt)===xt?e.readLeftID():null,null,(a&mn)===mn?e.readRightID():null,u?e.readParentInfo()?e.readString():e.readLeftID():null,u&&(a&di)===di?e.readString():null,fm(e,a));yield d,i+=d.length}else{const u=e.readLen();yield new jt(he(o,i),u),i+=u}}}}class Ac{constructor(t,n){this.gen=Ww(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Dt);return this.curr}}class Nc{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Hw=e=>Vs(e,Fg,Ti),Vw=(e,t)=>{if(e.constructor===jt){const{client:n,clock:r}=e.id;return new jt(he(n,r+t),e.length-t)}else if(e.constructor===Dt){const{client:n,clock:r}=e.id;return new Dt(he(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new Ue(he(r,o+t),null,he(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Vs=(e,t=ao,n=mr)=>{if(e.length===1)return e[0];const r=e.map(m=>new t(ln(m)));let o=r.map(m=>new Ac(m,!0)),i=null;const s=new n,a=new Nc(s);for(;o=o.filter(h=>h.curr!==null),o.sort((h,g)=>{if(h.curr.id.client===g.curr.id.client){const y=h.curr.id.clock-g.curr.id.clock;return y===0?h.curr.constructor===g.curr.constructor?0:h.curr.constructor===Dt?1:-1:y}else return g.curr.id.client-h.curr.id.client}),o.length!==0;){const m=o[0],c=m.curr.id.client;if(i!==null){let h=m.curr,g=!1;for(;h!==null&&h.id.clock+h.length<=i.struct.id.clock+i.struct.length&&h.id.client>=i.struct.id.client;)h=m.next(),g=!0;if(h===null||h.id.client!==c||g&&h.id.clock>i.struct.id.clock+i.struct.length)continue;if(c!==i.struct.id.client)An(a,i.struct,i.offset),i={struct:h,offset:0},m.next();else if(i.struct.id.clock+i.struct.length<h.id.clock)if(i.struct.constructor===Dt)i.struct.length=h.id.clock+h.length-i.struct.id.clock;else{An(a,i.struct,i.offset);const y=h.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Dt(he(c,i.struct.id.clock+i.struct.length),y),offset:0}}else{const y=i.struct.id.clock+i.struct.length-h.id.clock;y>0&&(i.struct.constructor===Dt?i.struct.length-=y:h=Vw(h,y)),i.struct.mergeWith(h)||(An(a,i.struct,i.offset),i={struct:h,offset:0},m.next())}}else i={struct:m.curr,offset:0},m.next();for(let h=m.curr;h!==null&&h.id.client===c&&h.id.clock===i.struct.id.clock+i.struct.length&&h.constructor!==Dt;h=m.next())An(a,i.struct,i.offset),i={struct:h,offset:0}}i!==null&&(An(a,i.struct,i.offset),i=null),Ic(a);const u=r.map(m=>Mc(m)),d=ww(u);return vo(s,d),s.toUint8Array()},Yw=(e,t,n=ao,r=mr)=>{const o=$g(t),i=new r,s=new Nc(i),a=new n(ln(e)),u=new Ac(a,!1);for(;u.curr;){const m=u.curr,c=m.id.client,h=o.get(c)||0;if(u.curr.constructor===Dt){u.next();continue}if(m.id.clock+m.length>h)for(An(s,m,br(h-m.id.clock,0)),u.next();u.curr&&u.curr.id.client===c;)An(s,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===c&&u.curr.id.clock+u.curr.length<=h;)u.next()}Ic(s);const d=Mc(a);return vo(i,d),i.toUint8Array()},Qg=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:De(e.encoder.restEncoder)}),e.encoder.restEncoder=Ve(),e.written=0)},An=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Qg(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),se(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Ic=e=>{Qg(e);const t=e.encoder.restEncoder;se(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];se(t,r.written),xl(t,r.restEncoder)}},Kw=(e,t,n,r)=>{const o=new n(ln(e)),i=new Ac(o,!1),s=new r,a=new Nc(s);for(let d=i.curr;d!==null;d=i.next())An(a,t(d),0);Ic(a);const u=Mc(o);return vo(s,u),s.toUint8Array()},Gw=e=>Kw(e,Jv,ao,Ti),jf="You must not compute changes after the event-handler fired.";class _l{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Qw(this.currentTarget,this.target))}deletes(t){return Ig(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw nn(jf);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let u=i.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(i))if(u!==null&&this.deletes(u))s="delete",a=ta(u.content.getContent());else return;else u!==null&&this.deletes(u)?(s="update",a=ta(u.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=ta(i.content.getContent());else return;t.set(o,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw nn(jf);const n=this.target,r=Kn(),o=Kn(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const u=()=>{a&&i.push(a)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(u(),a={delete:0}),a.delete+=d.length,o.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(u(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),r.add(d)):((a===null||a.retain===void 0)&&(u(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&u()}this._changes=t}return t}}const Qw=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},rt=()=>{gw("Invalid access: Add Yjs type to a document before reading data.")},Jg=80;let Oc=0;class Jw{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=Oc++}}const qw=e=>{e.timestamp=Oc++},qg=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Oc++},Xw=(e,t,n)=>{if(e.length>=Jg){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return qg(r,t,n),r}else{const r=new Jw(t,n);return e.push(r),r}},El=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>ps(t-i.index)<ps(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,qw(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&ps(n.index-o)<r.parent.length/Jg?(qg(n,r,o),n):Xw(e._searchMarker,r,o)},gi=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=br(t,o.index+n))}},Tl=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;St(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Hg(r._eH,n,t)};class qe{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=kf(),this._dEH=kf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw en()}clone(){throw en()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Cf(this._eH,t)}observeDeep(t){Cf(this._dEH,t)}unobserve(t){_f(this._eH,t)}unobserveDeep(t){_f(this._dEH,t)}toJSON(){}}const Xg=(e,t,n)=>{e.doc??rt(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)o.push(s[a]),r--;t=0}}i=i.right}return o},Zg=e=>{e.doc??rt();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},mi=(e,t)=>{let n=0,r=e._start;for(e.doc??rt();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},em=(e,t)=>{const n=[];return mi(e,(r,o)=>{n.push(t(r,o,e))}),n},Zw=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},tm=(e,t)=>{e.doc??rt();const n=El(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Ys=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,u=n===null?t._start:n.right;let d=[];const m=()=>{d.length>0&&(o=new Ue(he(s,Ye(a,s)),o,o&&o.lastId,u,u&&u.id,t,null,new vr(d)),o.integrate(e,0),d=[])};r.forEach(c=>{if(c===null)d.push(c);else switch(c.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(c);break;default:switch(m(),c.constructor){case Uint8Array:case ArrayBuffer:o=new Ue(he(s,Ye(a,s)),o,o&&o.lastId,u,u&&u.id,t,null,new Ri(new Uint8Array(c))),o.integrate(e,0);break;case wo:o=new Ue(he(s,Ye(a,s)),o,o&&o.lastId,u,u&&u.id,t,null,new ji(c)),o.integrate(e,0);break;default:if(c instanceof qe)o=new Ue(he(s,Ye(a,s)),o,o&&o.lastId,u,u&&u.id,t,null,new En(c)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),m()},nm=()=>nn("Length exceeded!"),rm=(e,t,n,r)=>{if(n>t._length)throw nm();if(n===0)return t._searchMarker&&gi(t._searchMarker,n,r.length),Ys(e,t,null,r);const o=n,i=El(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Gn(e,he(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&gi(t._searchMarker,o,r.length),Ys(e,t,s,r)},e1=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return Ys(e,t,o,n)},om=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=El(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Gn(e,he(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Gn(e,he(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw nm();t._searchMarker&&gi(t._searchMarker,o,-i+r)},Ks=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},zc=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(r==null)a=new vr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new vr([r]);break;case Uint8Array:a=new Ri(r);break;case wo:a=new ji(r);break;default:if(r instanceof qe)a=new En(r);else throw new Error("Unexpected content type")}new Ue(he(s,Ye(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},Fc=(e,t)=>{e.doc??rt();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},im=e=>{const t={};return e.doc??rt(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},sm=(e,t)=>{e.doc??rt();const n=e._map.get(t);return n!==void 0&&!n.deleted},t1=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Tr(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},Qi=e=>(e.doc??rt(),yw(e._map.entries(),t=>!t[1].deleted));class n1 extends _l{}class Qr extends qe{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Qr;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Qr}clone(){const t=new Qr;return t.insert(0,this.toArray().map(n=>n instanceof qe?n.clone():n)),t}get length(){return this.doc??rt(),this._length}_callObserver(t,n){super._callObserver(t,n),Tl(this,t,new n1(this,t))}insert(t,n){this.doc!==null?xe(this.doc,r=>{rm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?xe(this.doc,n=>{e1(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?xe(this.doc,r=>{om(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return tm(this,t)}toArray(){return Zg(this)}slice(t=0,n=this.length){return Xg(this,t,n)}toJSON(){return this.map(t=>t instanceof qe?t.toJSON():t)}map(t){return em(this,t)}forEach(t){mi(this,t)}[Symbol.iterator](){return Zw(this)}_write(t){t.writeTypeRef(T1)}}const r1=e=>new Qr;class o1 extends _l{constructor(t,n,r){super(t,n),this.keysChanged=r}}class uo extends qe{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new uo}clone(){const t=new uo;return this.forEach((n,r)=>{t.set(r,n instanceof qe?n.clone():n)}),t}_callObserver(t,n){Tl(this,t,new o1(this,t,n))}toJSON(){this.doc??rt();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof qe?o.toJSON():o}}),t}get size(){return[...Qi(this)].length}keys(){return la(Qi(this),t=>t[0])}values(){return la(Qi(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return la(Qi(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??rt(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?xe(this.doc,n=>{Ks(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?xe(this.doc,r=>{zc(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Fc(this,t)}has(t){return sm(this,t)}clear(){this.doc!==null?xe(this.doc,t=>{this.forEach(function(n,r,o){Ks(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(R1)}}const i1=e=>new uo,On=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Kv(e,t);class bu{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&rn(),this.right.content.constructor){case Be:this.right.deleted||xo(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Df=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case Be:t.right.deleted||xo(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Gn(e,he(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Ji=(e,t,n,r)=>{const o=new Map,i=r?El(t,n):null;if(i){const s=new bu(i.p.left,i.p,i.index,o);return Df(e,s,n-i.index)}else{const s=new bu(null,t._start,0,o);return Df(e,s,n)}},lm=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Be&&On(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,a)=>{const u=n.left,d=n.right,m=new Ue(he(i,Ye(o.store,i)),u,u&&u.lastId,d,d&&d.id,t,null,new Be(a,s));m.integrate(e,0),n.right=m,n.forward()})},xo=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},am=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===Be&&On(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},um=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const a in r){const u=r[a],d=n.currentAttributes.get(a)??null;if(!On(d,u)){s.set(a,d);const{left:m,right:c}=n;n.right=new Ue(he(i,Ye(o.store,i)),m,m&&m.lastId,c,c&&c.id,t,null,new Be(a,u)),n.right.integrate(e,0),n.forward()}}return s},ua=(e,t,n,r,o)=>{n.currentAttributes.forEach((h,g)=>{o[g]===void 0&&(o[g]=null)});const i=e.doc,s=i.clientID;am(n,o);const a=um(e,t,n,o),u=r.constructor===String?new sn(r):r instanceof qe?new En(r):new Sr(r);let{left:d,right:m,index:c}=n;t._searchMarker&&gi(t._searchMarker,n.index,u.getLength()),m=new Ue(he(s,Ye(i.store,s)),d,d&&d.lastId,m,m&&m.id,t,null,u),m.integrate(e,0),n.right=m,n.index=c,n.forward(),lm(e,t,n,a)},Mf=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;am(n,o);const a=um(e,t,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Be));){if(!n.right.deleted)switch(n.right.content.constructor){case Be:{const{key:u,value:d}=n.right.content,m=o[u];if(m!==void 0){if(On(m,d))a.delete(u);else{if(r===0)break e;a.set(u,d)}n.right.delete(e)}else n.currentAttributes.set(u,d);break}default:r<n.right.length&&Gn(e,he(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new Ue(he(s,Ye(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new sn(u)),n.right.integrate(e,0),n.forward()}lm(e,t,n,a)},cm=(e,t,n,r,o)=>{let i=t;const s=gt();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Be){const d=i.content;s.set(d.key,d)}i=i.right}let a=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const d=t.content;switch(d.constructor){case Be:{const{key:m,value:c}=d,h=r.get(m)??null;(s.get(m)!==d||h===c)&&(t.delete(e),a++,!u&&(o.get(m)??null)===c&&h!==c&&(h===null?o.delete(m):o.set(m,h))),!u&&!t.deleted&&xo(o,d);break}}}t=t.right}return a},s1=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Be){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},l1=e=>{let t=0;return xe(e.doc,n=>{let r=e._start,o=e._start,i=gt();const s=pu(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Be:xo(s,o.content);break;default:t+=cm(n,r,o,i,s),i=pu(s),r=o;break}o=o.right}}),t},a1=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Kg(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===Be&&s.constructor!==jt&&t.add(s.parent)})}xe(n,r=>{Ng(e,e.deleteSet,o=>{if(o instanceof jt||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===Be?t.add(i):s1(r,o)});for(const o of t)l1(o)})},Lf=(e,t,n)=>{const r=n,o=pu(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case En:case Sr:case sn:n<t.right.length&&Gn(e,he(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&cm(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&gi(s._searchMarker,t.index,-r+n),t};class u1 extends _l{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];xe(t,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const u={};let d="",m=0,c=0;const h=()=>{if(a!==null){let g=null;switch(a){case"delete":c>0&&(g={delete:c}),c=0;break;case"insert":(typeof d=="object"||d.length>0)&&(g={insert:d},o.size>0&&(g.attributes={},o.forEach((y,S)=>{y!==null&&(g.attributes[S]=y)}))),d="";break;case"retain":m>0&&(g={retain:m},Vv(u)||(g.attributes=Wv({},u))),m=0;break}g&&n.push(g),a=null}};for(;s!==null;){switch(s.content.constructor){case En:case Sr:this.adds(s)?this.deletes(s)||(h(),a="insert",d=s.content.getContent()[0],h()):this.deletes(s)?(a!=="delete"&&(h(),a="delete"),c+=1):s.deleted||(a!=="retain"&&(h(),a="retain"),m+=1);break;case sn:this.adds(s)?this.deletes(s)||(a!=="insert"&&(h(),a="insert"),d+=s.content.str):this.deletes(s)?(a!=="delete"&&(h(),a="delete"),c+=s.length):s.deleted||(a!=="retain"&&(h(),a="retain"),m+=s.length);break;case Be:{const{key:g,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){const S=o.get(g)??null;On(S,y)?y!==null&&s.delete(r):(a==="retain"&&h(),On(y,i.get(g)??null)?delete u[g]:u[g]=y)}}else if(this.deletes(s)){i.set(g,y);const S=o.get(g)??null;On(S,y)||(a==="retain"&&h(),u[g]=S)}else if(!s.deleted){i.set(g,y);const S=u[g];S!==void 0&&(On(S,y)?S!==null&&s.delete(r):(a==="retain"&&h(),y===null?delete u[g]:u[g]=y))}s.deleted||(a==="insert"&&h(),xo(o,s.content));break}}s=s.right}for(h();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class co extends qe{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??rt(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new co}clone(){const t=new co;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new u1(this,t,n);Tl(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??rt();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===sn&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?xe(this.doc,r=>{const o=new bu(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&ua(r,this,o,a,s.attributes||{})}else s.retain!==void 0?Mf(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&Lf(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??rt();const o=[],i=new Map,s=this.doc;let a="",u=this._start;function d(){if(a.length>0){const c={};let h=!1;i.forEach((y,S)=>{h=!0,c[S]=y});const g={insert:a};h&&(g.attributes=c),o.push(g),a=""}}const m=()=>{for(;u!==null;){if(Tr(u,t)||n!==void 0&&Tr(u,n))switch(u.content.constructor){case sn:{const c=i.get("ychange");t!==void 0&&!Tr(u,t)?(c===void 0||c.user!==u.id.client||c.type!=="removed")&&(d(),i.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!Tr(u,n)?(c===void 0||c.user!==u.id.client||c.type!=="added")&&(d(),i.set("ychange",r?r("added",u.id):{type:"added"})):c!==void 0&&(d(),i.delete("ychange")),a+=u.content.str;break}case En:case Sr:{d();const c={insert:u.content.getContent()[0]};if(i.size>0){const h={};c.attributes=h,i.forEach((g,y)=>{h[y]=g})}o.push(c);break}case Be:Tr(u,t)&&(d(),xo(i,u.content));break}u=u.right}d()};return t||n?xe(s,c=>{t&&wu(c,t),n&&wu(c,n),m()},"cleanup"):m(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?xe(o,i=>{const s=Ji(i,this,t,!r);r||(r={},s.currentAttributes.forEach((a,u)=>{r[u]=a})),ua(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?xe(o,i=>{const s=Ji(i,this,t,!r);ua(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?xe(r,o=>{Lf(o,Ji(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?xe(o,i=>{const s=Ji(i,this,t,!1);s.right!==null&&Mf(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?xe(this.doc,n=>{Ks(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?xe(this.doc,r=>{zc(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Fc(this,t)}getAttributes(){return im(this)}_write(t){t.writeTypeRef(j1)}}const c1=e=>new co;class ca{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??rt()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===fo||n.constructor===yr)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class yr extends qe{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new yr}clone(){const t=new yr;return t.insert(0,this.toArray().map(n=>n instanceof qe?n.clone():n)),t}get length(){return this.doc??rt(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new ca(this,t)}querySelector(t){t=t.toUpperCase();const r=new ca(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Sn(new ca(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Tl(this,t,new h1(this,n,t))}toString(){return em(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),mi(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?xe(this.doc,r=>{rm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)xe(this.doc,r=>{const o=t&&t instanceof qe?t._item:t;Ys(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw nn("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?xe(this.doc,r=>{om(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return Zg(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return tm(this,t)}slice(t=0,n=this.length){return Xg(this,t,n)}forEach(t){mi(this,t)}_write(t){t.writeTypeRef(M1)}}const d1=e=>new yr;class fo extends yr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new fo(this.nodeName)}clone(){const t=new fo(this.nodeName),n=this.getAttributes();return Hv(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof qe?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const u=r[a];n.push(u+'="'+t[u]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?xe(this.doc,n=>{Ks(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?xe(this.doc,r=>{zc(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Fc(this,t)}hasAttribute(t){return sm(this,t)}getAttributes(t){return t?t1(this,t):im(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return mi(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(D1),t.writeKey(this.nodeName)}}const f1=e=>new fo(e.readKey());class h1 extends _l{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class Gs extends uo{constructor(t){super(),this.hookName=t}_copy(){return new Gs(this.hookName)}clone(){const t=new Gs(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(L1),t.writeKey(this.hookName)}}const p1=e=>new Gs(e.readKey());class Qs extends co{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Qs}clone(){const t=new Qs;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(A1)}}const g1=e=>new Qs;class Pc{constructor(t,n){this.id=t,this.length=n}get deleted(){throw en()}mergeWith(t){return!1}write(t,n,r){throw en()}integrate(t,n){throw en()}}const m1=0;class jt extends Pc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Yg(t.doc.store,this)}write(t,n){t.writeInfo(m1),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Ri{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ri(this.content)}splice(t){throw en()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const y1=e=>new Ri(e.readBuf());class yi{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new yi(this.len)}splice(t){const n=new yi(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Hs(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const v1=e=>new yi(e.readLen()),dm=(e,t)=>new wo({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class ji{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ji(dm(this.doc.guid,this.opts))}splice(t){throw en()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const w1=e=>new ji(dm(e.readString(),e.readAny()));class Sr{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Sr(this.embed)}splice(t){throw en()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const x1=e=>new Sr(e.readJSON());class Be{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Be(this.key,this.value)}splice(t){throw en()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const b1=e=>new Be(e.readKey(),e.readJSON());class Js{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Js(this.arr)}splice(t){const n=new Js(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const S1=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new Js(n)},k1=pi("node_env")==="development";class vr{constructor(t){this.arr=t,k1&&wg(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new vr(this.arr)}splice(t){const n=new vr(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const C1=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new vr(n)};class sn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new sn(this.str)}splice(t){const n=new sn(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const _1=e=>new sn(e.readString()),E1=[r1,i1,c1,f1,d1,p1,g1],T1=0,R1=1,j1=2,D1=3,M1=4,L1=5,A1=6;class En{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new En(this.type._copy())}splice(t){throw en()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const N1=e=>new En(E1[e.readTypeRef()](e)),qs=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Ue(he(r,o+n),t,he(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=he(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i};class Ue extends Pc{constructor(t,n,r,o,i,s,a,u){super(t,u.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=u,this.info=this.content.isCountable()?af:0}set marker(t){(this.info&ra)>0!==t&&(this.info^=ra)}get marker(){return(this.info&ra)>0}get keep(){return(this.info&lf)>0}set keep(t){this.keep!==t&&(this.info^=lf)}get countable(){return(this.info&af)>0}get deleted(){return(this.info&na)>0}set deleted(t){this.deleted!==t&&(this.info^=na)}markDeleted(){this.info|=na}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ye(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ye(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Gr&&this.id.client!==this.parent.client&&this.parent.clock>=Ye(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Ef(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Gn(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===jt||this.right&&this.right.constructor===jt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ue?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ue&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Gr){const r=aa(n,this.parent);r.constructor===jt?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Ef(t,t.doc.store,he(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Gi(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Gi(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(aa(t.doc.store,o.origin)))i.has(aa(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Yg(t.doc.store,this),this.content.integrate(t,this),Rf(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new jt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:he(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Gi(t.origin,this.lastId)&&this.right===t&&Gi(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Hs(t.deleteSet,this.id.client,this.id.clock,this.length),Rf(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw rn();this.content.gc(t),n?Pw(t,this,new jt(this.id,this.length)):this.content=new yi(this.length)}write(t,n){const r=n>0?he(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&wl|(r===null?0:xt)|(o===null?0:mn)|(i===null?0:di);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const u=a._item;if(u===null){const d=zw(a);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(u.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===Gr?(t.writeParentInfo(!1),t.writeLeftID(a)):rn();i!==null&&t.writeString(i)}this.content.write(t,n)}}const fm=(e,t)=>I1[t&wl](e),I1=[()=>{rn()},v1,S1,y1,_1,x1,b1,N1,C1,w1,()=>{rn()}],O1=10;class Dt extends Pc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){rn()}write(t,n){t.writeInfo(O1),se(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const hm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},pm="__ $YJS$ __";hm[pm]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");hm[pm]=!0;const z1=1200,F1=2500,Xs=3e4,Su=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=s=>{e.lastMessageReceived=kn();const a=s.data,u=typeof a=="string"?JSON.parse(a):a;u&&u.type==="pong"&&(clearTimeout(r),r=setTimeout(i,Xs/2)),e.emit("message",[u,e])};const o=s=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:s},e])):e.unsuccessfulReconnects++,setTimeout(Su,xc(lv(e.unsuccessfulReconnects+1)*z1,F1),e)),clearTimeout(r)},i=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>o(null),t.onerror=s=>o(s),t.onopen=()=>{e.lastMessageReceived=kn(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(i,Xs/2)}}};class P1 extends ag{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Xs<kn()-this.lastMessageReceived&&this.ws.close()},Xs/2),Su(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Su(this)}}const gm=new Map;class U1{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:_g(n.newValue||"")}),Bv(this._onChange)}postMessage(t){mg.setItem(this.room,Cg(nw(t)))}close(){$v(this._onChange)}}const B1=typeof BroadcastChannel>"u"?U1:BroadcastChannel,Uc=e=>St(gm,e,()=>{const t=Kn(),n=new B1(e);return n.onmessage=r=>t.forEach(o=>o(r.data,"broadcastchannel")),{bc:n,subs:t}}),$1=(e,t)=>(Uc(e).subs.add(t),t),W1=(e,t)=>{const n=Uc(e),r=n.subs.delete(t);return r&&n.subs.size===0&&(n.bc.close(),gm.delete(e)),r},H1=(e,t,n=null)=>{const r=Uc(e);r.bc.postMessage(t),r.subs.forEach(o=>o(t,n))},V1=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}};function qi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mm={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,r=Math.abs,o=Math.pow;return function(){function i(s,a,u){function d(h,g){if(!a[h]){if(!s[h]){var y=typeof qi=="function"&&qi;if(!g&&y)return y(h,!0);if(m)return m(h,!0);var S=new Error("Cannot find module '"+h+"'");throw S.code="MODULE_NOT_FOUND",S}var I=a[h]={exports:{}};s[h][0].call(I.exports,function(k){var C=s[h][1][k];return d(C||k)},I,I.exports,i,s,a,u)}return a[h].exports}for(var m=typeof qi=="function"&&qi,c=0;c<u.length;c++)d(u[c]);return d}return i}()({1:[function(i,s,a){function u(x){var b=x.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");var R=x.indexOf("=");R===-1&&(R=b);var _=R===b?0:4-R%4;return[R,_]}function d(x,b,R){return 3*(b+R)/4-R}function m(x){var b,R,_=u(x),D=_[0],N=_[1],j=new I(d(x,D,N)),L=0,F=0<N?D-4:D;for(R=0;R<F;R+=4)b=S[x.charCodeAt(R)]<<18|S[x.charCodeAt(R+1)]<<12|S[x.charCodeAt(R+2)]<<6|S[x.charCodeAt(R+3)],j[L++]=255&b>>16,j[L++]=255&b>>8,j[L++]=255&b;return N===2&&(b=S[x.charCodeAt(R)]<<2|S[x.charCodeAt(R+1)]>>4,j[L++]=255&b),N===1&&(b=S[x.charCodeAt(R)]<<10|S[x.charCodeAt(R+1)]<<4|S[x.charCodeAt(R+2)]>>2,j[L++]=255&b>>8,j[L++]=255&b),j}function c(x){return y[63&x>>18]+y[63&x>>12]+y[63&x>>6]+y[63&x]}function h(x,b,R){for(var _,D=[],N=b;N<R;N+=3)_=(16711680&x[N]<<16)+(65280&x[N+1]<<8)+(255&x[N+2]),D.push(c(_));return D.join("")}function g(x){for(var b,R=x.length,_=R%3,D=[],N=16383,j=0,L=R-_;j<L;j+=N)D.push(h(x,j,j+N>L?L:j+N));return _===1?(b=x[R-1],D.push(y[b>>2]+y[63&b<<4]+"==")):_===2&&(b=(x[R-2]<<8)+x[R-1],D.push(y[b>>10]+y[63&b>>4]+y[63&b<<2]+"=")),D.join("")}a.byteLength=function(x){var b=u(x),R=b[0],_=b[1];return 3*(R+_)/4-_},a.toByteArray=m,a.fromByteArray=g;for(var y=[],S=[],I=typeof Uint8Array>"u"?Array:Uint8Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,f=k.length;C<f;++C)y[C]=k[C],S[k.charCodeAt(C)]=C;S[45]=62,S[95]=63},{}],2:[function(){},{}],3:[function(i,s,a){(function(){(function(){var u=String.fromCharCode,d=Math.min;function m(l){if(2147483647<l)throw new RangeError('The value "'+l+'" is invalid for option "size"');var p=new Uint8Array(l);return p.__proto__=c.prototype,p}function c(l,p,w){if(typeof l=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S(l)}return h(l,p,w)}function h(l,p,w){if(typeof l=="string")return I(l,p);if(ArrayBuffer.isView(l))return k(l);if(l==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(A(l,ArrayBuffer)||l&&A(l.buffer,ArrayBuffer))return C(l,p,w);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var M=l.valueOf&&l.valueOf();if(M!=null&&M!==l)return c.from(M,p,w);var O=f(l);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return c.from(l[Symbol.toPrimitive]("string"),p,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function g(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(0>l)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function y(l,p,w){return g(l),0>=l||p===void 0?m(l):typeof w=="string"?m(l).fill(p,w):m(l).fill(p)}function S(l){return g(l),m(0>l?0:0|x(l))}function I(l,p){if((typeof p!="string"||p==="")&&(p="utf8"),!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var w=0|b(l,p),M=m(w),O=M.write(l,p);return O!==w&&(M=M.slice(0,O)),M}function k(l){for(var p=0>l.length?0:0|x(l.length),w=m(p),M=0;M<p;M+=1)w[M]=255&l[M];return w}function C(l,p,w){if(0>p||l.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<p+(w||0))throw new RangeError('"length" is outside of buffer bounds');var M;return M=p===void 0&&w===void 0?new Uint8Array(l):w===void 0?new Uint8Array(l,p):new Uint8Array(l,p,w),M.__proto__=c.prototype,M}function f(l){if(c.isBuffer(l)){var p=0|x(l.length),w=m(p);return w.length===0||l.copy(w,0,0,p),w}return l.length===void 0?l.type==="Buffer"&&Array.isArray(l.data)?k(l.data):void 0:typeof l.length!="number"||z(l.length)?m(0):k(l)}function x(l){if(l>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|l}function b(l,p){if(c.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||A(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);var w=l.length,M=2<arguments.length&&arguments[2]===!0;if(!M&&w===0)return 0;for(var O=!1;;)switch(p){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ut(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*w;case"hex":return w>>>1;case"base64":return re(l).length;default:if(O)return M?-1:ut(l).length;p=(""+p).toLowerCase(),O=!0}}function R(l,p,w){var M=!1;if((p===void 0||0>p)&&(p=0),p>this.length||((w===void 0||w>this.length)&&(w=this.length),0>=w)||(w>>>=0,p>>>=0,w<=p))return"";for(l||(l="utf8");;)switch(l){case"hex":return ee(this,p,w);case"utf8":case"utf-8":return Y(this,p,w);case"ascii":return U(this,p,w);case"latin1":case"binary":return X(this,p,w);case"base64":return H(this,p,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,p,w);default:if(M)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),M=!0}}function _(l,p,w){var M=l[p];l[p]=l[w],l[w]=M}function D(l,p,w,M,O){if(l.length===0)return-1;if(typeof w=="string"?(M=w,w=0):2147483647<w?w=2147483647:-2147483648>w&&(w=-2147483648),w=+w,z(w)&&(w=O?0:l.length-1),0>w&&(w=l.length+w),w>=l.length){if(O)return-1;w=l.length-1}else if(0>w)if(O)w=0;else return-1;if(typeof p=="string"&&(p=c.from(p,M)),c.isBuffer(p))return p.length===0?-1:N(l,p,w,M,O);if(typeof p=="number")return p&=255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(l,p,w):Uint8Array.prototype.lastIndexOf.call(l,p,w):N(l,[p],w,M,O);throw new TypeError("val must be string, number or Buffer")}function N(l,p,w,M,O){function T(_t,Et){return B===1?_t[Et]:_t.readUInt16BE(Et*B)}var B=1,q=l.length,oe=p.length;if(M!==void 0&&(M=(M+"").toLowerCase(),M==="ucs2"||M==="ucs-2"||M==="utf16le"||M==="utf-16le")){if(2>l.length||2>p.length)return-1;B=2,q/=2,oe/=2,w/=2}var te;if(O){var ie=-1;for(te=w;te<q;te++)if(T(l,te)!==T(p,ie===-1?0:te-ie))ie!==-1&&(te-=te-ie),ie=-1;else if(ie===-1&&(ie=te),te-ie+1===oe)return ie*B}else for(w+oe>q&&(w=q-oe),te=w;0<=te;te--){for(var pe=!0,_e=0;_e<oe;_e++)if(T(l,te+_e)!==T(p,_e)){pe=!1;break}if(pe)return te}return-1}function j(l,p,w,M){w=+w||0;var O=l.length-w;M?(M=+M,M>O&&(M=O)):M=O;var T=p.length;M>T/2&&(M=T/2);for(var B,q=0;q<M;++q){if(B=parseInt(p.substr(2*q,2),16),z(B))return q;l[w+q]=B}return q}function L(l,p,w,M){return me(ut(p,l.length-w),l,w,M)}function F(l,p,w,M){return me(ye(p),l,w,M)}function V(l,p,w,M){return F(l,p,w,M)}function Q(l,p,w,M){return me(re(p),l,w,M)}function J(l,p,w,M){return me(P(p,l.length-w),l,w,M)}function H(l,p,w){return p===0&&w===l.length?W.fromByteArray(l):W.fromByteArray(l.slice(p,w))}function Y(l,p,w){w=d(l.length,w);for(var M=[],O=p;O<w;){var T=l[O],B=null,q=239<T?4:223<T?3:191<T?2:1;if(O+q<=w){var oe,te,ie,pe;q===1?128>T&&(B=T):q===2?(oe=l[O+1],(192&oe)==128&&(pe=(31&T)<<6|63&oe,127<pe&&(B=pe))):q===3?(oe=l[O+1],te=l[O+2],(192&oe)==128&&(192&te)==128&&(pe=(15&T)<<12|(63&oe)<<6|63&te,2047<pe&&(55296>pe||57343<pe)&&(B=pe))):q===4&&(oe=l[O+1],te=l[O+2],ie=l[O+3],(192&oe)==128&&(192&te)==128&&(192&ie)==128&&(pe=(15&T)<<18|(63&oe)<<12|(63&te)<<6|63&ie,65535<pe&&1114112>pe&&(B=pe)))}B===null?(B=65533,q=1):65535<B&&(B-=65536,M.push(55296|1023&B>>>10),B=56320|1023&B),M.push(B),O+=q}return $(M)}function $(l){var p=l.length;if(p<=4096)return u.apply(String,l);for(var w="",M=0;M<p;)w+=u.apply(String,l.slice(M,M+=4096));return w}function U(l,p,w){var M="";w=d(l.length,w);for(var O=p;O<w;++O)M+=u(127&l[O]);return M}function X(l,p,w){var M="";w=d(l.length,w);for(var O=p;O<w;++O)M+=u(l[O]);return M}function ee(l,p,w){var M=l.length;(!p||0>p)&&(p=0),(!w||0>w||w>M)&&(w=M);for(var O="",T=p;T<w;++T)O+=Ze(l[T]);return O}function le(l,p,w){for(var M=l.slice(p,w),O="",T=0;T<M.length;T+=2)O+=u(M[T]+256*M[T+1]);return O}function ue(l,p,w){if(l%1!=0||0>l)throw new RangeError("offset is not uint");if(l+p>w)throw new RangeError("Trying to access beyond buffer length")}function ae(l,p,w,M,O,T){if(!c.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>O||p<T)throw new RangeError('"value" argument is out of bounds');if(w+M>l.length)throw new RangeError("Index out of range")}function Ce(l,p,w,M){if(w+M>l.length)throw new RangeError("Index out of range");if(0>w)throw new RangeError("Index out of range")}function we(l,p,w,M,O){return p=+p,w>>>=0,O||Ce(l,p,w,4),Z.write(l,p,w,M,23,4),w+4}function Re(l,p,w,M,O){return p=+p,w>>>=0,O||Ce(l,p,w,8),Z.write(l,p,w,M,52,8),w+8}function Ie(l){if(l=l.split("=")[0],l=l.trim().replace(E,""),2>l.length)return"";for(;l.length%4!=0;)l+="=";return l}function Ze(l){return 16>l?"0"+l.toString(16):l.toString(16)}function ut(l,p){p=p||1/0;for(var w,M=l.length,O=null,T=[],B=0;B<M;++B){if(w=l.charCodeAt(B),55295<w&&57344>w){if(!O){if(56319<w){-1<(p-=3)&&T.push(239,191,189);continue}else if(B+1===M){-1<(p-=3)&&T.push(239,191,189);continue}O=w;continue}if(56320>w){-1<(p-=3)&&T.push(239,191,189),O=w;continue}w=(O-55296<<10|w-56320)+65536}else O&&-1<(p-=3)&&T.push(239,191,189);if(O=null,128>w){if(0>(p-=1))break;T.push(w)}else if(2048>w){if(0>(p-=2))break;T.push(192|w>>6,128|63&w)}else if(65536>w){if(0>(p-=3))break;T.push(224|w>>12,128|63&w>>6,128|63&w)}else if(1114112>w){if(0>(p-=4))break;T.push(240|w>>18,128|63&w>>12,128|63&w>>6,128|63&w)}else throw new Error("Invalid code point")}return T}function ye(l){for(var p=[],w=0;w<l.length;++w)p.push(255&l.charCodeAt(w));return p}function P(l,p){for(var w,M,O,T=[],B=0;B<l.length&&!(0>(p-=2));++B)w=l.charCodeAt(B),M=w>>8,O=w%256,T.push(O),T.push(M);return T}function re(l){return W.toByteArray(Ie(l))}function me(l,p,w,M){for(var O=0;O<M&&!(O+w>=p.length||O>=l.length);++O)p[O+w]=l[O];return O}function A(l,p){return l instanceof p||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===p.name}function z(l){return l!==l}var W=i("base64-js"),Z=i("ieee754");a.Buffer=c,a.SlowBuffer=function(l){return+l!=l&&(l=0),c.alloc(+l)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,c.TYPED_ARRAY_SUPPORT=function(){try{var l=new Uint8Array(1);return l.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},l.foo()===42}catch{return!1}}(),c.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){return c.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){return c.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=function(l,p,w){return h(l,p,w)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(l,p,w){return y(l,p,w)},c.allocUnsafe=function(l){return S(l)},c.allocUnsafeSlow=function(l){return S(l)},c.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==c.prototype},c.compare=function(l,p){if(A(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),A(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(l)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===p)return 0;for(var w=l.length,M=p.length,O=0,T=d(w,M);O<T;++O)if(l[O]!==p[O]){w=l[O],M=p[O];break}return w<M?-1:M<w?1:0},c.isEncoding=function(l){switch((l+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(l,p){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return c.alloc(0);var w;if(p===void 0)for(p=0,w=0;w<l.length;++w)p+=l[w].length;var M=c.allocUnsafe(p),O=0;for(w=0;w<l.length;++w){var T=l[w];if(A(T,Uint8Array)&&(T=c.from(T)),!c.isBuffer(T))throw new TypeError('"list" argument must be an Array of Buffers');T.copy(M,O),O+=T.length}return M},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<l;p+=2)_(this,p,p+1);return this},c.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<l;p+=4)_(this,p,p+3),_(this,p+1,p+2);return this},c.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<l;p+=8)_(this,p,p+7),_(this,p+1,p+6),_(this,p+2,p+5),_(this,p+3,p+4);return this},c.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?Y(this,0,l):R.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(l){if(!c.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||c.compare(this,l)===0},c.prototype.inspect=function(){var l="",p=a.INSPECT_MAX_BYTES;return l=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(l+=" ... "),"<Buffer "+l+">"},c.prototype.compare=function(l,p,w,M,O){if(A(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(p===void 0&&(p=0),w===void 0&&(w=l?l.length:0),M===void 0&&(M=0),O===void 0&&(O=this.length),0>p||w>l.length||0>M||O>this.length)throw new RangeError("out of range index");if(M>=O&&p>=w)return 0;if(M>=O)return-1;if(p>=w)return 1;if(p>>>=0,w>>>=0,M>>>=0,O>>>=0,this===l)return 0;for(var T=O-M,B=w-p,q=d(T,B),oe=this.slice(M,O),te=l.slice(p,w),ie=0;ie<q;++ie)if(oe[ie]!==te[ie]){T=oe[ie],B=te[ie];break}return T<B?-1:B<T?1:0},c.prototype.includes=function(l,p,w){return this.indexOf(l,p,w)!==-1},c.prototype.indexOf=function(l,p,w){return D(this,l,p,w,!0)},c.prototype.lastIndexOf=function(l,p,w){return D(this,l,p,w,!1)},c.prototype.write=function(l,p,w,M){if(p===void 0)M="utf8",w=this.length,p=0;else if(w===void 0&&typeof p=="string")M=p,w=this.length,p=0;else if(isFinite(p))p>>>=0,isFinite(w)?(w>>>=0,M===void 0&&(M="utf8")):(M=w,w=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-p;if((w===void 0||w>O)&&(w=O),0<l.length&&(0>w||0>p)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");for(var T=!1;;)switch(M){case"hex":return j(this,l,p,w);case"utf8":case"utf-8":return L(this,l,p,w);case"ascii":return F(this,l,p,w);case"latin1":case"binary":return V(this,l,p,w);case"base64":return Q(this,l,p,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,l,p,w);default:if(T)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),T=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(l,p){var w=this.length;l=~~l,p=p===void 0?w:~~p,0>l?(l+=w,0>l&&(l=0)):l>w&&(l=w),0>p?(p+=w,0>p&&(p=0)):p>w&&(p=w),p<l&&(p=l);var M=this.subarray(l,p);return M.__proto__=c.prototype,M},c.prototype.readUIntLE=function(l,p,w){l>>>=0,p>>>=0,w||ue(l,p,this.length);for(var M=this[l],O=1,T=0;++T<p&&(O*=256);)M+=this[l+T]*O;return M},c.prototype.readUIntBE=function(l,p,w){l>>>=0,p>>>=0,w||ue(l,p,this.length);for(var M=this[l+--p],O=1;0<p&&(O*=256);)M+=this[l+--p]*O;return M},c.prototype.readUInt8=function(l,p){return l>>>=0,p||ue(l,1,this.length),this[l]},c.prototype.readUInt16LE=function(l,p){return l>>>=0,p||ue(l,2,this.length),this[l]|this[l+1]<<8},c.prototype.readUInt16BE=function(l,p){return l>>>=0,p||ue(l,2,this.length),this[l]<<8|this[l+1]},c.prototype.readUInt32LE=function(l,p){return l>>>=0,p||ue(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},c.prototype.readUInt32BE=function(l,p){return l>>>=0,p||ue(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},c.prototype.readIntLE=function(l,p,w){l>>>=0,p>>>=0,w||ue(l,p,this.length);for(var M=this[l],O=1,T=0;++T<p&&(O*=256);)M+=this[l+T]*O;return O*=128,M>=O&&(M-=o(2,8*p)),M},c.prototype.readIntBE=function(l,p,w){l>>>=0,p>>>=0,w||ue(l,p,this.length);for(var M=p,O=1,T=this[l+--M];0<M&&(O*=256);)T+=this[l+--M]*O;return O*=128,T>=O&&(T-=o(2,8*p)),T},c.prototype.readInt8=function(l,p){return l>>>=0,p||ue(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},c.prototype.readInt16LE=function(l,p){l>>>=0,p||ue(l,2,this.length);var w=this[l]|this[l+1]<<8;return 32768&w?4294901760|w:w},c.prototype.readInt16BE=function(l,p){l>>>=0,p||ue(l,2,this.length);var w=this[l+1]|this[l]<<8;return 32768&w?4294901760|w:w},c.prototype.readInt32LE=function(l,p){return l>>>=0,p||ue(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},c.prototype.readInt32BE=function(l,p){return l>>>=0,p||ue(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},c.prototype.readFloatLE=function(l,p){return l>>>=0,p||ue(l,4,this.length),Z.read(this,l,!0,23,4)},c.prototype.readFloatBE=function(l,p){return l>>>=0,p||ue(l,4,this.length),Z.read(this,l,!1,23,4)},c.prototype.readDoubleLE=function(l,p){return l>>>=0,p||ue(l,8,this.length),Z.read(this,l,!0,52,8)},c.prototype.readDoubleBE=function(l,p){return l>>>=0,p||ue(l,8,this.length),Z.read(this,l,!1,52,8)},c.prototype.writeUIntLE=function(l,p,w,M){if(l=+l,p>>>=0,w>>>=0,!M){var O=o(2,8*w)-1;ae(this,l,p,w,O,0)}var T=1,B=0;for(this[p]=255&l;++B<w&&(T*=256);)this[p+B]=255&l/T;return p+w},c.prototype.writeUIntBE=function(l,p,w,M){if(l=+l,p>>>=0,w>>>=0,!M){var O=o(2,8*w)-1;ae(this,l,p,w,O,0)}var T=w-1,B=1;for(this[p+T]=255&l;0<=--T&&(B*=256);)this[p+T]=255&l/B;return p+w},c.prototype.writeUInt8=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,1,255,0),this[p]=255&l,p+1},c.prototype.writeUInt16LE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,2,65535,0),this[p]=255&l,this[p+1]=l>>>8,p+2},c.prototype.writeUInt16BE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,2,65535,0),this[p]=l>>>8,this[p+1]=255&l,p+2},c.prototype.writeUInt32LE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,4,4294967295,0),this[p+3]=l>>>24,this[p+2]=l>>>16,this[p+1]=l>>>8,this[p]=255&l,p+4},c.prototype.writeUInt32BE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,4,4294967295,0),this[p]=l>>>24,this[p+1]=l>>>16,this[p+2]=l>>>8,this[p+3]=255&l,p+4},c.prototype.writeIntLE=function(l,p,w,M){if(l=+l,p>>>=0,!M){var O=o(2,8*w-1);ae(this,l,p,w,O-1,-O)}var T=0,B=1,q=0;for(this[p]=255&l;++T<w&&(B*=256);)0>l&&q===0&&this[p+T-1]!==0&&(q=1),this[p+T]=255&(l/B>>0)-q;return p+w},c.prototype.writeIntBE=function(l,p,w,M){if(l=+l,p>>>=0,!M){var O=o(2,8*w-1);ae(this,l,p,w,O-1,-O)}var T=w-1,B=1,q=0;for(this[p+T]=255&l;0<=--T&&(B*=256);)0>l&&q===0&&this[p+T+1]!==0&&(q=1),this[p+T]=255&(l/B>>0)-q;return p+w},c.prototype.writeInt8=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,1,127,-128),0>l&&(l=255+l+1),this[p]=255&l,p+1},c.prototype.writeInt16LE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,2,32767,-32768),this[p]=255&l,this[p+1]=l>>>8,p+2},c.prototype.writeInt16BE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,2,32767,-32768),this[p]=l>>>8,this[p+1]=255&l,p+2},c.prototype.writeInt32LE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,4,2147483647,-2147483648),this[p]=255&l,this[p+1]=l>>>8,this[p+2]=l>>>16,this[p+3]=l>>>24,p+4},c.prototype.writeInt32BE=function(l,p,w){return l=+l,p>>>=0,w||ae(this,l,p,4,2147483647,-2147483648),0>l&&(l=4294967295+l+1),this[p]=l>>>24,this[p+1]=l>>>16,this[p+2]=l>>>8,this[p+3]=255&l,p+4},c.prototype.writeFloatLE=function(l,p,w){return we(this,l,p,!0,w)},c.prototype.writeFloatBE=function(l,p,w){return we(this,l,p,!1,w)},c.prototype.writeDoubleLE=function(l,p,w){return Re(this,l,p,!0,w)},c.prototype.writeDoubleBE=function(l,p,w){return Re(this,l,p,!1,w)},c.prototype.copy=function(l,p,w,M){if(!c.isBuffer(l))throw new TypeError("argument should be a Buffer");if(w||(w=0),M||M===0||(M=this.length),p>=l.length&&(p=l.length),p||(p=0),0<M&&M<w&&(M=w),M===w||l.length===0||this.length===0)return 0;if(0>p)throw new RangeError("targetStart out of bounds");if(0>w||w>=this.length)throw new RangeError("Index out of range");if(0>M)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),l.length-p<M-w&&(M=l.length-p+w);var O=M-w;if(this===l&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(p,w,M);else if(this===l&&w<p&&p<M)for(var T=O-1;0<=T;--T)l[T+p]=this[T+w];else Uint8Array.prototype.set.call(l,this.subarray(w,M),p);return O},c.prototype.fill=function(l,p,w,M){if(typeof l=="string"){if(typeof p=="string"?(M=p,p=0,w=this.length):typeof w=="string"&&(M=w,w=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!c.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(l.length===1){var O=l.charCodeAt(0);(M==="utf8"&&128>O||M==="latin1")&&(l=O)}}else typeof l=="number"&&(l&=255);if(0>p||this.length<p||this.length<w)throw new RangeError("Out of range index");if(w<=p)return this;p>>>=0,w=w===void 0?this.length:w>>>0,l||(l=0);var T;if(typeof l=="number")for(T=p;T<w;++T)this[T]=l;else{var B=c.isBuffer(l)?l:c.from(l,M),q=B.length;if(q===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(T=0;T<w-p;++T)this[T+p]=B[T%q]}return this};var E=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(i,s,a){(function(u){(function(){function d(){let c;try{c=a.storage.getItem("debug")}catch{}return!c&&typeof u<"u"&&"env"in u&&(c=u.env.DEBUG),c}a.formatArgs=function(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;c.splice(1,0,h,"color: inherit");let g=0,y=0;c[0].replace(/%[a-zA-Z%]/g,S=>{S==="%%"||(g++,S==="%c"&&(y=g))}),c.splice(y,0,h)},a.save=function(c){try{c?a.storage.setItem("debug",c):a.storage.removeItem("debug")}catch{}},a.load=d,a.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage=function(){try{return localStorage}catch{}}(),a.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),s.exports=i("./common")(a);const{formatters:m}=s.exports;m.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}).call(this)}).call(this,i("_process"))},{"./common":5,_process:12}],5:[function(i,s){s.exports=function(a){function u(c){function h(...S){if(!h.enabled)return;const I=h,k=+new Date,C=k-(g||k);I.diff=C,I.prev=g,I.curr=k,g=k,S[0]=u.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let f=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(b,R)=>{if(b==="%%")return"%";f++;const _=u.formatters[R];if(typeof _=="function"){const D=S[f];b=_.call(I,D),S.splice(f,1),f--}return b}),u.formatArgs.call(I,S),(I.log||u.log).apply(I,S)}let g,y=null;return h.namespace=c,h.useColors=u.useColors(),h.color=u.selectColor(c),h.extend=d,h.destroy=u.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>y===null?u.enabled(c):y,set:S=>{y=S}}),typeof u.init=="function"&&u.init(h),h}function d(c,h){const g=u(this.namespace+(typeof h>"u"?":":h)+c);return g.log=this.log,g}function m(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function(c){return c instanceof Error?c.stack||c.message:c},u.disable=function(){const c=[...u.names.map(m),...u.skips.map(m).map(h=>"-"+h)].join(",");return u.enable(""),c},u.enable=function(c){u.save(c),u.names=[],u.skips=[];let h;const g=(typeof c=="string"?c:"").split(/[\s,]+/),y=g.length;for(h=0;h<y;h++)g[h]&&(c=g[h].replace(/\*/g,".*?"),c[0]==="-"?u.skips.push(new RegExp("^"+c.substr(1)+"$")):u.names.push(new RegExp("^"+c+"$")))},u.enabled=function(c){if(c[c.length-1]==="*")return!0;let h,g;for(h=0,g=u.skips.length;h<g;h++)if(u.skips[h].test(c))return!1;for(h=0,g=u.names.length;h<g;h++)if(u.names[h].test(c))return!0;return!1},u.humanize=i("ms"),u.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(c=>{u[c]=a[c]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function(c){let h=0;for(let g=0;g<c.length;g++)h=(h<<5)-h+c.charCodeAt(g),h|=0;return u.colors[r(h)%u.colors.length]},u.enable(u.load()),u}},{ms:11}],6:[function(i,s){function a(u,d){for(const m in d)Object.defineProperty(u,m,{value:d[m],enumerable:!0,configurable:!0});return u}s.exports=function(u,d,m){if(!u||typeof u=="string")throw new TypeError("Please pass an Error to err-code");m||(m={}),typeof d=="object"&&(m=d,d=""),d&&(m.code=d);try{return a(u,m)}catch{m.message=u.message,m.stack=u.stack;const h=function(){};return h.prototype=Object.create(Object.getPrototypeOf(u)),a(new h,m)}}},{}],7:[function(i,s){function a(j){console&&console.warn&&console.warn(j)}function u(){u.init.call(this)}function d(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}function m(j){return j._maxListeners===void 0?u.defaultMaxListeners:j._maxListeners}function c(j,L,F,V){var Q,J,H;if(d(F),J=j._events,J===void 0?(J=j._events=Object.create(null),j._eventsCount=0):(J.newListener!==void 0&&(j.emit("newListener",L,F.listener?F.listener:F),J=j._events),H=J[L]),H===void 0)H=J[L]=F,++j._eventsCount;else if(typeof H=="function"?H=J[L]=V?[F,H]:[H,F]:V?H.unshift(F):H.push(F),Q=m(j),0<Q&&H.length>Q&&!H.warned){H.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+(L+" listeners added. Use emitter.setMaxListeners() to increase limit"));Y.name="MaxListenersExceededWarning",Y.emitter=j,Y.type=L,Y.count=H.length,a(Y)}return j}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(j,L,F){var V={fired:!1,wrapFn:void 0,target:j,type:L,listener:F},Q=h.bind(V);return Q.listener=F,V.wrapFn=Q,Q}function y(j,L,F){var V=j._events;if(V===void 0)return[];var Q=V[L];return Q===void 0?[]:typeof Q=="function"?F?[Q.listener||Q]:[Q]:F?C(Q):I(Q,Q.length)}function S(j){var L=this._events;if(L!==void 0){var F=L[j];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}function I(j,L){for(var F=Array(L),V=0;V<L;++V)F[V]=j[V];return F}function k(j,L){for(;L+1<j.length;L++)j[L]=j[L+1];j.pop()}function C(j){for(var L=Array(j.length),F=0;F<L.length;++F)L[F]=j[F].listener||j[F];return L}function f(j,L,F){typeof j.on=="function"&&x(j,"error",L,F)}function x(j,L,F,V){if(typeof j.on=="function")V.once?j.once(L,F):j.on(L,F);else if(typeof j.addEventListener=="function")j.addEventListener(L,function Q(J){V.once&&j.removeEventListener(L,Q),F(J)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}var b,R=typeof Reflect=="object"?Reflect:null,_=R&&typeof R.apply=="function"?R.apply:function(j,L,F){return Function.prototype.apply.call(j,L,F)};b=R&&typeof R.ownKeys=="function"?R.ownKeys:Object.getOwnPropertySymbols?function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:function(j){return Object.getOwnPropertyNames(j)};var D=Number.isNaN||function(j){return j!==j};s.exports=u,s.exports.once=function(j,L){return new Promise(function(F,V){function Q(H){j.removeListener(L,J),V(H)}function J(){typeof j.removeListener=="function"&&j.removeListener("error",Q),F([].slice.call(arguments))}x(j,L,J,{once:!0}),L!=="error"&&f(j,Q,{once:!0})})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var N=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return N},set:function(j){if(typeof j!="number"||0>j||D(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");N=j}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(j){if(typeof j!="number"||0>j||D(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this},u.prototype.getMaxListeners=function(){return m(this)},u.prototype.emit=function(j){for(var L=[],F=1;F<arguments.length;F++)L.push(arguments[F]);var V=j==="error",Q=this._events;if(Q!==void 0)V=V&&Q.error===void 0;else if(!V)return!1;if(V){var J;if(0<L.length&&(J=L[0]),J instanceof Error)throw J;var H=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw H.context=J,H}var Y=Q[j];if(Y===void 0)return!1;if(typeof Y=="function")_(Y,this,L);else for(var $=Y.length,U=I(Y,$),F=0;F<$;++F)_(U[F],this,L);return!0},u.prototype.addListener=function(j,L){return c(this,j,L,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(j,L){return c(this,j,L,!0)},u.prototype.once=function(j,L){return d(L),this.on(j,g(this,j,L)),this},u.prototype.prependOnceListener=function(j,L){return d(L),this.prependListener(j,g(this,j,L)),this},u.prototype.removeListener=function(j,L){var F,V,Q,J,H;if(d(L),V=this._events,V===void 0)return this;if(F=V[j],F===void 0)return this;if(F===L||F.listener===L)--this._eventsCount==0?this._events=Object.create(null):(delete V[j],V.removeListener&&this.emit("removeListener",j,F.listener||L));else if(typeof F!="function"){for(Q=-1,J=F.length-1;0<=J;J--)if(F[J]===L||F[J].listener===L){H=F[J].listener,Q=J;break}if(0>Q)return this;Q===0?F.shift():k(F,Q),F.length===1&&(V[j]=F[0]),V.removeListener!==void 0&&this.emit("removeListener",j,H||L)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(j){var L,F,V;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[j]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete F[j]),this;if(arguments.length===0){var Q,J=Object.keys(F);for(V=0;V<J.length;++V)Q=J[V],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=F[j],typeof L=="function")this.removeListener(j,L);else if(L!==void 0)for(V=L.length-1;0<=V;V--)this.removeListener(j,L[V]);return this},u.prototype.listeners=function(j){return y(this,j,!0)},u.prototype.rawListeners=function(j){return y(this,j,!1)},u.listenerCount=function(j,L){return typeof j.listenerCount=="function"?j.listenerCount(L):S.call(j,L)},u.prototype.listenerCount=S,u.prototype.eventNames=function(){return 0<this._eventsCount?b(this._events):[]}},{}],8:[function(i,s){s.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],9:[function(i,s,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(u,d,m,c,h){var g,y,S=8*h-c-1,I=(1<<S)-1,k=I>>1,C=-7,f=m?h-1:0,x=m?-1:1,b=u[d+f];for(f+=x,g=b&(1<<-C)-1,b>>=-C,C+=S;0<C;g=256*g+u[d+f],f+=x,C-=8);for(y=g&(1<<-C)-1,g>>=-C,C+=c;0<C;y=256*y+u[d+f],f+=x,C-=8);if(g===0)g=1-k;else{if(g===I)return y?NaN:(b?-1:1)*(1/0);y+=o(2,c),g-=k}return(b?-1:1)*y*o(2,g-c)},a.write=function(u,d,m,c,h,g){var y,S,I,k=Math.LN2,C=Math.log,f=8*g-h-1,x=(1<<f)-1,b=x>>1,R=h===23?o(2,-24)-o(2,-77):0,_=c?0:g-1,D=c?1:-1,N=0>d||d===0&&0>1/d?1:0;for(d=r(d),isNaN(d)||d===1/0?(S=isNaN(d)?1:0,y=x):(y=n(C(d)/k),1>d*(I=o(2,-y))&&(y--,I*=2),d+=1<=y+b?R/I:R*o(2,1-b),2<=d*I&&(y++,I/=2),y+b>=x?(S=0,y=x):1<=y+b?(S=(d*I-1)*o(2,h),y+=b):(S=d*o(2,b-1)*o(2,h),y=0));8<=h;u[m+_]=255&S,_+=D,S/=256,h-=8);for(y=y<<h|S,f+=h;0<f;u[m+_]=255&y,_+=D,y/=256,f-=8);u[m+_-D]|=128*N}},{}],10:[function(i,s){s.exports=typeof Object.create=="function"?function(a,u){u&&(a.super_=u,a.prototype=Object.create(u.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,u){if(u){a.super_=u;var d=function(){};d.prototype=u.prototype,a.prototype=new d,a.prototype.constructor=a}}},{}],11:[function(i,s){var a=Math.round;function u(h){if(h+="",!(100<h.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(g){var y=parseFloat(g[1]),S=(g[2]||"ms").toLowerCase();return S==="years"||S==="year"||S==="yrs"||S==="yr"||S==="y"?315576e5*y:S==="weeks"||S==="week"||S==="w"?6048e5*y:S==="days"||S==="day"||S==="d"?864e5*y:S==="hours"||S==="hour"||S==="hrs"||S==="hr"||S==="h"?36e5*y:S==="minutes"||S==="minute"||S==="mins"||S==="min"||S==="m"?6e4*y:S==="seconds"||S==="second"||S==="secs"||S==="sec"||S==="s"?1e3*y:S==="milliseconds"||S==="millisecond"||S==="msecs"||S==="msec"||S==="ms"?y:void 0}}}function d(h){var g=r(h);return 864e5<=g?a(h/864e5)+"d":36e5<=g?a(h/36e5)+"h":6e4<=g?a(h/6e4)+"m":1e3<=g?a(h/1e3)+"s":h+"ms"}function m(h){var g=r(h);return 864e5<=g?c(h,g,864e5,"day"):36e5<=g?c(h,g,36e5,"hour"):6e4<=g?c(h,g,6e4,"minute"):1e3<=g?c(h,g,1e3,"second"):h+" ms"}function c(h,g,y,S){return a(h/y)+" "+S+(g>=1.5*y?"s":"")}s.exports=function(h,g){g=g||{};var y=typeof h;if(y=="string"&&0<h.length)return u(h);if(y==="number"&&isFinite(h))return g.long?m(h):d(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))}},{}],12:[function(i,s){function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function d(R){if(S===setTimeout)return setTimeout(R,0);if((S===a||!S)&&setTimeout)return S=setTimeout,setTimeout(R,0);try{return S(R,0)}catch{try{return S.call(null,R,0)}catch{return S.call(this,R,0)}}}function m(R){if(I===clearTimeout)return clearTimeout(R);if((I===u||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(R);try{return I(R)}catch{try{return I.call(null,R)}catch{return I.call(this,R)}}}function c(){x&&C&&(x=!1,C.length?f=C.concat(f):b=-1,f.length&&h())}function h(){if(!x){var R=d(c);x=!0;for(var _=f.length;_;){for(C=f,f=[];++b<_;)C&&C[b].run();b=-1,_=f.length}C=null,x=!1,m(R)}}function g(R,_){this.fun=R,this.array=_}function y(){}var S,I,k=s.exports={};(function(){try{S=typeof setTimeout=="function"?setTimeout:a}catch{S=a}try{I=typeof clearTimeout=="function"?clearTimeout:u}catch{I=u}})();var C,f=[],x=!1,b=-1;k.nextTick=function(R){var _=Array(arguments.length-1);if(1<arguments.length)for(var D=1;D<arguments.length;D++)_[D-1]=arguments[D];f.push(new g(R,_)),f.length!==1||x||d(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=y,k.addListener=y,k.once=y,k.off=y,k.removeListener=y,k.removeAllListeners=y,k.emit=y,k.prependListener=y,k.prependOnceListener=y,k.listeners=function(){return[]},k.binding=function(){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},{}],13:[function(i,s){(function(a){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let u;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?a:window):d=>(u||(u=Promise.resolve())).then(d).catch(m=>setTimeout(()=>{throw m},0))}).call(this)}).call(this,typeof Vt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Vt)},{}],14:[function(i,s){(function(a,u){(function(){var d=i("safe-buffer").Buffer,m=u.crypto||u.msCrypto;s.exports=m&&m.getRandomValues?function(c,h){if(c>4294967295)throw new RangeError("requested too many random bytes");var g=d.allocUnsafe(c);if(0<c)if(65536<c)for(var y=0;y<c;y+=65536)m.getRandomValues(g.slice(y,y+65536));else m.getRandomValues(g);return typeof h=="function"?a.nextTick(function(){h(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof Vt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Vt)},{_process:12,"safe-buffer":30}],15:[function(i,s){function a(y,S){y.prototype=Object.create(S.prototype),y.prototype.constructor=y,y.__proto__=S}function u(y,S,I){function k(f,x,b){return typeof S=="string"?S:S(f,x,b)}I||(I=Error);var C=function(f){function x(b,R,_){return f.call(this,k(b,R,_))||this}return a(x,f),x}(I);C.prototype.name=I.name,C.prototype.code=y,g[y]=C}function d(y,S){if(Array.isArray(y)){var I=y.length;return y=y.map(function(k){return k+""}),2<I?"one of ".concat(S," ").concat(y.slice(0,I-1).join(", "),", or ")+y[I-1]:I===2?"one of ".concat(S," ").concat(y[0]," or ").concat(y[1]):"of ".concat(S," ").concat(y[0])}return"of ".concat(S," ").concat(y+"")}function m(y,S,I){return y.substr(0,S.length)===S}function c(y,S,I){return(I===void 0||I>y.length)&&(I=y.length),y.substring(I-S.length,I)===S}function h(y,S,I){return typeof I!="number"&&(I=0),!(I+S.length>y.length)&&y.indexOf(S,I)!==-1}var g={};u("ERR_INVALID_OPT_VALUE",function(y,S){return'The value "'+S+'" is invalid for option "'+y+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(y,S,I){var k;typeof S=="string"&&m(S,"not ")?(k="must not be",S=S.replace(/^not /,"")):k="must be";var C;if(c(y," argument"))C="The ".concat(y," ").concat(k," ").concat(d(S,"type"));else{var f=h(y,".")?"property":"argument";C='The "'.concat(y,'" ').concat(f," ").concat(k," ").concat(d(S,"type"))}return C+=". Received type ".concat(typeof I),C},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=g},{}],16:[function(i,s){(function(a){(function(){function u(k){return this instanceof u?(h.call(this,k),g.call(this,k),this.allowHalfOpen=!0,void(k&&(k.readable===!1&&(this.readable=!1),k.writable===!1&&(this.writable=!1),k.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d))))):new u(k)}function d(){this._writableState.ended||a.nextTick(m,this)}function m(k){k.end()}var c=Object.keys||function(k){var C=[];for(var f in k)C.push(f);return C};s.exports=u;var h=i("./_stream_readable"),g=i("./_stream_writable");i("inherits")(u,h);for(var y,S=c(g.prototype),I=0;I<S.length;I++)y=S[I],u.prototype[y]||(u.prototype[y]=g.prototype[y]);Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(k){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(i,s){function a(d){return this instanceof a?void u.call(this,d):new a(d)}s.exports=a;var u=i("./_stream_transform");i("inherits")(a,u),a.prototype._transform=function(d,m,c){c(null,d)}},{"./_stream_transform":19,inherits:10}],18:[function(i,s){(function(a,u){(function(){function d(E){return le.from(E)}function m(E){return le.isBuffer(E)||E instanceof ue}function c(E,l,p){return typeof E.prependListener=="function"?E.prependListener(l,p):void(E._events&&E._events[l]?Array.isArray(E._events[l])?E._events[l].unshift(p):E._events[l]=[p,E._events[l]]:E.on(l,p))}function h(E,l,p){$=$||i("./_stream_duplex"),E=E||{},typeof p!="boolean"&&(p=l instanceof $),this.objectMode=!!E.objectMode,p&&(this.objectMode=this.objectMode||!!E.readableObjectMode),this.highWaterMark=ye(this,E,"readableHighWaterMark",p),this.buffer=new Ie,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.destroyed=!1,this.defaultEncoding=E.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,E.encoding&&(!Ce&&(Ce=i("string_decoder/").StringDecoder),this.decoder=new Ce(E.encoding),this.encoding=E.encoding)}function g(E){if($=$||i("./_stream_duplex"),!(this instanceof g))return new g(E);var l=this instanceof $;this._readableState=new h(E,this,l),this.readable=!0,E&&(typeof E.read=="function"&&(this._read=E.read),typeof E.destroy=="function"&&(this._destroy=E.destroy)),ee.call(this)}function y(E,l,p,w,M){U("readableAddChunk",l);var O=E._readableState;if(l===null)O.reading=!1,f(E,O);else{var T;if(M||(T=I(O,l)),T)W(E,T);else if(!(O.objectMode||l&&0<l.length))w||(O.reading=!1,R(E,O));else if(typeof l=="string"||O.objectMode||Object.getPrototypeOf(l)===le.prototype||(l=d(l)),w)O.endEmitted?W(E,new z):S(E,O,l,!0);else if(O.ended)W(E,new me);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!p?(l=O.decoder.write(l),O.objectMode||l.length!==0?S(E,O,l,!1):R(E,O)):S(E,O,l,!1)}}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function S(E,l,p,w){l.flowing&&l.length===0&&!l.sync?(l.awaitDrain=0,E.emit("data",p)):(l.length+=l.objectMode?1:p.length,w?l.buffer.unshift(p):l.buffer.push(p),l.needReadable&&x(E)),R(E,l)}function I(E,l){var p;return m(l)||typeof l=="string"||l===void 0||E.objectMode||(p=new re("chunk",["string","Buffer","Uint8Array"],l)),p}function k(E){return 1073741824<=E?E=1073741824:(E--,E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,E|=E>>>16,E++),E}function C(E,l){return 0>=E||l.length===0&&l.ended?0:l.objectMode?1:E===E?(E>l.highWaterMark&&(l.highWaterMark=k(E)),E<=l.length?E:l.ended?l.length:(l.needReadable=!0,0)):l.flowing&&l.length?l.buffer.head.data.length:l.length}function f(E,l){if(U("onEofChunk"),!l.ended){if(l.decoder){var p=l.decoder.end();p&&p.length&&(l.buffer.push(p),l.length+=l.objectMode?1:p.length)}l.ended=!0,l.sync?x(E):(l.needReadable=!1,!l.emittedReadable&&(l.emittedReadable=!0,b(E)))}}function x(E){var l=E._readableState;U("emitReadable",l.needReadable,l.emittedReadable),l.needReadable=!1,l.emittedReadable||(U("emitReadable",l.flowing),l.emittedReadable=!0,a.nextTick(b,E))}function b(E){var l=E._readableState;U("emitReadable_",l.destroyed,l.length,l.ended),!l.destroyed&&(l.length||l.ended)&&(E.emit("readable"),l.emittedReadable=!1),l.needReadable=!l.flowing&&!l.ended&&l.length<=l.highWaterMark,V(E)}function R(E,l){l.readingMore||(l.readingMore=!0,a.nextTick(_,E,l))}function _(E,l){for(;!l.reading&&!l.ended&&(l.length<l.highWaterMark||l.flowing&&l.length===0);){var p=l.length;if(U("maybeReadMore read 0"),E.read(0),p===l.length)break}l.readingMore=!1}function D(E){return function(){var l=E._readableState;U("pipeOnDrain",l.awaitDrain),l.awaitDrain&&l.awaitDrain--,l.awaitDrain===0&&X(E,"data")&&(l.flowing=!0,V(E))}}function N(E){var l=E._readableState;l.readableListening=0<E.listenerCount("readable"),l.resumeScheduled&&!l.paused?l.flowing=!0:0<E.listenerCount("data")&&E.resume()}function j(E){U("readable nexttick read 0"),E.read(0)}function L(E,l){l.resumeScheduled||(l.resumeScheduled=!0,a.nextTick(F,E,l))}function F(E,l){U("resume",l.reading),l.reading||E.read(0),l.resumeScheduled=!1,E.emit("resume"),V(E),l.flowing&&!l.reading&&E.read(0)}function V(E){var l=E._readableState;for(U("flow",l.flowing);l.flowing&&E.read()!==null;);}function Q(E,l){if(l.length===0)return null;var p;return l.objectMode?p=l.buffer.shift():!E||E>=l.length?(p=l.decoder?l.buffer.join(""):l.buffer.length===1?l.buffer.first():l.buffer.concat(l.length),l.buffer.clear()):p=l.buffer.consume(E,l.decoder),p}function J(E){var l=E._readableState;U("endReadable",l.endEmitted),l.endEmitted||(l.ended=!0,a.nextTick(H,l,E))}function H(E,l){if(U("endReadableNT",E.endEmitted,E.length),!E.endEmitted&&E.length===0&&(E.endEmitted=!0,l.readable=!1,l.emit("end"),E.autoDestroy)){var p=l._writableState;(!p||p.autoDestroy&&p.finished)&&l.destroy()}}function Y(E,l){for(var p=0,w=E.length;p<w;p++)if(E[p]===l)return p;return-1}s.exports=g;var $;g.ReadableState=h;var U;i("events").EventEmitter;var X=function(E,l){return E.listeners(l).length},ee=i("./internal/streams/stream"),le=i("buffer").Buffer,ue=u.Uint8Array||function(){},ae=i("util");U=ae&&ae.debuglog?ae.debuglog("stream"):function(){};var Ce,we,Re,Ie=i("./internal/streams/buffer_list"),Ze=i("./internal/streams/destroy"),ut=i("./internal/streams/state"),ye=ut.getHighWaterMark,P=i("../errors").codes,re=P.ERR_INVALID_ARG_TYPE,me=P.ERR_STREAM_PUSH_AFTER_EOF,A=P.ERR_METHOD_NOT_IMPLEMENTED,z=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(g,ee);var W=Ze.errorOrDestroy,Z=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),g.prototype.destroy=Ze.destroy,g.prototype._undestroy=Ze.undestroy,g.prototype._destroy=function(E,l){l(E)},g.prototype.push=function(E,l){var p,w=this._readableState;return w.objectMode?p=!0:typeof E=="string"&&(l=l||w.defaultEncoding,l!==w.encoding&&(E=le.from(E,l),l=""),p=!0),y(this,E,l,!1,p)},g.prototype.unshift=function(E){return y(this,E,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(E){Ce||(Ce=i("string_decoder/").StringDecoder);var l=new Ce(E);this._readableState.decoder=l,this._readableState.encoding=this._readableState.decoder.encoding;for(var p=this._readableState.buffer.head,w="";p!==null;)w+=l.write(p.data),p=p.next;return this._readableState.buffer.clear(),w!==""&&this._readableState.buffer.push(w),this._readableState.length=w.length,this},g.prototype.read=function(E){U("read",E),E=parseInt(E,10);var l=this._readableState,p=E;if(E!==0&&(l.emittedReadable=!1),E===0&&l.needReadable&&((l.highWaterMark===0?0<l.length:l.length>=l.highWaterMark)||l.ended))return U("read: emitReadable",l.length,l.ended),l.length===0&&l.ended?J(this):x(this),null;if(E=C(E,l),E===0&&l.ended)return l.length===0&&J(this),null;var w=l.needReadable;U("need readable",w),(l.length===0||l.length-E<l.highWaterMark)&&(w=!0,U("length less than watermark",w)),l.ended||l.reading?(w=!1,U("reading or ended",w)):w&&(U("do read"),l.reading=!0,l.sync=!0,l.length===0&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,!l.reading&&(E=C(p,l)));var M;return M=0<E?Q(E,l):null,M===null?(l.needReadable=l.length<=l.highWaterMark,E=0):(l.length-=E,l.awaitDrain=0),l.length===0&&(!l.ended&&(l.needReadable=!0),p!==E&&l.ended&&J(this)),M!==null&&this.emit("data",M),M},g.prototype._read=function(){W(this,new A("_read()"))},g.prototype.pipe=function(E,l){function p(kr,Cr){U("onunpipe"),kr===te&&Cr&&Cr.hasUnpiped===!1&&(Cr.hasUnpiped=!0,M())}function w(){U("onend"),E.end()}function M(){U("cleanup"),E.removeListener("close",B),E.removeListener("finish",q),E.removeListener("drain",_t),E.removeListener("error",T),E.removeListener("unpipe",p),te.removeListener("end",w),te.removeListener("end",oe),te.removeListener("data",O),Et=!0,ie.awaitDrain&&(!E._writableState||E._writableState.needDrain)&&_t()}function O(kr){U("ondata");var Cr=E.write(kr);U("dest.write",Cr),Cr===!1&&((ie.pipesCount===1&&ie.pipes===E||1<ie.pipesCount&&Y(ie.pipes,E)!==-1)&&!Et&&(U("false write response, pause",ie.awaitDrain),ie.awaitDrain++),te.pause())}function T(kr){U("onerror",kr),oe(),E.removeListener("error",T),X(E,"error")===0&&W(E,kr)}function B(){E.removeListener("finish",q),oe()}function q(){U("onfinish"),E.removeListener("close",B),oe()}function oe(){U("unpipe"),te.unpipe(E)}var te=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=E;break;case 1:ie.pipes=[ie.pipes,E];break;default:ie.pipes.push(E)}ie.pipesCount+=1,U("pipe count=%d opts=%j",ie.pipesCount,l);var pe=(!l||l.end!==!1)&&E!==a.stdout&&E!==a.stderr,_e=pe?w:oe;ie.endEmitted?a.nextTick(_e):te.once("end",_e),E.on("unpipe",p);var _t=D(te);E.on("drain",_t);var Et=!1;return te.on("data",O),c(E,"error",T),E.once("close",B),E.once("finish",q),E.emit("pipe",te),ie.flowing||(U("pipe resume"),te.resume()),E},g.prototype.unpipe=function(E){var l=this._readableState,p={hasUnpiped:!1};if(l.pipesCount===0)return this;if(l.pipesCount===1)return E&&E!==l.pipes?this:(E||(E=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,E&&E.emit("unpipe",this,p),this);if(!E){var w=l.pipes,M=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var O=0;O<M;O++)w[O].emit("unpipe",this,{hasUnpiped:!1});return this}var T=Y(l.pipes,E);return T===-1?this:(l.pipes.splice(T,1),l.pipesCount-=1,l.pipesCount===1&&(l.pipes=l.pipes[0]),E.emit("unpipe",this,p),this)},g.prototype.on=function(E,l){var p=ee.prototype.on.call(this,E,l),w=this._readableState;return E==="data"?(w.readableListening=0<this.listenerCount("readable"),w.flowing!==!1&&this.resume()):E=="readable"&&!w.endEmitted&&!w.readableListening&&(w.readableListening=w.needReadable=!0,w.flowing=!1,w.emittedReadable=!1,U("on readable",w.length,w.reading),w.length?x(this):!w.reading&&a.nextTick(j,this)),p},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(E,l){var p=ee.prototype.removeListener.call(this,E,l);return E==="readable"&&a.nextTick(N,this),p},g.prototype.removeAllListeners=function(E){var l=ee.prototype.removeAllListeners.apply(this,arguments);return(E==="readable"||E===void 0)&&a.nextTick(N,this),l},g.prototype.resume=function(){var E=this._readableState;return E.flowing||(U("resume"),E.flowing=!E.readableListening,L(this,E)),E.paused=!1,this},g.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(E){var l=this,p=this._readableState,w=!1;for(var M in E.on("end",function(){if(U("wrapped end"),p.decoder&&!p.ended){var T=p.decoder.end();T&&T.length&&l.push(T)}l.push(null)}),E.on("data",function(T){if(U("wrapped data"),p.decoder&&(T=p.decoder.write(T)),!(p.objectMode&&T==null)&&(p.objectMode||T&&T.length)){var B=l.push(T);B||(w=!0,E.pause())}}),E)this[M]===void 0&&typeof E[M]=="function"&&(this[M]=function(T){return function(){return E[T].apply(E,arguments)}}(M));for(var O=0;O<Z.length;O++)E.on(Z[O],this.emit.bind(this,Z[O]));return this._read=function(T){U("wrapped _read",T),w&&(w=!1,E.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return we===void 0&&(we=i("./internal/streams/async_iterator")),we(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),g._fromList=Q,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(E,l){return Re===void 0&&(Re=i("./internal/streams/from")),Re(g,E,l)})}).call(this)}).call(this,i("_process"),typeof Vt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Vt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(i,s){function a(k,C){var f=this._transformState;f.transforming=!1;var x=f.writecb;if(x===null)return this.emit("error",new g);f.writechunk=null,f.writecb=null,C!=null&&this.push(C),x(k);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function u(k){return this instanceof u?(I.call(this,k),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,k&&(typeof k.transform=="function"&&(this._transform=k.transform),typeof k.flush=="function"&&(this._flush=k.flush)),void this.on("prefinish",d)):new u(k)}function d(){var k=this;typeof this._flush!="function"||this._readableState.destroyed?m(this,null,null):this._flush(function(C,f){m(k,C,f)})}function m(k,C,f){if(C)return k.emit("error",C);if(f!=null&&k.push(f),k._writableState.length)throw new S;if(k._transformState.transforming)throw new y;return k.push(null)}s.exports=u;var c=i("../errors").codes,h=c.ERR_METHOD_NOT_IMPLEMENTED,g=c.ERR_MULTIPLE_CALLBACK,y=c.ERR_TRANSFORM_ALREADY_TRANSFORMING,S=c.ERR_TRANSFORM_WITH_LENGTH_0,I=i("./_stream_duplex");i("inherits")(u,I),u.prototype.push=function(k,C){return this._transformState.needTransform=!1,I.prototype.push.call(this,k,C)},u.prototype._transform=function(k,C,f){f(new h("_transform()"))},u.prototype._write=function(k,C,f){var x=this._transformState;if(x.writecb=f,x.writechunk=k,x.writeencoding=C,!x.transforming){var b=this._readableState;(x.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},u.prototype._read=function(){var k=this._transformState;k.writechunk===null||k.transforming?k.needTransform=!0:(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform))},u.prototype._destroy=function(k,C){I.prototype._destroy.call(this,k,function(f){C(f)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(i,s){(function(a,u){(function(){function d(A){var z=this;this.next=null,this.entry=null,this.finish=function(){J(z,A)}}function m(A){return U.from(A)}function c(A){return U.isBuffer(A)||A instanceof X}function h(){}function g(A,z,W){H=H||i("./_stream_duplex"),A=A||{},typeof W!="boolean"&&(W=z instanceof H),this.objectMode=!!A.objectMode,W&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=ue(this,A,"writableHighWaterMark",W),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Z=A.decodeStrings===!1;this.decodeStrings=!Z,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(E){R(z,E)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function y(A){H=H||i("./_stream_duplex");var z=this instanceof H;return z||me.call(y,this)?(this._writableState=new g(A,this,z),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),void $.call(this)):new y(A)}function S(A,z){var W=new ye;re(A,W),a.nextTick(z,W)}function I(A,z,W,Z){var E;return W===null?E=new ut:typeof W!="string"&&!z.objectMode&&(E=new Ce("chunk",["string","Buffer"],W)),!E||(re(A,E),a.nextTick(Z,E),!1)}function k(A,z,W){return A.objectMode||A.decodeStrings===!1||typeof z!="string"||(z=U.from(z,W)),z}function C(A,z,W,Z,E,l){if(!W){var p=k(z,Z,E);Z!==p&&(W=!0,E="buffer",Z=p)}var w=z.objectMode?1:Z.length;z.length+=w;var M=z.length<z.highWaterMark;if(M||(z.needDrain=!0),z.writing||z.corked){var O=z.lastBufferedRequest;z.lastBufferedRequest={chunk:Z,encoding:E,isBuf:W,callback:l,next:null},O?O.next=z.lastBufferedRequest:z.bufferedRequest=z.lastBufferedRequest,z.bufferedRequestCount+=1}else f(A,z,!1,w,Z,E,l);return M}function f(A,z,W,Z,E,l,p){z.writelen=Z,z.writecb=p,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new Ze("write")):W?A._writev(E,z.onwrite):A._write(E,l,z.onwrite),z.sync=!1}function x(A,z,W,Z,E){--z.pendingcb,W?(a.nextTick(E,Z),a.nextTick(V,A,z),A._writableState.errorEmitted=!0,re(A,Z)):(E(Z),A._writableState.errorEmitted=!0,re(A,Z),V(A,z))}function b(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function R(A,z){var W=A._writableState,Z=W.sync,E=W.writecb;if(typeof E!="function")throw new Re;if(b(W),z)x(A,W,Z,z,E);else{var l=j(W)||A.destroyed;l||W.corked||W.bufferProcessing||!W.bufferedRequest||N(A,W),Z?a.nextTick(_,A,W,l,E):_(A,W,l,E)}}function _(A,z,W,Z){W||D(A,z),z.pendingcb--,Z(),V(A,z)}function D(A,z){z.length===0&&z.needDrain&&(z.needDrain=!1,A.emit("drain"))}function N(A,z){z.bufferProcessing=!0;var W=z.bufferedRequest;if(A._writev&&W&&W.next){var Z=z.bufferedRequestCount,E=Array(Z),l=z.corkedRequestsFree;l.entry=W;for(var p=0,w=!0;W;)E[p]=W,W.isBuf||(w=!1),W=W.next,p+=1;E.allBuffers=w,f(A,z,!0,z.length,E,"",l.finish),z.pendingcb++,z.lastBufferedRequest=null,l.next?(z.corkedRequestsFree=l.next,l.next=null):z.corkedRequestsFree=new d(z),z.bufferedRequestCount=0}else{for(;W;){var M=W.chunk,O=W.encoding,T=W.callback,B=z.objectMode?1:M.length;if(f(A,z,!1,B,M,O,T),W=W.next,z.bufferedRequestCount--,z.writing)break}W===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=W,z.bufferProcessing=!1}function j(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function L(A,z){A._final(function(W){z.pendingcb--,W&&re(A,W),z.prefinished=!0,A.emit("prefinish"),V(A,z)})}function F(A,z){z.prefinished||z.finalCalled||(typeof A._final!="function"||z.destroyed?(z.prefinished=!0,A.emit("prefinish")):(z.pendingcb++,z.finalCalled=!0,a.nextTick(L,A,z)))}function V(A,z){var W=j(z);if(W&&(F(A,z),z.pendingcb===0&&(z.finished=!0,A.emit("finish"),z.autoDestroy))){var Z=A._readableState;(!Z||Z.autoDestroy&&Z.endEmitted)&&A.destroy()}return W}function Q(A,z,W){z.ending=!0,V(A,z),W&&(z.finished?a.nextTick(W):A.once("finish",W)),z.ended=!0,A.writable=!1}function J(A,z,W){var Z=A.entry;for(A.entry=null;Z;){var E=Z.callback;z.pendingcb--,E(W),Z=Z.next}z.corkedRequestsFree.next=A}s.exports=y;var H;y.WritableState=g;var Y={deprecate:i("util-deprecate")},$=i("./internal/streams/stream"),U=i("buffer").Buffer,X=u.Uint8Array||function(){},ee=i("./internal/streams/destroy"),le=i("./internal/streams/state"),ue=le.getHighWaterMark,ae=i("../errors").codes,Ce=ae.ERR_INVALID_ARG_TYPE,we=ae.ERR_METHOD_NOT_IMPLEMENTED,Re=ae.ERR_MULTIPLE_CALLBACK,Ie=ae.ERR_STREAM_CANNOT_PIPE,Ze=ae.ERR_STREAM_DESTROYED,ut=ae.ERR_STREAM_NULL_VALUES,ye=ae.ERR_STREAM_WRITE_AFTER_END,P=ae.ERR_UNKNOWN_ENCODING,re=ee.errorOrDestroy;i("inherits")(y,$),g.prototype.getBuffer=function(){for(var A=this.bufferedRequest,z=[];A;)z.push(A),A=A.next;return z},function(){try{Object.defineProperty(g.prototype,"buffer",{get:Y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var me;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(me=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(A){return!!me.call(this,A)||this===y&&A&&A._writableState instanceof g}})):me=function(A){return A instanceof this},y.prototype.pipe=function(){re(this,new Ie)},y.prototype.write=function(A,z,W){var Z=this._writableState,E=!1,l=!Z.objectMode&&c(A);return l&&!U.isBuffer(A)&&(A=m(A)),typeof z=="function"&&(W=z,z=null),l?z="buffer":!z&&(z=Z.defaultEncoding),typeof W!="function"&&(W=h),Z.ending?S(this,W):(l||I(this,Z,A,W))&&(Z.pendingcb++,E=C(this,Z,l,A,z,W)),E},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&N(this,A))},y.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())))throw new P(A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(A,z,W){W(new we("_write()"))},y.prototype._writev=null,y.prototype.end=function(A,z,W){var Z=this._writableState;return typeof A=="function"?(W=A,A=null,z=null):typeof z=="function"&&(W=z,z=null),A!=null&&this.write(A,z),Z.corked&&(Z.corked=1,this.uncork()),Z.ending||Q(this,Z,W),this},Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),y.prototype.destroy=ee.destroy,y.prototype._undestroy=ee.undestroy,y.prototype._destroy=function(A,z){z(A)}}).call(this)}).call(this,i("_process"),typeof Vt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Vt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(i,s){(function(a){(function(){function u(D,N,j){return N in D?Object.defineProperty(D,N,{value:j,enumerable:!0,configurable:!0,writable:!0}):D[N]=j,D}function d(D,N){return{value:D,done:N}}function m(D){var N=D[S];if(N!==null){var j=D[b].read();j!==null&&(D[f]=null,D[S]=null,D[I]=null,N(d(j,!1)))}}function c(D){a.nextTick(m,D)}function h(D,N){return function(j,L){D.then(function(){return N[C]?void j(d(void 0,!0)):void N[x](j,L)},L)}}var g,y=i("./end-of-stream"),S=Symbol("lastResolve"),I=Symbol("lastReject"),k=Symbol("error"),C=Symbol("ended"),f=Symbol("lastPromise"),x=Symbol("handlePromise"),b=Symbol("stream"),R=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((g={get stream(){return this[b]},next:function(){var D=this,N=this[k];if(N!==null)return Promise.reject(N);if(this[C])return Promise.resolve(d(void 0,!0));if(this[b].destroyed)return new Promise(function(V,Q){a.nextTick(function(){D[k]?Q(D[k]):V(d(void 0,!0))})});var j,L=this[f];if(L)j=new Promise(h(L,this));else{var F=this[b].read();if(F!==null)return Promise.resolve(d(F,!1));j=new Promise(this[x])}return this[f]=j,j}},u(g,Symbol.asyncIterator,function(){return this}),u(g,"return",function(){var D=this;return new Promise(function(N,j){D[b].destroy(null,function(L){return L?void j(L):void N(d(void 0,!0))})})}),g),R);s.exports=function(D){var N,j=Object.create(_,(N={},u(N,b,{value:D,writable:!0}),u(N,S,{value:null,writable:!0}),u(N,I,{value:null,writable:!0}),u(N,k,{value:null,writable:!0}),u(N,C,{value:D._readableState.endEmitted,writable:!0}),u(N,x,{value:function(L,F){var V=j[b].read();V?(j[f]=null,j[S]=null,j[I]=null,L(d(V,!1))):(j[S]=L,j[I]=F)},writable:!0}),N));return j[f]=null,y(D,function(L){if(L&&L.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=j[I];return F!==null&&(j[f]=null,j[S]=null,j[I]=null,F(L)),void(j[k]=L)}var V=j[S];V!==null&&(j[f]=null,j[S]=null,j[I]=null,V(d(void 0,!0))),j[C]=!0}),D.on("readable",c.bind(null,j)),j}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":24,_process:12}],22:[function(i,s){function a(f,x){var b=Object.keys(f);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(f);x&&(R=R.filter(function(_){return Object.getOwnPropertyDescriptor(f,_).enumerable})),b.push.apply(b,R)}return b}function u(f){for(var x,b=1;b<arguments.length;b++)x=arguments[b]==null?{}:arguments[b],b%2?a(Object(x),!0).forEach(function(R){d(f,R,x[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(x)):a(Object(x)).forEach(function(R){Object.defineProperty(f,R,Object.getOwnPropertyDescriptor(x,R))});return f}function d(f,x,b){return x in f?Object.defineProperty(f,x,{value:b,enumerable:!0,configurable:!0,writable:!0}):f[x]=b,f}function m(f,x){if(!(f instanceof x))throw new TypeError("Cannot call a class as a function")}function c(f,x){for(var b,R=0;R<x.length;R++)b=x[R],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}function h(f,x,b){return x&&c(f.prototype,x),f}function g(f,x,b){S.prototype.copy.call(f,x,b)}var y=i("buffer"),S=y.Buffer,I=i("util"),k=I.inspect,C=k&&k.custom||"inspect";s.exports=function(){function f(){m(this,f),this.head=null,this.tail=null,this.length=0}return h(f,[{key:"push",value:function(x){var b={data:x,next:null};0<this.length?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(x){var b={data:x,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var x=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,x}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(x){if(this.length===0)return"";for(var b=this.head,R=""+b.data;b=b.next;)R+=x+b.data;return R}},{key:"concat",value:function(x){if(this.length===0)return S.alloc(0);for(var b=S.allocUnsafe(x>>>0),R=this.head,_=0;R;)g(R.data,b,_),_+=R.data.length,R=R.next;return b}},{key:"consume",value:function(x,b){var R;return x<this.head.data.length?(R=this.head.data.slice(0,x),this.head.data=this.head.data.slice(x)):x===this.head.data.length?R=this.shift():R=b?this._getString(x):this._getBuffer(x),R}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(x){var b=this.head,R=1,_=b.data;for(x-=_.length;b=b.next;){var D=b.data,N=x>D.length?D.length:x;if(_+=N===D.length?D:D.slice(0,x),x-=N,x===0){N===D.length?(++R,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=D.slice(N));break}++R}return this.length-=R,_}},{key:"_getBuffer",value:function(x){var b=S.allocUnsafe(x),R=this.head,_=1;for(R.data.copy(b),x-=R.data.length;R=R.next;){var D=R.data,N=x>D.length?D.length:x;if(D.copy(b,b.length-x,0,N),x-=N,x===0){N===D.length?(++_,this.head=R.next?R.next:this.tail=null):(this.head=R,R.data=D.slice(N));break}++_}return this.length-=_,b}},{key:C,value:function(x,b){return k(this,u({},b,{depth:0,customInspect:!1}))}}]),f}()},{buffer:3,util:2}],23:[function(i,s){(function(a){(function(){function u(c,h){m(c,h),d(c)}function d(c){c._writableState&&!c._writableState.emitClose||c._readableState&&!c._readableState.emitClose||c.emit("close")}function m(c,h){c.emit("error",h)}s.exports={destroy:function(c,h){var g=this,y=this._readableState&&this._readableState.destroyed,S=this._writableState&&this._writableState.destroyed;return y||S?(h?h(c):c&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,a.nextTick(m,this,c)):a.nextTick(m,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,function(I){!h&&I?g._writableState?g._writableState.errorEmitted?a.nextTick(d,g):(g._writableState.errorEmitted=!0,a.nextTick(u,g,I)):a.nextTick(u,g,I):h?(a.nextTick(d,g),h(I)):a.nextTick(d,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(c,h){var g=c._readableState,y=c._writableState;g&&g.autoDestroy||y&&y.autoDestroy?c.destroy(h):c.emit("error",h)}}}).call(this)}).call(this,i("_process"))},{_process:12}],24:[function(i,s){function a(h){var g=!1;return function(){if(!g){g=!0;for(var y=arguments.length,S=Array(y),I=0;I<y;I++)S[I]=arguments[I];h.apply(this,S)}}}function u(){}function d(h){return h.setHeader&&typeof h.abort=="function"}function m(h,g,y){if(typeof g=="function")return m(h,null,g);g||(g={}),y=a(y||u);var S=g.readable||g.readable!==!1&&h.readable,I=g.writable||g.writable!==!1&&h.writable,k=function(){h.writable||f()},C=h._writableState&&h._writableState.finished,f=function(){I=!1,C=!0,S||y.call(h)},x=h._readableState&&h._readableState.endEmitted,b=function(){S=!1,x=!0,I||y.call(h)},R=function(N){y.call(h,N)},_=function(){var N;return S&&!x?(h._readableState&&h._readableState.ended||(N=new c),y.call(h,N)):I&&!C?(h._writableState&&h._writableState.ended||(N=new c),y.call(h,N)):void 0},D=function(){h.req.on("finish",f)};return d(h)?(h.on("complete",f),h.on("abort",_),h.req?D():h.on("request",D)):I&&!h._writableState&&(h.on("end",k),h.on("close",k)),h.on("end",b),h.on("finish",f),g.error!==!1&&h.on("error",R),h.on("close",_),function(){h.removeListener("complete",f),h.removeListener("abort",_),h.removeListener("request",D),h.req&&h.req.removeListener("finish",f),h.removeListener("end",k),h.removeListener("close",k),h.removeListener("finish",f),h.removeListener("end",b),h.removeListener("error",R),h.removeListener("close",_)}}var c=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;s.exports=m},{"../../../errors":15}],25:[function(i,s){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(i,s){function a(C){var f=!1;return function(){f||(f=!0,C.apply(void 0,arguments))}}function u(C){if(C)throw C}function d(C){return C.setHeader&&typeof C.abort=="function"}function m(C,f,x,b){b=a(b);var R=!1;C.on("close",function(){R=!0}),y===void 0&&(y=i("./end-of-stream")),y(C,{readable:f,writable:x},function(D){return D?b(D):(R=!0,void b())});var _=!1;return function(D){if(!R)return _?void 0:(_=!0,d(C)?C.abort():typeof C.destroy=="function"?C.destroy():void b(D||new k("pipe")))}}function c(C){C()}function h(C,f){return C.pipe(f)}function g(C){return C.length&&typeof C[C.length-1]=="function"?C.pop():u}var y,S=i("../../../errors").codes,I=S.ERR_MISSING_ARGS,k=S.ERR_STREAM_DESTROYED;s.exports=function(){for(var C=arguments.length,f=Array(C),x=0;x<C;x++)f[x]=arguments[x];var b=g(f);if(Array.isArray(f[0])&&(f=f[0]),2>f.length)throw new I("streams");var R,_=f.map(function(D,N){var j=N<f.length-1;return m(D,j,0<N,function(L){R||(R=L),L&&_.forEach(c),j||(_.forEach(c),b(R))})});return f.reduce(h)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(i,s){function a(d,m,c){return d.highWaterMark==null?m?d[c]:null:d.highWaterMark}var u=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(d,m,c,h){var g=a(m,h,c);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var y=h?c:"highWaterMark";throw new u(y,g)}return n(g)}return d.objectMode?16:16384}}},{"../../../errors":15}],28:[function(i,s){s.exports=i("events").EventEmitter},{events:7}],29:[function(i,s,a){a=s.exports=i("./lib/_stream_readable.js"),a.Stream=a,a.Readable=a,a.Writable=i("./lib/_stream_writable.js"),a.Duplex=i("./lib/_stream_duplex.js"),a.Transform=i("./lib/_stream_transform.js"),a.PassThrough=i("./lib/_stream_passthrough.js"),a.finished=i("./lib/internal/streams/end-of-stream.js"),a.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(i,s,a){function u(h,g){for(var y in h)g[y]=h[y]}function d(h,g,y){return c(h,g,y)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var m=i("buffer"),c=m.Buffer;c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?s.exports=m:(u(m,a),a.Buffer=d),d.prototype=Object.create(c.prototype),u(c,d),d.from=function(h,g,y){if(typeof h=="number")throw new TypeError("Argument must not be a number");return c(h,g,y)},d.alloc=function(h,g,y){if(typeof h!="number")throw new TypeError("Argument must be a number");var S=c(h);return g===void 0?S.fill(0):typeof y=="string"?S.fill(g,y):S.fill(g),S},d.allocUnsafe=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return c(h)},d.allocUnsafeSlow=function(h){if(typeof h!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(h)}},{buffer:3}],31:[function(i,s,a){function u(_){if(!_)return"utf8";for(var D;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(D)return;_=(""+_).toLowerCase(),D=!0}}function d(_){var D=u(_);if(typeof D!="string"&&(b.isEncoding===R||!R(_)))throw new Error("Unknown encoding: "+_);return D||_}function m(_){this.encoding=d(_);var D;switch(this.encoding){case"utf16le":this.text=S,this.end=I,D=4;break;case"utf8":this.fillLast=y,D=4;break;case"base64":this.text=k,this.end=C,D=3;break;default:return this.write=f,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(D)}function c(_){return 127>=_?0:_>>5==6?2:_>>4==14?3:_>>3==30?4:_>>6==2?-1:-2}function h(_,D,N){var j=D.length-1;if(j<N)return 0;var L=c(D[j]);return 0<=L?(0<L&&(_.lastNeed=L-1),L):--j<N||L===-2?0:(L=c(D[j]),0<=L?(0<L&&(_.lastNeed=L-2),L):--j<N||L===-2?0:(L=c(D[j]),0<=L?(0<L&&(L===2?L=0:_.lastNeed=L-3),L):0))}function g(_,D){if((192&D[0])!=128)return _.lastNeed=0,"";if(1<_.lastNeed&&1<D.length){if((192&D[1])!=128)return _.lastNeed=1,"";if(2<_.lastNeed&&2<D.length&&(192&D[2])!=128)return _.lastNeed=2,""}}function y(_){var D=this.lastTotal-this.lastNeed,N=g(this,_);return N===void 0?this.lastNeed<=_.length?(_.copy(this.lastChar,D,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,D,0,_.length),void(this.lastNeed-=_.length)):N}function S(_,D){if((_.length-D)%2==0){var N=_.toString("utf16le",D);if(N){var j=N.charCodeAt(N.length-1);if(55296<=j&&56319>=j)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",D,_.length-1)}function I(_){var D=_&&_.length?this.write(_):"";if(this.lastNeed){var N=this.lastTotal-this.lastNeed;return D+this.lastChar.toString("utf16le",0,N)}return D}function k(_,D){var N=(_.length-D)%3;return N==0?_.toString("base64",D):(this.lastNeed=3-N,this.lastTotal=3,N==1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",D,_.length-N))}function C(_){var D=_&&_.length?this.write(_):"";return this.lastNeed?D+this.lastChar.toString("base64",0,3-this.lastNeed):D}function f(_){return _.toString(this.encoding)}function x(_){return _&&_.length?this.write(_):""}var b=i("safe-buffer").Buffer,R=b.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};a.StringDecoder=m,m.prototype.write=function(_){if(_.length===0)return"";var D,N;if(this.lastNeed){if(D=this.fillLast(_),D===void 0)return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<_.length?D?D+this.text(_,N):this.text(_,N):D||""},m.prototype.end=function(_){var D=_&&_.length?this.write(_):"";return this.lastNeed?D+"":D},m.prototype.text=function(_,D){var N=h(this,_,D);if(!this.lastNeed)return _.toString("utf8",D);this.lastTotal=N;var j=_.length-(N-this.lastNeed);return _.copy(this.lastChar,0,j),_.toString("utf8",D,j)},m.prototype.fillLast=function(_){return this.lastNeed<=_.length?(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),void(this.lastNeed-=_.length))}},{"safe-buffer":30}],32:[function(i,s){(function(a){(function(){function u(d){try{if(!a.localStorage)return!1}catch{return!1}var m=a.localStorage[d];return m!=null&&(m+"").toLowerCase()==="true"}s.exports=function(d,m){function c(){if(!h){if(u("throwDeprecation"))throw new Error(m);u("traceDeprecation")?console.trace(m):console.warn(m),h=!0}return d.apply(this,arguments)}if(u("noDeprecation"))return d;var h=!1;return c}}).call(this)}).call(this,typeof Vt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Vt)},{}],"/":[function(i,s){function a(C){return C.replace(/a=ice-options:trickle\s\n/g,"")}function u(C){console.warn(C)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const d=i("debug")("simple-peer"),m=i("get-browser-rtc"),c=i("randombytes"),h=i("readable-stream"),g=i("queue-microtask"),y=i("err-code"),{Buffer:S}=i("buffer"),I=65536;class k extends h.Duplex{constructor(f){if(f=Object.assign({allowHalfOpen:!1},f),super(f),this._id=c(4).toString("hex").slice(0,7),this._debug("new peer %o",f),this.channelName=f.initiator?f.channelName||c(20).toString("hex"):null,this.initiator=f.initiator||!1,this.channelConfig=f.channelConfig||k.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},k.config,f.config),this.offerOptions=f.offerOptions||{},this.answerOptions=f.answerOptions||{},this.sdpTransform=f.sdpTransform||(x=>x),this.streams=f.streams||(f.stream?[f.stream]:[]),this.trickle=f.trickle===void 0||f.trickle,this.allowHalfTrickle=f.allowHalfTrickle!==void 0&&f.allowHalfTrickle,this.iceCompleteTimeout=f.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=f.wrtc&&typeof f.wrtc=="object"?f.wrtc:m(),!this._wrtc)throw y(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(x){return void this.destroy(y(x,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=x=>{this._onIceCandidate(x)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(x=>{this.destroy(y(x,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=x=>{this._setupData(x)},this.streams&&this.streams.forEach(x=>{this.addStream(x)}),this._pc.ontrack=x=>{this._onTrack(x)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(f){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof f=="string")try{f=JSON.parse(f)}catch{f={}}this._debug("signal()"),f.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),f.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(f.transceiverRequest.kind,f.transceiverRequest.init)),f.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(f.candidate):this._pendingCandidates.push(f.candidate)),f.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(f)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(x=>{this._addIceCandidate(x)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(x=>{this.destroy(y(x,"ERR_SET_REMOTE_DESCRIPTION"))}),f.sdp||f.candidate||f.renegotiate||f.transceiverRequest||this.destroy(y(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(f){const x=new this._wrtc.RTCIceCandidate(f);this._pc.addIceCandidate(x).catch(b=>{!x.address||x.address.endsWith(".local")?u("Ignoring unsupported ICE candidate."):this.destroy(y(b,"ERR_ADD_ICE_CANDIDATE"))})}send(f){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(f)}}addTransceiver(f,x){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(f,x),this._needsNegotiation()}catch(b){this.destroy(y(b,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:f,init:x}})}}addStream(f){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),f.getTracks().forEach(x=>{this.addTrack(x,f)})}}addTrack(f,x){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const b=this._senderMap.get(f)||new Map;let R=b.get(x);if(!R)R=this._pc.addTrack(f,x),b.set(x,R),this._senderMap.set(f,b),this._needsNegotiation();else throw R.removed?y(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):y(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(f,x,b){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const R=this._senderMap.get(f),_=R?R.get(b):null;if(!_)throw y(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");x&&this._senderMap.set(x,R),_.replaceTrack==null?this.destroy(y(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):_.replaceTrack(x)}removeTrack(f,x){if(this.destroying)return;if(this.destroyed)throw y(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const b=this._senderMap.get(f),R=b?b.get(x):null;if(!R)throw y(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{R.removed=!0,this._pc.removeTrack(R)}catch(_){_.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(R):this.destroy(y(_,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(f){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),f.getTracks().forEach(x=>{this.removeTrack(x,f)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw y(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(f){this._destroy(f,()=>{})}_destroy(f,x){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",f&&(f.message||f)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",f&&(f.message||f)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,f&&this.emit("error",f),this.emit("close"),x()}))}_setupData(f){if(!f.channel)return this.destroy(y(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=f.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=I),this.channelName=this._channel.label,this._channel.onmessage=b=>{this._onChannelMessage(b)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=b=>{const R=b.error instanceof Error?b.error:new Error(`Datachannel error: ${b.message} ${b.filename}:${b.lineno}:${b.colno}`);this.destroy(y(R,"ERR_DATA_CHANNEL"))};let x=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(x&&this._onChannelClose(),x=!0):x=!1},5e3)}_read(){}_write(f,x,b){if(this.destroyed)return b(y(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(f)}catch(R){return this.destroy(y(R,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>I?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=b):b(null)}else this._debug("write before connect"),this._chunk=f,this._cb=b}_onFinish(){if(!this.destroyed){const f=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?f():this.once("connect",f)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(f=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(f.sdp=a(f.sdp)),f.sdp=this.sdpTransform(f.sdp);const x=()=>{if(!this.destroyed){const b=this._pc.localDescription||f;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})}};this._pc.setLocalDescription(f).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?x():this.once("_iceComplete",x))}).catch(b=>{this.destroy(y(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(f=>{this.destroy(y(f,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(f=>{f.mid||!f.sender.track||f.requested||(f.requested=!0,this.addTransceiver(f.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(f=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(f.sdp=a(f.sdp)),f.sdp=this.sdpTransform(f.sdp);const x=()=>{if(!this.destroyed){const b=this._pc.localDescription||f;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(f).then(()=>{this.destroyed||(this.trickle||this._iceComplete?x():this.once("_iceComplete",x))}).catch(b=>{this.destroy(y(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(f=>{this.destroy(y(f,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(y(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const f=this._pc.iceConnectionState,x=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",f,x),this.emit("iceStateChange",f,x),(f==="connected"||f==="completed")&&(this._pcReady=!0,this._maybeReady()),f==="failed"&&this.destroy(y(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),f==="closed"&&this.destroy(y(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(f){const x=b=>(Object.prototype.toString.call(b.values)==="[object Array]"&&b.values.forEach(R=>{Object.assign(b,R)}),b);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(b=>{const R=[];b.forEach(_=>{R.push(x(_))}),f(null,R)},b=>f(b)):0<this._pc.getStats.length?this._pc.getStats(b=>{if(this.destroyed)return;const R=[];b.result().forEach(_=>{const D={};_.names().forEach(N=>{D[N]=_.stat(N)}),D.id=_.id,D.type=_.type,D.timestamp=_.timestamp,R.push(x(D))}),f(null,R)},b=>f(b)):f(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const f=()=>{this.destroyed||this.getStats((x,b)=>{if(this.destroyed)return;x&&(b=[]);const R={},_={},D={};let N=!1;b.forEach(L=>{(L.type==="remotecandidate"||L.type==="remote-candidate")&&(R[L.id]=L),(L.type==="localcandidate"||L.type==="local-candidate")&&(_[L.id]=L),(L.type==="candidatepair"||L.type==="candidate-pair")&&(D[L.id]=L)});const j=L=>{N=!0;let F=_[L.localCandidateId];F&&(F.ip||F.address)?(this.localAddress=F.ip||F.address,this.localPort=+F.port):F&&F.ipAddress?(this.localAddress=F.ipAddress,this.localPort=+F.portNumber):typeof L.googLocalAddress=="string"&&(F=L.googLocalAddress.split(":"),this.localAddress=F[0],this.localPort=+F[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let V=R[L.remoteCandidateId];V&&(V.ip||V.address)?(this.remoteAddress=V.ip||V.address,this.remotePort=+V.port):V&&V.ipAddress?(this.remoteAddress=V.ipAddress,this.remotePort=+V.portNumber):typeof L.googRemoteAddress=="string"&&(V=L.googRemoteAddress.split(":"),this.remoteAddress=V[0],this.remotePort=+V[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(b.forEach(L=>{L.type==="transport"&&L.selectedCandidatePairId&&j(D[L.selectedCandidatePairId]),(L.type==="googCandidatePair"&&L.googActiveConnection==="true"||(L.type==="candidatepair"||L.type==="candidate-pair")&&L.selected)&&j(L)}),!N&&(!Object.keys(D).length||Object.keys(_).length))return void setTimeout(f,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(F){return this.destroy(y(F,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const L=this._cb;this._cb=null,L(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};f()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>I)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(f=>{this._pc.removeTrack(f),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(f){this.destroyed||(f.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:f.candidate.candidate,sdpMLineIndex:f.candidate.sdpMLineIndex,sdpMid:f.candidate.sdpMid}}):!f.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),f.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(f){if(this.destroyed)return;let x=f.data;x instanceof ArrayBuffer&&(x=S.from(x)),this.push(x)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const f=this._cb;this._cb=null,f(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(f){this.destroyed||f.streams.forEach(x=>{this._debug("on track"),this.emit("track",f.track,x),this._remoteTracks.push({track:f.track,stream:x}),this._remoteStreams.some(b=>b.id===x.id)||(this._remoteStreams.push(x),g(()=>{this._debug("on stream"),this.emit("stream",x)}))})}_debug(){const f=[].slice.call(arguments);f[0]="["+this._id+"] "+f[0],d.apply(null,f)}}k.WEBRTC_SUPPORT=!!m(),k.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},k.channelConfig={},s.exports=k},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(mm);var Y1=mm.exports;const K1=Gf(Y1),Bc=0,$c=1,ym=2,vm=(e,t)=>{se(e,Bc);const n=Iw(t);Ae(e,n)},wm=(e,t,n)=>{se(e,$c),Ae(e,Mw(t,n))},G1=(e,t,n)=>wm(t,n,We(e)),xm=(e,t,n)=>{try{Rw(t,We(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Q1=(e,t)=>{se(e,ym),Ae(e,t)},J1=xm,q1=(e,t,n,r)=>{const o=ce(e);switch(o){case Bc:G1(e,t,n);break;case $c:xm(e,n,r);break;case ym:J1(e,n,r);break;default:throw new Error("Unknown message type")}return o},da=3e4;class X1 extends ag{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=kn();this.getLocalState()!==null&&da/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((o,i)=>{i!==this.clientID&&da<=n-o.lastUpdated&&this.states.has(i)&&r.push(i)}),r.length>0&&ku(this,r,"timeout")},tn(da/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),o=r===void 0?0:r.clock+1,i=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:o,lastUpdated:kn()});const s=[],a=[],u=[],d=[];t===null?d.push(n):i==null?t!=null&&s.push(n):(a.push(n),Ho(i,t)||u.push(n)),(s.length>0||u.length>0||d.length>0)&&this.emit("change",[{added:s,updated:u,removed:d},"local"]),this.emit("update",[{added:s,updated:a,removed:d},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const ku=(e,t,n)=>{const r=[];for(let o=0;o<t.length;o++){const i=t[o];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const s=e.meta.get(i);e.meta.set(i,{clock:s.clock+1,lastUpdated:kn()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},Zs=(e,t,n=e.states)=>{const r=t.length,o=Ve();se(o,r);for(let i=0;i<r;i++){const s=t[i],a=n.get(s)||null,u=e.meta.get(s).clock;se(o,s),se(o,u),Zt(o,JSON.stringify(a))}return De(o)},Z1=(e,t,n)=>{const r=ln(t),o=kn(),i=[],s=[],a=[],u=[],d=ce(r);for(let m=0;m<d;m++){const c=ce(r);let h=ce(r);const g=JSON.parse(yn(r)),y=e.meta.get(c),S=e.states.get(c),I=y===void 0?0:y.clock;(I<h||I===h&&g===null&&e.states.has(c))&&(g===null?c===e.clientID&&e.getLocalState()!=null?h++:e.states.delete(c):e.states.set(c,g),e.meta.set(c,{clock:h,lastUpdated:o}),y===void 0&&g!==null?i.push(c):y!==void 0&&g===null?u.push(c):g!==null&&(Ho(g,S)||a.push(c),s.push(c)))}(i.length>0||a.length>0||u.length>0)&&e.emit("change",[{added:i,updated:a,removed:u},n]),(i.length>0||s.length>0||u.length>0)&&e.emit("update",[{added:i,updated:s,removed:u},n])},ex=(e,t)=>{const n=mu(e).buffer,r=mu(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(o=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},bm=(e,t)=>{if(!t)return _c(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(r=>{const o=Ve();return Zt(o,"AES-GCM"),Ae(o,n),Ae(o,new Uint8Array(r)),De(o)})},tx=(e,t)=>{const n=Ve();return io(n,e),bm(De(n),t)},Sm=(e,t)=>{if(!t)return _c(e);const n=ln(e);yn(n)!=="AES-GCM"&&Pv(nn("Unknown encryption algorithm"));const o=We(n),i=We(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,i).then(s=>new Uint8Array(s))},nx=(e,t)=>Sm(e,t).then(n=>so(ln(new Uint8Array(n)))),vt=mw("y-webrtc"),Jr=0,km=3,vi=1,Wc=4,el=new Map,sr=new Map,Cm=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),vt("synced ",Lt,e.name,gr," with all peers"))},_m=(e,t,n)=>{const r=ln(t),o=Ve(),i=ce(r);if(e===void 0)return null;const s=e.awareness,a=e.doc;let u=!1;switch(i){case Jr:{se(o,Jr);const d=q1(r,o,a,e);d===$c&&!e.synced&&n(),d===Bc&&(u=!0);break}case km:se(o,vi),Ae(o,Zs(s,Array.from(s.getStates().keys()))),u=!0;break;case vi:Z1(s,We(r),e);break;case Wc:{const d=pr(r)===1,m=yn(r);if(m!==e.peerId&&(e.bcConns.has(m)&&!d||!e.bcConns.has(m)&&d)){const c=[],h=[];d?(e.bcConns.add(m),h.push(m)):(e.bcConns.delete(m),c.push(m)),e.provider.emit("peers",[{added:h,removed:c,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Em(e)}break}default:return console.error("Unable to compute message"),o}return u?o:null},rx=(e,t)=>{const n=e.room;return vt("received message from ",Lt,e.remotePeerId,Rc," (",n.name,")",gr,kl),_m(n,t,()=>{e.synced=!0,vt("synced ",Lt,n.name,gr," with ",Lt,e.remotePeerId),Cm(n)})},fa=(e,t)=>{vt("send message to ",Lt,e.remotePeerId,gr,Rc," (",e.room.name,")",kl);try{e.peer.send(De(t))}catch{}},ox=(e,t)=>{vt("broadcast message in ",Lt,e.name,gr),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class Af{constructor(t,n,r,o){vt("establishing connection to ",Lt,r),this.room=o,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new K1({initiator:n,...o.provider.peerOpts}),this.peer.on("signal",i=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),Hc(t,o,{to:r,from:o.peerId,type:"signal",token:this.glareToken,signal:i})}),this.peer.on("connect",()=>{vt("connected to ",Lt,r),this.connected=!0;const s=o.provider.doc,a=o.awareness,u=Ve();se(u,Jr),vm(u,s),fa(this,u);const d=a.getStates();if(d.size>0){const m=Ve();se(m,vi),Ae(m,Zs(a,Array.from(d.keys()))),fa(this,m)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,o.webrtcConns.has(this.remotePeerId)&&(o.webrtcConns.delete(this.remotePeerId),o.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),Cm(o),this.peer.destroy(),vt("closed connection to ",Lt,r),Cu(o)}),this.peer.on("error",i=>{vt("Error in connection to ",Lt,r,": ",i),Cu(o)}),this.peer.on("data",i=>{const s=rx(this,i);s!==null&&fa(this,s)})}destroy(){this.peer.destroy()}}const Dn=(e,t)=>bm(t,e.key).then(n=>e.mux(()=>H1(e.name,n))),Nf=(e,t)=>{e.bcconnected&&Dn(e,t),ox(e,t)},Cu=e=>{el.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Hc(t,e,{type:"announce",from:e.peerId}))})},Em=e=>{if(e.provider.filterBcConns){const t=Ve();se(t,Wc),hi(t,1),Zt(t,e.peerId),Dn(e,De(t))}};class ix{constructor(t,n,r,o){this.peerId=pg(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=o,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=V1(),this.bcconnected=!1,this._bcSubscriber=i=>Sm(new Uint8Array(i),o).then(s=>this.mux(()=>{const a=_m(this,s,()=>{});a&&Dn(this,De(a))})),this._docUpdateHandler=(i,s)=>{const a=Ve();se(a,Jr),Q1(a,i),Nf(this,De(a))},this._awarenessUpdateHandler=({added:i,updated:s,removed:a},u)=>{const d=i.concat(s).concat(a),m=Ve();se(m,vi),Ae(m,Zs(this.awareness,d)),Nf(this,De(m))},this._beforeUnloadHandler=()=>{ku(this.awareness,[t.clientID],"window unload"),sr.forEach(i=>{i.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Cu(this);const t=this.name;$1(t,this._bcSubscriber),this.bcconnected=!0,Em(this);const n=Ve();se(n,Jr),vm(n,this.doc),Dn(this,De(n));const r=Ve();se(r,Jr),wm(r,this.doc),Dn(this,De(r));const o=Ve();se(o,km),Dn(this,De(o));const i=Ve();se(i,vi),Ae(i,Zs(this.awareness,[this.doc.clientID])),Dn(this,De(i))}disconnect(){el.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),ku(this.awareness,[this.doc.clientID],"disconnect");const t=Ve();se(t,Wc),hi(t,0),Zt(t,this.peerId),Dn(this,De(t)),W1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const sx=(e,t,n,r)=>{if(sr.has(n))throw nn(`A Yjs Doc connected to room "${n}" already exists!`);const o=new ix(e,t,n,r);return sr.set(n,o),o},Hc=(e,t,n)=>{t.key?tx(n,t.key).then(r=>{e.send({type:"publish",topic:t.name,data:Cg(r)})}):e.send({type:"publish",topic:t.name,data:n})};class lx extends P1{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{vt(`connected (${t})`);const n=Array.from(sr.keys());this.send({type:"subscribe",topics:n}),sr.forEach(r=>Hc(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,o=sr.get(r);if(o==null||typeof r!="string")return;const i=s=>{const a=o.webrtcConns,u=o.peerId;if(s==null||s.from===u||s.to!==void 0&&s.to!==u||o.bcConns.has(s.from))return;const d=a.has(s.from)?()=>{}:()=>o.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}]);switch(s.type){case"announce":a.size<o.provider.maxConns&&(St(a,s.from,()=>new Af(this,!0,s.from,o)),d());break;case"signal":if(s.signal.type==="offer"){const m=a.get(s.from);if(m){const c=s.token,h=m.glareToken;if(h&&h>c){vt("offer rejected: ",s.from);return}m.glareToken=void 0}}if(s.signal.type==="answer"){vt("offer answered by: ",s.from);const m=a.get(s.from);m.glareToken=void 0}s.to===u&&(St(a,s.from,()=>new Af(this,!1,s.from,o)).peer.signal(s.signal),d());break}};o.key?typeof n.data=="string"&&nx(_g(n.data),o.key).then(i):i(n.data)}}}),this.on("disconnect",()=>vt(`disconnect (${t})`))}}const ha=e=>{e.emit("status",[{connected:e.connected}])};class ax extends lg{constructor(t,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:o=null,awareness:i=new X1(n),maxConns:s=20+tn(zv()*15),filterBcConns:a=!0,peerOpts:u={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=u,this.key=o?ex(o,t):_c(null),this.room=null,this.key.then(d=>{this.room=sx(n,this,t,d),this.shouldConnect?this.room.connect():this.room.disconnect(),ha(this)}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=St(el,t,()=>new lx(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&(this.room.connect(),ha(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),el.delete(t.url))}),this.room&&(this.room.disconnect(),ha(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),sr.delete(this.roomName)}),super.destroy()}}const Ot=new wo,Ee=Ot.getMap("players"),ho=Ot.getMap("zones"),de=Ot.getMap("cards"),wi=Ot.getMap("baton"),ux=Ot.getMap("seed"),lr=Ot.getArray("log"),Xi=Ot.getMap("counterTypes"),Vo=Ot.getMap("revealedCard"),ar=new Set,tl=[];function pa(){return new Set(ar)}function ga(e){return ar.has(e)}function cx(e){ar.has(e)?ar.delete(e):ar.add(e),Vc()}function _u(){ar.clear(),Vc()}function dx(e){e.forEach(t=>ar.add(t)),Vc()}function fx(e){tl.push(e)}function hx(e){const t=tl.indexOf(e);t>-1&&tl.splice(t,1)}function Vc(){tl.forEach(e=>e())}const If=["#4CAF50","#2196F3","#F44336","#9C27B0"];function Bt(e){const n=Array.from(Ee.keys()).indexOf(e);return n>=0&&n<If.length?If[n]:"#757575"}function px(e,t,n=!1){if(Ee.size>=4){console.warn("Maximum of 4 players reached");return}Ee.set(e,{name:t,lifeTotal:40}),jo(`deck-${e}`,"deck",e),jo(`hand-${e}`,"hand",e),jo(`battlefield-${e}`,"battlefield",e),jo(`graveyard-${e}`,"graveyard",e),jo(`exile-${e}`,"exile",e),n||gx(e),Ge(e,"player_joined",{name:t})}function gx(e){const t=["Lightning Bolt","Giant Growth","Counterspell","Swords to Plowshares","Dark Ritual","Path to Exile","Brainstorm","Llanowar Elves","Doom Blade","Cancel"];for(let n=0;n<3;n++)vs(`${e}-card-hand-${n}`,t[n%t.length],e,`hand-${e}`,n);for(let n=0;n<2;n++)vs(`${e}-card-battlefield-${n}`,t[(n+3)%t.length],e,`battlefield-${e}`,n);for(let n=0;n<50;n++)vs(`${e}-card-deck-${n}`,t[n%t.length],e,`deck-${e}`,n)}function mx(){Ee.clear(),ho.clear(),de.clear(),wi.clear(),ux.clear(),lr.delete(0,lr.length),console.log("Room reset - all state cleared")}function jo(e,t,n){ho.set(e,{type:t,owner:n})}function vs(e,t,n,r,o=0){de.set(e,{oracleId:t,owner:n,zoneId:r,order:o,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{},v:0})}function Rl(e,t,n,r,o){const i=de.get(e);if(!i)return;const s=i.zoneId;de.set(e,{...i,zoneId:t,order:n??i.order,v:i.v+1}),r&&!o&&Ge(r,"card_moved",{cardId:e,oracleId:i.oracleId,from:s,to:t,order:n})}function yx(e,t,n){const r=de.get(e);r&&(de.set(e,{...r,...t,v:r.v+1}),n&&Ge(n,"card_updated",{cardId:e,updates:t}))}function vx(e,t,n){const r=de.get(e);r&&(de.set(e,{...r,tapped:t,v:r.v+1}),n&&Ge(n,"card_updated",{cardId:e,oracleId:r.oracleId,updates:{tapped:t}}))}function Rr(e,t,n){yx(e,{faceDown:t},n)}function ma(e,t,n,r){const o=de.get(e);if(!o)return;const i=an(o.zoneId),a=(i.length>0?Math.max(...i.map(u=>u.order)):0)+1;de.set(e,{...o,position:{x:t,y:n},order:a,v:o.v+1})}function Gt(e,t,n,r){const o=de.get(e);if(!o)return;const i={...o.counters},s=i[t]??0,a=Math.max(0,s+n);a===0?delete i[t]:i[t]=a,de.set(e,{...o,counters:i,v:o.v+1}),r&&Ge(r,"counter_modified",{cardId:e,oracleId:o.oracleId,counterType:t,delta:n,newValue:a})}function wx(e,t,n){const r=Ee.get(e);r&&(Ee.set(e,{...r,lifeTotal:t}),n&&Ge(n,"life_total_set",{playerId:e,newTotal:t}))}function Er(e,t,n){const r=Ee.get(e);if(!r)return;const o=r.lifeTotal+t;Ee.set(e,{...r,lifeTotal:o}),n&&Ge(n,"life_total_modified",{playerId:e,delta:t,newTotal:o})}function Of(e,t){wi.set("current",{playerId:e,step:t}),Ge(e,"turn_changed",{step:t})}function zf(){return wi.get("current")}function Ge(e,t,n){lr.push([{timestamp:Date.now(),playerId:e,action:t,data:n,type:"game"}])}function xx(e,t){lr.push([{timestamp:Date.now(),playerId:e,action:"chat_message",data:{message:t},type:"chat"}])}function an(e){const t=[];return de.forEach(n=>{n.zoneId===e&&t.push(n)}),t.sort((n,r)=>n.order-r.order)}function po(e){const t=an(e);return t.length===0?0:Math.max(...t.map(n=>n.order))+1}function Zi(e,t){var a;const n=`deck-${e}`,r=`hand-${e}`,o=an(n),i=Math.min(t,o.length);if(i===0)return;const s=po(r);for(let u=0;u<i;u++){const d=o[u],m=(a=Array.from(de.entries()).find(([c,h])=>h===d))==null?void 0:a[0];m&&Rl(m,r,s+u,e,!0)}Di(),Ge(e,"draw_cards",{count:i})}function Ff(e,t){var a;const n=`deck-${e}`,r=`graveyard-${e}`,o=an(n),i=Math.min(t,o.length);if(i===0)return;const s=po(r);for(let u=0;u<i;u++){const d=o[u],m=(a=Array.from(de.entries()).find(([c,h])=>h===d))==null?void 0:a[0];m&&Rl(m,r,s+u,e,!0)}Di(),Ge(e,"mill_cards",{count:i})}function Pf(e,t,n=!1){var u;const r=`deck-${e}`,o=`exile-${e}`,i=an(r),s=Math.min(t,i.length);if(s===0)return;const a=po(o);for(let d=0;d<s;d++){const m=i[d],c=(u=Array.from(de.entries()).find(([h,g])=>g===m))==null?void 0:u[0];c&&(Rl(c,o,a+d,e,!0),n&&Rr(c,!0))}Di(),Ge(e,"exile_from_deck",{count:s,faceDown:n})}function bx(e){const t=`deck-${e}`,n=an(t);if(n.length===0)return null;const r=n[0],o=Ee.get(e),i=(o==null?void 0:o.name)||e;return Vo.set("current",{cardName:r.oracleId,revealedBy:i,timestamp:Date.now()}),Ge(e,"reveal_top_card",{cardName:r.oracleId}),{cardName:r.oracleId,playerName:i}}function Di(){Vo.delete("current")}function es(e,t){var s;const n=`deck-${e}`,r=an(n),o=Math.min(t,r.length),i=[];for(let a=0;a<o;a++){const u=r[a],d=(s=Array.from(de.entries()).find(([m,c])=>c===u))==null?void 0:s[0];d&&i.push({cardId:d,card:u})}return i}function Sx(e,t,n=[]){const r=`deck-${e}`,o=an(r),i=o.length>0?Math.max(...o.map(s=>s.order)):0;t.forEach((s,a)=>{const u=de.get(s);u&&u.zoneId===r&&de.set(s,{...u,order:a,v:u.v+1})}),n.forEach((s,a)=>{const u=de.get(s);u&&u.zoneId===r&&de.set(s,{...u,order:i+a+1,v:u.v+1})}),Di(),Ge(e,"scry",{topCount:t.length,bottomCount:n.length})}function ya(e){const t=`deck-${e}`;if(an(t).length===0)return;const r=[];de.forEach((i,s)=>{i.zoneId===t&&r.push(s)});const o=[...r];for(let i=o.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[o[i],o[s]]=[o[s],o[i]]}o.forEach((i,s)=>{const a=de.get(i);a&&de.set(i,{...a,order:s,v:a.v+1})}),Di(),Ge(e,"shuffle_deck",{cardCount:o.length})}function fn(e,t,n="auto",r){const o=de.get(e);if(!o)return;let i;n==="top"?(an(t).forEach(d=>{var c;const m=(c=Array.from(de.entries()).find(([h,g])=>g===d))==null?void 0:c[0];m&&de.set(m,{...d,order:d.order+1,v:d.v+1})}),i=0):i=po(t);const s=o.zoneId.startsWith("battlefield-"),a=t.startsWith("battlefield-");if(s&&!a&&o.tapped){const u=o.zoneId;de.set(e,{...o,tapped:!1,zoneId:t,order:i,v:o.v+1}),r&&Ge(r,"card_moved",{cardId:e,oracleId:o.oracleId,from:u,to:t,order:i})}else Rl(e,t,i,r)}function va(e,t,n=1,r){const o=`battlefield-${e}`,i=po(o);for(let s=0;s<n;s++){const a=`${e}-token-${Date.now()}-${s}-${crypto.randomUUID()}`;de.set(a,{oracleId:t,owner:e,zoneId:o,order:i+s,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{isToken:!0,imageUrl:r},v:0})}Ge(e,"token_created",{tokenName:t,quantity:n})}function kx(e,t){const n=de.get(e);n&&(de.delete(e),t&&Ge(t,"card_deleted",{cardId:e,oracleId:n.oracleId}))}function Yo(){return`crdt-cards-${window.location.hash.replace(/^#/,"")||"default"}`}const Br=new ax(Yo(),Ot,{signaling:["wss://crdt-cards-signaling.happyground-bfbe302d.westus2.azurecontainerapps.io"]});Br.on("status",e=>{console.log("WebRTC status:",e.connected?"connected":"disconnected")});Br.on("synced",e=>{console.log("YJS synced:",e.synced)});window.addEventListener("popstate",()=>{console.log("Room changed, reloading to connect to new room..."),window.location.reload()});console.log("YJS document initialized:",Ot.guid);console.log("Room name:",Yo());console.log("Game state maps ready:",{players:Ee.size,zones:ho.size,cards:de.size});const Yc="crdt-cards-decks",Kc="crdt-cards-last-deck",ws=[{id:"starter-atraxa",name:"Atraxa, Praetors' Voice",file:"atraxa.txt",description:"Proliferate & Superfriends"},{id:"starter-urdragon",name:"The Ur-Dragon",file:"urdragon.txt",description:"Dragon tribal powerhouse"},{id:"starter-edgar",name:"Edgar Markov",file:"edgar-markov.txt",description:"Vampire tribal aggro"},{id:"starter-krenko",name:"Krenko, Mob Boss",file:"krenko.txt",description:"Goblin tribal combo"},{id:"starter-kaalia",name:"Kaalia of the Vast",file:"kaalia.txt",description:"Angels, Demons, Dragons"}];function qr(){try{const e=localStorage.getItem(Yc);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load stored decks:",e),[]}}function Gc(e){try{const t=qr(),n=t.findIndex(r=>r.id===e.id);n>=0?t[n]=e:t.push(e),localStorage.setItem(Yc,JSON.stringify(t))}catch(t){console.error("Failed to save deck:",t)}}function Cx(e){try{const t=qr().filter(n=>n.id!==e);localStorage.setItem(Yc,JSON.stringify(t)),Tm()===e&&localStorage.removeItem(Kc)}catch(t){console.error("Failed to delete deck:",t)}}function Tm(){return localStorage.getItem(Kc)}function Uf(e){localStorage.setItem(Kc,e)}function _x(e){const t=e.toLowerCase();return t.includes("moxfield.com")?"moxfield":t.includes("archidekt.com")?"archidekt":t.includes("edhrec.com")?"edhrec":"unknown"}async function Ex(e){switch(_x(e)){case"moxfield":return Bf(e);case"archidekt":return Tx(e);case"edhrec":return Rx();default:return Bf(e)}}async function Bf(e){try{const t=Dx(e);if(!t)return{success:!1,error:"Invalid Moxfield URL format"};const n=`https://api.moxfield.com/v2/decks/all/${t}`,o=`https://corsproxy.io/?${encodeURIComponent(n)}`,i=await fetch(o);if(!i.ok)return i.status===404?{success:!1,error:"Deck not found on Moxfield"}:{success:!1,error:`Failed to fetch deck (${i.status})`};const s=await i.json(),a=[];let u=0;if(s.mainboard)for(const[m,c]of Object.entries(s.mainboard)){const h=c.quantity||1;a.push({name:m,quantity:h}),u+=h}const d={id:crypto.randomUUID(),name:s.name||"Imported Deck",moxfieldUrl:e,moxfieldId:t,cardCount:u,importedAt:Date.now(),cards:a};return Gc(d),{success:!0,deck:d}}catch(t){return console.error("Failed to import from Moxfield:",t),{success:!1,error:"Network error or invalid deck"}}}async function Tx(e){var t,n,r;try{const o=e.match(/archidekt\.com\/decks\/(\d+)/);if(!o)return{success:!1,error:"Invalid Archidekt URL format"};const i=o[1],s=`https://archidekt.com/api/decks/${i}/`,u=`https://corsproxy.io/?${encodeURIComponent(s)}`,d=await fetch(u);if(!d.ok)return d.status===404?{success:!1,error:"Deck not found on Archidekt"}:{success:!1,error:`Failed to fetch deck (${d.status})`};const m=await d.json(),c=[];let h=0;if(m.cards&&Array.isArray(m.cards))for(const y of m.cards){const S=((n=(t=y.card)==null?void 0:t.oracleCard)==null?void 0:n.name)||((r=y.card)==null?void 0:r.name),I=y.quantity||1;S&&(c.push({name:S,quantity:I}),h+=I)}const g={id:crypto.randomUUID(),name:m.name||"Imported Deck",moxfieldUrl:e,moxfieldId:i,cardCount:h,importedAt:Date.now(),cards:c};return Gc(g),{success:!0,deck:g}}catch(o){return console.error("Failed to import from Archidekt:",o),{success:!1,error:"Network error or invalid deck"}}}async function Rx(){return{success:!1,error:"EDHRec import not yet implemented. Please use Moxfield or Archidekt URLs for now."}}async function jx(e,t){try{const n=await fetch(`/starter-decks/${e}`);if(!n.ok)return n.status===404?{success:!1,error:`Starter deck file not found: ${e}`}:{success:!1,error:`Failed to load starter deck (${n.status})`};const r=await n.text(),o=[];let i=0;const s=r.split(`
`);for(const u of s){const d=u.trim();if(!d)continue;const m=d.match(/^(\d+)\s+(.+)$/);if(m){const c=parseInt(m[1],10),h=m[2].trim();o.push({name:h,quantity:c}),i+=c}}if(o.length===0)return{success:!1,error:"No cards found in starter deck file"};const a={id:crypto.randomUUID(),name:t,moxfieldUrl:`local://${e}`,moxfieldId:e,cardCount:i,importedAt:Date.now(),cards:o};return Gc(a),{success:!0,deck:a}}catch(n){return console.error("Failed to import from local file:",n),{success:!1,error:"Failed to load starter deck file"}}}function Dx(e){const t=e.trim();let n=t.match(/moxfield\.com\/decks\/([a-zA-Z0-9_-]+)/);return n?n[1]:/^[a-zA-Z0-9_-]+$/.test(t)?t:null}function $f(e,t){const n=`deck-${e}`,r=[];de.forEach((i,s)=>{i.zoneId===n&&r.push(s)}),r.forEach(i=>de.delete(i));let o=0;for(const{name:i,quantity:s}of t.cards)for(let a=0;a<s;a++)vs(`${e}-deck-${i}-${a}`,i,e,n,o++);Ge(e,"deck_imported",{deckName:t.name,cardCount:t.cardCount})}function Qc({title:e,max:t,onConfirm:n,onCancel:r}){const[o,i]=K.useState("1"),s=d=>{d.preventDefault();const m=parseInt(o,10);m>0&&m<=t&&n(m)},a=parseInt(o,10),u=!isNaN(a)&&a>0&&a<=t;return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:v.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"300px",width:"90%"},onClick:d=>d.stopPropagation(),children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),v.jsxs("form",{onSubmit:s,children:[v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("input",{type:"number",value:o,onChange:d=>i(d.target.value),min:1,max:t,autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1.25rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",textAlign:"center",outline:"none"},onFocus:d=>{d.target.style.borderColor="#2196F3",d.target.select()},onBlur:d=>{d.target.style.borderColor="#ddd"}}),v.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#666",textAlign:"center"},children:["Max: ",t]})]}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[v.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!u,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:u?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:u?"pointer":"not-allowed"},onMouseEnter:d=>{u&&(d.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:d=>{u&&(d.currentTarget.style.backgroundColor="#4CAF50")},children:"Confirm"})]})]})]})})}function Mx({title:e,placeholder:t="",onConfirm:n,onCancel:r}){const[o,i]=K.useState(""),s=u=>{u.preventDefault(),o.trim()&&n(o.trim())},a=o.trim().length>0;return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:v.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:u=>u.stopPropagation(),children:[v.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),v.jsxs("form",{onSubmit:s,children:[v.jsx("div",{style:{marginBottom:"1.5rem"},children:v.jsx("input",{type:"text",value:o,onChange:u=>i(u.target.value),placeholder:t,autoFocus:!0,maxLength:30,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:u=>{u.target.style.borderColor="#2196F3"},onBlur:u=>{u.target.style.borderColor="#ddd"}})}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[v.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!a,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:a?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:a?"pointer":"not-allowed"},onMouseEnter:u=>{a&&(u.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:u=>{a&&(u.currentTarget.style.backgroundColor="#4CAF50")},children:"Add"})]})]})]})})}const Rm="crdt-cards-image-cache",Lx=7,ts=new Map,wa=new Map;function Ax(){try{const e=localStorage.getItem(Rm);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load image cache:",e),{}}}function Nx(e){try{localStorage.setItem(Rm,JSON.stringify(e))}catch(t){console.error("Failed to save image cache:",t)}}function Ix(e){const t=Date.now(),n=Lx*24*60*60*1e3;return t-e.cachedAt<n}async function Ox(e){var t,n;try{const r=`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(e)}`,o=await fetch(r);if(!o.ok)return console.warn(`Card not found on Scryfall: ${e}`),null;const i=await o.json();return i.card_faces&&i.card_faces.length>0?((t=i.card_faces[0].image_uris)==null?void 0:t.normal)||null:((n=i.image_uris)==null?void 0:n.normal)||null}catch(r){return console.error(`Failed to fetch card image for ${e}:`,r),null}}function Jc(e){const t=ts.get(e),[n,r]=K.useState(t||null),[o,i]=K.useState(!t),[s,a]=K.useState(!1);return K.useEffect(()=>{if(!e){r(null),i(!1),a(!1);return}let u=!0;async function d(){const m=ts.get(e);if(m){u&&(r(m),i(!1),a(!1));return}const c=wa.get(e);if(c){const S=await c;u&&(r(S),i(!1),a(!S));return}i(!0),a(!1);const h=Ax(),g=h[e];if(g&&Ix(g)){ts.set(e,g.imageUrl),u&&(r(g.imageUrl),i(!1));return}const y=Ox(e);wa.set(e,y);try{const S=await y;u&&(S?(r(S),a(!1),ts.set(e,S),h[e]={imageUrl:S,scryfallId:"",cachedAt:Date.now()},Nx(h)):(r(null),a(!0)),i(!1))}finally{wa.delete(e)}}return d(),()=>{u=!1}},[e]),{imageUrl:n,loading:o,error:s}}function Wf({card:e,cardId:t,playerId:n,isInteractive:r=!0,forceFaceDown:o=!1}){var M,O;const[i,s]=K.useState(!1),[a,u]=K.useState(!1),[d,m]=K.useState(!1),[c,h]=K.useState(!1),[g,y]=K.useState(null),[S,I]=K.useState(null),[k,C]=K.useState(null),[f,x]=K.useState(null),[b,R]=K.useState(null),[_,D]=K.useState([]),[N,j]=K.useState([]),[L,F]=K.useState(!1),[V,Q]=K.useState(!1),[J,H]=K.useState(!1),[Y,$]=K.useState(new Set),U=K.useRef(null),X=K.useRef(null),ee=K.useRef(),le=o||e.faceDown,ue=e.zoneId.startsWith("battlefield-"),ae=(M=e.metadata)==null?void 0:M.imageUrl,{imageUrl:Ce,loading:we}=Jc(le||ae?"":e.oracleId),Re=ae||Ce;K.useEffect(()=>{const T=()=>{const B=[];Xi.forEach((q,oe)=>{B.push(oe)}),D(B)};return Xi.observe(T),T(),()=>{Xi.unobserve(T)}},[]),K.useEffect(()=>{const T=()=>{const B=[];Ee.forEach((q,oe)=>{oe!==e.owner&&B.push({id:oe,name:q.name})}),j(B)};return Ee.observe(T),T(),()=>{Ee.unobserve(T)}},[e.owner]),K.useEffect(()=>{const T=()=>{H(ga(t))};return fx(T),T(),()=>{hx(T)}},[t]);const Ie=T=>{Xi.set(T,!0);const B=Y.has(t);console.log("handleAddCounterType:",{cardId:t,counterType:T,currentlySelected:B,menuSelectedCardsSize:Y.size,menuSelectedCardIds:Array.from(Y)}),B&&Y.size>1?(console.log("Applying to multiple cards:",Array.from(Y)),Y.forEach(q=>{Gt(q,T,1,n)})):(console.log("Applying to single card:",t),Gt(t,T,1,n))},Ze={width:"120px",height:"160px",border:"none",borderRadius:"8px",backgroundColor:le?"#333":"#fff",padding:"0.5rem",position:"relative",transition:"transform 0.3s ease",transform:`rotate(${e.tapped?90:0}deg)`,cursor:r?"pointer":"default",display:"flex",flexDirection:"column",justifyContent:"space-between"},ut={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"#666"},ye={position:"absolute",bottom:"5px",right:"5px",backgroundColor:"#9C27B0",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold"},P=f?{position:"fixed",top:`${f.top}px`,left:`${f.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"},re={padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},me=T=>{if(r){if(T.stopPropagation(),T.ctrlKey||T.metaKey){cx(t);return}if(!ue){_u();return}_u(),vx(t,!e.tapped,n)}},A=(T,B,q)=>{const oe=`${T}-${n}`;Y.has(t)&&Y.size>1?Y.forEach(ie=>{fn(ie,oe,B||"auto",n),q!==void 0&&Rr(ie,q,n)}):(fn(t,oe,B||"auto",n),q!==void 0&&Rr(t,q,n)),s(!1),u(!1)},z=T=>{const B=`battlefield-${T}`;Y.has(t)&&Y.size>1?Y.forEach(oe=>{fn(oe,B,"auto",n),Rr(oe,!1,n)}):(fn(t,B,"auto",n),Rr(t,!1,n)),s(!1),u(!1),h(!1)},W=T=>{if(!r){T.preventDefault();return}F(!0);const B=T.currentTarget.getBoundingClientRect(),q=T.clientX-B.left,oe=T.clientY-B.top;T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("cardId",t),T.dataTransfer.setData("fromZoneId",e.zoneId),T.dataTransfer.setData("playerId",n),T.dataTransfer.setData("order",e.order.toString()),T.dataTransfer.setData("dragOffsetX",q.toString()),T.dataTransfer.setData("dragOffsetY",oe.toString());const te=pa();if(J&&te.size>1){const ie=Ot.getMap("cards"),pe=[];e.position?ie.forEach((_e,_t)=>{const Et=_e;te.has(_t)&&Et.position&&pe.push({id:_t,relativeX:Et.position.x-e.position.x,relativeY:Et.position.y-e.position.y})}):te.forEach(_e=>{pe.push({id:_e,relativeX:0,relativeY:0})}),T.dataTransfer.setData("selectedCards",JSON.stringify(pe))}try{T.dataTransfer.setDragImage(T.currentTarget,q,oe)}catch(ie){console.warn("Could not set custom drag image:",ie)}},Z=()=>{F(!1)},E=()=>{le||!Re||L||(ee.current=window.setTimeout(()=>{Q(!0)},600))},l=()=>{ee.current&&window.clearTimeout(ee.current),Q(!1)};K.useEffect(()=>()=>{ee.current&&window.clearTimeout(ee.current)},[]);const p=()=>{if(!X.current)return null;const T=X.current.getBoundingClientRect(),B=488,q=680,oe=16;let te=T.right+oe,ie=T.top;return te+B>window.innerWidth-8&&(te=T.left-B-oe),ie+q>window.innerHeight-8&&(ie=Math.max(8,window.innerHeight-q-8)),{top:ie,left:te}},w=ue&&e.position?{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,zIndex:e.order}:{position:"relative"};return v.jsxs("div",{style:w,"data-card-id":t,"data-order":e.order,"data-zone-id":e.zoneId,children:[v.jsxs("div",{ref:X,style:{...Ze,padding:0,overflow:"hidden",opacity:L?.5:1,cursor:r?"grab":"default",border:"none",outline:J?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:J?"0 0 12px rgba(33, 150, 243, 0.8)":"none"},title:!le||e.owner===n?e.oracleId:void 0,draggable:r,onDragStart:W,onDragEnd:Z,onClick:me,onContextMenu:T=>{if(!r)return;T.preventDefault();const B=pa(),q=ga(t);$(B),console.log("Menu opened - captured selection:",{cardId:t,currentlySelected:q,selectedCardsSize:B.size,selectedCardIds:Array.from(B)}),s(!i)},onMouseEnter:E,onMouseLeave:l,children:[le?v.jsx("div",{style:ut,children:""}):we?v.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999"},children:"Loading..."}):Re?v.jsx("img",{src:Re,alt:e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}):v.jsxs("div",{style:{width:"100%",height:"100%",padding:"0.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[v.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",wordBreak:"break-all"},children:e.oracleId}),v.jsx("div",{style:{fontSize:"0.65rem",color:"#666"},children:"No image"})]}),Object.entries(e.counters).length>0&&v.jsxs("div",{style:{position:"absolute",top:"5px",right:"5px",display:"flex",flexDirection:"column",gap:"2px",alignItems:"flex-end"},children:[Object.entries(e.counters).slice(0,3).map(([T,B])=>{let q=B.toString();return T==="+1/+1"?q=`+${B}`:T==="Loyalty"?q=`L${B}`:T==="-1/-1"?q=`-${B}`:q=B.toString(),v.jsx("div",{style:{backgroundColor:T==="Loyalty"?"#9C27B0":"#FF5722",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`${T}: ${B}`,children:q},T)}),Object.entries(e.counters).length>3&&v.jsx("div",{style:{backgroundColor:"#757575",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`+${Object.entries(e.counters).length-3} more types`,children:"..."})]}),e.attachments.length>0&&v.jsxs("div",{style:ye,title:`${e.attachments.length} attachments`,children:["+",e.attachments.length]}),r&&(!le||e.owner===n)&&v.jsx("button",{ref:U,onClick:T=>{T.stopPropagation();const B=pa(),q=ga(t);if($(B),console.log("Menu button clicked - captured selection:",{cardId:t,currentlySelected:q,selectedCardsSize:B.size,selectedCardIds:Array.from(B)}),!i&&U.current){const oe=U.current.getBoundingClientRect(),te=window.innerHeight,ie=window.innerWidth;let pe=oe.right+8,_e=oe.top;const _t=150;pe+_t>ie&&(pe=oe.left-_t-8);const Et=150;_e+Et>te&&(_e=Math.max(8,te-Et-8)),x({top:_e,left:pe})}s(!i)},style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""})]}),r&&i&&ci.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>s(!1)}),v.jsxs("div",{style:P,children:[v.jsxs("div",{style:{...re,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5",m(!1),I(null);const B=T.currentTarget.getBoundingClientRect(),q=window.innerWidth,oe=window.innerHeight;let te=B.right+4,ie=B.top;const pe=200,_e=300;te+pe>q&&(te=B.left-pe-4),ie+_e>oe&&(ie=Math.max(8,oe-_e-8)),y({top:ie,left:te}),u(!0)},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[v.jsxs("span",{children:["Move to...",Y.has(t)&&Y.size>1&&v.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",Y.size," cards)"]})]}),v.jsx("span",{children:""})]}),v.jsxs("div",{style:{...re,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5",u(!1),y(null);const B=T.currentTarget.getBoundingClientRect(),q=window.innerWidth,oe=window.innerHeight;let te=B.right+4,ie=B.top;const pe=250,_e=400;te+pe>q&&(te=B.left-pe-4),ie+_e>oe&&(ie=Math.max(8,oe-_e-8)),I({top:ie,left:te}),m(!0)},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[v.jsxs("span",{children:["Counters...",Y.has(t)&&Y.size>1&&v.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",Y.size," cards)"]})]}),v.jsx("span",{children:""})]}),(ue||e.zoneId.startsWith("exile-"))&&v.jsx("div",{style:re,onClick:T=>{T.stopPropagation(),Rr(t,!e.faceDown,n),s(!1)},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:e.faceDown?" Turn face up":" Turn face down"}),((O=e.metadata)==null?void 0:O.isToken)&&v.jsx("div",{style:{...re,backgroundColor:"#ffebee",color:"#c62828",fontWeight:"bold",borderBottom:"none"},onClick:T=>{T.stopPropagation(),kx(t,n),s(!1)},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#ffcdd2"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="#ffebee"},children:" Delete Token"})]}),d&&S&&v.jsxs("div",{style:{position:"fixed",top:`${S.top}px`,left:`${S.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"220px",maxHeight:"400px",overflowY:"auto"},onMouseEnter:()=>m(!0),onMouseLeave:()=>{m(!1),I(null)},children:[Object.entries(e.counters).length>0&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"EXISTING COUNTERS"}),Object.entries(e.counters).map(([T,B])=>v.jsxs("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("span",{style:{fontWeight:"bold"},children:[T,": ",B]}),v.jsxs("div",{style:{display:"flex",gap:"4px"},children:[v.jsx("button",{onClick:q=>{q.stopPropagation(),Y.has(t)&&Y.size>1?Y.forEach(te=>{Gt(te,T,1,n)}):Gt(t,T,1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"+1"}),v.jsx("button",{onClick:q=>{q.stopPropagation(),Y.has(t)&&Y.size>1?Y.forEach(te=>{Gt(te,T,-1,n)}):Gt(t,T,-1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"-1"}),v.jsx("button",{onClick:q=>{q.stopPropagation(),R({type:"set",counterType:T}),s(!1),m(!1)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"Set"})]})]},T))]}),v.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADD"}),v.jsxs("div",{style:{padding:"0.5rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"4px",borderBottom:Object.entries(e.counters).length>0?"none":"1px solid #eee"},children:[v.jsx("button",{onClick:T=>{T.stopPropagation(),Ie("+1/+1")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"+1/+1"}),v.jsx("button",{onClick:T=>{T.stopPropagation(),Ie("Loyalty")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Loyalty"}),_.filter(T=>T!=="+1/+1"&&T!=="Loyalty").map(T=>v.jsx("button",{onClick:B=>{B.stopPropagation(),Ie(T)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:T},T)),v.jsx("button",{onClick:T=>{T.stopPropagation(),R({type:"add"}),s(!1),m(!1)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Custom..."})]})]}),a&&g&&v.jsxs("div",{style:{position:"fixed",top:`${g.top}px`,left:`${g.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),y(null)},children:[v.jsx("div",{style:re,onClick:()=>A("hand",void 0,!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Hand"}),v.jsx("div",{style:re,onClick:()=>A("battlefield",void 0,!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-up)"}),v.jsx("div",{style:re,onClick:()=>A("battlefield",void 0,!0),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-down)"}),v.jsx("div",{style:re,onClick:()=>A("graveyard",void 0,!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Graveyard"}),v.jsx("div",{style:re,onClick:()=>A("exile",void 0,!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Exile (face-up)"}),v.jsx("div",{style:re,onClick:()=>A("exile",void 0,!0),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Exile (face-down)"}),v.jsx("div",{style:re,onClick:()=>A("deck","top",!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Deck (top)"}),v.jsx("div",{style:re,onClick:()=>A("deck","bottom",!1),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:" Deck (bottom)"}),N.length>0&&v.jsx("div",{style:{...re,borderBottom:"none"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5";const B=T.currentTarget.getBoundingClientRect(),q=window.innerWidth,oe=window.innerHeight;let te=B.right+4,ie=B.top;const pe=180,_e=150;te+pe>q&&(te=B.left-pe-4),ie+_e>oe&&(ie=Math.max(8,oe-_e-8)),C({top:ie,left:te}),h(!0)},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("span",{children:[" Player",Y.has(t)&&Y.size>1&&v.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",Y.size," cards)"]})]}),v.jsx("span",{children:""})]})})]}),c&&k&&N.length>0&&v.jsx("div",{style:{position:"fixed",top:`${k.top}px`,left:`${k.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10001,minWidth:"160px"},onMouseEnter:()=>h(!0),onMouseLeave:()=>{h(!1),C(null)},children:N.map((T,B)=>{const q=Bt(T.id);return v.jsxs("div",{style:{...re,borderBottom:B===N.length-1?"none":"1px solid #eee",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>z(T.id),onMouseEnter:oe=>{oe.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:oe=>{oe.currentTarget.style.backgroundColor="white"},children:[v.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:q,flexShrink:0}}),v.jsx("span",{children:T.name})]},T.id)})})]}),document.body),r&&(b==null?void 0:b.type)==="set"&&b.counterType&&v.jsx(Qc,{title:`Set ${b.counterType} counters`,max:99,onConfirm:T=>{if(Y.has(t)&&Y.size>1)Y.forEach(q=>{const oe=Ot.getMap("cards").get(q);if(oe){const te=oe.counters[b.counterType]||0;Gt(q,b.counterType,T-te,n)}});else{const q=e.counters[b.counterType]||0;Gt(t,b.counterType,T-q,n)}R(null)},onCancel:()=>R(null)}),r&&(b==null?void 0:b.type)==="add"&&v.jsx(Mx,{title:"Add Counter Type",placeholder:"e.g., +1/+1, Loyalty, Charge",onConfirm:T=>{Y.has(t)&&Y.size>1?Y.forEach(q=>{Gt(q,T,1,n)}):Gt(t,T,1,n),R(null)},onCancel:()=>R(null)}),V&&Re&&!le&&(()=>{const T=p();if(!T)return null;const B=Object.entries(e.counters).length>0;return ci.createPortal(v.jsxs("div",{style:{position:"fixed",top:`${T.top}px`,left:`${T.left}px`,width:"488px",zIndex:1e4,pointerEvents:"none"},children:[v.jsx("img",{src:Re,alt:e.oracleId,style:{width:"100%",height:"680px",borderRadius:"12px",border:"4px solid #fff",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",objectFit:"cover"}}),B&&v.jsxs("div",{style:{marginTop:"8px",backgroundColor:"rgba(0, 0, 0, 0.9)",border:"4px solid #fff",borderRadius:"8px",padding:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[v.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#fff",marginBottom:"8px"},children:"Counters:"}),Object.entries(e.counters).map(([q,oe])=>v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"0.85rem",color:"#fff"},children:[v.jsx("span",{children:q}),v.jsxs("span",{style:{fontWeight:"bold"},children:["",oe]})]},q))]})]}),document.body)})()]})}function nl({zoneName:e,zoneType:t,cards:n,playerColor:r,playerId:o,onDrawCards:i,onMillCards:s,onExileFromDeck:a,onShuffleDeck:u,isInteractive:d=!0,viewerPlayerId:m,zoneId:c,showHeader:h=!0}){const[g,y]=K.useState(null),[S,I]=K.useState(!1),[k,C]=K.useState(!1),[f,x]=K.useState(null),[b,R]=K.useState(null),_=K.useRef(null),D=H=>{H.preventDefault(),H.dataTransfer.dropEffect="move",I(!0)},N=()=>{I(!1)},j=H=>{H.preventDefault(),I(!1);const Y=H.dataTransfer.getData("cardId"),$=H.dataTransfer.getData("fromZoneId"),U=H.dataTransfer.getData("playerId"),X=H.dataTransfer.getData("selectedCards");if(U!==o){console.log("Cannot drop opponent cards");return}if(t==="battlefield"&&_.current){const ee=_.current.getBoundingClientRect(),le=parseFloat(H.dataTransfer.getData("dragOffsetX")||"0"),ue=parseFloat(H.dataTransfer.getData("dragOffsetY")||"0"),ae=H.clientX-ee.left-le,Ce=H.clientY-ee.top-ue;if(X)try{const we=JSON.parse(X);we.some(({relativeX:Ie,relativeY:Ze})=>Ie!==0||Ze!==0)?we.forEach(({id:Ie,relativeX:Ze,relativeY:ut})=>{H.dataTransfer.getData("fromZoneId")!==c&&fn(Ie,c,"auto",o),ma(Ie,ae+Ze,Ce+ut,o)}):we.forEach(({id:P},re)=>{H.dataTransfer.getData("fromZoneId")!==c&&fn(P,c,"auto",o);const A=re%5,z=Math.floor(re/5),W=ae+A*130,Z=Ce+z*170;ma(P,W,Z,o)});return}catch(we){console.error("Failed to parse selected cards data:",we)}$!==c&&fn(Y,c,"auto",o),ma(Y,ae,Ce);return}if(X)try{const ee=JSON.parse(X);$!==c&&ee.forEach(({id:le})=>{fn(le,c,"auto",o)});return}catch(ee){console.error("Failed to parse selected cards data:",ee)}$!==c&&fn(Y,c,"auto",o)},L=H=>{if(t!=="battlefield"||H.button!==0||!_.current||H.target.closest("[data-card-id]"))return;const $=_.current.getBoundingClientRect(),U=H.clientX-$.left,X=H.clientY-$.top;C(!0),x({x:U,y:X}),R({x:U,y:X}),!H.ctrlKey&&!H.metaKey&&_u()},F=H=>{if(!k||!_.current||!f)return;const Y=_.current.getBoundingClientRect(),$=H.clientX-Y.left,U=H.clientY-Y.top;R({x:$,y:U})},V=()=>{if(!k||!f||!b||!_.current){C(!1);return}const H=Math.min(f.x,b.x),Y=Math.max(f.x,b.x),$=Math.min(f.y,b.y),U=Math.max(f.y,b.y),X=[];n.forEach(({id:ee,card:le})=>{if(!le.position)return;const ue=le.position.x+60,ae=le.position.y+80;ue>=H&&ue<=Y&&ae>=$&&ae<=U&&X.push(ee)}),X.length>0&&dx(X),C(!1),x(null),R(null)};if(t==="deck")return v.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[v.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),v.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),v.jsx("div",{style:{backgroundColor:"#333",border:"2px solid #666",borderRadius:"8px",padding:"2rem 1rem",textAlign:"center",color:"white",marginBottom:"0.75rem",fontSize:"2rem"},children:""}),v.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[v.jsx("button",{onClick:()=>i==null?void 0:i(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw 1"}),v.jsx("button",{onClick:()=>y({title:"Draw how many cards?",onConfirm:H=>{i==null||i(H),y(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw N"}),v.jsx("button",{onClick:()=>s==null?void 0:s(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill 1"}),v.jsx("button",{onClick:()=>y({title:"Mill how many cards?",onConfirm:H=>{s==null||s(H),y(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill N"}),v.jsx("button",{onClick:()=>a==null?void 0:a(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#9C27B0":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Exile 1"}),v.jsx("button",{onClick:()=>u==null?void 0:u(),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Shuffle"})]}),g&&v.jsx(Qc,{title:g.title,max:n.length,onConfirm:g.onConfirm,onCancel:()=>y(null)})]});if(t==="battlefield")return v.jsxs("div",{style:{backgroundColor:S?"#e3f2fd":"#f5f5f5",borderRadius:"8px",height:"100%",display:"flex",flexDirection:"column",border:S?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},"data-zone-id":c,onDragOver:D,onDragLeave:N,onDrop:j,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 1rem",marginBottom:"0.5rem",flexShrink:0},children:[v.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),v.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),v.jsxs("div",{ref:_,style:{position:"relative",flex:1,minHeight:0,cursor:k?"crosshair":"default"},onMouseDown:L,onMouseMove:F,onMouseUp:V,onMouseLeave:()=>{k&&V()},children:[n.length===0?v.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards on battlefield"}):n.map(({id:H,card:Y})=>v.jsx(Wf,{cardId:H,card:Y,playerId:o,isInteractive:d,forceFaceDown:!1},H)),k&&f&&b&&v.jsx("div",{style:{position:"absolute",left:`${Math.min(f.x,b.x)}px`,top:`${Math.min(f.y,b.y)}px`,width:`${Math.abs(b.x-f.x)}px`,height:`${Math.abs(b.y-f.y)}px`,border:"2px dashed #2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",pointerEvents:"none",zIndex:1e4}})]})]});const J=(H=>H<=5?100:H<=10?80:H<=15?60:50)(n.length);return v.jsxs("div",{style:{backgroundColor:S?"#e3f2fd":"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",minHeight:"200px",border:S?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",overflow:"visible"},"data-zone-id":c,onDragOver:D,onDragLeave:N,onDrop:j,children:[h&&v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[v.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),v.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),v.jsx("div",{style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"visible",minHeight:"160px",alignItems:"flex-start",paddingTop:"1rem",paddingBottom:"0.5rem"},children:n.length===0?v.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards in this zone"}):n.map(({id:H,card:Y},$)=>{const U=t==="hand"&&!!m&&o!==m;return v.jsx("div",{style:{marginLeft:$===0?"0":`-${100-J}px`,position:"relative",zIndex:$,transition:"all 0.2s ease",isolation:"auto"},onMouseEnter:X=>{X.currentTarget.style.zIndex="999",X.currentTarget.style.transform="translateY(-10px)"},onMouseLeave:X=>{X.currentTarget.style.zIndex=String($),X.currentTarget.style.transform="translateY(0)"},children:v.jsx(Wf,{cardId:H,card:Y,playerId:o,isInteractive:d,forceFaceDown:U},H)},H)})})]})}const zx="crdt-cards-username";function Fx({onJoin:e,playerCount:t}){const[n,r]=K.useState(""),[o,i]=K.useState([]),[s,a]=K.useState(""),[u,d]=K.useState(!1),[m,c]=K.useState(""),[h,g]=K.useState(!1),[y,S]=K.useState(""),I=K.useRef(null);K.useEffect(()=>{const N=localStorage.getItem(zx);N&&(r(N),setTimeout(()=>{I.current&&I.current.select()},100));const j=qr();i(j);const L=Tm();if(L){const F=j.find(Q=>Q.id===L),V=ws.find(Q=>Q.id===L);(F||V)&&a(L)}},[]);const k=N=>{N.preventDefault(),n.trim()&&s&&e(n.trim(),s)},C=async()=>{if(!m.trim())return;g(!0),S("");const N=await Ex(m.trim());if(N.success&&N.deck){const j=qr();i(j),a(N.deck.id),d(!1),c("")}else S(N.error||"Failed to import deck");g(!1)},f=N=>{if(confirm("Delete this deck from your library?")){Cx(N);const j=qr();i(j),s===N&&a("")}},x=o.find(N=>N.id===s),b=ws.find(N=>N.id===s),R=x||b,_=t>=4,D=n.trim()&&s;return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:v.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[v.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem",textAlign:"center"},children:" Join Game"}),v.jsxs("p",{style:{margin:"0 0 1rem 0",textAlign:"center",fontSize:"0.9rem",color:"#666"},children:["Room: ",v.jsx("strong",{style:{fontFamily:"monospace",color:"#333"},children:window.location.hash.replace(/^#/,"")||"default"})]}),_?v.jsxs("div",{children:[v.jsx("p",{style:{textAlign:"center",color:"#F44336",marginBottom:"1rem"},children:"This game is full (4/4 players)"}),v.jsx("p",{style:{textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Please try a different room or wait for a player to leave."})]}):v.jsxs("form",{onSubmit:k,children:[v.jsxs("p",{style:{marginBottom:"1rem",textAlign:"center",color:"#666"},children:["Players in room: ",t,"/4"]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{htmlFor:"player-name",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Your Name"}),v.jsx("input",{ref:I,id:"player-name",type:"text",value:n,onChange:N=>r(N.target.value),placeholder:"Enter your name...",autoFocus:!0,maxLength:20,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:N=>{N.target.style.borderColor="#2196F3"},onBlur:N=>{N.target.style.borderColor="#ddd"}})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("label",{htmlFor:"deck-select",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck (Required)"}),v.jsxs("select",{id:"deck-select",value:s,onChange:N=>{const j=N.target.value;j==="__import__"?(d(!0),a("")):(a(j),d(!1))},style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none",backgroundColor:"white"},children:[v.jsx("option",{value:"",children:"Select a deck..."}),o.length>0&&v.jsx("optgroup",{label:" My Decks",children:o.map(N=>v.jsxs("option",{value:N.id,children:[N.name," (",N.cardCount," cards)"]},N.id))}),v.jsx("optgroup",{label:" Starter Decks",children:ws.map(N=>v.jsxs("option",{value:N.id,children:[N.name," - ",N.description]},N.id))}),v.jsx("option",{value:"__import__",children:"+ Import New Deck..."})]}),R&&v.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f5f5f5",borderRadius:"4px",fontSize:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("span",{style:{color:"#666"},children:[x&&`${x.cardCount} cards  `,"Will draw 7 on join",b&&`  ${b.description}`]}),x&&v.jsx("button",{type:"button",onClick:()=>f(x.id),style:{background:"none",border:"none",color:"#F44336",cursor:"pointer",fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Delete"})]})]}),u&&v.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9f9f9",borderRadius:"6px",border:"1px solid #ddd"},children:[v.jsx("label",{htmlFor:"import-url",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck URL (Moxfield, Archidekt, or EDHRec)"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("input",{id:"import-url",type:"text",value:m,onChange:N=>c(N.target.value),placeholder:"Paste deck URL from Moxfield, Archidekt, or EDHRec...",disabled:h,style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"}}),v.jsx("button",{type:"button",onClick:C,disabled:!m.trim()||h,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:m.trim()&&!h?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:m.trim()&&!h?"pointer":"not-allowed"},children:h?"Importing...":"Import"})]}),y&&v.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,color:"#F44336",fontSize:"0.75rem"},children:y}),v.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#666"},children:"Deck will be saved to your library for reuse"})]}),v.jsx("button",{type:"submit",disabled:!D,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontWeight:"bold",color:"white",backgroundColor:D?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:D?"pointer":"not-allowed",transition:"background-color 0.2s"},onMouseEnter:N=>{D&&(N.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:N=>{D&&(N.currentTarget.style.backgroundColor="#4CAF50")},children:"Join Game"}),!s&&v.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#FF9800",textAlign:"center"},children:"Please select a deck to join"})]}),v.jsx("p",{style:{marginTop:"1.5rem",marginBottom:0,fontSize:"0.75rem",color:"#999",textAlign:"center"},children:"Share the URL with friends to play together!"})]})})}function Px({message:e,onConfirm:t,onCancel:n,confirmText:r="Confirm",confirmColor:o="#F44336"}){return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n,children:v.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:i=>i.stopPropagation(),children:[v.jsx("p",{style:{margin:"0 0 1.5rem 0",fontSize:"1rem",textAlign:"center",lineHeight:"1.5"},children:e}),v.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[v.jsx("button",{onClick:n,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),v.jsx("button",{onClick:t,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:o,border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.opacity="0.9"},onMouseLeave:i=>{i.currentTarget.style.opacity="1"},children:r})]})]})})}function Ux({players:e,currentPlayerId:t,viewingPlayerId:n,onSelectPlayer:r}){return e.length===0?v.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",borderBottom:"1px solid #ddd",textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Waiting for players to join..."}):v.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"2px solid #ddd",display:"flex",gap:"1rem",padding:"0.75rem 1rem",overflowX:"auto",minHeight:"80px"},children:e.map(({id:o,player:i})=>{const s=o===t,a=o===n;return v.jsxs("div",{onClick:()=>r(o),style:{flex:"0 0 auto",minWidth:"200px",backgroundColor:a?"#fffbf0":"#fff",border:a?`3px solid ${Bt(o)}`:`2px solid ${Bt(o)}`,borderRadius:"8px",padding:"0.75rem",cursor:"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",gap:"0.5rem",boxShadow:a?"0 4px 12px rgba(0,0,0,0.2)":"none"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.25)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow=a?"0 4px 12px rgba(0,0,0,0.2)":"none"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[v.jsx("span",{style:{fontWeight:"bold",fontSize:"0.875rem",color:Bt(o)},children:i.name}),s&&v.jsx("span",{style:{fontSize:"0.7rem",color:"#666",fontWeight:"normal"},children:"(You)"})]}),v.jsxs("span",{style:{fontSize:"1.25rem",fontWeight:"bold",color:i.lifeTotal<=0?"#F44336":"#333"},children:[i.lifeTotal," "]})]}),v.jsxs("div",{style:{fontSize:"0.75rem",color:"#666",display:"flex",gap:"0.5rem"},children:[v.jsx("span",{children:" Deck"}),v.jsx("span",{children:" Hand"}),v.jsx("span",{children:" Field"})]})]},o)})})}function Bx({currentPlayerId:e}){const[t,n]=K.useState([]),[r,o]=K.useState("all"),[i,s]=K.useState(""),a=K.useRef(null);K.useEffect(()=>{const g=()=>{const y=[];lr.forEach(S=>{y.push(S)}),n(y)};return lr.observe(g),g(),()=>{lr.unobserve(g)}},[]),K.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]);const u=g=>{g.preventDefault(),i.trim()&&(xx(e,i.trim()),s(""))},d=g=>{const y=ho.get(g);return y?y.type.charAt(0).toUpperCase()+y.type.slice(1):g},m=g=>{var I,k;const y=Ee.get(g.playerId),S=(y==null?void 0:y.name)||"Unknown";if(g.type==="chat"&&g.action==="chat_message")return g.data.message;switch(g.action){case"player_joined":return`${S} joined the game`;case"player_removed":return`${S} left the game`;case"turn_changed":return`${S}'s turn - ${g.data.step}`;case"draw_cards":return`${S} drew ${g.data.count} card${g.data.count!==1?"s":""}`;case"mill_cards":return`${S} milled ${g.data.count} card${g.data.count!==1?"s":""}`;case"exile_from_deck":return`${S} exiled ${g.data.count} card${g.data.count!==1?"s":""} from deck`;case"shuffle_deck":return`${S} shuffled their deck`;case"card_moved":{const x=g.data.oracleId||"a card",b=d(g.data.to),R=d(g.data.from);return R===b?`${S} moved ${x}`:`${S} moved ${x} from ${R} to ${b}`}case"counter_modified":{const x=g.data.oracleId||"a card",b=g.data.counterType,R=g.data.delta,_=g.data.newValue;if(R>0)return`${S} added ${R===1?"a":R} ${b} counter${R!==1?"s":""} to ${x} (${_} total)`;{const D=Math.abs(R);return`${S} removed ${D} ${b} counter${D!==1?"s":""} from ${x} (${_} total)`}}case"card_updated":if(((I=g.data.updates)==null?void 0:I.tapped)!==void 0){const x=g.data.oracleId||"a card";return`${S} ${g.data.updates.tapped?"tapped":"untapped"} ${x}`}if(((k=g.data.updates)==null?void 0:k.faceDown)!==void 0){const x=g.data.oracleId||"a card";return`${S} ${g.data.updates.faceDown?"turned face down":"turned face up"} ${x}`}return`${S} updated a card`;case"life_total_modified":const C=g.data.delta,f=C>0?"+":"";return`${S} ${C>0?"gained":"lost"} ${Math.abs(C)} life (${f}${C}  ${g.data.newTotal})`;case"life_total_set":return`${S} set life to ${g.data.newTotal}`;default:return`${S}: ${g.action}`}},c=g=>new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),h=t.filter(g=>r==="all"?!0:r==="chat"?g.type==="chat":r==="game"?g.type==="game"||!g.type:!0);return v.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#fff"},children:[v.jsxs("div",{style:{borderBottom:"2px solid #e0e0e0",padding:"0.75rem"},children:[v.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"0.875rem",color:"#666"},children:"CHAT & LOG"}),v.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","chat","game"].map(g=>v.jsx("button",{onClick:()=>o(g),style:{flex:1,padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:r===g?"#2196F3":"#f5f5f5",color:r===g?"white":"#666",border:"none",borderRadius:"4px",cursor:"pointer",textTransform:"capitalize"},children:g==="all"?"All":g==="chat"?"Chat":"Game Log"},g))})]}),v.jsx("div",{ref:a,style:{flex:1,overflowY:"auto",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:h.length===0?v.jsx("div",{style:{color:"#999",fontSize:"0.875rem",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:r==="chat"?"No chat messages yet":"No events yet"}):h.map((g,y)=>{const S=g.type==="chat",I=Ee.get(g.playerId),k=Bt(g.playerId);return v.jsx("div",{style:{opacity:S?1:.6,fontSize:"0.875rem",lineHeight:1.4},children:v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"baseline"},children:[v.jsx("span",{style:{fontSize:"0.65rem",color:"#999",flexShrink:0},children:c(g.timestamp)}),S?v.jsxs(v.Fragment,{children:[v.jsxs("span",{style:{fontWeight:"bold",color:k,flexShrink:0},children:[(I==null?void 0:I.name)||"Unknown",":"]}),v.jsx("span",{style:{color:"#333"},children:m(g)})]}):v.jsx("span",{style:{color:"#666"},children:m(g)})]})},y)})}),v.jsxs("form",{onSubmit:u,style:{borderTop:"2px solid #e0e0e0",padding:"0.75rem",display:"flex",gap:"0.5rem"},children:[v.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Type a message...",style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"},onFocus:g=>{g.target.style.borderColor="#2196F3"},onBlur:g=>{g.target.style.borderColor="#ddd"}}),v.jsx("button",{type:"submit",disabled:!i.trim(),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:i.trim()?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:i.trim()?"pointer":"not-allowed"},children:"Send"})]})]})}function $x({isOpen:e,onClose:t,currentPlayerId:n}){return e?v.jsxs(v.Fragment,{children:[v.jsx("div",{onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:"fadeIn 0.2s ease"}}),v.jsxs("div",{style:{position:"fixed",top:0,right:0,bottom:0,width:"400px",maxWidth:"90vw",backgroundColor:"#fff",boxShadow:"-4px 0 12px rgba(0, 0, 0, 0.2)",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease"},children:[v.jsxs("div",{style:{padding:"1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[v.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:" Chat & Log"}),v.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:r=>{r.currentTarget.style.color="#333"},onMouseLeave:r=>{r.currentTarget.style.color="#666"},children:""})]}),v.jsx("div",{style:{flex:1,overflow:"hidden"},children:v.jsx(Bx,{currentPlayerId:n})})]}),v.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]}):null}function Wx({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return v.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #757575":"none"},children:[v.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[v.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Graveyard (",n.length," ",n.length===1?"card":"cards",")"]}),v.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:a=>{a.currentTarget.style.color="#333"},onMouseLeave:a=>{a.currentTarget.style.color="#666"},children:""})]}),v.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:v.jsx(nl,{zoneId:`graveyard-${o}`,zoneName:"",zoneType:"graveyard",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function Hx({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return v.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #9C27B0":"none"},children:[v.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[v.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Exile (",n.length," ",n.length===1?"card":"cards",")"]}),v.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:a=>{a.currentTarget.style.color="#333"},onMouseLeave:a=>{a.currentTarget.style.color="#666"},children:""})]}),v.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:v.jsx(nl,{zoneId:`exile-${o}`,zoneName:"",zoneType:"exile",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function Vx({cards:e,mode:t,onConfirm:n,onCancel:r}){const[o,i]=K.useState(e.map(h=>h.cardId)),[s,a]=K.useState([]),u=h=>{i(g=>g.filter(y=>y!==h)),a(g=>[...g,h])},d=h=>{a(g=>g.filter(y=>y!==h)),i(g=>[...g,h])},m=(h,g,y)=>{(y==="top"?i:a)(I=>{const k=I.indexOf(h);if(k===-1)return I;const C=g==="up"?k-1:k+1;if(C<0||C>=I.length)return I;const f=[...I];return[f[k],f[C]]=[f[C],f[k]],f})},c=()=>{t==="scry"&&n&&n(o,s),r()};return v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:r,children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},onClick:h=>h.stopPropagation(),children:[v.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem"},children:[t==="scry"?"Scry":"Peek"," ",e.length]}),t==="scry"&&v.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Reorder cards and choose which to put on top or bottom of your deck"}),o.length>0&&v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Top of Deck (",o.length,")"]}),v.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:o.map((h,g)=>{const y=e.find(S=>S.cardId===h);return y?v.jsx(Hf,{cardId:h,card:y.card,position:g+1,canMoveUp:t==="scry"&&g>0,canMoveDown:t==="scry"&&g<o.length-1,onMoveUp:()=>m(h,"up","top"),onMoveDown:()=>m(h,"down","top"),onMoveToBottom:t==="scry"?()=>u(h):void 0},h):null})})]}),t==="scry"&&s.length>0&&v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Bottom of Deck (",s.length,")"]}),v.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:s.map((h,g)=>{const y=e.find(S=>S.cardId===h);return y?v.jsx(Hf,{cardId:h,card:y.card,position:g+1,canMoveUp:g>0,canMoveDown:g<s.length-1,onMoveUp:()=>m(h,"up","bottom"),onMoveDown:()=>m(h,"down","bottom"),onMoveToTop:()=>d(h)},h):null})})]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[v.jsx("button",{onClick:r,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer"},children:t==="peek"?"Close":"Cancel"}),t==="scry"&&v.jsx("button",{onClick:c,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Confirm"})]})]})})}function Hf({card:e,position:t,canMoveUp:n,canMoveDown:r,onMoveUp:o,onMoveDown:i,onMoveToBottom:s,onMoveToTop:a}){const{imageUrl:u,loading:d}=Jc(e.oracleId);return v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},children:[v.jsxs("div",{style:{width:"150px",height:"210px",borderRadius:"8px",overflow:"hidden",border:"2px solid #333",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[d?v.jsx("div",{style:{fontSize:"0.8rem",color:"#999"},children:"Loading..."}):u?v.jsx("img",{src:u,alt:e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover"}}):v.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:e.oracleId}),v.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:t})]}),v.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",justifyContent:"center"},children:[n&&v.jsx("button",{onClick:o,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),r&&v.jsx("button",{onClick:i,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),s&&v.jsx("button",{onClick:s,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Bottom"}),a&&v.jsx("button",{onClick:a,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Top"})]})]})}function Yx({cardCount:e,playerColor:t,playerId:n,revealedCard:r,onDrawOne:o,onDrawN:i,onMillOne:s,onMillN:a,onExileOne:u,onExileN:d,onRevealTop:m,onShuffle:c}){const[h,g]=K.useState(!1),[y,S]=K.useState(!1),[I,k]=K.useState(!1),[C,f]=K.useState(!1),[x,b]=K.useState(!1),[R,_]=K.useState(!1),[D,N]=K.useState(null),[j,L]=K.useState(null),[F,V]=K.useState(null),[Q,J]=K.useState(null),[H,Y]=K.useState(null),[$,U]=K.useState(null),[X,ee]=K.useState(null),[le,ue]=K.useState(null),[ae,Ce]=K.useState(!1),[we,Re]=K.useState(null),{imageUrl:Ie}=Jc((r==null?void 0:r.cardName)||""),Ze=()=>{e>0&&o()},ut=$?{position:"fixed",top:`${$.top}px`,left:`${$.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"absolute",bottom:"100%",left:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"150px"},ye={padding:"0.5rem 0.75rem",cursor:e>0?"pointer":"not-allowed",fontSize:"0.75rem",borderBottom:"1px solid #eee"};return v.jsxs("div",{style:{position:"relative"},children:[v.jsxs("div",{onDoubleClick:Ze,style:{width:"120px",height:"160px",backgroundColor:r&&Ie?"transparent":"#333",backgroundImage:r&&Ie?`url(${Ie})`:"none",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid #666",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:e>0?"pointer":"default",position:"relative",userSelect:"none"},onMouseEnter:P=>{if(!r)return;const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth;let A=re.left-320,z=re.top;A<8&&(A=re.right+20),A+300>me&&(A=Math.max(8,(me-300)/2)),z+420>window.innerHeight&&(z=Math.max(8,window.innerHeight-420-8)),Re({top:z,left:A}),Ce(!0)},onMouseLeave:()=>{Ce(!1),Re(null)},children:[!r&&v.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"0.5rem"},children:[e," cards"]}),v.jsx("button",{onClick:P=>{if(P.stopPropagation(),!h){const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth;let A=re.left,z=re.top-8;const W=180;A+W>me&&(A=me-W-8);const Z=250;z-Z<8?z=re.bottom+8:z=z-Z,U({top:z,left:A})}g(!h)},style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(255,255,255,0.9)",border:"1px solid #333",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:""}),v.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",backgroundColor:t,color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[" ",e]})]}),ae&&we&&r&&ci.createPortal(v.jsx("div",{style:{position:"fixed",top:`${we.top}px`,left:`${we.left}px`,width:"300px",height:"420px",borderRadius:"12px",overflow:"hidden",border:"3px solid #333",backgroundColor:"#f5f5f5",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:10001,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:Ie?v.jsx("img",{src:Ie,alt:r.cardName,style:{width:"100%",height:"100%",objectFit:"cover"}}):v.jsx("div",{style:{padding:"1rem",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:r.cardName})}),document.body),h&&ci.createPortal(v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>{g(!1),S(!1),k(!1),f(!1),b(!1),_(!1)}}),v.jsxs("div",{style:ut,children:[v.jsx("div",{style:{...ye,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",k(!1),f(!1),b(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth,A=window.innerHeight;let z=re.right+4,W=re.top;const Z=180,E=100;z+Z>me&&(z=re.left-Z-4),W+E>A&&(W=Math.max(8,A-E-8)),N({top:W,left:z}),S(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:v.jsx("span",{children:"Draw "})}),v.jsx("div",{style:{...ye,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",S(!1),f(!1),b(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth,A=window.innerHeight;let z=re.right+4,W=re.top;const Z=180,E=100;z+Z>me&&(z=re.left-Z-4),W+E>A&&(W=Math.max(8,A-E-8)),L({top:W,left:z}),k(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:v.jsx("span",{children:"Mill "})}),v.jsx("div",{style:{...ye,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",S(!1),k(!1),b(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth,A=window.innerHeight;let z=re.right+4,W=re.top;const Z=200,E=180;z+Z>me&&(z=re.left-Z-4),W+E>A&&(W=Math.max(8,A-E-8)),V({top:W,left:z}),f(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:v.jsx("span",{children:"Exile "})}),v.jsx("div",{style:{...ye,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",S(!1),k(!1),f(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth,A=window.innerHeight;let z=re.right+4,W=re.top;const Z=180,E=100;z+Z>me&&(z=re.left-Z-4),W+E>A&&(W=Math.max(8,A-E-8)),J({top:W,left:z}),b(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:v.jsx("span",{children:"Scry "})}),v.jsx("div",{style:{...ye,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",S(!1),k(!1),f(!1),b(!1);const re=P.currentTarget.getBoundingClientRect(),me=window.innerWidth,A=window.innerHeight;let z=re.right+4,W=re.top;const Z=180,E=100;z+Z>me&&(z=re.left-Z-4),W+E>A&&(W=Math.max(8,A-E-8)),Y({top:W,left:z}),_(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:v.jsx("span",{children:"Peek "})}),v.jsx("div",{style:{...ye,backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(m(),g(!1))},onMouseEnter:P=>{e>0&&(P.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:"Reveal Top Card"}),v.jsx("div",{style:{...ye,borderBottom:"none",backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(c(),g(!1))},onMouseEnter:P=>{e>0&&(P.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:"Shuffle Deck"})]}),y&&D&&v.jsxs("div",{style:{position:"fixed",top:`${D.top}px`,left:`${D.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>S(!0),onMouseLeave:()=>{S(!1),N(null)},children:[v.jsx("div",{style:ye,onClick:()=>{o(),g(!1),S(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Draw 1"}),v.jsx("div",{style:{...ye,borderBottom:"none"},onClick:()=>{ee({title:"Draw how many cards?",onConfirm:P=>{i(P),ee(null),g(!1),S(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Draw N"})]}),I&&j&&v.jsxs("div",{style:{position:"fixed",top:`${j.top}px`,left:`${j.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>k(!0),onMouseLeave:()=>{k(!1),L(null)},children:[v.jsx("div",{style:ye,onClick:()=>{s(),g(!1),k(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Mill 1"}),v.jsx("div",{style:{...ye,borderBottom:"none"},onClick:()=>{ee({title:"Mill how many cards?",onConfirm:P=>{a(P),ee(null),g(!1),k(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Mill N"})]}),C&&F&&v.jsxs("div",{style:{position:"fixed",top:`${F.top}px`,left:`${F.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>f(!0),onMouseLeave:()=>{f(!1),V(null)},children:[v.jsx("div",{style:ye,onClick:()=>{u(!1),g(!1),f(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-up)"}),v.jsx("div",{style:ye,onClick:()=>{ee({title:"Exile how many cards (face-up)?",onConfirm:P=>{d(P,!1),ee(null),g(!1),f(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile N (face-up)"}),v.jsx("div",{style:ye,onClick:()=>{u(!0),g(!1),f(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-down)"}),v.jsx("div",{style:{...ye,borderBottom:"none"},onClick:()=>{ee({title:"Exile how many cards (face-down)?",onConfirm:P=>{d(P,!0),ee(null),g(!1),f(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile N (face-down)"})]}),x&&Q&&v.jsxs("div",{style:{position:"fixed",top:`${Q.top}px`,left:`${Q.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>b(!0),onMouseLeave:()=>{b(!1),J(null)},children:[v.jsx("div",{style:ye,onClick:()=>{const P=es(n,1);P.length>0&&(ue({cards:P,mode:"scry"}),g(!1),b(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Scry 1"}),v.jsx("div",{style:{...ye,borderBottom:"none"},onClick:()=>{ee({title:"Scry how many cards?",onConfirm:P=>{const re=es(n,P);re.length>0&&ue({cards:re,mode:"scry"}),ee(null),g(!1),b(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Scry N"})]}),R&&H&&v.jsxs("div",{style:{position:"fixed",top:`${H.top}px`,left:`${H.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>_(!0),onMouseLeave:()=>{_(!1),Y(null)},children:[v.jsx("div",{style:ye,onClick:()=>{const P=es(n,1);P.length>0&&(ue({cards:P,mode:"peek"}),g(!1),_(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Peek 1"}),v.jsx("div",{style:{...ye,borderBottom:"none"},onClick:()=>{ee({title:"Peek at how many cards?",onConfirm:P=>{const re=es(n,P);re.length>0&&ue({cards:re,mode:"peek"}),ee(null),g(!1),_(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Peek N"})]})]}),document.body),X&&v.jsx(Qc,{title:X.title,max:e,onConfirm:X.onConfirm,onCancel:()=>ee(null)}),le&&v.jsx(Vx,{cards:le.cards,mode:le.mode,onConfirm:le.mode==="scry"?(P,re)=>{Sx(n,P,re),ue(null)}:void 0,onCancel:()=>ue(null)})]})}function Kx({playerId:e,lifeTotal:t,playerColor:n,currentPlayerId:r}){const[o,i]=K.useState(!1),s=()=>{Er(e,1,r)},a=()=>{Er(e,-1,r)};return v.jsxs("div",{style:{position:"relative"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fff",border:`2px solid ${n}`,borderRadius:"8px",padding:"0.5rem"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem",fontWeight:"bold",color:t<=0?"#F44336":"#333"},children:[v.jsx("span",{children:""}),v.jsx("span",{children:t})]}),v.jsx("button",{onClick:s,style:{width:"32px",height:"32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#4CAF50"},children:"+"}),v.jsx("button",{onClick:a,style:{width:"32px",height:"32px",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#da190b"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#F44336"},children:""}),v.jsx("button",{onClick:()=>i(!o),style:{width:"32px",height:"32px",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#616161"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#757575"},children:""})]}),o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>i(!1)}),v.jsxs("div",{style:{position:"absolute",bottom:"100%",right:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"180px"},children:[v.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADJUST"}),v.jsxs("div",{style:{padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",borderBottom:"1px solid #eee"},children:[v.jsx("button",{onClick:()=>{Er(e,5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+5"}),v.jsx("button",{onClick:()=>{Er(e,-5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-5"}),v.jsx("button",{onClick:()=>{Er(e,10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+10"}),v.jsx("button",{onClick:()=>{Er(e,-10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-10"})]}),v.jsx("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",backgroundColor:"white"},onClick:()=>{const u=prompt("Set life total to:",t.toString());if(u!==null){const d=parseInt(u,10);isNaN(d)||wx(e,d,r)}i(!1)},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="white"},children:"Set Exact Value..."})]})]})]})}const jm="crdt-cards-recent-tokens",Gx=4;function Dm(){try{const e=localStorage.getItem(jm);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load recent tokens:",e),[]}}function Qx(e,t){try{const r=Dm().filter(i=>i.name!==e);r.unshift({name:e,imageUrl:t,timestamp:Date.now()});const o=r.slice(0,Gx);localStorage.setItem(jm,JSON.stringify(o))}catch(n){console.error("Failed to save recent token:",n)}}const xa=[{name:"Treasure",displayName:"Treasure",color:"#FFD700",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/d/5/d52efeb3-661d-45e9-97c3-af167f889684.jpg?1757379348"},{name:"Food",displayName:"Food",color:"#8B4513",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/f/0fb2c5a4-859e-40ac-8091-7ba44f57b878.jpg?1757379328"},{name:"Clue",displayName:"Clue",color:"#708090",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/1/5/15866ed4-1ca3-427f-99ba-ee26ede9ae18.jpg?1752946432"},{name:"Soldier",displayName:"1/1 Soldier",color:"#F0E68C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/6/3/631c2c16-132d-4607-ab7e-207a6af188e5.jpg?1757686920"},{name:"Zombie",displayName:"2/2 Zombie",color:"#2F4F4F",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/4/c/4cecd5c6-d6c8-4cd5-97a3-cddaf051af15.jpg?1749245686"},{name:"Goblin",displayName:"1/1 Goblin",color:"#DC143C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/e/2/e265ca24-96c0-4654-a8f3-bbffe288970a.jpg?1742506636"},{name:"Beast",displayName:"3/3 Beast",color:"#228B22",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/3/b/3b584d93-5681-4ecd-953c-5ef58307caab.jpg?1752946408"},{name:"Spirit",displayName:"1/1 Spirit",color:"#E6E6FA",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/0/004f2ea4-0477-49b2-ad06-5aac7991103d.jpg?1749245677"}];function Jx({playerId:e,onClose:t}){const[n,r]=K.useState(xa.reduce((f,x)=>({...f,[x.name]:1}),{})),[o,i]=K.useState([]),[s,a]=K.useState(""),[u,d]=K.useState([]),[m,c]=K.useState(!1),[h,g]=K.useState("");K.useEffect(()=>{i(Dm())},[]);const y=f=>{const x=n[f]||1,b=xa.find(_=>_.name===f),R=b==null?void 0:b.imageUrl;va(e,f,x,R),t()},S=(f,x)=>{r(b=>({...b,[f]:Math.max(1,Math.min(20,(b[f]||1)+x))}))},I=async()=>{if(s.trim()){c(!0),g(""),d([]);try{const f=`t:token ${s.trim()}`,x=await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(f)}&unique=prints`);if(!x.ok){x.status===404?g("No tokens found matching your search"):g("Failed to search Scryfall"),c(!1);return}const b=await x.json();d(b.data||[])}catch(f){console.error("Search error:",f),g("Network error - could not search Scryfall")}finally{c(!1)}}},k=f=>{var b,R,_;const x=((b=f.image_uris)==null?void 0:b.normal)||((R=f.image_uris)==null?void 0:R.large)||((_=f.image_uris)==null?void 0:_.small);x&&Qx(f.name,x),va(e,f.name,1,x),t()},C=f=>{const x=n[f.name]||1;va(e,f.name,x,f.imageUrl),t()};return v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:t}),v.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3)",zIndex:9999,width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",padding:"1.5rem"},onClick:f=>f.stopPropagation(),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #ddd"},children:[v.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"Create Tokens"}),v.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0 0.5rem"},children:""})]}),v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"COMMON TOKENS"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:xa.map(f=>v.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#fafafa"},children:[v.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:f.emoji}),v.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333"},children:f.displayName}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[v.jsx("button",{onClick:()=>S(f.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),v.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[f.name]||1}),v.jsx("button",{onClick:()=>S(f.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),v.jsx("button",{onClick:()=>y(f.name),style:{padding:"0.5rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},f.name))})]}),o.length>0&&v.jsxs("div",{style:{marginBottom:"1.5rem"},children:[v.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"RECENTLY USED"}),v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:o.map(f=>v.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#f0f8ff"},children:[v.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:""}),v.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:f.name,children:f.name}),v.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[v.jsx("button",{onClick:()=>S(f.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),v.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[f.name]||1}),v.jsx("button",{onClick:()=>S(f.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),v.jsx("button",{onClick:()=>C(f),style:{padding:"0.5rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},f.name))})]}),v.jsxs("div",{children:[v.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"SEARCH SCRYFALL"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[v.jsx("input",{type:"text",placeholder:"Search token name (e.g., dragon, elf)",value:s,onChange:f=>a(f.target.value),onKeyDown:f=>f.key==="Enter"&&I(),style:{flex:1,padding:"0.5rem",border:"2px solid #ddd",borderRadius:"4px",fontSize:"0.875rem"}}),v.jsx("button",{onClick:I,disabled:m||!s.trim(),style:{padding:"0.5rem 1rem",backgroundColor:m?"#ccc":"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:m?"Searching...":"Search"})]}),h&&v.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",fontSize:"0.875rem"},children:h}),u.length>0&&v.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"0.5rem"},children:u.slice(0,20).map(f=>{var x;return v.jsx("div",{onClick:()=>k(f),style:{cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",transition:"transform 0.2s"},onMouseEnter:b=>{b.currentTarget.style.transform="scale(1.05)",b.currentTarget.style.borderColor="#2196F3"},onMouseLeave:b=>{b.currentTarget.style.transform="scale(1)",b.currentTarget.style.borderColor="#ddd"},children:(x=f.image_uris)!=null&&x.small?v.jsx("img",{src:f.image_uris.small,alt:f.name,style:{width:"100%",display:"block"}}):v.jsx("div",{style:{aspectRatio:"5/7",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999",padding:"0.5rem",textAlign:"center"},children:f.name})},f.id)})})]})]})]})}const Vf=["swift","brave","wise","mighty","clever","bold","noble","fierce","mystic","ancient","silver","golden","crimson","azure","emerald","shadow","thunder","frost","flame","storm","lunar","solar"],Yf=["dragon","phoenix","griffin","wizard","knight","mage","sage","warrior","ranger","paladin","rogue","sorcerer","champion","guardian","sentinel","warden","keeper","seeker","voyager"];function Kf(){const e=Vf[Math.floor(Math.random()*Vf.length)],t=Yf[Math.floor(Math.random()*Yf.length)],n=Math.floor(1e3+Math.random()*9e3);return`${e}-${t}-${n}`}function qx(){const[e,t]=K.useState(Kf()),[n,r]=K.useState(""),o=()=>{window.location.hash=e},i=a=>{if(a.preventDefault(),n.trim()){const u=n.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-");window.location.hash=u}},s=()=>{t(Kf())};return v.jsx("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:v.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"3rem",maxWidth:"600px",width:"100%"},children:[v.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[v.jsxs("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[" ",window.location.host]}),v.jsx("p",{style:{margin:0,color:"#666",fontSize:"1.1rem"},children:"Real-time multiplayer card game"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:v.jsx("a",{href:"https://github.com/rsullivan00/crdt-cards/",target:"_blank",rel:"noopener noreferrer",style:{color:"#667eea",textDecoration:"none"},children:"View code & report bugs on GitHub "})})]}),v.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[v.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" What is this?"}),v.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#555",lineHeight:"1.6"},children:[v.jsx("li",{children:"Play Magic-style card games with friends in real-time"}),v.jsx("li",{children:"No server required - uses peer-to-peer technology (CRDTs)"}),v.jsx("li",{children:"Import decks from Moxfield, Archidekt, or use starter decks"}),v.jsx("li",{children:"Everything syncs instantly across all players"})]})]}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Create a New Room"}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.75rem"},children:[v.jsx("input",{type:"text",value:e,readOnly:!0,style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa",fontFamily:"monospace"}}),v.jsx("button",{onClick:s,style:{padding:"0.75rem",fontSize:"1.25rem",backgroundColor:"#f8f9fa",border:"2px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#e9ecef"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#f8f9fa"},title:"Generate new room name",children:""})]}),v.jsx("button",{onClick:o,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)"},children:"Create Room & Invite Friends"}),v.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"#888",textAlign:"center"},children:"Share the URL with friends to play together"})]}),v.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"2rem 0"}}),v.jsxs("div",{style:{marginBottom:"2rem"},children:[v.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Join Existing Room"}),v.jsx("form",{onSubmit:i,children:v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("input",{type:"text",value:n,onChange:a=>r(a.target.value),placeholder:"Enter room name...",style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",fontFamily:"monospace"}}),v.jsx("button",{type:"submit",disabled:!n.trim(),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:n.trim()?"#4CAF50":"#e0e0e0",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",transition:"background-color 0.2s"},children:"Join"})]})})]}),v.jsxs("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"6px",padding:"1rem",fontSize:"0.9rem",color:"#856404"},children:[v.jsx("strong",{children:" Important:"})," Rooms are temporary and ephemeral. All game data is deleted when the last player leaves. Make sure to finish your game in one session!"]})]})})}function Xx(){if(!(window.location.hash&&window.location.hash!=="#"))return v.jsx(qx,{});const[t,n]=K.useState(null),[r,o]=K.useState(!1),[i,s]=K.useState(!1),[a,u]=K.useState(!1),[d,m]=K.useState(null),[,c]=K.useState({}),[h,g]=K.useState(!1),[y,S]=K.useState(!1),[I,k]=K.useState(!1),[C,f]=K.useState(!1),[x,b]=K.useState(null),[R,_]=K.useState(null);K.useEffect(()=>{const J=`crdt-cards-player-${Yo()}`,H=localStorage.getItem(J);H&&Ee.has(H)?n(H):o(!0);const Y=ee=>{s(ee.connected)},$=ee=>{u(ee.synced),ee.synced&&H&&!t&&Ee.has(H)&&(n(H),o(!1),console.log("Rejoined as existing player:",H))};Br.on("status",Y),Br.on("synced",$);const U=()=>{c({})};Ee.observe(U),ho.observe(U),de.observe(U),wi.observe(U);const X=()=>{const ee=Vo.get("current");_(ee?{cardName:ee.cardName,revealedBy:ee.revealedBy}:null)};return Vo.observe(X),X(),U(),()=>{Ee.unobserve(U),ho.unobserve(U),de.unobserve(U),wi.unobserve(U),Vo.unobserve(X),Br.off("status",Y),Br.off("synced",$)}},[t]);const D=async(J,H)=>{const Y=crypto.randomUUID();px(Y,J,!0);const $=ws.find(X=>X.id===H);if($){const X=await jx($.file,$.name);X.success&&X.deck&&($f(Y,X.deck),Uf(X.deck.id),ya(Y),Zi(Y,7))}else{const ee=qr().find(le=>le.id===H);ee&&($f(Y,ee),Uf(H),ya(Y),Zi(Y,7))}const U=`crdt-cards-player-${Yo()}`;localStorage.setItem(U,Y),localStorage.setItem("crdt-cards-username",J),n(Y),o(!1),!zf()&&Ee.size===1&&Of(Y,"main1")},N=()=>{const J=zf(),H=Array.from(Ee.keys());if(J&&H.length>0){const $=(H.indexOf(J.playerId)+1)%H.length;Of(H[$],"main1")}},j=()=>{m({message:"Reset the entire room? This will clear all players, cards, and game state.",onConfirm:()=>{mx();const J=`crdt-cards-player-${Yo()}`;localStorage.removeItem(J),window.location.reload()}})},L=J=>{const H=[];return de.forEach((Y,$)=>{Y.zoneId===J&&H.push({id:$,card:Y})}),H.sort((Y,$)=>Y.card.order-$.card.order)},F=[];if(Ee.forEach((J,H)=>{F.push({id:H,player:J})}),r)return v.jsx(Fx,{onJoin:D,playerCount:Ee.size});if(!t)return v.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."});const V=Ee.get(t),Q=x||t;return v.jsxs("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"#e0e0e0"},children:[v.jsxs("div",{style:{backgroundColor:"#fff",padding:"0.75rem 1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[v.jsx("h1",{style:{margin:0,fontSize:"1.25rem"},children:window.location.host}),v.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[v.jsx("strong",{children:"You:"})," ",(V==null?void 0:V.name)||"Unknown"]})]}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[v.jsx("button",{onClick:N,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Next Turn"}),v.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:i&&a?"#4CAF50":"#FF9800"}}),v.jsx("button",{onClick:j,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reset"})]})]}),v.jsx(Ux,{players:F,currentPlayerId:t,viewingPlayerId:x||t,onSelectPlayer:J=>{b(J===t?null:J)}}),v.jsxs("div",{style:{flex:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:[v.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:v.jsx(nl,{zoneId:`battlefield-${Q}`,zoneName:"Battlefield",zoneType:"battlefield",cards:L(`battlefield-${Q}`),playerColor:Bt(Q),playerId:Q,isInteractive:Q===t,viewerPlayerId:t})}),v.jsx(Wx,{isOpen:y,onClose:()=>S(!1),cards:L(`graveyard-${Q}`),playerColor:Bt(Q),playerId:Q,isInteractive:Q===t,viewerPlayerId:t}),v.jsx(Hx,{isOpen:I,onClose:()=>k(!1),cards:L(`exile-${Q}`),playerColor:Bt(Q),playerId:Q,isInteractive:Q===t,viewerPlayerId:t}),v.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"1rem",alignItems:"center"},children:[v.jsx("div",{style:{minWidth:0,overflow:"visible"},children:v.jsx(nl,{zoneId:`hand-${Q}`,zoneName:"Hand",zoneType:"hand",cards:L(`hand-${Q}`),playerColor:Bt(Q),playerId:Q,isInteractive:Q===t,viewerPlayerId:t})}),V&&Q===t&&v.jsxs(v.Fragment,{children:[v.jsx(Yx,{cardCount:L(`deck-${Q}`).length,playerColor:Bt(Q),playerId:Q,revealedCard:R,onDrawOne:()=>Zi(Q,1),onDrawN:J=>Zi(Q,J),onMillOne:()=>Ff(Q,1),onMillN:J=>Ff(Q,J),onExileOne:J=>Pf(Q,1,J),onExileN:(J,H)=>Pf(Q,J,H),onRevealTop:()=>{bx(Q)},onShuffle:()=>ya(Q)}),v.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[v.jsx(Kx,{playerId:Q,lifeTotal:V.lifeTotal,playerColor:Bt(Q),currentPlayerId:t}),v.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[v.jsx("button",{onClick:()=>S(!y),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#757575",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#616161"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#757575"},title:"Graveyard",children:""}),v.jsx("button",{onClick:()=>k(!I),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#9C27B0"},title:"Exile",children:""}),v.jsx("button",{onClick:()=>f(!C),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#F57C00"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#FF9800"},title:"Create Tokens",children:""}),v.jsx("button",{onClick:()=>g(!h),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#4CAF50",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor="#388E3C"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor="#4CAF50"},title:"Chat & Log",children:""})]})]})]})]})]}),v.jsx($x,{isOpen:h,onClose:()=>g(!1),currentPlayerId:t}),C&&v.jsx(Jx,{playerId:t,onClose:()=>f(!1)}),d&&v.jsx(Px,{message:d.message,onConfirm:d.onConfirm,onCancel:()=>m(null)})]})}if(window.location.pathname!=="/"&&!window.location.hash){const e="/#"+window.location.pathname.slice(1)+window.location.search+window.location.hash;window.location.replace(e)}ba.createRoot(document.getElementById("root")).render(v.jsx(Ym.StrictMode,{children:v.jsx(Xx,{})}));
