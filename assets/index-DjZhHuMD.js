(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zf={exports:{}},al={},eh={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ei=Symbol.for("react.element"),Im=Symbol.for("react.portal"),Fm=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Bm=Symbol.for("react.profiler"),Um=Symbol.for("react.provider"),$m=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Vm=Symbol.for("react.memo"),Ym=Symbol.for("react.lazy"),id=Symbol.iterator;function Km(e){return e===null||typeof e!="object"?null:(e=id&&e[id]||e["@@iterator"],typeof e=="function"?e:null)}var th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nh=Object.assign,rh={};function bo(e,t,n){this.props=e,this.context=t,this.refs=rh,this.updater=n||th}bo.prototype.isReactComponent={};bo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};bo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oh(){}oh.prototype=bo.prototype;function zc(e,t,n){this.props=e,this.context=t,this.refs=rh,this.updater=n||th}var Nc=zc.prototype=new oh;Nc.constructor=zc;nh(Nc,bo.prototype);Nc.isPureReactComponent=!0;var sd=Array.isArray,ih=Object.prototype.hasOwnProperty,Oc={current:null},sh={key:!0,ref:!0,__self:!0,__source:!0};function lh(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)ih.call(t,r)&&!sh.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),f=0;f<l;f++)c[f]=arguments[f+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:Ei,type:e,key:i,ref:s,props:o,_owner:Oc.current}}function Gm(e,t){return{$$typeof:Ei,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ic(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ei}function Qm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ld=/\/+/g;function zl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qm(""+e.key):t.toString(36)}function as(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ei:case Im:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+zl(s,0):r,sd(o)?(n="",e!=null&&(n=e.replace(ld,"$&/")+"/"),as(o,t,n,"",function(f){return f})):o!=null&&(Ic(o)&&(o=Gm(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(ld,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",sd(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+zl(i,l);s+=as(i,t,n,c,o)}else if(c=Km(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+zl(i,l++),s+=as(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ii(e,t,n){if(e==null)return e;var r=[],o=0;return as(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Xm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},cs={transition:null},Jm={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:cs,ReactCurrentOwner:Oc};function ah(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Ii,forEach:function(e,t,n){Ii(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ii(e,function(){t++}),t},toArray:function(e){return Ii(e,function(t){return t})||[]},only:function(e){if(!Ic(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Component=bo;we.Fragment=Fm;we.Profiler=Bm;we.PureComponent=zc;we.StrictMode=Pm;we.Suspense=Hm;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jm;we.act=ah;we.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nh({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Oc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ih.call(t,c)&&!sh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var f=0;f<c;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ei,type:e.type,key:o,ref:i,props:r,_owner:s}};we.createContext=function(e){return e={$$typeof:$m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Um,_context:e},e.Consumer=e};we.createElement=lh;we.createFactory=function(e){var t=lh.bind(null,e);return t.type=e,t};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:Wm,render:e}};we.isValidElement=Ic;we.lazy=function(e){return{$$typeof:Ym,_payload:{_status:-1,_result:e},_init:Xm}};we.memo=function(e,t){return{$$typeof:Vm,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=cs.transition;cs.transition={};try{e()}finally{cs.transition=t}};we.unstable_act=ah;we.useCallback=function(e,t){return ut.current.useCallback(e,t)};we.useContext=function(e){return ut.current.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};we.useEffect=function(e,t){return ut.current.useEffect(e,t)};we.useId=function(){return ut.current.useId()};we.useImperativeHandle=function(e,t,n){return ut.current.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};we.useMemo=function(e,t){return ut.current.useMemo(e,t)};we.useReducer=function(e,t,n){return ut.current.useReducer(e,t,n)};we.useRef=function(e){return ut.current.useRef(e)};we.useState=function(e){return ut.current.useState(e)};we.useSyncExternalStore=function(e,t,n){return ut.current.useSyncExternalStore(e,t,n)};we.useTransition=function(){return ut.current.useTransition()};we.version="18.3.1";eh.exports=we;var H=eh.exports;const qm=qf(H);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=H,e0=Symbol.for("react.element"),t0=Symbol.for("react.fragment"),n0=Object.prototype.hasOwnProperty,r0=Zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o0={key:!0,ref:!0,__self:!0,__source:!0};function ch(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)n0.call(t,r)&&!o0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:e0,type:e,key:i,ref:s,props:o,_owner:r0.current}}al.Fragment=t0;al.jsx=ch;al.jsxs=ch;Zf.exports=al;var d=Zf.exports,Ea={},uh={exports:{}},Et={},dh={exports:{}},fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,K){var ue=U.length;U.push(K);e:for(;0<ue;){var ae=ue-1>>>1,G=U[ae];if(0<o(G,K))U[ae]=K,U[ue]=G,ue=ae;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],ue=U.pop();if(ue!==K){U[0]=ue;e:for(var ae=0,G=U.length,Z=G>>>1;ae<Z;){var ne=2*(ae+1)-1,te=U[ne],V=ne+1,ce=U[V];if(0>o(te,ue))V<G&&0>o(ce,te)?(U[ae]=ce,U[V]=ue,ae=V):(U[ae]=te,U[ne]=ue,ae=ne);else if(V<G&&0>o(ce,ue))U[ae]=ce,U[V]=ue,ae=V;else break e}}return K}function o(U,K){var ue=U.sortIndex-K.sortIndex;return ue!==0?ue:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],f=[],y=1,h=null,p=3,g=!1,v=!1,b=!1,z=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(U){for(var K=n(f);K!==null;){if(K.callback===null)r(f);else if(K.startTime<=U)r(f),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(f)}}function w(U){if(b=!1,u(U),!v)if(n(c)!==null)v=!0,de(C);else{var K=n(f);K!==null&&ve(w,K.startTime-U)}}function C(U,K){v=!1,b&&(b=!1,k(R),R=-1),g=!0;var ue=p;try{for(u(K),h=n(c);h!==null&&(!(h.expirationTime>K)||U&&!M());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,p=h.priorityLevel;var G=ae(h.expirationTime<=K);K=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(c)&&r(c),u(K)}else r(c);h=n(c)}if(h!==null)var Z=!0;else{var ne=n(f);ne!==null&&ve(w,ne.startTime-K),Z=!1}return Z}finally{h=null,p=ue,g=!1}}var j=!1,_=null,R=-1,A=5,E=-1;function M(){return!(e.unstable_now()-E<A)}function O(){if(_!==null){var U=e.unstable_now();E=U;var K=!0;try{K=_(!0,U)}finally{K?W():(j=!1,_=null)}}else j=!1}var W;if(typeof S=="function")W=function(){S(O)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=O,W=function(){se.postMessage(null)}}else W=function(){z(O,0)};function de(U){_=U,j||(j=!0,W())}function ve(U,K){R=z(function(){U(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,de(C))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(U){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ue=p;p=K;try{return U()}finally{p=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ue=p;p=U;try{return K()}finally{p=ue}},e.unstable_scheduleCallback=function(U,K,ue){var ae=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ae+ue:ae):ue=ae,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ue+G,U={id:y++,callback:K,priorityLevel:U,startTime:ue,expirationTime:G,sortIndex:-1},ue>ae?(U.sortIndex=ue,t(f,U),n(c)===null&&U===n(f)&&(b?(k(R),R=-1):b=!0,ve(w,ue-ae))):(U.sortIndex=G,t(c,U),v||g||(v=!0,de(C))),U},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(U){var K=p;return function(){var ue=p;p=K;try{return U.apply(this,arguments)}finally{p=ue}}}})(fh);dh.exports=fh;var i0=dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0=H,Ct=i0;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hh=new Set,ti={};function Cr(e,t){oo(e,t),oo(e+"Capture",t)}function oo(e,t){for(ti[e]=t,e=0;e<t.length;e++)hh.add(t[e])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ta=Object.prototype.hasOwnProperty,l0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ad={},cd={};function a0(e){return Ta.call(cd,e)?!0:Ta.call(ad,e)?!1:l0.test(e)?cd[e]=!0:(ad[e]=!0,!1)}function c0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function u0(e,t,n,r){if(t===null||typeof t>"u"||c0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fc=/[\-:]([a-z])/g;function Pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fc,Pc);nt[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fc,Pc);nt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fc,Pc);nt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bc(e,t,n,r){var o=nt.hasOwnProperty(t)?nt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(u0(t,n,o,r)&&(n=null),r||o===null?a0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=s0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fi=Symbol.for("react.element"),zr=Symbol.for("react.portal"),Nr=Symbol.for("react.fragment"),Uc=Symbol.for("react.strict_mode"),ja=Symbol.for("react.profiler"),ph=Symbol.for("react.provider"),gh=Symbol.for("react.context"),$c=Symbol.for("react.forward_ref"),Ra=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),Wc=Symbol.for("react.memo"),Rn=Symbol.for("react.lazy"),mh=Symbol.for("react.offscreen"),ud=Symbol.iterator;function To(e){return e===null||typeof e!="object"?null:(e=ud&&e[ud]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,Nl;function Io(e){if(Nl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Nl=t&&t[1]||""}return`
`+Nl+e}var Ol=!1;function Il(e,t){if(!e||Ol)return"";Ol=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var c=`
`+o[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{Ol=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Io(e):""}function d0(e){switch(e.tag){case 5:return Io(e.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return e=Il(e.type,!1),e;case 11:return e=Il(e.type.render,!1),e;case 1:return e=Il(e.type,!0),e;default:return""}}function Da(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nr:return"Fragment";case zr:return"Portal";case ja:return"Profiler";case Uc:return"StrictMode";case Ra:return"Suspense";case Ma:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gh:return(e.displayName||"Context")+".Consumer";case ph:return(e._context.displayName||"Context")+".Provider";case $c:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wc:return t=e.displayName||null,t!==null?t:Da(e.type)||"Memo";case Rn:t=e._payload,e=e._init;try{return Da(e(t))}catch{}}return null}function f0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Da(t);case 8:return t===Uc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h0(e){var t=yh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pi(e){e._valueTracker||(e._valueTracker=h0(e))}function vh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function La(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function dd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wh(e,t){t=t.checked,t!=null&&Bc(e,"checked",t,!1)}function Aa(e,t){wh(e,t);var n=Yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?za(e,t.type,n):t.hasOwnProperty("defaultValue")&&za(e,t.type,Yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function za(e,t,n){(t!=="number"||Es(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Fo=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Na(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Fo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yn(n)}}function xh(e,t){var n=Yn(t.value),r=Yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bi,kh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ni(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p0=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(e){p0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$o[t]=$o[e]})});function Sh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$o.hasOwnProperty(e)&&$o[e]?(""+t).trim():t+"px"}function Ch(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Sh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var g0=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(e,t){if(t){if(g0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Fa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pa=null;function Hc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ba=null,Qr=null,Xr=null;function gd(e){if(e=Ri(e)){if(typeof Ba!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=hl(t),Ba(e.stateNode,e.type,t))}}function _h(e){Qr?Xr?Xr.push(e):Xr=[e]:Qr=e}function Eh(){if(Qr){var e=Qr,t=Xr;if(Xr=Qr=null,gd(e),t)for(e=0;e<t.length;e++)gd(t[e])}}function Th(e,t){return e(t)}function jh(){}var Fl=!1;function Rh(e,t,n){if(Fl)return e(t,n);Fl=!0;try{return Th(e,t,n)}finally{Fl=!1,(Qr!==null||Xr!==null)&&(jh(),Eh())}}function ri(e,t){var n=e.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Ua=!1;if(wn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{Ua=!1}function m0(e,t,n,r,o,i,s,l,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(y){this.onError(y)}}var Wo=!1,Ts=null,js=!1,$a=null,y0={onError:function(e){Wo=!0,Ts=e}};function v0(e,t,n,r,o,i,s,l,c){Wo=!1,Ts=null,m0.apply(y0,arguments)}function w0(e,t,n,r,o,i,s,l,c){if(v0.apply(this,arguments),Wo){if(Wo){var f=Ts;Wo=!1,Ts=null}else throw Error(Q(198));js||(js=!0,$a=f)}}function _r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function md(e){if(_r(e)!==e)throw Error(Q(188))}function x0(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return md(o),e;if(i===r)return md(o),t;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function Dh(e){return e=x0(e),e!==null?Lh(e):null}function Lh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lh(e);if(t!==null)return t;e=e.sibling}return null}var Ah=Ct.unstable_scheduleCallback,yd=Ct.unstable_cancelCallback,b0=Ct.unstable_shouldYield,k0=Ct.unstable_requestPaint,Pe=Ct.unstable_now,S0=Ct.unstable_getCurrentPriorityLevel,Vc=Ct.unstable_ImmediatePriority,zh=Ct.unstable_UserBlockingPriority,Rs=Ct.unstable_NormalPriority,C0=Ct.unstable_LowPriority,Nh=Ct.unstable_IdlePriority,cl=null,en=null;function _0(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(cl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:j0,E0=Math.log,T0=Math.LN2;function j0(e){return e>>>=0,e===0?32:31-(E0(e)/T0|0)|0}var Ui=64,$i=4194304;function Po(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ms(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=Po(l):(i&=s,i!==0&&(r=Po(i)))}else s=n&~o,s!==0?r=Po(s):i!==0&&(r=Po(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ht(t),o=1<<n,r|=e[n],t&=~o;return r}function R0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Ht(i),l=1<<s,c=o[s];c===-1?(!(l&n)||l&r)&&(o[s]=R0(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Wa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Oh(){var e=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),e}function Pl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ti(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function D0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Ht(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Yc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ce=0;function Ih(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fh,Kc,Ph,Bh,Uh,Ha=!1,Wi=[],Fn=null,Pn=null,Bn=null,oi=new Map,ii=new Map,Ln=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vd(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ii.delete(t.pointerId)}}function Ro(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Ri(t),t!==null&&Kc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function A0(e,t,n,r,o){switch(t){case"focusin":return Fn=Ro(Fn,e,t,n,r,o),!0;case"dragenter":return Pn=Ro(Pn,e,t,n,r,o),!0;case"mouseover":return Bn=Ro(Bn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return oi.set(i,Ro(oi.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ii.set(i,Ro(ii.get(i)||null,e,t,n,r,o)),!0}return!1}function $h(e){var t=rr(e.target);if(t!==null){var n=_r(t);if(n!==null){if(t=n.tag,t===13){if(t=Mh(n),t!==null){e.blockedOn=t,Uh(e.priority,function(){Ph(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function us(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Va(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pa=r,n.target.dispatchEvent(r),Pa=null}else return t=Ri(n),t!==null&&Kc(t),e.blockedOn=n,!1;t.shift()}return!0}function wd(e,t,n){us(e)&&n.delete(t)}function z0(){Ha=!1,Fn!==null&&us(Fn)&&(Fn=null),Pn!==null&&us(Pn)&&(Pn=null),Bn!==null&&us(Bn)&&(Bn=null),oi.forEach(wd),ii.forEach(wd)}function Mo(e,t){e.blockedOn===t&&(e.blockedOn=null,Ha||(Ha=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,z0)))}function si(e){function t(o){return Mo(o,e)}if(0<Wi.length){Mo(Wi[0],e);for(var n=1;n<Wi.length;n++){var r=Wi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fn!==null&&Mo(Fn,e),Pn!==null&&Mo(Pn,e),Bn!==null&&Mo(Bn,e),oi.forEach(t),ii.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)$h(n),n.blockedOn===null&&Ln.shift()}var Jr=_n.ReactCurrentBatchConfig,Ds=!0;function N0(e,t,n,r){var o=Ce,i=Jr.transition;Jr.transition=null;try{Ce=1,Gc(e,t,n,r)}finally{Ce=o,Jr.transition=i}}function O0(e,t,n,r){var o=Ce,i=Jr.transition;Jr.transition=null;try{Ce=4,Gc(e,t,n,r)}finally{Ce=o,Jr.transition=i}}function Gc(e,t,n,r){if(Ds){var o=Va(e,t,n,r);if(o===null)Ql(e,t,r,Ls,n),vd(e,r);else if(A0(o,e,t,n,r))r.stopPropagation();else if(vd(e,r),t&4&&-1<L0.indexOf(e)){for(;o!==null;){var i=Ri(o);if(i!==null&&Fh(i),i=Va(e,t,n,r),i===null&&Ql(e,t,r,Ls,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ql(e,t,r,null,n)}}var Ls=null;function Va(e,t,n,r){if(Ls=null,e=Hc(r),e=rr(e),e!==null)if(t=_r(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ls=e,null}function Wh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S0()){case Vc:return 1;case zh:return 4;case Rs:case C0:return 16;case Nh:return 536870912;default:return 16}default:return 16}}var Nn=null,Qc=null,ds=null;function Hh(){if(ds)return ds;var e,t=Qc,n=t.length,r,o="value"in Nn?Nn.value:Nn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return ds=o.slice(e,1<r?1-r:void 0)}function fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function xd(){return!1}function Tt(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hi:xd,this.isPropagationStopped=xd,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),t}var ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=Tt(ko),ji=Oe({},ko,{view:0,detail:0}),I0=Tt(ji),Bl,Ul,Do,ul=Oe({},ji,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Do&&(Do&&e.type==="mousemove"?(Bl=e.screenX-Do.screenX,Ul=e.screenY-Do.screenY):Ul=Bl=0,Do=e),Bl)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),bd=Tt(ul),F0=Oe({},ul,{dataTransfer:0}),P0=Tt(F0),B0=Oe({},ji,{relatedTarget:0}),$l=Tt(B0),U0=Oe({},ko,{animationName:0,elapsedTime:0,pseudoElement:0}),$0=Tt(U0),W0=Oe({},ko,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),H0=Tt(W0),V0=Oe({},ko,{data:0}),kd=Tt(V0),Y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G0[e])?!!t[e]:!1}function Jc(){return Q0}var X0=Oe({},ji,{key:function(e){if(e.key){var t=Y0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J0=Tt(X0),q0=Oe({},ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=Tt(q0),Z0=Oe({},ji,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),ey=Tt(Z0),ty=Oe({},ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),ny=Tt(ty),ry=Oe({},ul,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oy=Tt(ry),iy=[9,13,27,32],qc=wn&&"CompositionEvent"in window,Ho=null;wn&&"documentMode"in document&&(Ho=document.documentMode);var sy=wn&&"TextEvent"in window&&!Ho,Vh=wn&&(!qc||Ho&&8<Ho&&11>=Ho),Cd=" ",_d=!1;function Yh(e,t){switch(e){case"keyup":return iy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Or=!1;function ly(e,t){switch(e){case"compositionend":return Kh(t);case"keypress":return t.which!==32?null:(_d=!0,Cd);case"textInput":return e=t.data,e===Cd&&_d?null:e;default:return null}}function ay(e,t){if(Or)return e==="compositionend"||!qc&&Yh(e,t)?(e=Hh(),ds=Qc=Nn=null,Or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vh&&t.locale!=="ko"?null:t.data;default:return null}}var cy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ed(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!cy[e.type]:t==="textarea"}function Gh(e,t,n,r){_h(r),t=As(t,"onChange"),0<t.length&&(n=new Xc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vo=null,li=null;function uy(e){ip(e,0)}function dl(e){var t=Pr(e);if(vh(t))return e}function dy(e,t){if(e==="change")return t}var Qh=!1;if(wn){var Wl;if(wn){var Hl="oninput"in document;if(!Hl){var Td=document.createElement("div");Td.setAttribute("oninput","return;"),Hl=typeof Td.oninput=="function"}Wl=Hl}else Wl=!1;Qh=Wl&&(!document.documentMode||9<document.documentMode)}function jd(){Vo&&(Vo.detachEvent("onpropertychange",Xh),li=Vo=null)}function Xh(e){if(e.propertyName==="value"&&dl(li)){var t=[];Gh(t,li,e,Hc(e)),Rh(uy,t)}}function fy(e,t,n){e==="focusin"?(jd(),Vo=t,li=n,Vo.attachEvent("onpropertychange",Xh)):e==="focusout"&&jd()}function hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dl(li)}function py(e,t){if(e==="click")return dl(t)}function gy(e,t){if(e==="input"||e==="change")return dl(t)}function my(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Yt=typeof Object.is=="function"?Object.is:my;function ai(e,t){if(Yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ta.call(t,o)||!Yt(e[o],t[o]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Md(e,t){var n=Rd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rd(n)}}function Jh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qh(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Es(e.document)}return t}function Zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yy(e){var t=qh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jh(n.ownerDocument.documentElement,n)){if(r!==null&&Zc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Md(n,i);var s=Md(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vy=wn&&"documentMode"in document&&11>=document.documentMode,Ir=null,Ya=null,Yo=null,Ka=!1;function Dd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ka||Ir==null||Ir!==Es(r)||(r=Ir,"selectionStart"in r&&Zc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&ai(Yo,r)||(Yo=r,r=As(Ya,"onSelect"),0<r.length&&(t=new Xc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ir)))}function Vi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},Vl={},Zh={};wn&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function fl(e){if(Vl[e])return Vl[e];if(!Fr[e])return e;var t=Fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zh)return Vl[e]=t[n];return e}var ep=fl("animationend"),tp=fl("animationiteration"),np=fl("animationstart"),rp=fl("transitionend"),op=new Map,Ld="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){op.set(e,t),Cr(t,[e])}for(var Yl=0;Yl<Ld.length;Yl++){var Kl=Ld[Yl],wy=Kl.toLowerCase(),xy=Kl[0].toUpperCase()+Kl.slice(1);Jn(wy,"on"+xy)}Jn(ep,"onAnimationEnd");Jn(tp,"onAnimationIteration");Jn(np,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(rp,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),by=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function Ad(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,w0(r,t,void 0,e),e.currentTarget=null}function ip(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],c=l.instance,f=l.currentTarget;if(l=l.listener,c!==i&&o.isPropagationStopped())break e;Ad(o,l,f),i=c}else for(s=0;s<r.length;s++){if(l=r[s],c=l.instance,f=l.currentTarget,l=l.listener,c!==i&&o.isPropagationStopped())break e;Ad(o,l,f),i=c}}}if(js)throw e=$a,js=!1,$a=null,e}function je(e,t){var n=t[qa];n===void 0&&(n=t[qa]=new Set);var r=e+"__bubble";n.has(r)||(sp(t,e,2,!1),n.add(r))}function Gl(e,t,n){var r=0;t&&(r|=4),sp(n,e,r,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function ci(e){if(!e[Yi]){e[Yi]=!0,hh.forEach(function(n){n!=="selectionchange"&&(by.has(n)||Gl(n,!1,e),Gl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,Gl("selectionchange",!1,t))}}function sp(e,t,n,r){switch(Wh(t)){case 1:var o=N0;break;case 4:o=O0;break;default:o=Gc}n=o.bind(null,t,n,e),o=void 0,!Ua||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ql(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;l!==null;){if(s=rr(l),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}l=l.parentNode}}r=r.return}Rh(function(){var f=i,y=Hc(n),h=[];e:{var p=op.get(e);if(p!==void 0){var g=Xc,v=e;switch(e){case"keypress":if(fs(n)===0)break e;case"keydown":case"keyup":g=J0;break;case"focusin":v="focus",g=$l;break;case"focusout":v="blur",g=$l;break;case"beforeblur":case"afterblur":g=$l;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ey;break;case ep:case tp:case np:g=$0;break;case rp:g=ny;break;case"scroll":g=I0;break;case"wheel":g=oy;break;case"copy":case"cut":case"paste":g=H0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Sd}var b=(t&4)!==0,z=!b&&e==="scroll",k=b?p!==null?p+"Capture":null:p;b=[];for(var S=f,u;S!==null;){u=S;var w=u.stateNode;if(u.tag===5&&w!==null&&(u=w,k!==null&&(w=ri(S,k),w!=null&&b.push(ui(S,w,u)))),z)break;S=S.return}0<b.length&&(p=new g(p,v,null,n,y),h.push({event:p,listeners:b}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==Pa&&(v=n.relatedTarget||n.fromElement)&&(rr(v)||v[xn]))break e;if((g||p)&&(p=y.window===y?y:(p=y.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=f,v=v?rr(v):null,v!==null&&(z=_r(v),v!==z||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=f),g!==v)){if(b=bd,w="onMouseLeave",k="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(b=Sd,w="onPointerLeave",k="onPointerEnter",S="pointer"),z=g==null?p:Pr(g),u=v==null?p:Pr(v),p=new b(w,S+"leave",g,n,y),p.target=z,p.relatedTarget=u,w=null,rr(y)===f&&(b=new b(k,S+"enter",v,n,y),b.target=u,b.relatedTarget=z,w=b),z=w,g&&v)t:{for(b=g,k=v,S=0,u=b;u;u=Rr(u))S++;for(u=0,w=k;w;w=Rr(w))u++;for(;0<S-u;)b=Rr(b),S--;for(;0<u-S;)k=Rr(k),u--;for(;S--;){if(b===k||k!==null&&b===k.alternate)break t;b=Rr(b),k=Rr(k)}b=null}else b=null;g!==null&&zd(h,p,g,b,!1),v!==null&&z!==null&&zd(h,z,v,b,!0)}}e:{if(p=f?Pr(f):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var C=dy;else if(Ed(p))if(Qh)C=gy;else{C=hy;var j=fy}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=py);if(C&&(C=C(e,f))){Gh(h,C,n,y);break e}j&&j(e,p,f),e==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&za(p,"number",p.value)}switch(j=f?Pr(f):window,e){case"focusin":(Ed(j)||j.contentEditable==="true")&&(Ir=j,Ya=f,Yo=null);break;case"focusout":Yo=Ya=Ir=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,Dd(h,n,y);break;case"selectionchange":if(vy)break;case"keydown":case"keyup":Dd(h,n,y)}var _;if(qc)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Or?Yh(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Vh&&n.locale!=="ko"&&(Or||R!=="onCompositionStart"?R==="onCompositionEnd"&&Or&&(_=Hh()):(Nn=y,Qc="value"in Nn?Nn.value:Nn.textContent,Or=!0)),j=As(f,R),0<j.length&&(R=new kd(R,e,null,n,y),h.push({event:R,listeners:j}),_?R.data=_:(_=Kh(n),_!==null&&(R.data=_)))),(_=sy?ly(e,n):ay(e,n))&&(f=As(f,"onBeforeInput"),0<f.length&&(y=new kd("onBeforeInput","beforeinput",null,n,y),h.push({event:y,listeners:f}),y.data=_))}ip(h,t)})}function ui(e,t,n){return{instance:e,listener:t,currentTarget:n}}function As(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ri(e,n),i!=null&&r.unshift(ui(e,i,o)),i=ri(e,t),i!=null&&r.push(ui(e,i,o))),e=e.return}return r}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zd(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,c=l.alternate,f=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&f!==null&&(l=f,o?(c=ri(n,i),c!=null&&s.unshift(ui(n,c,l))):o||(c=ri(n,i),c!=null&&s.push(ui(n,c,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ky=/\r\n?/g,Sy=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(ky,`
`).replace(Sy,"")}function Ki(e,t,n){if(t=Nd(t),Nd(e)!==t&&n)throw Error(Q(425))}function zs(){}var Ga=null,Qa=null;function Xa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ja=typeof setTimeout=="function"?setTimeout:void 0,Cy=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,_y=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(e){return Od.resolve(null).then(e).catch(Ey)}:Ja;function Ey(e){setTimeout(function(){throw e})}function Xl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),si(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);si(t)}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Id(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var So=Math.random().toString(36).slice(2),Zt="__reactFiber$"+So,di="__reactProps$"+So,xn="__reactContainer$"+So,qa="__reactEvents$"+So,Ty="__reactListeners$"+So,jy="__reactHandles$"+So;function rr(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Id(e);e!==null;){if(n=e[Zt])return n;e=Id(e)}return t}e=n,n=e.parentNode}return null}function Ri(e){return e=e[Zt]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function hl(e){return e[di]||null}var Za=[],Br=-1;function qn(e){return{current:e}}function Re(e){0>Br||(e.current=Za[Br],Za[Br]=null,Br--)}function Te(e,t){Br++,Za[Br]=e.current,e.current=t}var Kn={},lt=qn(Kn),pt=qn(!1),hr=Kn;function io(e,t){var n=e.type.contextTypes;if(!n)return Kn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gt(e){return e=e.childContextTypes,e!=null}function Ns(){Re(pt),Re(lt)}function Fd(e,t,n){if(lt.current!==Kn)throw Error(Q(168));Te(lt,t),Te(pt,n)}function lp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Q(108,f0(e)||"Unknown",o));return Oe({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,hr=lt.current,Te(lt,e),Te(pt,pt.current),!0}function Pd(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=lp(e,t,hr),r.__reactInternalMemoizedMergedChildContext=e,Re(pt),Re(lt),Te(lt,e)):Re(pt),Te(pt,n)}var hn=null,pl=!1,Jl=!1;function ap(e){hn===null?hn=[e]:hn.push(e)}function Ry(e){pl=!0,ap(e)}function Zn(){if(!Jl&&hn!==null){Jl=!0;var e=0,t=Ce;try{var n=hn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}hn=null,pl=!1}catch(o){throw hn!==null&&(hn=hn.slice(e+1)),Ah(Vc,Zn),o}finally{Ce=t,Jl=!1}}return null}var Ur=[],$r=0,Is=null,Fs=0,jt=[],Rt=0,pr=null,pn=1,gn="";function er(e,t){Ur[$r++]=Fs,Ur[$r++]=Is,Is=e,Fs=t}function cp(e,t,n){jt[Rt++]=pn,jt[Rt++]=gn,jt[Rt++]=pr,pr=e;var r=pn;e=gn;var o=32-Ht(r)-1;r&=~(1<<o),n+=1;var i=32-Ht(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,pn=1<<32-Ht(t)+o|n<<o|r,gn=i+e}else pn=1<<i|n<<o|r,gn=e}function eu(e){e.return!==null&&(er(e,1),cp(e,1,0))}function tu(e){for(;e===Is;)Is=Ur[--$r],Ur[$r]=null,Fs=Ur[--$r],Ur[$r]=null;for(;e===pr;)pr=jt[--Rt],jt[Rt]=null,gn=jt[--Rt],jt[Rt]=null,pn=jt[--Rt],jt[Rt]=null}var kt=null,xt=null,De=!1,Wt=null;function up(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,kt=e,xt=Un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,kt=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pr!==null?{id:pn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,kt=e,xt=null,!0):!1;default:return!1}}function ec(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tc(e){if(De){var t=xt;if(t){var n=t;if(!Bd(e,t)){if(ec(e))throw Error(Q(418));t=Un(n.nextSibling);var r=kt;t&&Bd(e,t)?up(r,n):(e.flags=e.flags&-4097|2,De=!1,kt=e)}}else{if(ec(e))throw Error(Q(418));e.flags=e.flags&-4097|2,De=!1,kt=e}}}function Ud(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;kt=e}function Gi(e){if(e!==kt)return!1;if(!De)return Ud(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xa(e.type,e.memoizedProps)),t&&(t=xt)){if(ec(e))throw dp(),Error(Q(418));for(;t;)up(e,t),t=Un(t.nextSibling)}if(Ud(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=Un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=kt?Un(e.stateNode.nextSibling):null;return!0}function dp(){for(var e=xt;e;)e=Un(e.nextSibling)}function so(){xt=kt=null,De=!1}function nu(e){Wt===null?Wt=[e]:Wt.push(e)}var My=_n.ReactCurrentBatchConfig;function Lo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function Qi(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $d(e){var t=e._init;return t(e._payload)}function fp(e){function t(k,S){if(e){var u=k.deletions;u===null?(k.deletions=[S],k.flags|=16):u.push(S)}}function n(k,S){if(!e)return null;for(;S!==null;)t(k,S),S=S.sibling;return null}function r(k,S){for(k=new Map;S!==null;)S.key!==null?k.set(S.key,S):k.set(S.index,S),S=S.sibling;return k}function o(k,S){return k=Vn(k,S),k.index=0,k.sibling=null,k}function i(k,S,u){return k.index=u,e?(u=k.alternate,u!==null?(u=u.index,u<S?(k.flags|=2,S):u):(k.flags|=2,S)):(k.flags|=1048576,S)}function s(k){return e&&k.alternate===null&&(k.flags|=2),k}function l(k,S,u,w){return S===null||S.tag!==6?(S=oa(u,k.mode,w),S.return=k,S):(S=o(S,u),S.return=k,S)}function c(k,S,u,w){var C=u.type;return C===Nr?y(k,S,u.props.children,w,u.key):S!==null&&(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&$d(C)===S.type)?(w=o(S,u.props),w.ref=Lo(k,S,u),w.return=k,w):(w=ws(u.type,u.key,u.props,null,k.mode,w),w.ref=Lo(k,S,u),w.return=k,w)}function f(k,S,u,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==u.containerInfo||S.stateNode.implementation!==u.implementation?(S=ia(u,k.mode,w),S.return=k,S):(S=o(S,u.children||[]),S.return=k,S)}function y(k,S,u,w,C){return S===null||S.tag!==7?(S=lr(u,k.mode,w,C),S.return=k,S):(S=o(S,u),S.return=k,S)}function h(k,S,u){if(typeof S=="string"&&S!==""||typeof S=="number")return S=oa(""+S,k.mode,u),S.return=k,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fi:return u=ws(S.type,S.key,S.props,null,k.mode,u),u.ref=Lo(k,null,S),u.return=k,u;case zr:return S=ia(S,k.mode,u),S.return=k,S;case Rn:var w=S._init;return h(k,w(S._payload),u)}if(Fo(S)||To(S))return S=lr(S,k.mode,u,null),S.return=k,S;Qi(k,S)}return null}function p(k,S,u,w){var C=S!==null?S.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return C!==null?null:l(k,S,""+u,w);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Fi:return u.key===C?c(k,S,u,w):null;case zr:return u.key===C?f(k,S,u,w):null;case Rn:return C=u._init,p(k,S,C(u._payload),w)}if(Fo(u)||To(u))return C!==null?null:y(k,S,u,w,null);Qi(k,u)}return null}function g(k,S,u,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return k=k.get(u)||null,l(S,k,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fi:return k=k.get(w.key===null?u:w.key)||null,c(S,k,w,C);case zr:return k=k.get(w.key===null?u:w.key)||null,f(S,k,w,C);case Rn:var j=w._init;return g(k,S,u,j(w._payload),C)}if(Fo(w)||To(w))return k=k.get(u)||null,y(S,k,w,C,null);Qi(S,w)}return null}function v(k,S,u,w){for(var C=null,j=null,_=S,R=S=0,A=null;_!==null&&R<u.length;R++){_.index>R?(A=_,_=null):A=_.sibling;var E=p(k,_,u[R],w);if(E===null){_===null&&(_=A);break}e&&_&&E.alternate===null&&t(k,_),S=i(E,S,R),j===null?C=E:j.sibling=E,j=E,_=A}if(R===u.length)return n(k,_),De&&er(k,R),C;if(_===null){for(;R<u.length;R++)_=h(k,u[R],w),_!==null&&(S=i(_,S,R),j===null?C=_:j.sibling=_,j=_);return De&&er(k,R),C}for(_=r(k,_);R<u.length;R++)A=g(_,k,R,u[R],w),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?R:A.key),S=i(A,S,R),j===null?C=A:j.sibling=A,j=A);return e&&_.forEach(function(M){return t(k,M)}),De&&er(k,R),C}function b(k,S,u,w){var C=To(u);if(typeof C!="function")throw Error(Q(150));if(u=C.call(u),u==null)throw Error(Q(151));for(var j=C=null,_=S,R=S=0,A=null,E=u.next();_!==null&&!E.done;R++,E=u.next()){_.index>R?(A=_,_=null):A=_.sibling;var M=p(k,_,E.value,w);if(M===null){_===null&&(_=A);break}e&&_&&M.alternate===null&&t(k,_),S=i(M,S,R),j===null?C=M:j.sibling=M,j=M,_=A}if(E.done)return n(k,_),De&&er(k,R),C;if(_===null){for(;!E.done;R++,E=u.next())E=h(k,E.value,w),E!==null&&(S=i(E,S,R),j===null?C=E:j.sibling=E,j=E);return De&&er(k,R),C}for(_=r(k,_);!E.done;R++,E=u.next())E=g(_,k,R,E.value,w),E!==null&&(e&&E.alternate!==null&&_.delete(E.key===null?R:E.key),S=i(E,S,R),j===null?C=E:j.sibling=E,j=E);return e&&_.forEach(function(O){return t(k,O)}),De&&er(k,R),C}function z(k,S,u,w){if(typeof u=="object"&&u!==null&&u.type===Nr&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case Fi:e:{for(var C=u.key,j=S;j!==null;){if(j.key===C){if(C=u.type,C===Nr){if(j.tag===7){n(k,j.sibling),S=o(j,u.props.children),S.return=k,k=S;break e}}else if(j.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Rn&&$d(C)===j.type){n(k,j.sibling),S=o(j,u.props),S.ref=Lo(k,j,u),S.return=k,k=S;break e}n(k,j);break}else t(k,j);j=j.sibling}u.type===Nr?(S=lr(u.props.children,k.mode,w,u.key),S.return=k,k=S):(w=ws(u.type,u.key,u.props,null,k.mode,w),w.ref=Lo(k,S,u),w.return=k,k=w)}return s(k);case zr:e:{for(j=u.key;S!==null;){if(S.key===j)if(S.tag===4&&S.stateNode.containerInfo===u.containerInfo&&S.stateNode.implementation===u.implementation){n(k,S.sibling),S=o(S,u.children||[]),S.return=k,k=S;break e}else{n(k,S);break}else t(k,S);S=S.sibling}S=ia(u,k.mode,w),S.return=k,k=S}return s(k);case Rn:return j=u._init,z(k,S,j(u._payload),w)}if(Fo(u))return v(k,S,u,w);if(To(u))return b(k,S,u,w);Qi(k,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,S!==null&&S.tag===6?(n(k,S.sibling),S=o(S,u),S.return=k,k=S):(n(k,S),S=oa(u,k.mode,w),S.return=k,k=S),s(k)):n(k,S)}return z}var lo=fp(!0),hp=fp(!1),Ps=qn(null),Bs=null,Wr=null,ru=null;function ou(){ru=Wr=Bs=null}function iu(e){var t=Ps.current;Re(Ps),e._currentValue=t}function nc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qr(e,t){Bs=e,ru=Wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(ru!==e)if(e={context:e,memoizedValue:t,next:null},Wr===null){if(Bs===null)throw Error(Q(308));Wr=e,Bs.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var or=null;function su(e){or===null?or=[e]:or.push(e)}function pp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,su(t)):(n.next=o.next,o.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function lu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,bn(e,n)}return o=r.interleaved,o===null?(t.next=t,su(r)):(t.next=o.next,o.next=t),r.interleaved=t,bn(e,n)}function hs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yc(e,n)}}function Wd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var o=e.updateQueue;Mn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,f=c.next;c.next=null,s===null?i=f:s.next=f,s=c;var y=e.alternate;y!==null&&(y=y.updateQueue,l=y.lastBaseUpdate,l!==s&&(l===null?y.firstBaseUpdate=f:l.next=f,y.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,y=f=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){y!==null&&(y=y.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(p=t,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(g,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,p=typeof v=="function"?v.call(g,h,p):v,p==null)break e;h=Oe({},h,p);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},y===null?(f=y=g,c=h):y=y.next=g,s|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(y===null&&(c=h),o.baseState=c,o.firstBaseUpdate=f,o.lastBaseUpdate=y,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);mr|=s,e.lanes=s,e.memoizedState=h}}function Hd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Q(191,o));o.call(r)}}}var Mi={},tn=qn(Mi),fi=qn(Mi),hi=qn(Mi);function ir(e){if(e===Mi)throw Error(Q(174));return e}function au(e,t){switch(Te(hi,t),Te(fi,e),Te(tn,Mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oa(t,e)}Re(tn),Te(tn,t)}function ao(){Re(tn),Re(fi),Re(hi)}function mp(e){ir(hi.current);var t=ir(tn.current),n=Oa(t,e.type);t!==n&&(Te(fi,e),Te(tn,n))}function cu(e){fi.current===e&&(Re(tn),Re(fi))}var Ae=qn(0);function $s(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function uu(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var ps=_n.ReactCurrentDispatcher,Zl=_n.ReactCurrentBatchConfig,gr=0,Ne=null,Ue=null,Ge=null,Ws=!1,Ko=!1,pi=0,Dy=0;function rt(){throw Error(Q(321))}function du(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yt(e[n],t[n]))return!1;return!0}function fu(e,t,n,r,o,i){if(gr=i,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ps.current=e===null||e.memoizedState===null?Ny:Oy,e=n(r,o),Ko){i=0;do{if(Ko=!1,pi=0,25<=i)throw Error(Q(301));i+=1,Ge=Ue=null,t.updateQueue=null,ps.current=Iy,e=n(r,o)}while(Ko)}if(ps.current=Hs,t=Ue!==null&&Ue.next!==null,gr=0,Ge=Ue=Ne=null,Ws=!1,t)throw Error(Q(300));return e}function hu(){var e=pi!==0;return pi=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ne.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function It(){if(Ue===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ge===null?Ne.memoizedState:Ge.next;if(t!==null)Ge=t,Ue=e;else{if(e===null)throw Error(Q(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?Ne.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function gi(e,t){return typeof t=="function"?t(e):t}function ea(e){var t=It(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Ue,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,c=null,f=i;do{var y=f.lane;if((gr&y)===y)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var h={lane:y,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(l=c=h,s=r):c=c.next=h,Ne.lanes|=y,mr|=y}f=f.next}while(f!==null&&f!==i);c===null?s=r:c.next=l,Yt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Ne.lanes|=i,mr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ta(e){var t=It(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Yt(i,t.memoizedState)||(ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yp(){}function vp(e,t){var n=Ne,r=It(),o=t(),i=!Yt(r.memoizedState,o);if(i&&(r.memoizedState=o,ht=!0),r=r.queue,pu(bp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,mi(9,xp.bind(null,n,r,o,t),void 0,null),Je===null)throw Error(Q(349));gr&30||wp(n,t,o)}return o}function wp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xp(e,t,n,r){t.value=n,t.getSnapshot=r,kp(t)&&Sp(e)}function bp(e,t,n){return n(function(){kp(t)&&Sp(e)})}function kp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yt(e,n)}catch{return!0}}function Sp(e){var t=bn(e,1);t!==null&&Vt(t,e,1,-1)}function Vd(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t.queue=e,e=e.dispatch=zy.bind(null,Ne,e),[t.memoizedState,e]}function mi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cp(){return It().memoizedState}function gs(e,t,n,r){var o=qt();Ne.flags|=e,o.memoizedState=mi(1|t,n,void 0,r===void 0?null:r)}function gl(e,t,n,r){var o=It();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var s=Ue.memoizedState;if(i=s.destroy,r!==null&&du(r,s.deps)){o.memoizedState=mi(t,n,i,r);return}}Ne.flags|=e,o.memoizedState=mi(1|t,n,i,r)}function Yd(e,t){return gs(8390656,8,e,t)}function pu(e,t){return gl(2048,8,e,t)}function _p(e,t){return gl(4,2,e,t)}function Ep(e,t){return gl(4,4,e,t)}function Tp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jp(e,t,n){return n=n!=null?n.concat([e]):null,gl(4,4,Tp.bind(null,t,e),n)}function gu(){}function Rp(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&du(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mp(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&du(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Dp(e,t,n){return gr&21?(Yt(n,t)||(n=Oh(),Ne.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function Ly(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Zl.transition;Zl.transition={};try{e(!1),t()}finally{Ce=n,Zl.transition=r}}function Lp(){return It().memoizedState}function Ay(e,t,n){var r=Hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(e))zp(t,n);else if(n=pp(e,t,n,r),n!==null){var o=ct();Vt(n,e,r,o),Np(n,t,r)}}function zy(e,t,n){var r=Hn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))zp(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,Yt(l,s)){var c=t.interleaved;c===null?(o.next=o,su(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=pp(e,t,o,r),n!==null&&(o=ct(),Vt(n,e,r,o),Np(n,t,r))}}function Ap(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function zp(e,t){Ko=Ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Np(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Yc(e,n)}}var Hs={readContext:Ot,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},Ny={readContext:Ot,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Yd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gs(4194308,4,Tp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){return gs(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ay.bind(null,Ne,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Vd,useDebugValue:gu,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Vd(!1),t=e[0];return e=Ly.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ne,o=qt();if(De){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),Je===null)throw Error(Q(349));gr&30||wp(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Yd(bp.bind(null,r,i,e),[e]),r.flags|=2048,mi(9,xp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=qt(),t=Je.identifierPrefix;if(De){var n=gn,r=pn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Dy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Oy={readContext:Ot,useCallback:Rp,useContext:Ot,useEffect:pu,useImperativeHandle:jp,useInsertionEffect:_p,useLayoutEffect:Ep,useMemo:Mp,useReducer:ea,useRef:Cp,useState:function(){return ea(gi)},useDebugValue:gu,useDeferredValue:function(e){var t=It();return Dp(t,Ue.memoizedState,e)},useTransition:function(){var e=ea(gi)[0],t=It().memoizedState;return[e,t]},useMutableSource:yp,useSyncExternalStore:vp,useId:Lp,unstable_isNewReconciler:!1},Iy={readContext:Ot,useCallback:Rp,useContext:Ot,useEffect:pu,useImperativeHandle:jp,useInsertionEffect:_p,useLayoutEffect:Ep,useMemo:Mp,useReducer:ta,useRef:Cp,useState:function(){return ta(gi)},useDebugValue:gu,useDeferredValue:function(e){var t=It();return Ue===null?t.memoizedState=e:Dp(t,Ue.memoizedState,e)},useTransition:function(){var e=ta(gi)[0],t=It().memoizedState;return[e,t]},useMutableSource:yp,useSyncExternalStore:vp,useId:Lp,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function rc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ct(),o=Hn(e),i=mn(r,o);i.payload=t,n!=null&&(i.callback=n),t=$n(e,i,o),t!==null&&(Vt(t,e,o,r),hs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ct(),o=Hn(e),i=mn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=$n(e,i,o),t!==null&&(Vt(t,e,o,r),hs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ct(),r=Hn(e),o=mn(n,r);o.tag=2,t!=null&&(o.callback=t),t=$n(e,o,r),t!==null&&(Vt(t,e,r,n),hs(t,e,r))}};function Kd(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!ai(n,r)||!ai(o,i):!0}function Op(e,t,n){var r=!1,o=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=Ot(i):(o=gt(t)?hr:lt.current,r=t.contextTypes,i=(r=r!=null)?io(e,o):Kn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function oc(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},lu(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Ot(i):(i=gt(t)?hr:lt.current,o.context=io(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(rc(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ml.enqueueReplaceState(o,o.state,null),Us(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do n+=d0(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function na(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ic(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Fy=typeof WeakMap=="function"?WeakMap:Map;function Ip(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,gc=r),ic(e,t)},n}function Fp(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ic(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ic(e,t),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Qd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=qy.bind(null,e,t,n),t.then(e,e))}function Xd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,$n(n,t,1))),n.lanes|=1),e)}var Py=_n.ReactCurrentOwner,ht=!1;function at(e,t,n,r){t.child=e===null?hp(t,null,n,r):lo(t,e.child,n,r)}function qd(e,t,n,r,o){n=n.render;var i=t.ref;return qr(t,o),r=fu(e,t,n,r,i,o),n=hu(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(De&&n&&eu(t),t.flags|=1,at(e,t,r,o),t.child)}function Zd(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Su(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Pp(e,t,i,r,o)):(e=ws(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:ai,n(s,r)&&e.ref===t.ref)return kn(e,t,o)}return t.flags|=1,e=Vn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Pp(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(ai(i,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,kn(e,t,o)}return sc(e,t,n,r,o)}function Bp(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Vr,wt),wt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Vr,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Vr,wt),wt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(Vr,wt),wt|=r;return at(e,t,o,n),t.child}function Up(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sc(e,t,n,r,o){var i=gt(n)?hr:lt.current;return i=io(t,i),qr(t,o),n=fu(e,t,n,r,i,o),r=hu(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,kn(e,t,o)):(De&&r&&eu(t),t.flags|=1,at(e,t,n,o),t.child)}function ef(e,t,n,r,o){if(gt(n)){var i=!0;Os(t)}else i=!1;if(qr(t,o),t.stateNode===null)ms(e,t),Op(t,n,r),oc(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=Ot(f):(f=gt(n)?hr:lt.current,f=io(t,f));var y=n.getDerivedStateFromProps,h=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||c!==f)&&Gd(t,s,r,f),Mn=!1;var p=t.memoizedState;s.state=p,Us(t,r,s,o),c=t.memoizedState,l!==r||p!==c||pt.current||Mn?(typeof y=="function"&&(rc(t,n,y,r),c=t.memoizedState),(l=Mn||Kd(t,n,l,r,p,c,f))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,gp(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Ut(t.type,l),s.props=f,h=t.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=gt(n)?hr:lt.current,c=io(t,c));var g=n.getDerivedStateFromProps;(y=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==h||p!==c)&&Gd(t,s,r,c),Mn=!1,p=t.memoizedState,s.state=p,Us(t,r,s,o);var v=t.memoizedState;l!==h||p!==v||pt.current||Mn?(typeof g=="function"&&(rc(t,n,g,r),v=t.memoizedState),(f=Mn||Kd(t,n,f,r,p,v,c)||!1)?(y||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=c,r=f):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return lc(e,t,n,r,i,o)}function lc(e,t,n,r,o,i){Up(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&Pd(t,n,!1),kn(e,t,i);r=t.stateNode,Py.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=lo(t,e.child,null,i),t.child=lo(t,null,l,i)):at(e,t,l,i),t.memoizedState=r.state,o&&Pd(t,n,!0),t.child}function $p(e){var t=e.stateNode;t.pendingContext?Fd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fd(e,t.context,!1),au(e,t.containerInfo)}function tf(e,t,n,r,o){return so(),nu(o),t.flags|=256,at(e,t,n,r),t.child}var ac={dehydrated:null,treeContext:null,retryLane:0};function cc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wp(e,t,n){var r=t.pendingProps,o=Ae.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Te(Ae,o&1),e===null)return tc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=wl(s,r,0,null),e=lr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=cc(n),t.memoizedState=ac,e):mu(t,s));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return By(e,t,s,r,l,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Vn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=Vn(l,i):(i=lr(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?cc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=ac,r}return i=e.child,e=i.sibling,r=Vn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function mu(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xi(e,t,n,r){return r!==null&&nu(r),lo(t,e.child,null,n),e=mu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function By(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=na(Error(Q(422))),Xi(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=wl({mode:"visible",children:r.children},o,0,null),i=lr(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&lo(t,e.child,null,s),t.child.memoizedState=cc(s),t.memoizedState=ac,i);if(!(t.mode&1))return Xi(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Q(419)),r=na(i,r,void 0),Xi(e,t,s,r)}if(l=(s&e.childLanes)!==0,ht||l){if(r=Je,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,bn(e,o),Vt(r,e,o,-1))}return ku(),r=na(Error(Q(421))),Xi(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Zy.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,xt=Un(o.nextSibling),kt=t,De=!0,Wt=null,e!==null&&(jt[Rt++]=pn,jt[Rt++]=gn,jt[Rt++]=pr,pn=e.id,gn=e.overflow,pr=t),t=mu(t,r.children),t.flags|=4096,t)}function nf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),nc(e.return,t,n)}function ra(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Hp(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(at(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nf(e,n,t);else if(e.tag===19)nf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&$s(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ra(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$s(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ra(t,!0,n,null,i);break;case"together":ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Uy(e,t,n){switch(t.tag){case 3:$p(t),so();break;case 5:mp(t);break;case 1:gt(t.type)&&Os(t);break;case 4:au(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Te(Ps,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Wp(e,t,n):(Te(Ae,Ae.current&1),e=kn(e,t,n),e!==null?e.sibling:null);Te(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Bp(e,t,n)}return kn(e,t,n)}var Vp,uc,Yp,Kp;Vp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uc=function(){};Yp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ir(tn.current);var i=null;switch(n){case"input":o=La(e,o),r=La(e,r),i=[];break;case"select":o=Oe({},o,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":o=Na(e,o),r=Na(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zs)}Ia(n,r);var s;n=null;for(f in o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var l=o[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ti.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in r){var c=r[f];if(l=o!=null?o[f]:void 0,r.hasOwnProperty(f)&&c!==l&&(c!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ti.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&je("scroll",e),i||l===c||(i=[])):(i=i||[]).push(f,c))}n&&(i=i||[]).push("style",n);var f=i;(t.updateQueue=f)&&(t.flags|=4)}};Kp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ao(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $y(e,t,n){var r=t.pendingProps;switch(tu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return gt(t.type)&&Ns(),ot(t),null;case 3:return r=t.stateNode,ao(),Re(pt),Re(lt),uu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(vc(Wt),Wt=null))),uc(e,t),ot(t),null;case 5:cu(t);var o=ir(hi.current);if(n=t.type,e!==null&&t.stateNode!=null)Yp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return ot(t),null}if(e=ir(tn.current),Gi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Zt]=t,r[di]=i,e=(t.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(o=0;o<Bo.length;o++)je(Bo[o],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":dd(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":hd(r,i),je("invalid",r)}Ia(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ki(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ki(r.textContent,l,e),o=["children",""+l]):ti.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&je("scroll",r)}switch(n){case"input":Pi(r),fd(r,i,!0);break;case"textarea":Pi(r),pd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zs)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Zt]=t,e[di]=r,Vp(e,t,!1,!1),t.stateNode=e;e:{switch(s=Fa(n,r),n){case"dialog":je("cancel",e),je("close",e),o=r;break;case"iframe":case"object":case"embed":je("load",e),o=r;break;case"video":case"audio":for(o=0;o<Bo.length;o++)je(Bo[o],e);o=r;break;case"source":je("error",e),o=r;break;case"img":case"image":case"link":je("error",e),je("load",e),o=r;break;case"details":je("toggle",e),o=r;break;case"input":dd(e,r),o=La(e,r),je("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Oe({},r,{value:void 0}),je("invalid",e);break;case"textarea":hd(e,r),o=Na(e,r),je("invalid",e);break;default:o=r}Ia(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ch(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&kh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ni(e,c):typeof c=="number"&&ni(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ti.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",e):c!=null&&Bc(e,i,c,s))}switch(n){case"input":Pi(e),fd(e,r,!1);break;case"textarea":Pi(e),pd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Gr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=zs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Kp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=ir(hi.current),ir(tn.current),Gi(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(i=r.nodeValue!==n)&&(e=kt,e!==null))switch(e.tag){case 3:Ki(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ki(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return ot(t),null;case 13:if(Re(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&xt!==null&&t.mode&1&&!(t.flags&128))dp(),so(),t.flags|=98560,i=!1;else if(i=Gi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Zt]=t}else so(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),i=!1}else Wt!==null&&(vc(Wt),Wt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?$e===0&&($e=3):ku())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return ao(),uc(e,t),e===null&&ci(t.stateNode.containerInfo),ot(t),null;case 10:return iu(t.type._context),ot(t),null;case 17:return gt(t.type)&&Ns(),ot(t),null;case 19:if(Re(Ae),i=t.memoizedState,i===null)return ot(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Ao(i,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=$s(e),s!==null){for(t.flags|=128,Ao(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Ae,Ae.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pe()>uo&&(t.flags|=128,r=!0,Ao(i,!1),t.lanes=4194304)}else{if(!r)if(e=$s(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ao(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!De)return ot(t),null}else 2*Pe()-i.renderingStartTime>uo&&n!==1073741824&&(t.flags|=128,r=!0,Ao(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pe(),t.sibling=null,n=Ae.current,Te(Ae,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return bu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Wy(e,t){switch(tu(t),t.tag){case 1:return gt(t.type)&&Ns(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ao(),Re(pt),Re(lt),uu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cu(t),null;case 13:if(Re(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));so()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(Ae),null;case 4:return ao(),null;case 10:return iu(t.type._context),null;case 22:case 23:return bu(),null;case 24:return null;default:return null}}var Ji=!1,it=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Hr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function dc(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var rf=!1;function Vy(e,t){if(Ga=Ds,e=qh(),Zc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,c=-1,f=0,y=0,h=e,p=null;t:for(;;){for(var g;h!==n||o!==0&&h.nodeType!==3||(l=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===e)break t;if(p===n&&++f===o&&(l=s),p===i&&++y===r&&(c=s),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qa={focusedElem:e,selectionRange:n},Ds=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,z=v.memoizedState,k=t.stateNode,S=k.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ut(t.type,b),z);k.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(w){Fe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return v=rf,rf=!1,v}function Go(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&dc(t,n,i)}o=o.next}while(o!==r)}}function yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gp(e){var t=e.alternate;t!==null&&(e.alternate=null,Gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[di],delete t[qa],delete t[Ty],delete t[jy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qp(e){return e.tag===5||e.tag===3||e.tag===4}function of(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zs));else if(r!==4&&(e=e.child,e!==null))for(hc(e,t,n),e=e.sibling;e!==null;)hc(e,t,n),e=e.sibling}function pc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pc(e,t,n),e=e.sibling;e!==null;)pc(e,t,n),e=e.sibling}var qe=null,$t=!1;function jn(e,t,n){for(n=n.child;n!==null;)Xp(e,t,n),n=n.sibling}function Xp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(cl,n)}catch{}switch(n.tag){case 5:it||Hr(n,t);case 6:var r=qe,o=$t;qe=null,jn(e,t,n),qe=r,$t=o,qe!==null&&($t?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&($t?(e=qe,n=n.stateNode,e.nodeType===8?Xl(e.parentNode,n):e.nodeType===1&&Xl(e,n),si(e)):Xl(qe,n.stateNode));break;case 4:r=qe,o=$t,qe=n.stateNode.containerInfo,$t=!0,jn(e,t,n),qe=r,$t=o;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&dc(n,t,s),o=o.next}while(o!==r)}jn(e,t,n);break;case 1:if(!it&&(Hr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}jn(e,t,n);break;case 21:jn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,jn(e,t,n),it=r):jn(e,t,n);break;default:jn(e,t,n)}}function sf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Hy),t.forEach(function(r){var o=ev.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,$t=!1;break e;case 3:qe=l.stateNode.containerInfo,$t=!0;break e;case 4:qe=l.stateNode.containerInfo,$t=!0;break e}l=l.return}if(qe===null)throw Error(Q(160));Xp(i,s,o),qe=null,$t=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(f){Fe(o,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jp(t,e),t=t.sibling}function Jp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Qt(e),r&4){try{Go(3,e,e.return),yl(3,e)}catch(b){Fe(e,e.return,b)}try{Go(5,e,e.return)}catch(b){Fe(e,e.return,b)}}break;case 1:Bt(t,e),Qt(e),r&512&&n!==null&&Hr(n,n.return);break;case 5:if(Bt(t,e),Qt(e),r&512&&n!==null&&Hr(n,n.return),e.flags&32){var o=e.stateNode;try{ni(o,"")}catch(b){Fe(e,e.return,b)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wh(o,i),Fa(l,s);var f=Fa(l,i);for(s=0;s<c.length;s+=2){var y=c[s],h=c[s+1];y==="style"?Ch(o,h):y==="dangerouslySetInnerHTML"?kh(o,h):y==="children"?ni(o,h):Bc(o,y,h,f)}switch(l){case"input":Aa(o,i);break;case"textarea":xh(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Gr(o,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Gr(o,!!i.multiple,i.defaultValue,!0):Gr(o,!!i.multiple,i.multiple?[]:"",!1))}o[di]=i}catch(b){Fe(e,e.return,b)}}break;case 6:if(Bt(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(Q(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(b){Fe(e,e.return,b)}}break;case 3:if(Bt(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{si(t.containerInfo)}catch(b){Fe(e,e.return,b)}break;case 4:Bt(t,e),Qt(e);break;case 13:Bt(t,e),Qt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(wu=Pe())),r&4&&sf(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(it=(f=it)||y,Bt(t,e),it=f):Bt(t,e),Qt(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!y&&e.mode&1)for(ie=e,y=e.child;y!==null;){for(h=ie=y;ie!==null;){switch(p=ie,g=p.child,p.tag){case 0:case 11:case 14:case 15:Go(4,p,p.return);break;case 1:Hr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){Fe(r,n,b)}}break;case 5:Hr(p,p.return);break;case 22:if(p.memoizedState!==null){af(h);continue}}g!==null?(g.return=p,ie=g):af(h)}y=y.sibling}e:for(y=null,h=e;;){if(h.tag===5){if(y===null){y=h;try{o=h.stateNode,f?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Sh("display",s))}catch(b){Fe(e,e.return,b)}}}else if(h.tag===6){if(y===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(b){Fe(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bt(t,e),Qt(e),r&4&&sf(e);break;case 21:break;default:Bt(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Qp(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ni(o,""),r.flags&=-33);var i=of(e);pc(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=of(e);hc(e,l,s);break;default:throw Error(Q(161))}}catch(c){Fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yy(e,t,n){ie=e,qp(e)}function qp(e,t,n){for(var r=(e.mode&1)!==0;ie!==null;){var o=ie,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Ji;if(!s){var l=o.alternate,c=l!==null&&l.memoizedState!==null||it;l=Ji;var f=it;if(Ji=s,(it=c)&&!f)for(ie=o;ie!==null;)s=ie,c=s.child,s.tag===22&&s.memoizedState!==null?cf(o):c!==null?(c.return=s,ie=c):cf(o);for(;i!==null;)ie=i,qp(i),i=i.sibling;ie=o,Ji=l,it=f}lf(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ie=i):lf(e)}}function lf(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hd(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hd(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var y=f.memoizedState;if(y!==null){var h=y.dehydrated;h!==null&&si(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}it||t.flags&512&&fc(t)}catch(p){Fe(t,t.return,p)}}if(t===e){ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,ie=n;break}ie=t.return}}function af(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ie=n;break}ie=t.return}}function cf(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yl(4,t)}catch(c){Fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Fe(t,o,c)}}var i=t.return;try{fc(t)}catch(c){Fe(t,i,c)}break;case 5:var s=t.return;try{fc(t)}catch(c){Fe(t,s,c)}}}catch(c){Fe(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var Ky=Math.ceil,Vs=_n.ReactCurrentDispatcher,yu=_n.ReactCurrentOwner,Nt=_n.ReactCurrentBatchConfig,ke=0,Je=null,Be=null,et=0,wt=0,Vr=qn(0),$e=0,yi=null,mr=0,vl=0,vu=0,Qo=null,ft=null,wu=0,uo=1/0,fn=null,Ys=!1,gc=null,Wn=null,qi=!1,On=null,Ks=0,Xo=0,mc=null,ys=-1,vs=0;function ct(){return ke&6?Pe():ys!==-1?ys:ys=Pe()}function Hn(e){return e.mode&1?ke&2&&et!==0?et&-et:My.transition!==null?(vs===0&&(vs=Oh()),vs):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Wh(e.type)),e):1}function Vt(e,t,n,r){if(50<Xo)throw Xo=0,mc=null,Error(Q(185));Ti(e,n,r),(!(ke&2)||e!==Je)&&(e===Je&&(!(ke&2)&&(vl|=n),$e===4&&An(e,et)),mt(e,r),n===1&&ke===0&&!(t.mode&1)&&(uo=Pe()+500,pl&&Zn()))}function mt(e,t){var n=e.callbackNode;M0(e,t);var r=Ms(e,e===Je?et:0);if(r===0)n!==null&&yd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yd(n),t===1)e.tag===0?Ry(uf.bind(null,e)):ap(uf.bind(null,e)),_y(function(){!(ke&6)&&Zn()}),n=null;else{switch(Ih(r)){case 1:n=Vc;break;case 4:n=zh;break;case 16:n=Rs;break;case 536870912:n=Nh;break;default:n=Rs}n=sg(n,Zp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zp(e,t){if(ys=-1,vs=0,ke&6)throw Error(Q(327));var n=e.callbackNode;if(Zr()&&e.callbackNode!==n)return null;var r=Ms(e,e===Je?et:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gs(e,r);else{t=r;var o=ke;ke|=2;var i=tg();(Je!==e||et!==t)&&(fn=null,uo=Pe()+500,sr(e,t));do try{Xy();break}catch(l){eg(e,l)}while(!0);ou(),Vs.current=i,ke=o,Be!==null?t=0:(Je=null,et=0,t=$e)}if(t!==0){if(t===2&&(o=Wa(e),o!==0&&(r=o,t=yc(e,o))),t===1)throw n=yi,sr(e,0),An(e,r),mt(e,Pe()),n;if(t===6)An(e,r);else{if(o=e.current.alternate,!(r&30)&&!Gy(o)&&(t=Gs(e,r),t===2&&(i=Wa(e),i!==0&&(r=i,t=yc(e,i))),t===1))throw n=yi,sr(e,0),An(e,r),mt(e,Pe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:tr(e,ft,fn);break;case 3:if(An(e,r),(r&130023424)===r&&(t=wu+500-Pe(),10<t)){if(Ms(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){ct(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ja(tr.bind(null,e,ft,fn),t);break}tr(e,ft,fn);break;case 4:if(An(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-Ht(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ky(r/1960))-r,10<r){e.timeoutHandle=Ja(tr.bind(null,e,ft,fn),r);break}tr(e,ft,fn);break;case 5:tr(e,ft,fn);break;default:throw Error(Q(329))}}}return mt(e,Pe()),e.callbackNode===n?Zp.bind(null,e):null}function yc(e,t){var n=Qo;return e.current.memoizedState.isDehydrated&&(sr(e,t).flags|=256),e=Gs(e,t),e!==2&&(t=ft,ft=n,t!==null&&vc(t)),e}function vc(e){ft===null?ft=e:ft.push.apply(ft,e)}function Gy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Yt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~vu,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(ke&6)throw Error(Q(327));Zr();var t=Ms(e,0);if(!(t&1))return mt(e,Pe()),null;var n=Gs(e,t);if(e.tag!==0&&n===2){var r=Wa(e);r!==0&&(t=r,n=yc(e,r))}if(n===1)throw n=yi,sr(e,0),An(e,t),mt(e,Pe()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tr(e,ft,fn),mt(e,Pe()),null}function xu(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(uo=Pe()+500,pl&&Zn())}}function yr(e){On!==null&&On.tag===0&&!(ke&6)&&Zr();var t=ke;ke|=1;var n=Nt.transition,r=Ce;try{if(Nt.transition=null,Ce=1,e)return e()}finally{Ce=r,Nt.transition=n,ke=t,!(ke&6)&&Zn()}}function bu(){wt=Vr.current,Re(Vr)}function sr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cy(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(tu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ns();break;case 3:ao(),Re(pt),Re(lt),uu();break;case 5:cu(r);break;case 4:ao();break;case 13:Re(Ae);break;case 19:Re(Ae);break;case 10:iu(r.type._context);break;case 22:case 23:bu()}n=n.return}if(Je=e,Be=e=Vn(e.current,null),et=wt=t,$e=0,yi=null,vu=vl=mr=0,ft=Qo=null,or!==null){for(t=0;t<or.length;t++)if(n=or[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}or=null}return e}function eg(e,t){do{var n=Be;try{if(ou(),ps.current=Hs,Ws){for(var r=Ne.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ws=!1}if(gr=0,Ge=Ue=Ne=null,Ko=!1,pi=0,yu.current=null,n===null||n.return===null){$e=1,yi=t,Be=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,y=l,h=y.tag;if(!(y.mode&1)&&(h===0||h===11||h===15)){var p=y.alternate;p?(y.updateQueue=p.updateQueue,y.memoizedState=p.memoizedState,y.lanes=p.lanes):(y.updateQueue=null,y.memoizedState=null)}var g=Xd(s);if(g!==null){g.flags&=-257,Jd(g,s,l,i,t),g.mode&1&&Qd(i,f,t),t=g,c=f;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break e}else{if(!(t&1)){Qd(i,f,t),ku();break e}c=Error(Q(426))}}else if(De&&l.mode&1){var z=Xd(s);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Jd(z,s,l,i,t),nu(co(c,l));break e}}i=c=co(c,l),$e!==4&&($e=2),Qo===null?Qo=[i]:Qo.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var k=Ip(i,c,t);Wd(i,k);break e;case 1:l=c;var S=i.type,u=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Wn===null||!Wn.has(u)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Fp(i,l,t);Wd(i,w);break e}}i=i.return}while(i!==null)}rg(n)}catch(C){t=C,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function tg(){var e=Vs.current;return Vs.current=Hs,e===null?Hs:e}function ku(){($e===0||$e===3||$e===2)&&($e=4),Je===null||!(mr&268435455)&&!(vl&268435455)||An(Je,et)}function Gs(e,t){var n=ke;ke|=2;var r=tg();(Je!==e||et!==t)&&(fn=null,sr(e,t));do try{Qy();break}catch(o){eg(e,o)}while(!0);if(ou(),ke=n,Vs.current=r,Be!==null)throw Error(Q(261));return Je=null,et=0,$e}function Qy(){for(;Be!==null;)ng(Be)}function Xy(){for(;Be!==null&&!b0();)ng(Be)}function ng(e){var t=ig(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?rg(e):Be=t,yu.current=null}function rg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Wy(n,t),n!==null){n.flags&=32767,Be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Be=null;return}}else if(n=$y(n,t,wt),n!==null){Be=n;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);$e===0&&($e=5)}function tr(e,t,n){var r=Ce,o=Nt.transition;try{Nt.transition=null,Ce=1,Jy(e,t,n,r)}finally{Nt.transition=o,Ce=r}return null}function Jy(e,t,n,r){do Zr();while(On!==null);if(ke&6)throw Error(Q(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(D0(e,i),e===Je&&(Be=Je=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qi||(qi=!0,sg(Rs,function(){return Zr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var s=Ce;Ce=1;var l=ke;ke|=4,yu.current=null,Vy(e,n),Jp(n,e),yy(Qa),Ds=!!Ga,Qa=Ga=null,e.current=n,Yy(n),k0(),ke=l,Ce=s,Nt.transition=i}else e.current=n;if(qi&&(qi=!1,On=e,Ks=o),i=e.pendingLanes,i===0&&(Wn=null),_0(n.stateNode),mt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ys)throw Ys=!1,e=gc,gc=null,e;return Ks&1&&e.tag!==0&&Zr(),i=e.pendingLanes,i&1?e===mc?Xo++:(Xo=0,mc=e):Xo=0,Zn(),null}function Zr(){if(On!==null){var e=Ih(Ks),t=Nt.transition,n=Ce;try{if(Nt.transition=null,Ce=16>e?16:e,On===null)var r=!1;else{if(e=On,On=null,Ks=0,ke&6)throw Error(Q(331));var o=ke;for(ke|=4,ie=e.current;ie!==null;){var i=ie,s=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var f=l[c];for(ie=f;ie!==null;){var y=ie;switch(y.tag){case 0:case 11:case 15:Go(8,y,i)}var h=y.child;if(h!==null)h.return=y,ie=h;else for(;ie!==null;){y=ie;var p=y.sibling,g=y.return;if(Gp(y),y===f){ie=null;break}if(p!==null){p.return=g,ie=p;break}ie=g}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var z=b.sibling;b.sibling=null,b=z}while(b!==null)}}ie=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ie=s;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Go(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,ie=k;break e}ie=i.return}}var S=e.current;for(ie=S;ie!==null;){s=ie;var u=s.child;if(s.subtreeFlags&2064&&u!==null)u.return=s,ie=u;else e:for(s=S;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===s){ie=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ie=w;break e}ie=l.return}}if(ke=o,Zn(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(cl,e)}catch{}r=!0}return r}finally{Ce=n,Nt.transition=t}}return!1}function df(e,t,n){t=co(n,t),t=Ip(e,t,1),e=$n(e,t,1),t=ct(),e!==null&&(Ti(e,1,t),mt(e,t))}function Fe(e,t,n){if(e.tag===3)df(e,e,n);else for(;t!==null;){if(t.tag===3){df(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){e=co(n,e),e=Fp(t,e,1),t=$n(t,e,1),e=ct(),t!==null&&(Ti(t,1,e),mt(t,e));break}}t=t.return}}function qy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(et&n)===n&&($e===4||$e===3&&(et&130023424)===et&&500>Pe()-wu?sr(e,0):vu|=n),mt(e,t)}function og(e,t){t===0&&(e.mode&1?(t=$i,$i<<=1,!($i&130023424)&&($i=4194304)):t=1);var n=ct();e=bn(e,t),e!==null&&(Ti(e,t,n),mt(e,n))}function Zy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),og(e,n)}function ev(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),og(e,n)}var ig;ig=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,Uy(e,t,n);ht=!!(e.flags&131072)}else ht=!1,De&&t.flags&1048576&&cp(t,Fs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ms(e,t),e=t.pendingProps;var o=io(t,lt.current);qr(t,n),o=fu(null,t,r,e,o,n);var i=hu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(i=!0,Os(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,lu(t),o.updater=ml,t.stateNode=o,o._reactInternals=t,oc(t,r,e,n),t=lc(null,t,r,!0,i,n)):(t.tag=0,De&&i&&eu(t),at(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=nv(r),e=Ut(r,e),o){case 0:t=sc(null,t,r,e,n);break e;case 1:t=ef(null,t,r,e,n);break e;case 11:t=qd(null,t,r,e,n);break e;case 14:t=Zd(null,t,r,Ut(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),sc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),ef(e,t,r,o,n);case 3:e:{if($p(t),e===null)throw Error(Q(387));r=t.pendingProps,i=t.memoizedState,o=i.element,gp(e,t),Us(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=co(Error(Q(423)),t),t=tf(e,t,r,n,o);break e}else if(r!==o){o=co(Error(Q(424)),t),t=tf(e,t,r,n,o);break e}else for(xt=Un(t.stateNode.containerInfo.firstChild),kt=t,De=!0,Wt=null,n=hp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===o){t=kn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return mp(t),e===null&&tc(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Xa(r,o)?s=null:i!==null&&Xa(r,i)&&(t.flags|=32),Up(e,t),at(e,t,s,n),t.child;case 6:return e===null&&tc(t),null;case 13:return Wp(e,t,n);case 4:return au(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lo(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),qd(e,t,r,o,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Te(Ps,r._currentValue),r._currentValue=s,i!==null)if(Yt(i.value,s)){if(i.children===o.children&&!pt.current){t=kn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=mn(-1,n&-n),c.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var y=f.pending;y===null?c.next=c:(c.next=y.next,y.next=c),f.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),nc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Q(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nc(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}at(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,qr(t,n),o=Ot(o),r=r(o),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,o=Ut(r,t.pendingProps),o=Ut(r.type,o),Zd(e,t,r,o,n);case 15:return Pp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),ms(e,t),t.tag=1,gt(r)?(e=!0,Os(t)):e=!1,qr(t,n),Op(t,r,o),oc(t,r,o,n),lc(null,t,r,!0,e,n);case 19:return Hp(e,t,n);case 22:return Bp(e,t,n)}throw Error(Q(156,t.tag))};function sg(e,t){return Ah(e,t)}function tv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,r){return new tv(e,t,n,r)}function Su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nv(e){if(typeof e=="function")return Su(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$c)return 11;if(e===Wc)return 14}return 2}function Vn(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ws(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Su(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Nr:return lr(n.children,o,i,t);case Uc:s=8,o|=8;break;case ja:return e=At(12,n,t,o|2),e.elementType=ja,e.lanes=i,e;case Ra:return e=At(13,n,t,o),e.elementType=Ra,e.lanes=i,e;case Ma:return e=At(19,n,t,o),e.elementType=Ma,e.lanes=i,e;case mh:return wl(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ph:s=10;break e;case gh:s=9;break e;case $c:s=11;break e;case Wc:s=14;break e;case Rn:s=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=At(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function lr(e,t,n,r){return e=At(7,e,r,t),e.lanes=n,e}function wl(e,t,n,r){return e=At(22,e,r,t),e.elementType=mh,e.lanes=n,e.stateNode={isHidden:!1},e}function oa(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function ia(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Cu(e,t,n,r,o,i,s,l,c){return e=new rv(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=At(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lu(i),e}function ov(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lg(e){if(!e)return Kn;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(gt(n))return lp(e,n,t)}return t}function ag(e,t,n,r,o,i,s,l,c){return e=Cu(n,r,!0,e,o,i,s,l,c),e.context=lg(null),n=e.current,r=ct(),o=Hn(n),i=mn(r,o),i.callback=t??null,$n(n,i,o),e.current.lanes=o,Ti(e,o,r),mt(e,r),e}function xl(e,t,n,r){var o=t.current,i=ct(),s=Hn(o);return n=lg(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$n(o,t,s),e!==null&&(Vt(e,o,s,i),hs(e,o,s)),s}function Qs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _u(e,t){ff(e,t),(e=e.alternate)&&ff(e,t)}function iv(){return null}var cg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Eu(e){this._internalRoot=e}bl.prototype.render=Eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));xl(e,t,null,null)};bl.prototype.unmount=Eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){xl(null,e,null,null)}),t[xn]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&$h(e)}};function Tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hf(){}function sv(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var f=Qs(s);i.call(f)}}var s=ag(t,r,e,0,null,!1,!1,"",hf);return e._reactRootContainer=s,e[xn]=s.current,ci(e.nodeType===8?e.parentNode:e),yr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var f=Qs(c);l.call(f)}}var c=Cu(e,0,!1,null,null,!1,!1,"",hf);return e._reactRootContainer=c,e[xn]=c.current,ci(e.nodeType===8?e.parentNode:e),yr(function(){xl(t,c,n,r)}),c}function Sl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var c=Qs(s);l.call(c)}}xl(t,s,e,o)}else s=sv(n,t,e,o,r);return Qs(s)}Fh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Po(t.pendingLanes);n!==0&&(Yc(t,n|1),mt(t,Pe()),!(ke&6)&&(uo=Pe()+500,Zn()))}break;case 13:yr(function(){var r=bn(e,1);if(r!==null){var o=ct();Vt(r,e,1,o)}}),_u(e,1)}};Kc=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=ct();Vt(t,e,134217728,n)}_u(e,134217728)}};Ph=function(e){if(e.tag===13){var t=Hn(e),n=bn(e,t);if(n!==null){var r=ct();Vt(n,e,t,r)}_u(e,t)}};Bh=function(){return Ce};Uh=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};Ba=function(e,t,n){switch(t){case"input":if(Aa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=hl(r);if(!o)throw Error(Q(90));vh(r),Aa(r,o)}}}break;case"textarea":xh(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};Th=xu;jh=yr;var lv={usingClientEntryPoint:!1,Events:[Ri,Pr,hl,_h,Eh,xu]},zo={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},av={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dh(e),e===null?null:e.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||iv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{cl=Zi.inject(av),en=Zi}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tu(t))throw Error(Q(200));return ov(e,t,null,n)};Et.createRoot=function(e,t){if(!Tu(e))throw Error(Q(299));var n=!1,r="",o=cg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Cu(e,1,!1,null,null,n,!1,r,o),e[xn]=t.current,ci(e.nodeType===8?e.parentNode:e),new Eu(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Dh(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return yr(e)};Et.hydrate=function(e,t,n){if(!kl(t))throw Error(Q(200));return Sl(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!Tu(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=cg;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=ag(t,null,e,1,n??null,o,!1,i,s),e[xn]=t.current,ci(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new bl(t)};Et.render=function(e,t,n){if(!kl(t))throw Error(Q(200));return Sl(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!kl(e))throw Error(Q(40));return e._reactRootContainer?(yr(function(){Sl(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};Et.unstable_batchedUpdates=xu;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!kl(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Sl(e,t,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function ug(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ug)}catch(e){console.error(e)}}ug(),uh.exports=Et;var vr=uh.exports,pf=vr;Ea.createRoot=pf.createRoot,Ea.hydrateRoot=pf.hydrateRoot;const yt=()=>new Map,wc=e=>{const t=yt();return e.forEach((n,r)=>{t.set(r,n)}),t},_t=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},cv=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},uv=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Gn=()=>new Set,sa=e=>e[e.length-1],dv=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Sn=Array.from,fv=Array.isArray;class dg{constructor(){this._observers=yt()}on(t,n){return _t(this._observers,t,Gn).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Sn((this._observers.get(t)||yt()).values()).forEach(r=>r(...n))}destroy(){this._observers=yt()}}class fg{constructor(){this._observers=yt()}on(t,n){_t(this._observers,t,Gn).add(n)}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Sn((this._observers.get(t)||yt()).values()).forEach(r=>r(...n))}destroy(){this._observers=yt()}}const on=Math.floor,xs=Math.abs,hv=Math.log10,ju=(e,t)=>e<t?e:t,Er=(e,t)=>e>t?e:t,hg=e=>e!==0?e<0:1/e<0,gf=1,mf=2,la=4,aa=8,vi=32,yn=64,St=128,Cl=31,xc=63,ar=127,pv=2147483647,pg=Number.MAX_SAFE_INTEGER,gv=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&on(e)===e),mv=String.fromCharCode,yv=e=>e.toLowerCase(),vv=/^\s*/g,wv=e=>e.replace(vv,""),xv=/([A-Z])/g,yf=(e,t)=>wv(e.replace(xv,n=>`${t}${yv(n)}`)),bv=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},wi=typeof TextEncoder<"u"?new TextEncoder:null,kv=e=>wi.encode(e),bc=wi?kv:bv;let Jo=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Jo&&Jo.decode(new Uint8Array).length===1&&(Jo=null);class Di{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Qe=()=>new Di,Sv=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},ze=e=>{const t=new Uint8Array(Sv(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Cv=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Er(n,t)*2),e.cpos=0)},Ye=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},xi=Ye,fe=(e,t)=>{for(;t>ar;)Ye(e,St|ar&t),t=on(t/128);Ye(e,ar&t)},Ru=(e,t)=>{const n=hg(t);for(n&&(t=-t),Ye(e,(t>xc?St:0)|(n?yn:0)|xc&t),t=on(t/64);t>0;)Ye(e,(t>ar?St:0)|ar&t),t=on(t/128)},kc=new Uint8Array(3e4),_v=kc.length/3,Ev=(e,t)=>{if(t.length<_v){const n=wi.encodeInto(t,kc).written||0;fe(e,n);for(let r=0;r<n;r++)Ye(e,kc[r])}else Ie(e,bc(t))},Tv=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;fe(e,r);for(let o=0;o<r;o++)Ye(e,n.codePointAt(o))},nn=wi&&wi.encodeInto?Ev:Tv,_l=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=ju(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Er(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Ie=(e,t)=>{fe(e,t.byteLength),_l(e,t)},Mu=(e,t)=>{Cv(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},jv=(e,t)=>Mu(e,4).setFloat32(0,t,!1),Rv=(e,t)=>Mu(e,8).setFloat64(0,t,!1),Mv=(e,t)=>Mu(e,8).setBigInt64(0,t,!1),vf=new DataView(new ArrayBuffer(4)),Dv=e=>(vf.setFloat32(0,e),vf.getFloat32(0)===e),fo=(e,t)=>{switch(typeof t){case"string":Ye(e,119),nn(e,t);break;case"number":gv(t)&&xs(t)<=pv?(Ye(e,125),Ru(e,t)):Dv(t)?(Ye(e,124),jv(e,t)):(Ye(e,123),Rv(e,t));break;case"bigint":Ye(e,122),Mv(e,t);break;case"object":if(t===null)Ye(e,126);else if(fv(t)){Ye(e,117),fe(e,t.length);for(let n=0;n<t.length;n++)fo(e,t[n])}else if(t instanceof Uint8Array)Ye(e,116),Ie(e,t);else{Ye(e,118);const n=Object.keys(t);fe(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];nn(e,o),fo(e,t[o])}}break;case"boolean":Ye(e,t?120:121);break;default:Ye(e,127)}};class wf extends Di{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&fe(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const xf=e=>{e.count>0&&(Ru(e.encoder,e.count===1?e.s:-e.s),e.count>1&&fe(e.encoder,e.count-2))};class bs{constructor(){this.encoder=new Di,this.s=0,this.count=0}write(t){this.s===t?this.count++:(xf(this),this.count=1,this.s=t)}toUint8Array(){return xf(this),ze(this.encoder)}}const bf=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);Ru(e.encoder,t),e.count>1&&fe(e.encoder,e.count-2)}};class ca{constructor(){this.encoder=new Di,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(bf(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return bf(this),ze(this.encoder)}}class Lv{constructor(){this.sarr=[],this.s="",this.lensE=new bs}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Di;return this.sarr.push(this.s),this.s="",nn(t,this.sarr.join("")),_l(t,this.lensE.toUint8Array()),ze(t)}}const sn=e=>new Error(e),rn=()=>{throw sn("Method unimplemented")},ln=()=>{throw sn("Unexpected case")},gg=sn("Unexpected end of array"),mg=sn("Integer out of Range");class El{constructor(t){this.arr=t,this.pos=0}}const un=e=>new El(e),Av=e=>e.pos!==e.arr.length,zv=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Ke=e=>zv(e,ge(e)),wr=e=>e.arr[e.pos++],ge=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&ar)*n,n*=128,o<St)return t;if(t>pg)throw mg}throw gg},Du=e=>{let t=e.arr[e.pos++],n=t&xc,r=64;const o=(t&yn)>0?-1:1;if(!(t&St))return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&ar)*r,r*=128,t<St)return o*n;if(n>pg)throw mg}throw gg},Nv=e=>{let t=ge(e);if(t===0)return"";{let n=String.fromCodePoint(wr(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(wr(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},Ov=e=>Jo.decode(Ke(e)),vn=Jo?Ov:Nv,Lu=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Iv=e=>Lu(e,4).getFloat32(0,!1),Fv=e=>Lu(e,8).getFloat64(0,!1),Pv=e=>Lu(e,8).getBigInt64(0,!1),Bv=[e=>{},e=>null,Du,Iv,Fv,Pv,e=>!1,e=>!0,vn,e=>{const t=ge(e),n={};for(let r=0;r<t;r++){const o=vn(e);n[o]=ho(e)}return n},e=>{const t=ge(e),n=[];for(let r=0;r<t;r++)n.push(ho(e));return n},Ke],ho=e=>Bv[127-wr(e)](e);class kf extends El{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Av(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class ks extends El{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Du(this);const t=hg(this.s);this.count=1,t&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class ua extends El{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Du(this),n=t&1;this.diff=on(t/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Uv{constructor(t){this.decoder=new ks(t),this.str=vn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const $v=crypto.getRandomValues.bind(crypto),Wv=Math.random,yg=()=>$v(new Uint32Array(1))[0],Hv="10000000-1000-4000-8000"+-1e11,vg=()=>Hv.replace(/[018]/g,e=>(e^yg()&15>>e/4).toString(16)),Cn=Date.now,Sf=e=>new Promise(e);Promise.all.bind(Promise);const Vv=e=>Promise.reject(e),Au=e=>Promise.resolve(e),Cf=e=>e===void 0?null:e;class Yv{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let wg=new Yv,zu=!0;try{typeof localStorage<"u"&&localStorage&&(wg=localStorage,zu=!1)}catch{}const xg=wg,Kv=e=>zu||addEventListener("storage",e),Gv=e=>zu||removeEventListener("storage",e),Qv=Object.assign,bg=Object.keys,Xv=(e,t)=>{for(const n in e)t(e[n],n)},_f=e=>bg(e).length,Ef=e=>bg(e).length,Jv=e=>{for(const t in e)return!1;return!0},qv=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},kg=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Zv=(e,t)=>e===t||Ef(e)===Ef(t)&&qv(e,(n,r)=>(n!==void 0||kg(t,r))&&t[r]===n),ew=Object.freeze,Sg=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&Sg(e[t])}return ew(e)},Tf=Symbol("Equality"),Nu=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Nu(e,t,n+1)}},tw=()=>{},nw=e=>e,qo=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[Tf]!=null)return e[Tf](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!qo(e.get(n),t.get(n)))return!1;break}case Object:if(_f(e)!==_f(t))return!1;for(const n in e)if(!kg(e,n)||!qo(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!qo(e[n],t[n]))return!1;break;default:return!1}return!0},rw=(e,t)=>t.includes(e);var Cg={};const po=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",_g=typeof window<"u"&&typeof document<"u"&&!po;let Xt;const ow=()=>{if(Xt===void 0)if(po){Xt=yt();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Xt.set(t,""),t=r):t!==null&&(Xt.set(t,r),t=null)}t!==null&&Xt.set(t,"")}else typeof location=="object"?(Xt=yt(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Xt.set(`--${yf(t,"-")}`,n),Xt.set(`-${yf(t,"-")}`,n)}})):Xt=yt();return Xt},Sc=e=>ow().has(e),bi=e=>Cf(po?Cg[e.toUpperCase().replaceAll("-","_")]:xg.getItem(e)),Eg=e=>Sc("--"+e)||bi(e)!==null;Eg("production");const iw=po&&rw(Cg.FORCE_COLOR,["true","1","2"]),sw=iw||!Sc("--no-colors")&&!Eg("no-color")&&(!po||process.stdout.isTTY)&&(!po||Sc("--color")||bi("COLORTERM")!==null||(bi("TERM")||"").includes("color")),Tg=e=>new Uint8Array(e),lw=(e,t,n)=>new Uint8Array(e,t,n),aw=e=>new Uint8Array(e),cw=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=mv(e[n]);return btoa(t)},uw=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),dw=e=>{const t=atob(e),n=Tg(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},fw=e=>{const t=Buffer.from(e,"base64");return lw(t.buffer,t.byteOffset,t.byteLength)},jg=_g?cw:uw,Rg=_g?dw:fw,hw=e=>{const t=Tg(e.byteLength);return t.set(e),t};class pw{constructor(t,n){this.left=t,this.right=n}}const dn=(e,t)=>new pw(e,t);typeof DOMParser<"u"&&new DOMParser;const gw=e=>cv(e,(t,n)=>`${n}:${t};`).join(""),mw=JSON.stringify,En=Symbol,zt=En(),xr=En(),Mg=En(),Ou=En(),Dg=En(),Lg=En(),Ag=En(),Tl=En(),jl=En(),yw=e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},jf=[Dg,Ag,Tl,Mg];let da=0,Rf=Cn();const vw=(e,t)=>{const n=jf[da],r=bi("log"),o=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return da=(da+1)%jf.length,t+=": ",o?(...i)=>{var c;i.length===1&&((c=i[0])==null?void 0:c.constructor)===Function&&(i=i[0]());const s=Cn(),l=s-Rf;Rf=s,e(n,t,jl,...i.map(f=>{switch(f!=null&&f.constructor===Uint8Array&&(f=Array.from(f)),typeof f){case"string":case"symbol":return f;default:return mw(f)}}),n," +"+l+"ms")}:tw},ww={[zt]:dn("font-weight","bold"),[xr]:dn("font-weight","normal"),[Mg]:dn("color","blue"),[Dg]:dn("color","green"),[Ou]:dn("color","grey"),[Lg]:dn("color","red"),[Ag]:dn("color","purple"),[Tl]:dn("color","orange"),[jl]:dn("color","black")},xw=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=yt();let o=[],i=0;for(;i<e.length;i++){const l=e[i],c=ww[l];if(c!==void 0)r.set(c.left,c.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const f=gw(r);i>0||f.length>0?(t.push("%c"+l),n.push(f)):t.push(l)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const l=e[i];l instanceof Symbol||o.push(l)}return o},zg=sw?xw:yw,Ng=(...e)=>{console.log(...zg(e)),Og.forEach(t=>t.print(e))},bw=(...e)=>{console.warn(...zg(e)),e.unshift(Tl),Og.forEach(t=>t.print(e))},Og=Gn(),kw=e=>vw(Ng,e),Ig=e=>({[Symbol.iterator](){return this},next:e}),Sw=(e,t)=>Ig(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),fa=(e,t)=>Ig(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Iu{constructor(t,n){this.clock=t,this.len=n}}class Li{constructor(){this.clients=new Map}}const Fg=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],l=s.id.clock+s.length;for(let c=0,f=r[c];c<r.length&&f.clock<l;f=r[++c])Jg(e,i,f.clock,f.len,n)}}),Cw=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=on((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},Pg=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&Cw(n,t.clock)!==null},Fu=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=Er(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},_w=e=>{const t=new Li;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)dv(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return Fu(t),t},Xs=(e,t,n,r)=>{_t(e.clients,t,()=>[]).push(new Iu(n,r))},Ew=()=>new Li,Tw=e=>{const t=Ew();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const l=s.id.clock;let c=s.length;if(i+1<n.length)for(let f=n[i+1];i+1<n.length&&f.deleted;f=n[++i+1])c+=f.length;o.push(new Iu(l,c))}}o.length>0&&t.clients.set(r,o)}),t},Co=(e,t)=>{fe(e.restEncoder,t.clients.size),Sn(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),fe(e.restEncoder,n);const o=r.length;fe(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},Pu=e=>{const t=new Li,n=ge(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=ge(e.restDecoder),i=ge(e.restDecoder);if(i>0){const s=_t(t.clients,o,()=>[]);for(let l=0;l<i;l++)s.push(new Iu(e.readDsClock(),e.readDsLen()))}}return t},Mf=(e,t,n)=>{const r=new Li,o=ge(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=ge(e.restDecoder),l=ge(e.restDecoder),c=n.clients.get(s)||[],f=Xe(n,s);for(let y=0;y<l;y++){const h=e.readDsClock(),p=h+e.readDsLen();if(h<f){f<p&&Xs(r,s,f,p-f);let g=an(c,h),v=c[g];for(!v.deleted&&v.id.clock<h&&(c.splice(g+1,0,rl(t,v,h-v.id.clock)),g++);g<c.length&&(v=c[g++],v.id.clock<p);)v.deleted||(p<v.id.clock+v.length&&c.splice(g,0,rl(t,v,p-v.id.clock)),v.delete(t))}else Xs(r,s,h,p-h)}}if(r.clients.size>0){const i=new br;return fe(i.restEncoder,0),Co(i,r),i.toUint8Array()}return null},Bg=yg;class _o extends dg{constructor({guid:t=vg(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=Bg(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Qg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Sf(f=>{this.on("load",()=>{this.isLoaded=!0,f(this)})});const c=()=>Sf(f=>{const y=h=>{(h===void 0||h===!0)&&(this.off("sync",y),f())};this.on("sync",y)});this.on("sync",f=>{f===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=f===void 0||f===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ee(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Sn(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Ee(this,t,n)}get(t,n=tt){const r=_t(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==tt&&o!==n)if(o===tt){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,to)}getText(t=""){return this.get(t,yo)}getMap(t=""){return this.get(t,mo)}getXmlElement(t=""){return this.get(t,vo)}getXmlFragment(t=""){return this.get(t,kr)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,Sn(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new _o({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Ee(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Ug{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class $g extends Ug{readLeftID(){return xe(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return xe(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return wr(this.restDecoder)}readString(){return vn(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return ho(this.restDecoder)}readBuf(){return hw(Ke(this.restDecoder))}readJSON(){return JSON.parse(vn(this.restDecoder))}readKey(){return vn(this.restDecoder)}}class jw{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const t=ge(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class go extends jw{constructor(t){super(t),this.keys=[],ge(t),this.keyClockDecoder=new ua(Ke(t)),this.clientDecoder=new ks(Ke(t)),this.leftClockDecoder=new ua(Ke(t)),this.rightClockDecoder=new ua(Ke(t)),this.infoDecoder=new kf(Ke(t),wr),this.stringDecoder=new Uv(Ke(t)),this.parentInfoDecoder=new kf(Ke(t),wr),this.typeRefDecoder=new ks(Ke(t)),this.lenDecoder=new ks(Ke(t))}readLeftID(){return new eo(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new eo(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ho(this.restDecoder)}readBuf(){return Ke(this.restDecoder)}readJSON(){return ho(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Wg{constructor(){this.restEncoder=Qe()}toUint8Array(){return ze(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){fe(this.restEncoder,t)}writeDsLen(t){fe(this.restEncoder,t)}}class Ai extends Wg{writeLeftID(t){fe(this.restEncoder,t.client),fe(this.restEncoder,t.clock)}writeRightID(t){fe(this.restEncoder,t.client),fe(this.restEncoder,t.clock)}writeClient(t){fe(this.restEncoder,t)}writeInfo(t){xi(this.restEncoder,t)}writeString(t){nn(this.restEncoder,t)}writeParentInfo(t){fe(this.restEncoder,t?1:0)}writeTypeRef(t){fe(this.restEncoder,t)}writeLen(t){fe(this.restEncoder,t)}writeAny(t){fo(this.restEncoder,t)}writeBuf(t){Ie(this.restEncoder,t)}writeJSON(t){nn(this.restEncoder,JSON.stringify(t))}writeKey(t){nn(this.restEncoder,t)}}class Hg{constructor(){this.restEncoder=Qe(),this.dsCurrVal=0}toUint8Array(){return ze(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,fe(this.restEncoder,n)}writeDsLen(t){t===0&&ln(),fe(this.restEncoder,t-1),this.dsCurrVal+=t}}class br extends Hg{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ca,this.clientEncoder=new bs,this.leftClockEncoder=new ca,this.rightClockEncoder=new ca,this.infoEncoder=new wf(xi),this.stringEncoder=new Lv,this.parentInfoEncoder=new wf(xi),this.typeRefEncoder=new bs,this.lenEncoder=new bs}toUint8Array(){const t=Qe();return fe(t,0),Ie(t,this.keyClockEncoder.toUint8Array()),Ie(t,this.clientEncoder.toUint8Array()),Ie(t,this.leftClockEncoder.toUint8Array()),Ie(t,this.rightClockEncoder.toUint8Array()),Ie(t,ze(this.infoEncoder)),Ie(t,this.stringEncoder.toUint8Array()),Ie(t,ze(this.parentInfoEncoder)),Ie(t,this.typeRefEncoder.toUint8Array()),Ie(t,this.lenEncoder.toUint8Array()),_l(t,ze(this.restEncoder)),ze(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){fo(this.restEncoder,t)}writeBuf(t){Ie(this.restEncoder,t)}writeJSON(t){fo(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const Rw=(e,t,n,r)=>{r=Er(r,t[0].id.clock);const o=an(t,r);fe(e.restEncoder,t.length-o),e.writeClient(n),fe(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},Bu=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{Xe(t,i)>o&&r.set(i,o)}),Rl(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),fe(e.restEncoder,r.size),Sn(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{Rw(e,t.clients.get(o),o,i)})},Mw=(e,t)=>{const n=yt(),r=ge(e.restDecoder);for(let o=0;o<r;o++){const i=ge(e.restDecoder),s=new Array(i),l=e.readClient();let c=ge(e.restDecoder);n.set(l,{i:0,refs:s});for(let f=0;f<i;f++){const y=e.readInfo();switch(Cl&y){case 0:{const h=e.readLen();s[f]=new Mt(xe(l,c),h),c+=h;break}case 10:{const h=ge(e.restDecoder);s[f]=new Dt(xe(l,c),h),c+=h;break}default:{const h=(y&(yn|St))===0,p=new We(xe(l,c),null,(y&St)===St?e.readLeftID():null,null,(y&yn)===yn?e.readRightID():null,h?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,h&&(y&vi)===vi?e.readString():null,mm(e,y));s[f]=p,c+=p.length}}}}return n},Dw=(e,t,n)=>{const r=[];let o=Sn(n.keys()).sort((g,v)=>g-v);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let g=n.get(o[o.length-1]);for(;g.refs.length===g.i;)if(o.pop(),o.length>0)g=n.get(o[o.length-1]);else return null;return g};let s=i();if(s===null)return null;const l=new Qg,c=new Map,f=(g,v)=>{const b=c.get(g);(b==null||b>v)&&c.set(g,v)};let y=s.refs[s.i++];const h=new Map,p=()=>{for(const g of r){const v=g.id.client,b=n.get(v);b?(b.i--,l.clients.set(v,b.refs.slice(b.i)),n.delete(v),b.i=0,b.refs=[]):l.clients.set(v,[g]),o=o.filter(z=>z!==v)}r.length=0};for(;;){if(y.constructor!==Dt){const v=_t(h,y.id.client,()=>Xe(t,y.id.client))-y.id.clock;if(v<0)r.push(y),f(y.id.client,y.id.clock-1),p();else{const b=y.getMissing(e,t);if(b!==null){r.push(y);const z=n.get(b)||{refs:[],i:0};if(z.refs.length===z.i)f(b,Xe(t,b)),p();else{y=z.refs[z.i++];continue}}else(v===0||v<y.length)&&(y.integrate(e,v),h.set(y.id.client,y.id.clock+y.length))}}if(r.length>0)y=r.pop();else if(s!==null&&s.i<s.refs.length)y=s.refs[s.i++];else{if(s=i(),s===null)break;y=s.refs[s.i++]}}if(l.clients.size>0){const g=new br;return Bu(g,l,new Map),fe(g.restEncoder,0),{missing:c,update:g.toUint8Array()}}return null},Lw=(e,t)=>Bu(e,t.doc.store,t.beforeState),Aw=(e,t,n,r=new go(e))=>Ee(t,o=>{o.local=!1;let i=!1;const s=o.doc,l=s.store,c=Mw(r,s),f=Dw(o,l,c),y=l.pendingStructs;if(y){for(const[p,g]of y.missing)if(g<Xe(l,p)){i=!0;break}if(f){for(const[p,g]of f.missing){const v=y.missing.get(p);(v==null||v>g)&&y.missing.set(p,g)}y.update=Js([y.update,f.update])}}else l.pendingStructs=f;const h=Mf(r,o,l);if(l.pendingDs){const p=new go(un(l.pendingDs));ge(p.restDecoder);const g=Mf(p,o,l);h&&g?l.pendingDs=Js([h,g]):l.pendingDs=h||g}else l.pendingDs=h;if(i){const p=l.pendingStructs.update;l.pendingStructs=null,Vg(o.doc,p)}},n,!1),Vg=(e,t,n,r=go)=>{const o=un(t);Aw(o,e,n,new r(o))},zw=(e,t,n)=>Vg(e,t,n,$g),Nw=(e,t,n=new Map)=>{Bu(e,t.store,n),Co(e,Tw(t.store))},Ow=(e,t=new Uint8Array([0]),n=new br)=>{const r=Yg(t);Nw(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(qw(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===Ai)return Xw(o.map((i,s)=>s===0?i:ex(i)));if(n.constructor===br)return Js(o)}return o[0]},Iw=(e,t)=>Ow(e,t,new Ai),Fw=e=>{const t=new Map,n=ge(e.restDecoder);for(let r=0;r<n;r++){const o=ge(e.restDecoder),i=ge(e.restDecoder);t.set(o,i)}return t},Yg=e=>Fw(new Ug(un(e))),Kg=(e,t)=>(fe(e.restEncoder,t.size),Sn(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{fe(e.restEncoder,n),fe(e.restEncoder,r)}),e),Pw=(e,t)=>Kg(e,Rl(t.store)),Bw=(e,t=new Hg)=>(e instanceof Map?Kg(t,e):Pw(t,e),t.toUint8Array()),Uw=e=>Bw(e,new Wg);class $w{constructor(){this.l=[]}}const Df=()=>new $w,Lf=(e,t)=>e.l.push(t),Af=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Gg=(e,t,n)=>Nu(e.l,[t,n]);class eo{constructor(t,n){this.client=t,this.clock=n}}const es=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,xe=(e,t)=>new eo(e,t),Ww=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw ln()},Ar=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Pg(t.ds,e.id),Cc=(e,t)=>{const n=_t(e.meta,Cc,Gn),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<Xe(r,i)&&Qn(e,xe(i,o))}),Fg(e,t.ds,o=>{}),n.add(t))};class Qg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Rl=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},Xe=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Xg=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw ln()}n.push(t)},an=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=on(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=on((n+r)/2)}throw ln()},Hw=(e,t)=>{const n=e.clients.get(t.client);return n[an(n,t.clock)]},ha=Hw,_c=(e,t,n)=>{const r=an(t,n),o=t[r];return o.id.clock<n&&o instanceof We?(t.splice(r+1,0,rl(e,o,n-o.id.clock)),r+1):r},Qn=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[_c(e,n,t.clock)]},zf=(e,t,n)=>{const r=t.clients.get(n.client),o=an(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Mt&&r.splice(o+1,0,rl(e,i,n.clock-i.id.clock+1)),i},Vw=(e,t,n)=>{const r=e.clients.get(t.id.client);r[an(r,t.id.clock)]=n},Jg=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=_c(e,t,n),l;do l=t[s++],i<l.id.clock+l.length&&_c(e,t,i),o(l);while(s<t.length&&t[s].id.clock<i)};class Yw{constructor(t,n,r){this.doc=t,this.deleteSet=new Li,this.beforeState=Rl(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Nf=(e,t)=>t.deleteSet.clients.size===0&&!uv(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Fu(t.deleteSet),Lw(e,t),Co(e,t.deleteSet),!0),Of=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&_t(e.changed,t,Gn).add(n)},Ss=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof We&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},Kw=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const l=o[s],c=l.clock+l.len;for(let f=an(i,l.clock),y=i[f];f<i.length&&y.id.clock<c;y=i[++f]){const h=i[f];if(l.clock+l.len<=h.id.clock)break;h instanceof We&&h.deleted&&!h.keep&&n(h)&&h.gc(t,!1)}}}},Gw=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],l=ju(o.length-1,1+an(o,s.clock+s.len-1));for(let c=l,f=o[c];c>0&&f.id.clock>=s.clock;f=o[c])c-=1+Ss(o,c)}})},qg=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{Fu(i),n.afterState=Rl(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((c,f)=>l.push(()=>{(f._item===null||!f._item.deleted)&&f._callObserver(n,c)})),l.push(()=>{n.changedParentTypes.forEach((c,f)=>{f._dEH.l.length>0&&(f._item===null||!f._item.deleted)&&(c=c.filter(y=>y.target._item===null||!y.target._item.deleted),c.forEach(y=>{y.currentTarget=f,y._path=null}),c.sort((y,h)=>y.path.length-h.path.length),Gg(f._dEH,c,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),Nu(l,[]),n._needFormattingCleanup&&px(n)}finally{r.gc&&Kw(i,o,r.gcFilter),Gw(i,o),n.afterState.forEach((y,h)=>{const p=n.beforeState.get(h)||0;if(p!==y){const g=o.clients.get(h),v=Er(an(g,p),1);for(let b=g.length-1;b>=v;)b-=1+Ss(g,b)}});for(let y=s.length-1;y>=0;y--){const{client:h,clock:p}=s[y].id,g=o.clients.get(h),v=an(g,p);v+1<g.length&&Ss(g,v+1)>1||v>0&&Ss(g,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Ng(Tl,zt,"[yjs] ",xr,Lg,"Changed the client-id because another client seems to be using it."),r.clientID=Bg()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const y=new Ai;Nf(y,n)&&r.emit("update",[y.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const y=new br;Nf(y,n)&&r.emit("updateV2",[y.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:f}=n;(l.size>0||f.size>0||c.size>0)&&(l.forEach(y=>{y.clientID=r.clientID,y.collectionid==null&&(y.collectionid=r.collectionid),r.subdocs.add(y)}),f.forEach(y=>r.subdocs.delete(y)),r.emit("subdocs",[{loaded:c,added:l,removed:f},r,n]),f.forEach(y=>y.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):qg(e,t+1)}}},Ee=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new Yw(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const l=e._transaction===o[0];e._transaction=null,l&&qg(o,0)}}return s};function*Qw(e){const t=ge(e.restDecoder);for(let n=0;n<t;n++){const r=ge(e.restDecoder),o=e.readClient();let i=ge(e.restDecoder);for(let s=0;s<r;s++){const l=e.readInfo();if(l===10){const c=ge(e.restDecoder);yield new Dt(xe(o,i),c),i+=c}else if(Cl&l){const c=(l&(yn|St))===0,f=new We(xe(o,i),null,(l&St)===St?e.readLeftID():null,null,(l&yn)===yn?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(l&vi)===vi?e.readString():null,mm(e,l));yield f,i+=f.length}else{const c=e.readLen();yield new Mt(xe(o,i),c),i+=c}}}}class Uu{constructor(t,n){this.gen=Qw(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Dt);return this.curr}}class $u{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Xw=e=>Js(e,$g,Ai),Jw=(e,t)=>{if(e.constructor===Mt){const{client:n,clock:r}=e.id;return new Mt(xe(n,r+t),e.length-t)}else if(e.constructor===Dt){const{client:n,clock:r}=e.id;return new Dt(xe(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new We(xe(r,o+t),null,xe(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Js=(e,t=go,n=br)=>{if(e.length===1)return e[0];const r=e.map(y=>new t(un(y)));let o=r.map(y=>new Uu(y,!0)),i=null;const s=new n,l=new $u(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,g)=>{if(p.curr.id.client===g.curr.id.client){const v=p.curr.id.clock-g.curr.id.clock;return v===0?p.curr.constructor===g.curr.constructor?0:p.curr.constructor===Dt?1:-1:v}else return g.curr.id.client-p.curr.id.client}),o.length!==0;){const y=o[0],h=y.curr.id.client;if(i!==null){let p=y.curr,g=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=y.next(),g=!0;if(p===null||p.id.client!==h||g&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(h!==i.struct.id.client)zn(l,i.struct,i.offset),i={struct:p,offset:0},y.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===Dt)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{zn(l,i.struct,i.offset);const v=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Dt(xe(h,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-p.id.clock;v>0&&(i.struct.constructor===Dt?i.struct.length-=v:p=Jw(p,v)),i.struct.mergeWith(p)||(zn(l,i.struct,i.offset),i={struct:p,offset:0},y.next())}}else i={struct:y.curr,offset:0},y.next();for(let p=y.curr;p!==null&&p.id.client===h&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==Dt;p=y.next())zn(l,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(zn(l,i.struct,i.offset),i=null),Wu(l);const c=r.map(y=>Pu(y)),f=_w(c);return Co(s,f),s.toUint8Array()},qw=(e,t,n=go,r=br)=>{const o=Yg(t),i=new r,s=new $u(i),l=new n(un(e)),c=new Uu(l,!1);for(;c.curr;){const y=c.curr,h=y.id.client,p=o.get(h)||0;if(c.curr.constructor===Dt){c.next();continue}if(y.id.clock+y.length>p)for(zn(s,y,Er(p-y.id.clock,0)),c.next();c.curr&&c.curr.id.client===h;)zn(s,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===h&&c.curr.id.clock+c.curr.length<=p;)c.next()}Wu(s);const f=Pu(l);return Co(i,f),i.toUint8Array()},Zg=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:ze(e.encoder.restEncoder)}),e.encoder.restEncoder=Qe(),e.written=0)},zn=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Zg(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),fe(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Wu=e=>{Zg(e);const t=e.encoder.restEncoder;fe(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];fe(t,r.written),_l(t,r.restEncoder)}},Zw=(e,t,n,r)=>{const o=new n(un(e)),i=new Uu(o,!1),s=new r,l=new $u(s);for(let f=i.curr;f!==null;f=i.next())zn(l,t(f),0);Wu(l);const c=Pu(o);return Co(s,c),s.toUint8Array()},ex=e=>Zw(e,nw,go,Ai),If="You must not compute changes after the event-handler fired.";class Ml{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tx(this.currentTarget,this.target))}deletes(t){return Pg(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw sn(If);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,l;if(this.adds(i)){let c=i.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(i))if(c!==null&&this.deletes(c))s="delete",l=sa(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",l=sa(c.content.getContent())):(s="add",l=void 0)}else if(this.deletes(i))s="delete",l=sa(i.content.getContent());else return;t.set(o,{action:s,oldValue:l})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw sn(If);const n=this.target,r=Gn(),o=Gn(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const c=()=>{l&&i.push(l)};for(let f=n._start;f!==null;f=f.right)f.deleted?this.deletes(f)&&!this.adds(f)&&((l===null||l.delete===void 0)&&(c(),l={delete:0}),l.delete+=f.length,o.add(f)):this.adds(f)?((l===null||l.insert===void 0)&&(c(),l={insert:[]}),l.insert=l.insert.concat(f.content.getContent()),r.add(f)):((l===null||l.retain===void 0)&&(c(),l={retain:0}),l.retain+=f.length);l!==null&&l.retain===void 0&&c()}this._changes=t}return t}}const tx=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},st=()=>{bw("Invalid access: Add Yjs type to a document before reading data.")},em=80;let Hu=0;class nx{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=Hu++}}const rx=e=>{e.timestamp=Hu++},tm=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Hu++},ox=(e,t,n)=>{if(e.length>=em){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return tm(r,t,n),r}else{const r=new nx(t,n);return e.push(r),r}},Dl=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>xs(t-i.index)<xs(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,rx(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&xs(n.index-o)<r.parent.length/em?(tm(n,r,o),n):ox(e._searchMarker,r,o)},ki=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Er(t,o.index+n))}},Ll=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;_t(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Gg(r._eH,n,t)};class tt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Df(),this._dEH=Df(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw rn()}clone(){throw rn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Lf(this._eH,t)}observeDeep(t){Lf(this._dEH,t)}unobserve(t){Af(this._eH,t)}unobserveDeep(t){Af(this._dEH,t)}toJSON(){}}const nm=(e,t,n)=>{e.doc??st(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let l=t;l<s.length&&r>0;l++)o.push(s[l]),r--;t=0}}i=i.right}return o},rm=e=>{e.doc??st();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},Si=(e,t)=>{let n=0,r=e._start;for(e.doc??st();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},om=(e,t)=>{const n=[];return Si(e,(r,o)=>{n.push(t(r,o,e))}),n},ix=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},im=(e,t)=>{e.doc??st();const n=Dl(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},qs=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,l=i.store,c=n===null?t._start:n.right;let f=[];const y=()=>{f.length>0&&(o=new We(xe(s,Xe(l,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Sr(f)),o.integrate(e,0),f=[])};r.forEach(h=>{if(h===null)f.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:f.push(h);break;default:switch(y(),h.constructor){case Uint8Array:case ArrayBuffer:o=new We(xe(s,Xe(l,s)),o,o&&o.lastId,c,c&&c.id,t,null,new zi(new Uint8Array(h))),o.integrate(e,0);break;case _o:o=new We(xe(s,Xe(l,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Ni(h)),o.integrate(e,0);break;default:if(h instanceof tt)o=new We(xe(s,Xe(l,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Tn(h)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),y()},sm=()=>sn("Length exceeded!"),lm=(e,t,n,r)=>{if(n>t._length)throw sm();if(n===0)return t._searchMarker&&ki(t._searchMarker,n,r.length),qs(e,t,null,r);const o=n,i=Dl(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Qn(e,xe(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&ki(t._searchMarker,o,r.length),qs(e,t,s,r)},sx=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return qs(e,t,o,n)},am=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=Dl(t,n);let l=t._start;for(s!==null&&(l=s.p,n-=s.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Qn(e,xe(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Qn(e,xe(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw sm();t._searchMarker&&ki(t._searchMarker,o,-i+r)},Zs=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},Vu=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let l;if(r==null)l=new Sr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Sr([r]);break;case Uint8Array:l=new zi(r);break;case _o:l=new Ni(r);break;default:if(r instanceof tt)l=new Tn(r);else throw new Error("Unexpected content type")}new We(xe(s,Xe(i.store,s)),o,o&&o.lastId,null,null,t,n,l).integrate(e,0)},Yu=(e,t)=>{e.doc??st();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},cm=e=>{const t={};return e.doc??st(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},um=(e,t)=>{e.doc??st();const n=e._map.get(t);return n!==void 0&&!n.deleted},lx=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Ar(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},ts=e=>(e.doc??st(),Sw(e._map.entries(),t=>!t[1].deleted));class ax extends Ml{}class to extends tt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new to;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new to}clone(){const t=new to;return t.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),t}get length(){return this.doc??st(),this._length}_callObserver(t,n){super._callObserver(t,n),Ll(this,t,new ax(this,t))}insert(t,n){this.doc!==null?Ee(this.doc,r=>{lm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Ee(this.doc,n=>{sx(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Ee(this.doc,r=>{am(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return im(this,t)}toArray(){return rm(this)}slice(t=0,n=this.length){return nm(this,t,n)}toJSON(){return this.map(t=>t instanceof tt?t.toJSON():t)}map(t){return om(this,t)}forEach(t){Si(this,t)}[Symbol.iterator](){return ix(this)}_write(t){t.writeTypeRef(Ax)}}const cx=e=>new to;class ux extends Ml{constructor(t,n,r){super(t,n),this.keysChanged=r}}class mo extends tt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new mo}clone(){const t=new mo;return this.forEach((n,r)=>{t.set(r,n instanceof tt?n.clone():n)}),t}_callObserver(t,n){Ll(this,t,new ux(this,t,n))}toJSON(){this.doc??st();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof tt?o.toJSON():o}}),t}get size(){return[...ts(this)].length}keys(){return fa(ts(this),t=>t[0])}values(){return fa(ts(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return fa(ts(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??st(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Ee(this.doc,r=>{Vu(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Yu(this,t)}has(t){return um(this,t)}clear(){this.doc!==null?Ee(this.doc,t=>{this.forEach(function(n,r,o){Zs(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(zx)}}const dx=e=>new mo,In=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Zv(e,t);class Ec{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&ln(),this.right.content.constructor){case He:this.right.deleted||Eo(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Ff=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case He:t.right.deleted||Eo(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Qn(e,xe(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},ns=(e,t,n,r)=>{const o=new Map,i=r?Dl(t,n):null;if(i){const s=new Ec(i.p.left,i.p,i.index,o);return Ff(e,s,n-i.index)}else{const s=new Ec(null,t._start,0,o);return Ff(e,s,n)}},dm=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===He&&In(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,l)=>{const c=n.left,f=n.right,y=new We(xe(i,Xe(o.store,i)),c,c&&c.lastId,f,f&&f.id,t,null,new He(l,s));y.integrate(e,0),n.right=y,n.forward()})},Eo=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},fm=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===He&&In(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},hm=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const l in r){const c=r[l],f=n.currentAttributes.get(l)??null;if(!In(f,c)){s.set(l,f);const{left:y,right:h}=n;n.right=new We(xe(i,Xe(o.store,i)),y,y&&y.lastId,h,h&&h.id,t,null,new He(l,c)),n.right.integrate(e,0),n.forward()}}return s},pa=(e,t,n,r,o)=>{n.currentAttributes.forEach((p,g)=>{o[g]===void 0&&(o[g]=null)});const i=e.doc,s=i.clientID;fm(n,o);const l=hm(e,t,n,o),c=r.constructor===String?new cn(r):r instanceof tt?new Tn(r):new Tr(r);let{left:f,right:y,index:h}=n;t._searchMarker&&ki(t._searchMarker,n.index,c.getLength()),y=new We(xe(s,Xe(i.store,s)),f,f&&f.lastId,y,y&&y.id,t,null,c),y.integrate(e,0),n.right=y,n.index=h,n.forward(),dm(e,t,n,l)},Pf=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;fm(n,o);const l=hm(e,t,n,o);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===He));){if(!n.right.deleted)switch(n.right.content.constructor){case He:{const{key:c,value:f}=n.right.content,y=o[c];if(y!==void 0){if(In(y,f))l.delete(c);else{if(r===0)break e;l.set(c,f)}n.right.delete(e)}else n.currentAttributes.set(c,f);break}default:r<n.right.length&&Qn(e,xe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new We(xe(s,Xe(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new cn(c)),n.right.integrate(e,0),n.forward()}dm(e,t,n,l)},pm=(e,t,n,r,o)=>{let i=t;const s=yt();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===He){const f=i.content;s.set(f.key,f)}i=i.right}let l=0,c=!1;for(;t!==i;){if(n===t&&(c=!0),!t.deleted){const f=t.content;switch(f.constructor){case He:{const{key:y,value:h}=f,p=r.get(y)??null;(s.get(y)!==f||p===h)&&(t.delete(e),l++,!c&&(o.get(y)??null)===h&&p!==h&&(p===null?o.delete(y):o.set(y,p))),!c&&!t.deleted&&Eo(o,f);break}}}t=t.right}return l},fx=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===He){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},hx=e=>{let t=0;return Ee(e.doc,n=>{let r=e._start,o=e._start,i=yt();const s=wc(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case He:Eo(s,o.content);break;default:t+=pm(n,r,o,i,s),i=wc(s),r=o;break}o=o.right}}),t},px=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Jg(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===He&&s.constructor!==Mt&&t.add(s.parent)})}Ee(n,r=>{Fg(e,e.deleteSet,o=>{if(o instanceof Mt||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===He?t.add(i):fx(r,o)});for(const o of t)hx(o)})},Bf=(e,t,n)=>{const r=n,o=wc(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Tn:case Tr:case cn:n<t.right.length&&Qn(e,xe(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&pm(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&ki(s._searchMarker,t.index,-r+n),t};class gx extends Ml{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Ee(t,r=>{const o=new Map,i=new Map;let s=this.target._start,l=null;const c={};let f="",y=0,h=0;const p=()=>{if(l!==null){let g=null;switch(l){case"delete":h>0&&(g={delete:h}),h=0;break;case"insert":(typeof f=="object"||f.length>0)&&(g={insert:f},o.size>0&&(g.attributes={},o.forEach((v,b)=>{v!==null&&(g.attributes[b]=v)}))),f="";break;case"retain":y>0&&(g={retain:y},Jv(c)||(g.attributes=Qv({},c))),y=0;break}g&&n.push(g),l=null}};for(;s!==null;){switch(s.content.constructor){case Tn:case Tr:this.adds(s)?this.deletes(s)||(p(),l="insert",f=s.content.getContent()[0],p()):this.deletes(s)?(l!=="delete"&&(p(),l="delete"),h+=1):s.deleted||(l!=="retain"&&(p(),l="retain"),y+=1);break;case cn:this.adds(s)?this.deletes(s)||(l!=="insert"&&(p(),l="insert"),f+=s.content.str):this.deletes(s)?(l!=="delete"&&(p(),l="delete"),h+=s.length):s.deleted||(l!=="retain"&&(p(),l="retain"),y+=s.length);break;case He:{const{key:g,value:v}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(g)??null;In(b,v)?v!==null&&s.delete(r):(l==="retain"&&p(),In(v,i.get(g)??null)?delete c[g]:c[g]=v)}}else if(this.deletes(s)){i.set(g,v);const b=o.get(g)??null;In(b,v)||(l==="retain"&&p(),c[g]=b)}else if(!s.deleted){i.set(g,v);const b=c[g];b!==void 0&&(In(b,v)?b!==null&&s.delete(r):(l==="retain"&&p(),v===null?delete c[g]:c[g]=v))}s.deleted||(l==="insert"&&p(),Eo(o,s.content));break}}s=s.right}for(p();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class yo extends tt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??st(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new yo}clone(){const t=new yo;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new gx(this,t,n);Ll(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??st();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===cn&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Ee(this.doc,r=>{const o=new Ec(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const l=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof l!="string"||l.length>0)&&pa(r,this,o,l,s.attributes||{})}else s.retain!==void 0?Pf(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&Bf(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??st();const o=[],i=new Map,s=this.doc;let l="",c=this._start;function f(){if(l.length>0){const h={};let p=!1;i.forEach((v,b)=>{p=!0,h[b]=v});const g={insert:l};p&&(g.attributes=h),o.push(g),l=""}}const y=()=>{for(;c!==null;){if(Ar(c,t)||n!==void 0&&Ar(c,n))switch(c.content.constructor){case cn:{const h=i.get("ychange");t!==void 0&&!Ar(c,t)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(f(),i.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!Ar(c,n)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(f(),i.set("ychange",r?r("added",c.id):{type:"added"})):h!==void 0&&(f(),i.delete("ychange")),l+=c.content.str;break}case Tn:case Tr:{f();const h={insert:c.content.getContent()[0]};if(i.size>0){const p={};h.attributes=p,i.forEach((g,v)=>{p[v]=g})}o.push(h);break}case He:Ar(c,t)&&(f(),Eo(i,c.content));break}c=c.right}f()};return t||n?Ee(s,h=>{t&&Cc(h,t),n&&Cc(h,n),y()},"cleanup"):y(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Ee(o,i=>{const s=ns(i,this,t,!r);r||(r={},s.currentAttributes.forEach((l,c)=>{r[c]=l})),pa(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?Ee(o,i=>{const s=ns(i,this,t,!r);pa(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Ee(r,o=>{Bf(o,ns(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?Ee(o,i=>{const s=ns(i,this,t,!1);s.right!==null&&Pf(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Ee(this.doc,r=>{Vu(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Yu(this,t)}getAttributes(){return cm(this)}_write(t){t.writeTypeRef(Nx)}}const mx=e=>new yo;class ga{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??st()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===vo||n.constructor===kr)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class kr extends tt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new kr}clone(){const t=new kr;return t.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),t}get length(){return this.doc??st(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new ga(this,t)}querySelector(t){t=t.toUpperCase();const r=new ga(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Sn(new ga(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Ll(this,t,new wx(this,n,t))}toString(){return om(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Si(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?Ee(this.doc,r=>{lm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Ee(this.doc,r=>{const o=t&&t instanceof tt?t._item:t;qs(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw sn("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?Ee(this.doc,r=>{am(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return rm(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return im(this,t)}slice(t=0,n=this.length){return nm(this,t,n)}forEach(t){Si(this,t)}_write(t){t.writeTypeRef(Ix)}}const yx=e=>new kr;class vo extends kr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new vo(this.nodeName)}clone(){const t=new vo(this.nodeName),n=this.getAttributes();return Xv(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof tt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const l in t)r.push(l);r.sort();const o=r.length;for(let l=0;l<o;l++){const c=r[l];n.push(c+'="'+t[c]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Ee(this.doc,r=>{Vu(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Yu(this,t)}hasAttribute(t){return um(this,t)}getAttributes(t){return t?lx(this,t):cm(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const l=i[s];typeof l=="string"&&o.setAttribute(s,l)}return Si(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(Ox),t.writeKey(this.nodeName)}}const vx=e=>new vo(e.readKey());class wx extends Ml{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class el extends mo{constructor(t){super(),this.hookName=t}_copy(){return new el(this.hookName)}clone(){const t=new el(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(Fx),t.writeKey(this.hookName)}}const xx=e=>new el(e.readKey());class tl extends yo{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new tl}clone(){const t=new tl;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,l)=>s.key<l.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const l=i.attrs[s];r+=` ${l.key}="${l.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Px)}}const bx=e=>new tl;class Ku{constructor(t,n){this.id=t,this.length=n}get deleted(){throw rn()}mergeWith(t){return!1}write(t,n,r){throw rn()}integrate(t,n){throw rn()}}const kx=0;class Mt extends Ku{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Xg(t.doc.store,this)}write(t,n){t.writeInfo(kx),t.writeLen(this.length-n)}getMissing(t,n){return null}}class zi{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new zi(this.content)}splice(t){throw rn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const Sx=e=>new zi(e.readBuf());class Ci{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ci(this.len)}splice(t){const n=new Ci(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Xs(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const Cx=e=>new Ci(e.readLen()),gm=(e,t)=>new _o({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Ni{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Ni(gm(this.doc.guid,this.opts))}splice(t){throw rn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const _x=e=>new Ni(gm(e.readString(),e.readAny()));class Tr{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Tr(this.embed)}splice(t){throw rn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const Ex=e=>new Tr(e.readJSON());class He{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new He(this.key,this.value)}splice(t){throw rn()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Tx=e=>new He(e.readKey(),e.readJSON());class nl{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new nl(this.arr)}splice(t){const n=new nl(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const jx=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new nl(n)},Rx=bi("node_env")==="development";class Sr{constructor(t){this.arr=t,Rx&&Sg(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Sr(this.arr)}splice(t){const n=new Sr(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const Mx=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Sr(n)};class cn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new cn(this.str)}splice(t){const n=new cn(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Dx=e=>new cn(e.readString()),Lx=[cx,dx,mx,vx,yx,xx,bx],Ax=0,zx=1,Nx=2,Ox=3,Ix=4,Fx=5,Px=6;class Tn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Tn(this.type._copy())}splice(t){throw rn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const Bx=e=>new Tn(Lx[e.readTypeRef()](e)),rl=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new We(xe(r,o+n),t,xe(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=xe(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i};class We extends Ku{constructor(t,n,r,o,i,s,l,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=l,this.redone=null,this.content=c,this.info=this.content.isCountable()?mf:0}set marker(t){(this.info&aa)>0!==t&&(this.info^=aa)}get marker(){return(this.info&aa)>0}get keep(){return(this.info&gf)>0}set keep(t){this.keep!==t&&(this.info^=gf)}get countable(){return(this.info&mf)>0}get deleted(){return(this.info&la)>0}set deleted(t){this.deleted!==t&&(this.info^=la)}markDeleted(){this.info|=la}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===eo&&this.id.client!==this.parent.client&&this.parent.clock>=Xe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=zf(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Qn(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Mt||this.right&&this.right.constructor===Mt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===We?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===We&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===eo){const r=ha(n,this.parent);r.constructor===Mt?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=zf(t,t.doc.store,xe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),es(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(es(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(ha(t.doc.store,o.origin)))i.has(ha(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Xg(t.doc.store,this),this.content.integrate(t,this),Of(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Mt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:xe(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&es(t.origin,this.lastId)&&this.right===t&&es(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Xs(t.deleteSet,this.id.client,this.id.clock,this.length),Of(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw ln();this.content.gc(t),n?Vw(t,this,new Mt(this.id,this.length)):this.content=new Ci(this.length)}write(t,n){const r=n>0?xe(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&Cl|(r===null?0:St)|(o===null?0:yn)|(i===null?0:vi);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const l=this.parent;if(l._item!==void 0){const c=l._item;if(c===null){const f=Ww(l);t.writeParentInfo(!0),t.writeString(f)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else l.constructor===String?(t.writeParentInfo(!0),t.writeString(l)):l.constructor===eo?(t.writeParentInfo(!1),t.writeLeftID(l)):ln();i!==null&&t.writeString(i)}this.content.write(t,n)}}const mm=(e,t)=>Ux[t&Cl](e),Ux=[()=>{ln()},Cx,jx,Sx,Dx,Ex,Tx,Bx,Mx,_x,()=>{ln()}],$x=10;class Dt extends Ku{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){ln()}write(t,n){t.writeInfo($x),fe(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vm="__ $YJS$ __";ym[vm]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");ym[vm]=!0;const Wx=1200,Hx=2500,ol=3e4,Tc=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=s=>{e.lastMessageReceived=Cn();const l=s.data,c=typeof l=="string"?JSON.parse(l):l;c&&c.type==="pong"&&(clearTimeout(r),r=setTimeout(i,ol/2)),e.emit("message",[c,e])};const o=s=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:s},e])):e.unsuccessfulReconnects++,setTimeout(Tc,ju(hv(e.unsuccessfulReconnects+1)*Wx,Hx),e)),clearTimeout(r)},i=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>o(null),t.onerror=s=>o(s),t.onopen=()=>{e.lastMessageReceived=Cn(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(i,ol/2)}}};class Vx extends fg{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&ol<Cn()-this.lastMessageReceived&&this.ws.close()},ol/2),Tc(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Tc(this)}}const wm=new Map;class Yx{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:Rg(n.newValue||"")}),Kv(this._onChange)}postMessage(t){xg.setItem(this.room,jg(aw(t)))}close(){Gv(this._onChange)}}const Kx=typeof BroadcastChannel>"u"?Yx:BroadcastChannel,Gu=e=>_t(wm,e,()=>{const t=Gn(),n=new Kx(e);return n.onmessage=r=>t.forEach(o=>o(r.data,"broadcastchannel")),{bc:n,subs:t}}),Gx=(e,t)=>(Gu(e).subs.add(t),t),Qx=(e,t)=>{const n=Gu(e),r=n.subs.delete(t);return r&&n.subs.size===0&&(n.bc.close(),wm.delete(e)),r},Xx=(e,t,n=null)=>{const r=Gu(e);r.bc.postMessage(t),r.subs.forEach(o=>o(t,n))},Jx=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}};function rs(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xm={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,r=Math.abs,o=Math.pow;return function(){function i(s,l,c){function f(p,g){if(!l[p]){if(!s[p]){var v=typeof rs=="function"&&rs;if(!g&&v)return v(p,!0);if(y)return y(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var z=l[p]={exports:{}};s[p][0].call(z.exports,function(k){var S=s[p][1][k];return f(S||k)},z,z.exports,i,s,l,c)}return l[p].exports}for(var y=typeof rs=="function"&&rs,h=0;h<c.length;h++)f(c[h]);return f}return i}()({1:[function(i,s,l){function c(w){var C=w.length;if(0<C%4)throw new Error("Invalid string. Length must be a multiple of 4");var j=w.indexOf("=");j===-1&&(j=C);var _=j===C?0:4-j%4;return[j,_]}function f(w,C,j){return 3*(C+j)/4-j}function y(w){var C,j,_=c(w),R=_[0],A=_[1],E=new z(f(w,R,A)),M=0,O=0<A?R-4:R;for(j=0;j<O;j+=4)C=b[w.charCodeAt(j)]<<18|b[w.charCodeAt(j+1)]<<12|b[w.charCodeAt(j+2)]<<6|b[w.charCodeAt(j+3)],E[M++]=255&C>>16,E[M++]=255&C>>8,E[M++]=255&C;return A===2&&(C=b[w.charCodeAt(j)]<<2|b[w.charCodeAt(j+1)]>>4,E[M++]=255&C),A===1&&(C=b[w.charCodeAt(j)]<<10|b[w.charCodeAt(j+1)]<<4|b[w.charCodeAt(j+2)]>>2,E[M++]=255&C>>8,E[M++]=255&C),E}function h(w){return v[63&w>>18]+v[63&w>>12]+v[63&w>>6]+v[63&w]}function p(w,C,j){for(var _,R=[],A=C;A<j;A+=3)_=(16711680&w[A]<<16)+(65280&w[A+1]<<8)+(255&w[A+2]),R.push(h(_));return R.join("")}function g(w){for(var C,j=w.length,_=j%3,R=[],A=16383,E=0,M=j-_;E<M;E+=A)R.push(p(w,E,E+A>M?M:E+A));return _===1?(C=w[j-1],R.push(v[C>>2]+v[63&C<<4]+"==")):_===2&&(C=(w[j-2]<<8)+w[j-1],R.push(v[C>>10]+v[63&C>>4]+v[63&C<<2]+"=")),R.join("")}l.byteLength=function(w){var C=c(w),j=C[0],_=C[1];return 3*(j+_)/4-_},l.toByteArray=y,l.fromByteArray=g;for(var v=[],b=[],z=typeof Uint8Array>"u"?Array:Uint8Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,u=k.length;S<u;++S)v[S]=k[S],b[k.charCodeAt(S)]=S;b[45]=62,b[95]=63},{}],2:[function(){},{}],3:[function(i,s,l){(function(){(function(){var c=String.fromCharCode,f=Math.min;function y(a){if(2147483647<a)throw new RangeError('The value "'+a+'" is invalid for option "size"');var m=new Uint8Array(a);return m.__proto__=h.prototype,m}function h(a,m,x){if(typeof a=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(a)}return p(a,m,x)}function p(a,m,x){if(typeof a=="string")return z(a,m);if(ArrayBuffer.isView(a))return k(a);if(a==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(N(a,ArrayBuffer)||a&&N(a.buffer,ArrayBuffer))return S(a,m,x);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=a.valueOf&&a.valueOf();if(L!=null&&L!==a)return h.from(L,m,x);var F=u(a);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return h.from(a[Symbol.toPrimitive]("string"),m,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function g(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(0>a)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function v(a,m,x){return g(a),0>=a||m===void 0?y(a):typeof x=="string"?y(a).fill(m,x):y(a).fill(m)}function b(a){return g(a),y(0>a?0:0|w(a))}function z(a,m){if((typeof m!="string"||m==="")&&(m="utf8"),!h.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var x=0|C(a,m),L=y(x),F=L.write(a,m);return F!==x&&(L=L.slice(0,F)),L}function k(a){for(var m=0>a.length?0:0|w(a.length),x=y(m),L=0;L<m;L+=1)x[L]=255&a[L];return x}function S(a,m,x){if(0>m||a.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<m+(x||0))throw new RangeError('"length" is outside of buffer bounds');var L;return L=m===void 0&&x===void 0?new Uint8Array(a):x===void 0?new Uint8Array(a,m):new Uint8Array(a,m,x),L.__proto__=h.prototype,L}function u(a){if(h.isBuffer(a)){var m=0|w(a.length),x=y(m);return x.length===0||a.copy(x,0,0,m),x}return a.length===void 0?a.type==="Buffer"&&Array.isArray(a.data)?k(a.data):void 0:typeof a.length!="number"||I(a.length)?y(0):k(a)}function w(a){if(a>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function C(a,m){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||N(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var x=a.length,L=2<arguments.length&&arguments[2]===!0;if(!L&&x===0)return 0;for(var F=!1;;)switch(m){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return Se(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return re(a).length;default:if(F)return L?-1:Se(a).length;m=(""+m).toLowerCase(),F=!0}}function j(a,m,x){var L=!1;if((m===void 0||0>m)&&(m=0),m>this.length||((x===void 0||x>this.length)&&(x=this.length),0>=x)||(x>>>=0,m>>>=0,x<=m))return"";for(a||(a="utf8");;)switch(a){case"hex":return ae(this,m,x);case"utf8":case"utf-8":return ve(this,m,x);case"ascii":return K(this,m,x);case"latin1":case"binary":return ue(this,m,x);case"base64":return de(this,m,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,m,x);default:if(L)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),L=!0}}function _(a,m,x){var L=a[m];a[m]=a[x],a[x]=L}function R(a,m,x,L,F){if(a.length===0)return-1;if(typeof x=="string"?(L=x,x=0):2147483647<x?x=2147483647:-2147483648>x&&(x=-2147483648),x=+x,I(x)&&(x=F?0:a.length-1),0>x&&(x=a.length+x),x>=a.length){if(F)return-1;x=a.length-1}else if(0>x)if(F)x=0;else return-1;if(typeof m=="string"&&(m=h.from(m,L)),h.isBuffer(m))return m.length===0?-1:A(a,m,x,L,F);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(a,m,x):Uint8Array.prototype.lastIndexOf.call(a,m,x):A(a,[m],x,L,F);throw new TypeError("val must be string, number or Buffer")}function A(a,m,x,L,F){function B(Le,Pt){return D===1?Le[Pt]:Le.readUInt16BE(Pt*D)}var D=1,Y=a.length,J=m.length;if(L!==void 0&&(L=(L+"").toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(2>a.length||2>m.length)return-1;D=2,Y/=2,J/=2,x/=2}var q;if(F){var oe=-1;for(q=x;q<Y;q++)if(B(a,q)!==B(m,oe===-1?0:q-oe))oe!==-1&&(q-=q-oe),oe=-1;else if(oe===-1&&(oe=q),q-oe+1===J)return oe*D}else for(x+J>Y&&(x=Y-J),q=x;0<=q;q--){for(var me=!0,Me=0;Me<J;Me++)if(B(a,q+Me)!==B(m,Me)){me=!1;break}if(me)return q}return-1}function E(a,m,x,L){x=+x||0;var F=a.length-x;L?(L=+L,L>F&&(L=F)):L=F;var B=m.length;L>B/2&&(L=B/2);for(var D,Y=0;Y<L;++Y){if(D=parseInt(m.substr(2*Y,2),16),I(D))return Y;a[x+Y]=D}return Y}function M(a,m,x,L){return le(Se(m,a.length-x),a,x,L)}function O(a,m,x,L){return le(he(m),a,x,L)}function W(a,m,x,L){return O(a,m,x,L)}function ee(a,m,x,L){return le(re(m),a,x,L)}function se(a,m,x,L){return le(P(m,a.length-x),a,x,L)}function de(a,m,x){return m===0&&x===a.length?$.fromByteArray(a):$.fromByteArray(a.slice(m,x))}function ve(a,m,x){x=f(a.length,x);for(var L=[],F=m;F<x;){var B=a[F],D=null,Y=239<B?4:223<B?3:191<B?2:1;if(F+Y<=x){var J,q,oe,me;Y===1?128>B&&(D=B):Y===2?(J=a[F+1],(192&J)==128&&(me=(31&B)<<6|63&J,127<me&&(D=me))):Y===3?(J=a[F+1],q=a[F+2],(192&J)==128&&(192&q)==128&&(me=(15&B)<<12|(63&J)<<6|63&q,2047<me&&(55296>me||57343<me)&&(D=me))):Y===4&&(J=a[F+1],q=a[F+2],oe=a[F+3],(192&J)==128&&(192&q)==128&&(192&oe)==128&&(me=(15&B)<<18|(63&J)<<12|(63&q)<<6|63&oe,65535<me&&1114112>me&&(D=me)))}D===null?(D=65533,Y=1):65535<D&&(D-=65536,L.push(55296|1023&D>>>10),D=56320|1023&D),L.push(D),F+=Y}return U(L)}function U(a){var m=a.length;if(m<=4096)return c.apply(String,a);for(var x="",L=0;L<m;)x+=c.apply(String,a.slice(L,L+=4096));return x}function K(a,m,x){var L="";x=f(a.length,x);for(var F=m;F<x;++F)L+=c(127&a[F]);return L}function ue(a,m,x){var L="";x=f(a.length,x);for(var F=m;F<x;++F)L+=c(a[F]);return L}function ae(a,m,x){var L=a.length;(!m||0>m)&&(m=0),(!x||0>x||x>L)&&(x=L);for(var F="",B=m;B<x;++B)F+=be(a[B]);return F}function G(a,m,x){for(var L=a.slice(m,x),F="",B=0;B<L.length;B+=2)F+=c(L[B]+256*L[B+1]);return F}function Z(a,m,x){if(a%1!=0||0>a)throw new RangeError("offset is not uint");if(a+m>x)throw new RangeError("Trying to access beyond buffer length")}function ne(a,m,x,L,F,B){if(!h.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>F||m<B)throw new RangeError('"value" argument is out of bounds');if(x+L>a.length)throw new RangeError("Index out of range")}function te(a,m,x,L){if(x+L>a.length)throw new RangeError("Index out of range");if(0>x)throw new RangeError("Index out of range")}function V(a,m,x,L,F){return m=+m,x>>>=0,F||te(a,m,x,4),X.write(a,m,x,L,23,4),x+4}function ce(a,m,x,L,F){return m=+m,x>>>=0,F||te(a,m,x,8),X.write(a,m,x,L,52,8),x+8}function pe(a){if(a=a.split("=")[0],a=a.trim().replace(T,""),2>a.length)return"";for(;a.length%4!=0;)a+="=";return a}function be(a){return 16>a?"0"+a.toString(16):a.toString(16)}function Se(a,m){m=m||1/0;for(var x,L=a.length,F=null,B=[],D=0;D<L;++D){if(x=a.charCodeAt(D),55295<x&&57344>x){if(!F){if(56319<x){-1<(m-=3)&&B.push(239,191,189);continue}else if(D+1===L){-1<(m-=3)&&B.push(239,191,189);continue}F=x;continue}if(56320>x){-1<(m-=3)&&B.push(239,191,189),F=x;continue}x=(F-55296<<10|x-56320)+65536}else F&&-1<(m-=3)&&B.push(239,191,189);if(F=null,128>x){if(0>(m-=1))break;B.push(x)}else if(2048>x){if(0>(m-=2))break;B.push(192|x>>6,128|63&x)}else if(65536>x){if(0>(m-=3))break;B.push(224|x>>12,128|63&x>>6,128|63&x)}else if(1114112>x){if(0>(m-=4))break;B.push(240|x>>18,128|63&x>>12,128|63&x>>6,128|63&x)}else throw new Error("Invalid code point")}return B}function he(a){for(var m=[],x=0;x<a.length;++x)m.push(255&a.charCodeAt(x));return m}function P(a,m){for(var x,L,F,B=[],D=0;D<a.length&&!(0>(m-=2));++D)x=a.charCodeAt(D),L=x>>8,F=x%256,B.push(F),B.push(L);return B}function re(a){return $.toByteArray(pe(a))}function le(a,m,x,L){for(var F=0;F<L&&!(F+x>=m.length||F>=a.length);++F)m[F+x]=a[F];return F}function N(a,m){return a instanceof m||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===m.name}function I(a){return a!==a}var $=i("base64-js"),X=i("ieee754");l.Buffer=h,l.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},l.INSPECT_MAX_BYTES=50,l.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},a.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){return h.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){return h.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(a,m,x){return p(a,m,x)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(a,m,x){return v(a,m,x)},h.allocUnsafe=function(a){return b(a)},h.allocUnsafeSlow=function(a){return b(a)},h.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==h.prototype},h.compare=function(a,m){if(N(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),N(m,Uint8Array)&&(m=h.from(m,m.offset,m.byteLength)),!h.isBuffer(a)||!h.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===m)return 0;for(var x=a.length,L=m.length,F=0,B=f(x,L);F<B;++F)if(a[F]!==m[F]){x=a[F],L=m[F];break}return x<L?-1:L<x?1:0},h.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,m){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return h.alloc(0);var x;if(m===void 0)for(m=0,x=0;x<a.length;++x)m+=a[x].length;var L=h.allocUnsafe(m),F=0;for(x=0;x<a.length;++x){var B=a[x];if(N(B,Uint8Array)&&(B=h.from(B)),!h.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(L,F),F+=B.length}return L},h.byteLength=C,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<a;m+=2)_(this,m,m+1);return this},h.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<a;m+=4)_(this,m,m+3),_(this,m+1,m+2);return this},h.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<a;m+=8)_(this,m,m+7),_(this,m+1,m+6),_(this,m+2,m+5),_(this,m+3,m+4);return this},h.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?ve(this,0,a):j.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||h.compare(this,a)===0},h.prototype.inspect=function(){var a="",m=l.INSPECT_MAX_BYTES;return a=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(a+=" ... "),"<Buffer "+a+">"},h.prototype.compare=function(a,m,x,L,F){if(N(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(m===void 0&&(m=0),x===void 0&&(x=a?a.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),0>m||x>a.length||0>L||F>this.length)throw new RangeError("out of range index");if(L>=F&&m>=x)return 0;if(L>=F)return-1;if(m>=x)return 1;if(m>>>=0,x>>>=0,L>>>=0,F>>>=0,this===a)return 0;for(var B=F-L,D=x-m,Y=f(B,D),J=this.slice(L,F),q=a.slice(m,x),oe=0;oe<Y;++oe)if(J[oe]!==q[oe]){B=J[oe],D=q[oe];break}return B<D?-1:D<B?1:0},h.prototype.includes=function(a,m,x){return this.indexOf(a,m,x)!==-1},h.prototype.indexOf=function(a,m,x){return R(this,a,m,x,!0)},h.prototype.lastIndexOf=function(a,m,x){return R(this,a,m,x,!1)},h.prototype.write=function(a,m,x,L){if(m===void 0)L="utf8",x=this.length,m=0;else if(x===void 0&&typeof m=="string")L=m,x=this.length,m=0;else if(isFinite(m))m>>>=0,isFinite(x)?(x>>>=0,L===void 0&&(L="utf8")):(L=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-m;if((x===void 0||x>F)&&(x=F),0<a.length&&(0>x||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var B=!1;;)switch(L){case"hex":return E(this,a,m,x);case"utf8":case"utf-8":return M(this,a,m,x);case"ascii":return O(this,a,m,x);case"latin1":case"binary":return W(this,a,m,x);case"base64":return ee(this,a,m,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,a,m,x);default:if(B)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),B=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,m){var x=this.length;a=~~a,m=m===void 0?x:~~m,0>a?(a+=x,0>a&&(a=0)):a>x&&(a=x),0>m?(m+=x,0>m&&(m=0)):m>x&&(m=x),m<a&&(m=a);var L=this.subarray(a,m);return L.__proto__=h.prototype,L},h.prototype.readUIntLE=function(a,m,x){a>>>=0,m>>>=0,x||Z(a,m,this.length);for(var L=this[a],F=1,B=0;++B<m&&(F*=256);)L+=this[a+B]*F;return L},h.prototype.readUIntBE=function(a,m,x){a>>>=0,m>>>=0,x||Z(a,m,this.length);for(var L=this[a+--m],F=1;0<m&&(F*=256);)L+=this[a+--m]*F;return L},h.prototype.readUInt8=function(a,m){return a>>>=0,m||Z(a,1,this.length),this[a]},h.prototype.readUInt16LE=function(a,m){return a>>>=0,m||Z(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUInt16BE=function(a,m){return a>>>=0,m||Z(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUInt32LE=function(a,m){return a>>>=0,m||Z(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},h.prototype.readUInt32BE=function(a,m){return a>>>=0,m||Z(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readIntLE=function(a,m,x){a>>>=0,m>>>=0,x||Z(a,m,this.length);for(var L=this[a],F=1,B=0;++B<m&&(F*=256);)L+=this[a+B]*F;return F*=128,L>=F&&(L-=o(2,8*m)),L},h.prototype.readIntBE=function(a,m,x){a>>>=0,m>>>=0,x||Z(a,m,this.length);for(var L=m,F=1,B=this[a+--L];0<L&&(F*=256);)B+=this[a+--L]*F;return F*=128,B>=F&&(B-=o(2,8*m)),B},h.prototype.readInt8=function(a,m){return a>>>=0,m||Z(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},h.prototype.readInt16LE=function(a,m){a>>>=0,m||Z(a,2,this.length);var x=this[a]|this[a+1]<<8;return 32768&x?4294901760|x:x},h.prototype.readInt16BE=function(a,m){a>>>=0,m||Z(a,2,this.length);var x=this[a+1]|this[a]<<8;return 32768&x?4294901760|x:x},h.prototype.readInt32LE=function(a,m){return a>>>=0,m||Z(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,m){return a>>>=0,m||Z(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readFloatLE=function(a,m){return a>>>=0,m||Z(a,4,this.length),X.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,m){return a>>>=0,m||Z(a,4,this.length),X.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,m){return a>>>=0,m||Z(a,8,this.length),X.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,m){return a>>>=0,m||Z(a,8,this.length),X.read(this,a,!1,52,8)},h.prototype.writeUIntLE=function(a,m,x,L){if(a=+a,m>>>=0,x>>>=0,!L){var F=o(2,8*x)-1;ne(this,a,m,x,F,0)}var B=1,D=0;for(this[m]=255&a;++D<x&&(B*=256);)this[m+D]=255&a/B;return m+x},h.prototype.writeUIntBE=function(a,m,x,L){if(a=+a,m>>>=0,x>>>=0,!L){var F=o(2,8*x)-1;ne(this,a,m,x,F,0)}var B=x-1,D=1;for(this[m+B]=255&a;0<=--B&&(D*=256);)this[m+B]=255&a/D;return m+x},h.prototype.writeUInt8=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,1,255,0),this[m]=255&a,m+1},h.prototype.writeUInt16LE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,2,65535,0),this[m]=255&a,this[m+1]=a>>>8,m+2},h.prototype.writeUInt16BE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,2,65535,0),this[m]=a>>>8,this[m+1]=255&a,m+2},h.prototype.writeUInt32LE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,4,4294967295,0),this[m+3]=a>>>24,this[m+2]=a>>>16,this[m+1]=a>>>8,this[m]=255&a,m+4},h.prototype.writeUInt32BE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,4,4294967295,0),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=255&a,m+4},h.prototype.writeIntLE=function(a,m,x,L){if(a=+a,m>>>=0,!L){var F=o(2,8*x-1);ne(this,a,m,x,F-1,-F)}var B=0,D=1,Y=0;for(this[m]=255&a;++B<x&&(D*=256);)0>a&&Y===0&&this[m+B-1]!==0&&(Y=1),this[m+B]=255&(a/D>>0)-Y;return m+x},h.prototype.writeIntBE=function(a,m,x,L){if(a=+a,m>>>=0,!L){var F=o(2,8*x-1);ne(this,a,m,x,F-1,-F)}var B=x-1,D=1,Y=0;for(this[m+B]=255&a;0<=--B&&(D*=256);)0>a&&Y===0&&this[m+B+1]!==0&&(Y=1),this[m+B]=255&(a/D>>0)-Y;return m+x},h.prototype.writeInt8=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,1,127,-128),0>a&&(a=255+a+1),this[m]=255&a,m+1},h.prototype.writeInt16LE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,2,32767,-32768),this[m]=255&a,this[m+1]=a>>>8,m+2},h.prototype.writeInt16BE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,2,32767,-32768),this[m]=a>>>8,this[m+1]=255&a,m+2},h.prototype.writeInt32LE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,4,2147483647,-2147483648),this[m]=255&a,this[m+1]=a>>>8,this[m+2]=a>>>16,this[m+3]=a>>>24,m+4},h.prototype.writeInt32BE=function(a,m,x){return a=+a,m>>>=0,x||ne(this,a,m,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=255&a,m+4},h.prototype.writeFloatLE=function(a,m,x){return V(this,a,m,!0,x)},h.prototype.writeFloatBE=function(a,m,x){return V(this,a,m,!1,x)},h.prototype.writeDoubleLE=function(a,m,x){return ce(this,a,m,!0,x)},h.prototype.writeDoubleBE=function(a,m,x){return ce(this,a,m,!1,x)},h.prototype.copy=function(a,m,x,L){if(!h.isBuffer(a))throw new TypeError("argument should be a Buffer");if(x||(x=0),L||L===0||(L=this.length),m>=a.length&&(m=a.length),m||(m=0),0<L&&L<x&&(L=x),L===x||a.length===0||this.length===0)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>x||x>=this.length)throw new RangeError("Index out of range");if(0>L)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),a.length-m<L-x&&(L=a.length-m+x);var F=L-x;if(this===a&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,x,L);else if(this===a&&x<m&&m<L)for(var B=F-1;0<=B;--B)a[B+m]=this[B+x];else Uint8Array.prototype.set.call(a,this.subarray(x,L),m);return F},h.prototype.fill=function(a,m,x,L){if(typeof a=="string"){if(typeof m=="string"?(L=m,m=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!h.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(a.length===1){var F=a.charCodeAt(0);(L==="utf8"&&128>F||L==="latin1")&&(a=F)}}else typeof a=="number"&&(a&=255);if(0>m||this.length<m||this.length<x)throw new RangeError("Out of range index");if(x<=m)return this;m>>>=0,x=x===void 0?this.length:x>>>0,a||(a=0);var B;if(typeof a=="number")for(B=m;B<x;++B)this[B]=a;else{var D=h.isBuffer(a)?a:h.from(a,L),Y=D.length;if(Y===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(B=0;B<x-m;++B)this[B+m]=D[B%Y]}return this};var T=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(i,s,l){(function(c){(function(){function f(){let h;try{h=l.storage.getItem("debug")}catch{}return!h&&typeof c<"u"&&"env"in c&&(h=c.env.DEBUG),h}l.formatArgs=function(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;h.splice(1,0,p,"color: inherit");let g=0,v=0;h[0].replace(/%[a-zA-Z%]/g,b=>{b==="%%"||(g++,b==="%c"&&(v=g))}),h.splice(v,0,p)},l.save=function(h){try{h?l.storage.setItem("debug",h):l.storage.removeItem("debug")}catch{}},l.load=f,l.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),s.exports=i("./common")(l);const{formatters:y}=s.exports;y.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}).call(this)}).call(this,i("_process"))},{"./common":5,_process:12}],5:[function(i,s){s.exports=function(l){function c(h){function p(...b){if(!p.enabled)return;const z=p,k=+new Date,S=k-(g||k);z.diff=S,z.prev=g,z.curr=k,g=k,b[0]=c.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let u=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(C,j)=>{if(C==="%%")return"%";u++;const _=c.formatters[j];if(typeof _=="function"){const R=b[u];C=_.call(z,R),b.splice(u,1),u--}return C}),c.formatArgs.call(z,b),(z.log||c.log).apply(z,b)}let g,v=null;return p.namespace=h,p.useColors=c.useColors(),p.color=c.selectColor(h),p.extend=f,p.destroy=c.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>v===null?c.enabled(h):v,set:b=>{v=b}}),typeof c.init=="function"&&c.init(p),p}function f(h,p){const g=c(this.namespace+(typeof p>"u"?":":p)+h);return g.log=this.log,g}function y(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(h){return h instanceof Error?h.stack||h.message:h},c.disable=function(){const h=[...c.names.map(y),...c.skips.map(y).map(p=>"-"+p)].join(",");return c.enable(""),h},c.enable=function(h){c.save(h),c.names=[],c.skips=[];let p;const g=(typeof h=="string"?h:"").split(/[\s,]+/),v=g.length;for(p=0;p<v;p++)g[p]&&(h=g[p].replace(/\*/g,".*?"),h[0]==="-"?c.skips.push(new RegExp("^"+h.substr(1)+"$")):c.names.push(new RegExp("^"+h+"$")))},c.enabled=function(h){if(h[h.length-1]==="*")return!0;let p,g;for(p=0,g=c.skips.length;p<g;p++)if(c.skips[p].test(h))return!1;for(p=0,g=c.names.length;p<g;p++)if(c.names[p].test(h))return!0;return!1},c.humanize=i("ms"),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(l).forEach(h=>{c[h]=l[h]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(h){let p=0;for(let g=0;g<h.length;g++)p=(p<<5)-p+h.charCodeAt(g),p|=0;return c.colors[r(p)%c.colors.length]},c.enable(c.load()),c}},{ms:11}],6:[function(i,s){function l(c,f){for(const y in f)Object.defineProperty(c,y,{value:f[y],enumerable:!0,configurable:!0});return c}s.exports=function(c,f,y){if(!c||typeof c=="string")throw new TypeError("Please pass an Error to err-code");y||(y={}),typeof f=="object"&&(y=f,f=""),f&&(y.code=f);try{return l(c,y)}catch{y.message=c.message,y.stack=c.stack;const p=function(){};return p.prototype=Object.create(Object.getPrototypeOf(c)),l(new p,y)}}},{}],7:[function(i,s){function l(E){console&&console.warn&&console.warn(E)}function c(){c.init.call(this)}function f(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function y(E){return E._maxListeners===void 0?c.defaultMaxListeners:E._maxListeners}function h(E,M,O,W){var ee,se,de;if(f(O),se=E._events,se===void 0?(se=E._events=Object.create(null),E._eventsCount=0):(se.newListener!==void 0&&(E.emit("newListener",M,O.listener?O.listener:O),se=E._events),de=se[M]),de===void 0)de=se[M]=O,++E._eventsCount;else if(typeof de=="function"?de=se[M]=W?[O,de]:[de,O]:W?de.unshift(O):de.push(O),ee=y(E),0<ee&&de.length>ee&&!de.warned){de.warned=!0;var ve=new Error("Possible EventEmitter memory leak detected. "+de.length+" "+(M+" listeners added. Use emitter.setMaxListeners() to increase limit"));ve.name="MaxListenersExceededWarning",ve.emitter=E,ve.type=M,ve.count=de.length,l(ve)}return E}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(E,M,O){var W={fired:!1,wrapFn:void 0,target:E,type:M,listener:O},ee=p.bind(W);return ee.listener=O,W.wrapFn=ee,ee}function v(E,M,O){var W=E._events;if(W===void 0)return[];var ee=W[M];return ee===void 0?[]:typeof ee=="function"?O?[ee.listener||ee]:[ee]:O?S(ee):z(ee,ee.length)}function b(E){var M=this._events;if(M!==void 0){var O=M[E];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}function z(E,M){for(var O=Array(M),W=0;W<M;++W)O[W]=E[W];return O}function k(E,M){for(;M+1<E.length;M++)E[M]=E[M+1];E.pop()}function S(E){for(var M=Array(E.length),O=0;O<M.length;++O)M[O]=E[O].listener||E[O];return M}function u(E,M,O){typeof E.on=="function"&&w(E,"error",M,O)}function w(E,M,O,W){if(typeof E.on=="function")W.once?E.once(M,O):E.on(M,O);else if(typeof E.addEventListener=="function")E.addEventListener(M,function ee(se){W.once&&E.removeEventListener(M,ee),O(se)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}var C,j=typeof Reflect=="object"?Reflect:null,_=j&&typeof j.apply=="function"?j.apply:function(E,M,O){return Function.prototype.apply.call(E,M,O)};C=j&&typeof j.ownKeys=="function"?j.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var R=Number.isNaN||function(E){return E!==E};s.exports=c,s.exports.once=function(E,M){return new Promise(function(O,W){function ee(de){E.removeListener(M,se),W(de)}function se(){typeof E.removeListener=="function"&&E.removeListener("error",ee),O([].slice.call(arguments))}w(E,M,se,{once:!0}),M!=="error"&&u(E,ee,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var A=10;Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(E){if(typeof E!="number"||0>E||R(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");A=E}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(E){if(typeof E!="number"||0>E||R(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},c.prototype.getMaxListeners=function(){return y(this)},c.prototype.emit=function(E){for(var M=[],O=1;O<arguments.length;O++)M.push(arguments[O]);var W=E==="error",ee=this._events;if(ee!==void 0)W=W&&ee.error===void 0;else if(!W)return!1;if(W){var se;if(0<M.length&&(se=M[0]),se instanceof Error)throw se;var de=new Error("Unhandled error."+(se?" ("+se.message+")":""));throw de.context=se,de}var ve=ee[E];if(ve===void 0)return!1;if(typeof ve=="function")_(ve,this,M);else for(var U=ve.length,K=z(ve,U),O=0;O<U;++O)_(K[O],this,M);return!0},c.prototype.addListener=function(E,M){return h(this,E,M,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(E,M){return h(this,E,M,!0)},c.prototype.once=function(E,M){return f(M),this.on(E,g(this,E,M)),this},c.prototype.prependOnceListener=function(E,M){return f(M),this.prependListener(E,g(this,E,M)),this},c.prototype.removeListener=function(E,M){var O,W,ee,se,de;if(f(M),W=this._events,W===void 0)return this;if(O=W[E],O===void 0)return this;if(O===M||O.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete W[E],W.removeListener&&this.emit("removeListener",E,O.listener||M));else if(typeof O!="function"){for(ee=-1,se=O.length-1;0<=se;se--)if(O[se]===M||O[se].listener===M){de=O[se].listener,ee=se;break}if(0>ee)return this;ee===0?O.shift():k(O,ee),O.length===1&&(W[E]=O[0]),W.removeListener!==void 0&&this.emit("removeListener",E,de||M)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(E){var M,O,W;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[E]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete O[E]),this;if(arguments.length===0){var ee,se=Object.keys(O);for(W=0;W<se.length;++W)ee=se[W],ee!=="removeListener"&&this.removeAllListeners(ee);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=O[E],typeof M=="function")this.removeListener(E,M);else if(M!==void 0)for(W=M.length-1;0<=W;W--)this.removeListener(E,M[W]);return this},c.prototype.listeners=function(E){return v(this,E,!0)},c.prototype.rawListeners=function(E){return v(this,E,!1)},c.listenerCount=function(E,M){return typeof E.listenerCount=="function"?E.listenerCount(M):b.call(E,M)},c.prototype.listenerCount=b,c.prototype.eventNames=function(){return 0<this._eventsCount?C(this._events):[]}},{}],8:[function(i,s){s.exports=function(){if(typeof globalThis>"u")return null;var l={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return l.RTCPeerConnection?l:null}},{}],9:[function(i,s,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(c,f,y,h,p){var g,v,b=8*p-h-1,z=(1<<b)-1,k=z>>1,S=-7,u=y?p-1:0,w=y?-1:1,C=c[f+u];for(u+=w,g=C&(1<<-S)-1,C>>=-S,S+=b;0<S;g=256*g+c[f+u],u+=w,S-=8);for(v=g&(1<<-S)-1,g>>=-S,S+=h;0<S;v=256*v+c[f+u],u+=w,S-=8);if(g===0)g=1-k;else{if(g===z)return v?NaN:(C?-1:1)*(1/0);v+=o(2,h),g-=k}return(C?-1:1)*v*o(2,g-h)},l.write=function(c,f,y,h,p,g){var v,b,z,k=Math.LN2,S=Math.log,u=8*g-p-1,w=(1<<u)-1,C=w>>1,j=p===23?o(2,-24)-o(2,-77):0,_=h?0:g-1,R=h?1:-1,A=0>f||f===0&&0>1/f?1:0;for(f=r(f),isNaN(f)||f===1/0?(b=isNaN(f)?1:0,v=w):(v=n(S(f)/k),1>f*(z=o(2,-v))&&(v--,z*=2),f+=1<=v+C?j/z:j*o(2,1-C),2<=f*z&&(v++,z/=2),v+C>=w?(b=0,v=w):1<=v+C?(b=(f*z-1)*o(2,p),v+=C):(b=f*o(2,C-1)*o(2,p),v=0));8<=p;c[y+_]=255&b,_+=R,b/=256,p-=8);for(v=v<<p|b,u+=p;0<u;c[y+_]=255&v,_+=R,v/=256,u-=8);c[y+_-R]|=128*A}},{}],10:[function(i,s){s.exports=typeof Object.create=="function"?function(l,c){c&&(l.super_=c,l.prototype=Object.create(c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,c){if(c){l.super_=c;var f=function(){};f.prototype=c.prototype,l.prototype=new f,l.prototype.constructor=l}}},{}],11:[function(i,s){var l=Math.round;function c(p){if(p+="",!(100<p.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var v=parseFloat(g[1]),b=(g[2]||"ms").toLowerCase();return b==="years"||b==="year"||b==="yrs"||b==="yr"||b==="y"?315576e5*v:b==="weeks"||b==="week"||b==="w"?6048e5*v:b==="days"||b==="day"||b==="d"?864e5*v:b==="hours"||b==="hour"||b==="hrs"||b==="hr"||b==="h"?36e5*v:b==="minutes"||b==="minute"||b==="mins"||b==="min"||b==="m"?6e4*v:b==="seconds"||b==="second"||b==="secs"||b==="sec"||b==="s"?1e3*v:b==="milliseconds"||b==="millisecond"||b==="msecs"||b==="msec"||b==="ms"?v:void 0}}}function f(p){var g=r(p);return 864e5<=g?l(p/864e5)+"d":36e5<=g?l(p/36e5)+"h":6e4<=g?l(p/6e4)+"m":1e3<=g?l(p/1e3)+"s":p+"ms"}function y(p){var g=r(p);return 864e5<=g?h(p,g,864e5,"day"):36e5<=g?h(p,g,36e5,"hour"):6e4<=g?h(p,g,6e4,"minute"):1e3<=g?h(p,g,1e3,"second"):p+" ms"}function h(p,g,v,b){return l(p/v)+" "+b+(g>=1.5*v?"s":"")}s.exports=function(p,g){g=g||{};var v=typeof p;if(v=="string"&&0<p.length)return c(p);if(v==="number"&&isFinite(p))return g.long?y(p):f(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},{}],12:[function(i,s){function l(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function f(j){if(b===setTimeout)return setTimeout(j,0);if((b===l||!b)&&setTimeout)return b=setTimeout,setTimeout(j,0);try{return b(j,0)}catch{try{return b.call(null,j,0)}catch{return b.call(this,j,0)}}}function y(j){if(z===clearTimeout)return clearTimeout(j);if((z===c||!z)&&clearTimeout)return z=clearTimeout,clearTimeout(j);try{return z(j)}catch{try{return z.call(null,j)}catch{return z.call(this,j)}}}function h(){w&&S&&(w=!1,S.length?u=S.concat(u):C=-1,u.length&&p())}function p(){if(!w){var j=f(h);w=!0;for(var _=u.length;_;){for(S=u,u=[];++C<_;)S&&S[C].run();C=-1,_=u.length}S=null,w=!1,y(j)}}function g(j,_){this.fun=j,this.array=_}function v(){}var b,z,k=s.exports={};(function(){try{b=typeof setTimeout=="function"?setTimeout:l}catch{b=l}try{z=typeof clearTimeout=="function"?clearTimeout:c}catch{z=c}})();var S,u=[],w=!1,C=-1;k.nextTick=function(j){var _=Array(arguments.length-1);if(1<arguments.length)for(var R=1;R<arguments.length;R++)_[R-1]=arguments[R];u.push(new g(j,_)),u.length!==1||w||f(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},k.title="browser",k.browser=!0,k.env={},k.argv=[],k.version="",k.versions={},k.on=v,k.addListener=v,k.once=v,k.off=v,k.removeListener=v,k.removeAllListeners=v,k.emit=v,k.prependListener=v,k.prependOnceListener=v,k.listeners=function(){return[]},k.binding=function(){throw new Error("process.binding is not supported")},k.cwd=function(){return"/"},k.chdir=function(){throw new Error("process.chdir is not supported")},k.umask=function(){return 0}},{}],13:[function(i,s){(function(l){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let c;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?l:window):f=>(c||(c=Promise.resolve())).then(f).catch(y=>setTimeout(()=>{throw y},0))}).call(this)}).call(this,typeof Gt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Gt)},{}],14:[function(i,s){(function(l,c){(function(){var f=i("safe-buffer").Buffer,y=c.crypto||c.msCrypto;s.exports=y&&y.getRandomValues?function(h,p){if(h>4294967295)throw new RangeError("requested too many random bytes");var g=f.allocUnsafe(h);if(0<h)if(65536<h)for(var v=0;v<h;v+=65536)y.getRandomValues(g.slice(v,v+65536));else y.getRandomValues(g);return typeof p=="function"?l.nextTick(function(){p(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof Gt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Gt)},{_process:12,"safe-buffer":30}],15:[function(i,s){function l(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}function c(v,b,z){function k(u,w,C){return typeof b=="string"?b:b(u,w,C)}z||(z=Error);var S=function(u){function w(C,j,_){return u.call(this,k(C,j,_))||this}return l(w,u),w}(z);S.prototype.name=z.name,S.prototype.code=v,g[v]=S}function f(v,b){if(Array.isArray(v)){var z=v.length;return v=v.map(function(k){return k+""}),2<z?"one of ".concat(b," ").concat(v.slice(0,z-1).join(", "),", or ")+v[z-1]:z===2?"one of ".concat(b," ").concat(v[0]," or ").concat(v[1]):"of ".concat(b," ").concat(v[0])}return"of ".concat(b," ").concat(v+"")}function y(v,b,z){return v.substr(0,b.length)===b}function h(v,b,z){return(z===void 0||z>v.length)&&(z=v.length),v.substring(z-b.length,z)===b}function p(v,b,z){return typeof z!="number"&&(z=0),!(z+b.length>v.length)&&v.indexOf(b,z)!==-1}var g={};c("ERR_INVALID_OPT_VALUE",function(v,b){return'The value "'+b+'" is invalid for option "'+v+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(v,b,z){var k;typeof b=="string"&&y(b,"not ")?(k="must not be",b=b.replace(/^not /,"")):k="must be";var S;if(h(v," argument"))S="The ".concat(v," ").concat(k," ").concat(f(b,"type"));else{var u=p(v,".")?"property":"argument";S='The "'.concat(v,'" ').concat(u," ").concat(k," ").concat(f(b,"type"))}return S+=". Received type ".concat(typeof z),S},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=g},{}],16:[function(i,s){(function(l){(function(){function c(k){return this instanceof c?(p.call(this,k),g.call(this,k),this.allowHalfOpen=!0,void(k&&(k.readable===!1&&(this.readable=!1),k.writable===!1&&(this.writable=!1),k.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",f))))):new c(k)}function f(){this._writableState.ended||l.nextTick(y,this)}function y(k){k.end()}var h=Object.keys||function(k){var S=[];for(var u in k)S.push(u);return S};s.exports=c;var p=i("./_stream_readable"),g=i("./_stream_writable");i("inherits")(c,p);for(var v,b=h(g.prototype),z=0;z<b.length;z++)v=b[z],c.prototype[v]||(c.prototype[v]=g.prototype[v]);Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(k){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=k,this._writableState.destroyed=k)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(i,s){function l(f){return this instanceof l?void c.call(this,f):new l(f)}s.exports=l;var c=i("./_stream_transform");i("inherits")(l,c),l.prototype._transform=function(f,y,h){h(null,f)}},{"./_stream_transform":19,inherits:10}],18:[function(i,s){(function(l,c){(function(){function f(T){return G.from(T)}function y(T){return G.isBuffer(T)||T instanceof Z}function h(T,a,m){return typeof T.prependListener=="function"?T.prependListener(a,m):void(T._events&&T._events[a]?Array.isArray(T._events[a])?T._events[a].unshift(m):T._events[a]=[m,T._events[a]]:T.on(a,m))}function p(T,a,m){U=U||i("./_stream_duplex"),T=T||{},typeof m!="boolean"&&(m=a instanceof U),this.objectMode=!!T.objectMode,m&&(this.objectMode=this.objectMode||!!T.readableObjectMode),this.highWaterMark=he(this,T,"readableHighWaterMark",m),this.buffer=new pe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(!te&&(te=i("string_decoder/").StringDecoder),this.decoder=new te(T.encoding),this.encoding=T.encoding)}function g(T){if(U=U||i("./_stream_duplex"),!(this instanceof g))return new g(T);var a=this instanceof U;this._readableState=new p(T,this,a),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),ae.call(this)}function v(T,a,m,x,L){K("readableAddChunk",a);var F=T._readableState;if(a===null)F.reading=!1,u(T,F);else{var B;if(L||(B=z(F,a)),B)$(T,B);else if(!(F.objectMode||a&&0<a.length))x||(F.reading=!1,j(T,F));else if(typeof a=="string"||F.objectMode||Object.getPrototypeOf(a)===G.prototype||(a=f(a)),x)F.endEmitted?$(T,new I):b(T,F,a,!0);else if(F.ended)$(T,new le);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!m?(a=F.decoder.write(a),F.objectMode||a.length!==0?b(T,F,a,!1):j(T,F)):b(T,F,a,!1)}}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function b(T,a,m,x){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,T.emit("data",m)):(a.length+=a.objectMode?1:m.length,x?a.buffer.unshift(m):a.buffer.push(m),a.needReadable&&w(T)),j(T,a)}function z(T,a){var m;return y(a)||typeof a=="string"||a===void 0||T.objectMode||(m=new re("chunk",["string","Buffer","Uint8Array"],a)),m}function k(T){return 1073741824<=T?T=1073741824:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function S(T,a){return 0>=T||a.length===0&&a.ended?0:a.objectMode?1:T===T?(T>a.highWaterMark&&(a.highWaterMark=k(T)),T<=a.length?T:a.ended?a.length:(a.needReadable=!0,0)):a.flowing&&a.length?a.buffer.head.data.length:a.length}function u(T,a){if(K("onEofChunk"),!a.ended){if(a.decoder){var m=a.decoder.end();m&&m.length&&(a.buffer.push(m),a.length+=a.objectMode?1:m.length)}a.ended=!0,a.sync?w(T):(a.needReadable=!1,!a.emittedReadable&&(a.emittedReadable=!0,C(T)))}}function w(T){var a=T._readableState;K("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(K("emitReadable",a.flowing),a.emittedReadable=!0,l.nextTick(C,T))}function C(T){var a=T._readableState;K("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(T.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,W(T)}function j(T,a){a.readingMore||(a.readingMore=!0,l.nextTick(_,T,a))}function _(T,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var m=a.length;if(K("maybeReadMore read 0"),T.read(0),m===a.length)break}a.readingMore=!1}function R(T){return function(){var a=T._readableState;K("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,a.awaitDrain===0&&ue(T,"data")&&(a.flowing=!0,W(T))}}function A(T){var a=T._readableState;a.readableListening=0<T.listenerCount("readable"),a.resumeScheduled&&!a.paused?a.flowing=!0:0<T.listenerCount("data")&&T.resume()}function E(T){K("readable nexttick read 0"),T.read(0)}function M(T,a){a.resumeScheduled||(a.resumeScheduled=!0,l.nextTick(O,T,a))}function O(T,a){K("resume",a.reading),a.reading||T.read(0),a.resumeScheduled=!1,T.emit("resume"),W(T),a.flowing&&!a.reading&&T.read(0)}function W(T){var a=T._readableState;for(K("flow",a.flowing);a.flowing&&T.read()!==null;);}function ee(T,a){if(a.length===0)return null;var m;return a.objectMode?m=a.buffer.shift():!T||T>=a.length?(m=a.decoder?a.buffer.join(""):a.buffer.length===1?a.buffer.first():a.buffer.concat(a.length),a.buffer.clear()):m=a.buffer.consume(T,a.decoder),m}function se(T){var a=T._readableState;K("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,l.nextTick(de,a,T))}function de(T,a){if(K("endReadableNT",T.endEmitted,T.length),!T.endEmitted&&T.length===0&&(T.endEmitted=!0,a.readable=!1,a.emit("end"),T.autoDestroy)){var m=a._writableState;(!m||m.autoDestroy&&m.finished)&&a.destroy()}}function ve(T,a){for(var m=0,x=T.length;m<x;m++)if(T[m]===a)return m;return-1}s.exports=g;var U;g.ReadableState=p;var K;i("events").EventEmitter;var ue=function(T,a){return T.listeners(a).length},ae=i("./internal/streams/stream"),G=i("buffer").Buffer,Z=c.Uint8Array||function(){},ne=i("util");K=ne&&ne.debuglog?ne.debuglog("stream"):function(){};var te,V,ce,pe=i("./internal/streams/buffer_list"),be=i("./internal/streams/destroy"),Se=i("./internal/streams/state"),he=Se.getHighWaterMark,P=i("../errors").codes,re=P.ERR_INVALID_ARG_TYPE,le=P.ERR_STREAM_PUSH_AFTER_EOF,N=P.ERR_METHOD_NOT_IMPLEMENTED,I=P.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(g,ae);var $=be.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(T){this._readableState&&(this._readableState.destroyed=T)}}),g.prototype.destroy=be.destroy,g.prototype._undestroy=be.undestroy,g.prototype._destroy=function(T,a){a(T)},g.prototype.push=function(T,a){var m,x=this._readableState;return x.objectMode?m=!0:typeof T=="string"&&(a=a||x.defaultEncoding,a!==x.encoding&&(T=G.from(T,a),a=""),m=!0),v(this,T,a,!1,m)},g.prototype.unshift=function(T){return v(this,T,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(T){te||(te=i("string_decoder/").StringDecoder);var a=new te(T);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,x="";m!==null;)x+=a.write(m.data),m=m.next;return this._readableState.buffer.clear(),x!==""&&this._readableState.buffer.push(x),this._readableState.length=x.length,this},g.prototype.read=function(T){K("read",T),T=parseInt(T,10);var a=this._readableState,m=T;if(T!==0&&(a.emittedReadable=!1),T===0&&a.needReadable&&((a.highWaterMark===0?0<a.length:a.length>=a.highWaterMark)||a.ended))return K("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?se(this):w(this),null;if(T=S(T,a),T===0&&a.ended)return a.length===0&&se(this),null;var x=a.needReadable;K("need readable",x),(a.length===0||a.length-T<a.highWaterMark)&&(x=!0,K("length less than watermark",x)),a.ended||a.reading?(x=!1,K("reading or ended",x)):x&&(K("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,!a.reading&&(T=S(m,a)));var L;return L=0<T?ee(T,a):null,L===null?(a.needReadable=a.length<=a.highWaterMark,T=0):(a.length-=T,a.awaitDrain=0),a.length===0&&(!a.ended&&(a.needReadable=!0),m!==T&&a.ended&&se(this)),L!==null&&this.emit("data",L),L},g.prototype._read=function(){$(this,new N("_read()"))},g.prototype.pipe=function(T,a){function m(vt,jr){K("onunpipe"),vt===q&&jr&&jr.hasUnpiped===!1&&(jr.hasUnpiped=!0,L())}function x(){K("onend"),T.end()}function L(){K("cleanup"),T.removeListener("close",D),T.removeListener("finish",Y),T.removeListener("drain",Le),T.removeListener("error",B),T.removeListener("unpipe",m),q.removeListener("end",x),q.removeListener("end",J),q.removeListener("data",F),Pt=!0,oe.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&Le()}function F(vt){K("ondata");var jr=T.write(vt);K("dest.write",jr),jr===!1&&((oe.pipesCount===1&&oe.pipes===T||1<oe.pipesCount&&ve(oe.pipes,T)!==-1)&&!Pt&&(K("false write response, pause",oe.awaitDrain),oe.awaitDrain++),q.pause())}function B(vt){K("onerror",vt),J(),T.removeListener("error",B),ue(T,"error")===0&&$(T,vt)}function D(){T.removeListener("finish",Y),J()}function Y(){K("onfinish"),T.removeListener("close",D),J()}function J(){K("unpipe"),q.unpipe(T)}var q=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=T;break;case 1:oe.pipes=[oe.pipes,T];break;default:oe.pipes.push(T)}oe.pipesCount+=1,K("pipe count=%d opts=%j",oe.pipesCount,a);var me=(!a||a.end!==!1)&&T!==l.stdout&&T!==l.stderr,Me=me?x:J;oe.endEmitted?l.nextTick(Me):q.once("end",Me),T.on("unpipe",m);var Le=R(q);T.on("drain",Le);var Pt=!1;return q.on("data",F),h(T,"error",B),T.once("close",D),T.once("finish",Y),T.emit("pipe",q),oe.flowing||(K("pipe resume"),q.resume()),T},g.prototype.unpipe=function(T){var a=this._readableState,m={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return T&&T!==a.pipes?this:(T||(T=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,T&&T.emit("unpipe",this,m),this);if(!T){var x=a.pipes,L=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var F=0;F<L;F++)x[F].emit("unpipe",this,{hasUnpiped:!1});return this}var B=ve(a.pipes,T);return B===-1?this:(a.pipes.splice(B,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),T.emit("unpipe",this,m),this)},g.prototype.on=function(T,a){var m=ae.prototype.on.call(this,T,a),x=this._readableState;return T==="data"?(x.readableListening=0<this.listenerCount("readable"),x.flowing!==!1&&this.resume()):T=="readable"&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,K("on readable",x.length,x.reading),x.length?w(this):!x.reading&&l.nextTick(E,this)),m},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(T,a){var m=ae.prototype.removeListener.call(this,T,a);return T==="readable"&&l.nextTick(A,this),m},g.prototype.removeAllListeners=function(T){var a=ae.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&l.nextTick(A,this),a},g.prototype.resume=function(){var T=this._readableState;return T.flowing||(K("resume"),T.flowing=!T.readableListening,M(this,T)),T.paused=!1,this},g.prototype.pause=function(){return K("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(K("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(T){var a=this,m=this._readableState,x=!1;for(var L in T.on("end",function(){if(K("wrapped end"),m.decoder&&!m.ended){var B=m.decoder.end();B&&B.length&&a.push(B)}a.push(null)}),T.on("data",function(B){if(K("wrapped data"),m.decoder&&(B=m.decoder.write(B)),!(m.objectMode&&B==null)&&(m.objectMode||B&&B.length)){var D=a.push(B);D||(x=!0,T.pause())}}),T)this[L]===void 0&&typeof T[L]=="function"&&(this[L]=function(B){return function(){return T[B].apply(T,arguments)}}(L));for(var F=0;F<X.length;F++)T.on(X[F],this.emit.bind(this,X[F]));return this._read=function(B){K("wrapped _read",B),x&&(x=!1,T.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return V===void 0&&(V=i("./internal/streams/async_iterator")),V(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(T){this._readableState&&(this._readableState.flowing=T)}}),g._fromList=ee,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(T,a){return ce===void 0&&(ce=i("./internal/streams/from")),ce(g,T,a)})}).call(this)}).call(this,i("_process"),typeof Gt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Gt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(i,s){function l(k,S){var u=this._transformState;u.transforming=!1;var w=u.writecb;if(w===null)return this.emit("error",new g);u.writechunk=null,u.writecb=null,S!=null&&this.push(S),w(k);var C=this._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}function c(k){return this instanceof c?(z.call(this,k),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,k&&(typeof k.transform=="function"&&(this._transform=k.transform),typeof k.flush=="function"&&(this._flush=k.flush)),void this.on("prefinish",f)):new c(k)}function f(){var k=this;typeof this._flush!="function"||this._readableState.destroyed?y(this,null,null):this._flush(function(S,u){y(k,S,u)})}function y(k,S,u){if(S)return k.emit("error",S);if(u!=null&&k.push(u),k._writableState.length)throw new b;if(k._transformState.transforming)throw new v;return k.push(null)}s.exports=c;var h=i("../errors").codes,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,v=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=h.ERR_TRANSFORM_WITH_LENGTH_0,z=i("./_stream_duplex");i("inherits")(c,z),c.prototype.push=function(k,S){return this._transformState.needTransform=!1,z.prototype.push.call(this,k,S)},c.prototype._transform=function(k,S,u){u(new p("_transform()"))},c.prototype._write=function(k,S,u){var w=this._transformState;if(w.writecb=u,w.writechunk=k,w.writeencoding=S,!w.transforming){var C=this._readableState;(w.needTransform||C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}},c.prototype._read=function(){var k=this._transformState;k.writechunk===null||k.transforming?k.needTransform=!0:(k.transforming=!0,this._transform(k.writechunk,k.writeencoding,k.afterTransform))},c.prototype._destroy=function(k,S){z.prototype._destroy.call(this,k,function(u){S(u)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(i,s){(function(l,c){(function(){function f(N){var I=this;this.next=null,this.entry=null,this.finish=function(){se(I,N)}}function y(N){return K.from(N)}function h(N){return K.isBuffer(N)||N instanceof ue}function p(){}function g(N,I,$){de=de||i("./_stream_duplex"),N=N||{},typeof $!="boolean"&&($=I instanceof de),this.objectMode=!!N.objectMode,$&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=Z(this,N,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var X=N.decodeStrings===!1;this.decodeStrings=!X,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(T){j(I,T)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function v(N){de=de||i("./_stream_duplex");var I=this instanceof de;return I||le.call(v,this)?(this._writableState=new g(N,this,I),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),void U.call(this)):new v(N)}function b(N,I){var $=new he;re(N,$),l.nextTick(I,$)}function z(N,I,$,X){var T;return $===null?T=new Se:typeof $!="string"&&!I.objectMode&&(T=new te("chunk",["string","Buffer"],$)),!T||(re(N,T),l.nextTick(X,T),!1)}function k(N,I,$){return N.objectMode||N.decodeStrings===!1||typeof I!="string"||(I=K.from(I,$)),I}function S(N,I,$,X,T,a){if(!$){var m=k(I,X,T);X!==m&&($=!0,T="buffer",X=m)}var x=I.objectMode?1:X.length;I.length+=x;var L=I.length<I.highWaterMark;if(L||(I.needDrain=!0),I.writing||I.corked){var F=I.lastBufferedRequest;I.lastBufferedRequest={chunk:X,encoding:T,isBuf:$,callback:a,next:null},F?F.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else u(N,I,!1,x,X,T,a);return L}function u(N,I,$,X,T,a,m){I.writelen=X,I.writecb=m,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new be("write")):$?N._writev(T,I.onwrite):N._write(T,a,I.onwrite),I.sync=!1}function w(N,I,$,X,T){--I.pendingcb,$?(l.nextTick(T,X),l.nextTick(W,N,I),N._writableState.errorEmitted=!0,re(N,X)):(T(X),N._writableState.errorEmitted=!0,re(N,X),W(N,I))}function C(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function j(N,I){var $=N._writableState,X=$.sync,T=$.writecb;if(typeof T!="function")throw new ce;if(C($),I)w(N,$,X,I,T);else{var a=E($)||N.destroyed;a||$.corked||$.bufferProcessing||!$.bufferedRequest||A(N,$),X?l.nextTick(_,N,$,a,T):_(N,$,a,T)}}function _(N,I,$,X){$||R(N,I),I.pendingcb--,X(),W(N,I)}function R(N,I){I.length===0&&I.needDrain&&(I.needDrain=!1,N.emit("drain"))}function A(N,I){I.bufferProcessing=!0;var $=I.bufferedRequest;if(N._writev&&$&&$.next){var X=I.bufferedRequestCount,T=Array(X),a=I.corkedRequestsFree;a.entry=$;for(var m=0,x=!0;$;)T[m]=$,$.isBuf||(x=!1),$=$.next,m+=1;T.allBuffers=x,u(N,I,!0,I.length,T,"",a.finish),I.pendingcb++,I.lastBufferedRequest=null,a.next?(I.corkedRequestsFree=a.next,a.next=null):I.corkedRequestsFree=new f(I),I.bufferedRequestCount=0}else{for(;$;){var L=$.chunk,F=$.encoding,B=$.callback,D=I.objectMode?1:L.length;if(u(N,I,!1,D,L,F,B),$=$.next,I.bufferedRequestCount--,I.writing)break}$===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=$,I.bufferProcessing=!1}function E(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function M(N,I){N._final(function($){I.pendingcb--,$&&re(N,$),I.prefinished=!0,N.emit("prefinish"),W(N,I)})}function O(N,I){I.prefinished||I.finalCalled||(typeof N._final!="function"||I.destroyed?(I.prefinished=!0,N.emit("prefinish")):(I.pendingcb++,I.finalCalled=!0,l.nextTick(M,N,I)))}function W(N,I){var $=E(I);if($&&(O(N,I),I.pendingcb===0&&(I.finished=!0,N.emit("finish"),I.autoDestroy))){var X=N._readableState;(!X||X.autoDestroy&&X.endEmitted)&&N.destroy()}return $}function ee(N,I,$){I.ending=!0,W(N,I),$&&(I.finished?l.nextTick($):N.once("finish",$)),I.ended=!0,N.writable=!1}function se(N,I,$){var X=N.entry;for(N.entry=null;X;){var T=X.callback;I.pendingcb--,T($),X=X.next}I.corkedRequestsFree.next=N}s.exports=v;var de;v.WritableState=g;var ve={deprecate:i("util-deprecate")},U=i("./internal/streams/stream"),K=i("buffer").Buffer,ue=c.Uint8Array||function(){},ae=i("./internal/streams/destroy"),G=i("./internal/streams/state"),Z=G.getHighWaterMark,ne=i("../errors").codes,te=ne.ERR_INVALID_ARG_TYPE,V=ne.ERR_METHOD_NOT_IMPLEMENTED,ce=ne.ERR_MULTIPLE_CALLBACK,pe=ne.ERR_STREAM_CANNOT_PIPE,be=ne.ERR_STREAM_DESTROYED,Se=ne.ERR_STREAM_NULL_VALUES,he=ne.ERR_STREAM_WRITE_AFTER_END,P=ne.ERR_UNKNOWN_ENCODING,re=ae.errorOrDestroy;i("inherits")(v,U),g.prototype.getBuffer=function(){for(var N=this.bufferedRequest,I=[];N;)I.push(N),N=N.next;return I},function(){try{Object.defineProperty(g.prototype,"buffer",{get:ve.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var le;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(le=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(N){return!!le.call(this,N)||this===v&&N&&N._writableState instanceof g}})):le=function(N){return N instanceof this},v.prototype.pipe=function(){re(this,new pe)},v.prototype.write=function(N,I,$){var X=this._writableState,T=!1,a=!X.objectMode&&h(N);return a&&!K.isBuffer(N)&&(N=y(N)),typeof I=="function"&&($=I,I=null),a?I="buffer":!I&&(I=X.defaultEncoding),typeof $!="function"&&($=p),X.ending?b(this,$):(a||z(this,X,N,$))&&(X.pendingcb++,T=S(this,X,a,N,I,$)),T},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&A(this,N))},v.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())))throw new P(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(N,I,$){$(new V("_write()"))},v.prototype._writev=null,v.prototype.end=function(N,I,$){var X=this._writableState;return typeof N=="function"?($=N,N=null,I=null):typeof I=="function"&&($=I,I=null),N!=null&&this.write(N,I),X.corked&&(X.corked=1,this.uncork()),X.ending||ee(this,X,$),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),v.prototype.destroy=ae.destroy,v.prototype._undestroy=ae.undestroy,v.prototype._destroy=function(N,I){I(N)}}).call(this)}).call(this,i("_process"),typeof Gt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Gt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(i,s){(function(l){(function(){function c(R,A,E){return A in R?Object.defineProperty(R,A,{value:E,enumerable:!0,configurable:!0,writable:!0}):R[A]=E,R}function f(R,A){return{value:R,done:A}}function y(R){var A=R[b];if(A!==null){var E=R[C].read();E!==null&&(R[u]=null,R[b]=null,R[z]=null,A(f(E,!1)))}}function h(R){l.nextTick(y,R)}function p(R,A){return function(E,M){R.then(function(){return A[S]?void E(f(void 0,!0)):void A[w](E,M)},M)}}var g,v=i("./end-of-stream"),b=Symbol("lastResolve"),z=Symbol("lastReject"),k=Symbol("error"),S=Symbol("ended"),u=Symbol("lastPromise"),w=Symbol("handlePromise"),C=Symbol("stream"),j=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((g={get stream(){return this[C]},next:function(){var R=this,A=this[k];if(A!==null)return Promise.reject(A);if(this[S])return Promise.resolve(f(void 0,!0));if(this[C].destroyed)return new Promise(function(W,ee){l.nextTick(function(){R[k]?ee(R[k]):W(f(void 0,!0))})});var E,M=this[u];if(M)E=new Promise(p(M,this));else{var O=this[C].read();if(O!==null)return Promise.resolve(f(O,!1));E=new Promise(this[w])}return this[u]=E,E}},c(g,Symbol.asyncIterator,function(){return this}),c(g,"return",function(){var R=this;return new Promise(function(A,E){R[C].destroy(null,function(M){return M?void E(M):void A(f(void 0,!0))})})}),g),j);s.exports=function(R){var A,E=Object.create(_,(A={},c(A,C,{value:R,writable:!0}),c(A,b,{value:null,writable:!0}),c(A,z,{value:null,writable:!0}),c(A,k,{value:null,writable:!0}),c(A,S,{value:R._readableState.endEmitted,writable:!0}),c(A,w,{value:function(M,O){var W=E[C].read();W?(E[u]=null,E[b]=null,E[z]=null,M(f(W,!1))):(E[b]=M,E[z]=O)},writable:!0}),A));return E[u]=null,v(R,function(M){if(M&&M.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=E[z];return O!==null&&(E[u]=null,E[b]=null,E[z]=null,O(M)),void(E[k]=M)}var W=E[b];W!==null&&(E[u]=null,E[b]=null,E[z]=null,W(f(void 0,!0))),E[S]=!0}),R.on("readable",h.bind(null,E)),E}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":24,_process:12}],22:[function(i,s){function l(u,w){var C=Object.keys(u);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(u);w&&(j=j.filter(function(_){return Object.getOwnPropertyDescriptor(u,_).enumerable})),C.push.apply(C,j)}return C}function c(u){for(var w,C=1;C<arguments.length;C++)w=arguments[C]==null?{}:arguments[C],C%2?l(Object(w),!0).forEach(function(j){f(u,j,w[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(w)):l(Object(w)).forEach(function(j){Object.defineProperty(u,j,Object.getOwnPropertyDescriptor(w,j))});return u}function f(u,w,C){return w in u?Object.defineProperty(u,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):u[w]=C,u}function y(u,w){if(!(u instanceof w))throw new TypeError("Cannot call a class as a function")}function h(u,w){for(var C,j=0;j<w.length;j++)C=w[j],C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(u,C.key,C)}function p(u,w,C){return w&&h(u.prototype,w),u}function g(u,w,C){b.prototype.copy.call(u,w,C)}var v=i("buffer"),b=v.Buffer,z=i("util"),k=z.inspect,S=k&&k.custom||"inspect";s.exports=function(){function u(){y(this,u),this.head=null,this.tail=null,this.length=0}return p(u,[{key:"push",value:function(w){var C={data:w,next:null};0<this.length?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(w){var C={data:w,next:this.head};this.length===0&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var C=this.head,j=""+C.data;C=C.next;)j+=w+C.data;return j}},{key:"concat",value:function(w){if(this.length===0)return b.alloc(0);for(var C=b.allocUnsafe(w>>>0),j=this.head,_=0;j;)g(j.data,C,_),_+=j.data.length,j=j.next;return C}},{key:"consume",value:function(w,C){var j;return w<this.head.data.length?(j=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?j=this.shift():j=C?this._getString(w):this._getBuffer(w),j}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var C=this.head,j=1,_=C.data;for(w-=_.length;C=C.next;){var R=C.data,A=w>R.length?R.length:w;if(_+=A===R.length?R:R.slice(0,w),w-=A,w===0){A===R.length?(++j,this.head=C.next?C.next:this.tail=null):(this.head=C,C.data=R.slice(A));break}++j}return this.length-=j,_}},{key:"_getBuffer",value:function(w){var C=b.allocUnsafe(w),j=this.head,_=1;for(j.data.copy(C),w-=j.data.length;j=j.next;){var R=j.data,A=w>R.length?R.length:w;if(R.copy(C,C.length-w,0,A),w-=A,w===0){A===R.length?(++_,this.head=j.next?j.next:this.tail=null):(this.head=j,j.data=R.slice(A));break}++_}return this.length-=_,C}},{key:S,value:function(w,C){return k(this,c({},C,{depth:0,customInspect:!1}))}}]),u}()},{buffer:3,util:2}],23:[function(i,s){(function(l){(function(){function c(h,p){y(h,p),f(h)}function f(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function y(h,p){h.emit("error",p)}s.exports={destroy:function(h,p){var g=this,v=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return v||b?(p?p(h):h&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,l.nextTick(y,this,h)):l.nextTick(y,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(z){!p&&z?g._writableState?g._writableState.errorEmitted?l.nextTick(f,g):(g._writableState.errorEmitted=!0,l.nextTick(c,g,z)):l.nextTick(c,g,z):p?(l.nextTick(f,g),p(z)):l.nextTick(f,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,p){var g=h._readableState,v=h._writableState;g&&g.autoDestroy||v&&v.autoDestroy?h.destroy(p):h.emit("error",p)}}}).call(this)}).call(this,i("_process"))},{_process:12}],24:[function(i,s){function l(p){var g=!1;return function(){if(!g){g=!0;for(var v=arguments.length,b=Array(v),z=0;z<v;z++)b[z]=arguments[z];p.apply(this,b)}}}function c(){}function f(p){return p.setHeader&&typeof p.abort=="function"}function y(p,g,v){if(typeof g=="function")return y(p,null,g);g||(g={}),v=l(v||c);var b=g.readable||g.readable!==!1&&p.readable,z=g.writable||g.writable!==!1&&p.writable,k=function(){p.writable||u()},S=p._writableState&&p._writableState.finished,u=function(){z=!1,S=!0,b||v.call(p)},w=p._readableState&&p._readableState.endEmitted,C=function(){b=!1,w=!0,z||v.call(p)},j=function(A){v.call(p,A)},_=function(){var A;return b&&!w?(p._readableState&&p._readableState.ended||(A=new h),v.call(p,A)):z&&!S?(p._writableState&&p._writableState.ended||(A=new h),v.call(p,A)):void 0},R=function(){p.req.on("finish",u)};return f(p)?(p.on("complete",u),p.on("abort",_),p.req?R():p.on("request",R)):z&&!p._writableState&&(p.on("end",k),p.on("close",k)),p.on("end",C),p.on("finish",u),g.error!==!1&&p.on("error",j),p.on("close",_),function(){p.removeListener("complete",u),p.removeListener("abort",_),p.removeListener("request",R),p.req&&p.req.removeListener("finish",u),p.removeListener("end",k),p.removeListener("close",k),p.removeListener("finish",u),p.removeListener("end",C),p.removeListener("error",j),p.removeListener("close",_)}}var h=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;s.exports=y},{"../../../errors":15}],25:[function(i,s){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(i,s){function l(S){var u=!1;return function(){u||(u=!0,S.apply(void 0,arguments))}}function c(S){if(S)throw S}function f(S){return S.setHeader&&typeof S.abort=="function"}function y(S,u,w,C){C=l(C);var j=!1;S.on("close",function(){j=!0}),v===void 0&&(v=i("./end-of-stream")),v(S,{readable:u,writable:w},function(R){return R?C(R):(j=!0,void C())});var _=!1;return function(R){if(!j)return _?void 0:(_=!0,f(S)?S.abort():typeof S.destroy=="function"?S.destroy():void C(R||new k("pipe")))}}function h(S){S()}function p(S,u){return S.pipe(u)}function g(S){return S.length&&typeof S[S.length-1]=="function"?S.pop():c}var v,b=i("../../../errors").codes,z=b.ERR_MISSING_ARGS,k=b.ERR_STREAM_DESTROYED;s.exports=function(){for(var S=arguments.length,u=Array(S),w=0;w<S;w++)u[w]=arguments[w];var C=g(u);if(Array.isArray(u[0])&&(u=u[0]),2>u.length)throw new z("streams");var j,_=u.map(function(R,A){var E=A<u.length-1;return y(R,E,0<A,function(M){j||(j=M),M&&_.forEach(h),E||(_.forEach(h),C(j))})});return u.reduce(p)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(i,s){function l(f,y,h){return f.highWaterMark==null?y?f[h]:null:f.highWaterMark}var c=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(f,y,h,p){var g=l(y,p,h);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var v=p?h:"highWaterMark";throw new c(v,g)}return n(g)}return f.objectMode?16:16384}}},{"../../../errors":15}],28:[function(i,s){s.exports=i("events").EventEmitter},{events:7}],29:[function(i,s,l){l=s.exports=i("./lib/_stream_readable.js"),l.Stream=l,l.Readable=l,l.Writable=i("./lib/_stream_writable.js"),l.Duplex=i("./lib/_stream_duplex.js"),l.Transform=i("./lib/_stream_transform.js"),l.PassThrough=i("./lib/_stream_passthrough.js"),l.finished=i("./lib/internal/streams/end-of-stream.js"),l.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(i,s,l){function c(p,g){for(var v in p)g[v]=p[v]}function f(p,g,v){return h(p,g,v)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var y=i("buffer"),h=y.Buffer;h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?s.exports=y:(c(y,l),l.Buffer=f),f.prototype=Object.create(h.prototype),c(h,f),f.from=function(p,g,v){if(typeof p=="number")throw new TypeError("Argument must not be a number");return h(p,g,v)},f.alloc=function(p,g,v){if(typeof p!="number")throw new TypeError("Argument must be a number");var b=h(p);return g===void 0?b.fill(0):typeof v=="string"?b.fill(g,v):b.fill(g),b},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return h(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return y.SlowBuffer(p)}},{buffer:3}],31:[function(i,s,l){function c(_){if(!_)return"utf8";for(var R;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(R)return;_=(""+_).toLowerCase(),R=!0}}function f(_){var R=c(_);if(typeof R!="string"&&(C.isEncoding===j||!j(_)))throw new Error("Unknown encoding: "+_);return R||_}function y(_){this.encoding=f(_);var R;switch(this.encoding){case"utf16le":this.text=b,this.end=z,R=4;break;case"utf8":this.fillLast=v,R=4;break;case"base64":this.text=k,this.end=S,R=3;break;default:return this.write=u,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(R)}function h(_){return 127>=_?0:_>>5==6?2:_>>4==14?3:_>>3==30?4:_>>6==2?-1:-2}function p(_,R,A){var E=R.length-1;if(E<A)return 0;var M=h(R[E]);return 0<=M?(0<M&&(_.lastNeed=M-1),M):--E<A||M===-2?0:(M=h(R[E]),0<=M?(0<M&&(_.lastNeed=M-2),M):--E<A||M===-2?0:(M=h(R[E]),0<=M?(0<M&&(M===2?M=0:_.lastNeed=M-3),M):0))}function g(_,R){if((192&R[0])!=128)return _.lastNeed=0,"";if(1<_.lastNeed&&1<R.length){if((192&R[1])!=128)return _.lastNeed=1,"";if(2<_.lastNeed&&2<R.length&&(192&R[2])!=128)return _.lastNeed=2,""}}function v(_){var R=this.lastTotal-this.lastNeed,A=g(this,_);return A===void 0?this.lastNeed<=_.length?(_.copy(this.lastChar,R,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,R,0,_.length),void(this.lastNeed-=_.length)):A}function b(_,R){if((_.length-R)%2==0){var A=_.toString("utf16le",R);if(A){var E=A.charCodeAt(A.length-1);if(55296<=E&&56319>=E)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],A.slice(0,-1)}return A}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",R,_.length-1)}function z(_){var R=_&&_.length?this.write(_):"";if(this.lastNeed){var A=this.lastTotal-this.lastNeed;return R+this.lastChar.toString("utf16le",0,A)}return R}function k(_,R){var A=(_.length-R)%3;return A==0?_.toString("base64",R):(this.lastNeed=3-A,this.lastTotal=3,A==1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",R,_.length-A))}function S(_){var R=_&&_.length?this.write(_):"";return this.lastNeed?R+this.lastChar.toString("base64",0,3-this.lastNeed):R}function u(_){return _.toString(this.encoding)}function w(_){return _&&_.length?this.write(_):""}var C=i("safe-buffer").Buffer,j=C.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};l.StringDecoder=y,y.prototype.write=function(_){if(_.length===0)return"";var R,A;if(this.lastNeed){if(R=this.fillLast(_),R===void 0)return"";A=this.lastNeed,this.lastNeed=0}else A=0;return A<_.length?R?R+this.text(_,A):this.text(_,A):R||""},y.prototype.end=function(_){var R=_&&_.length?this.write(_):"";return this.lastNeed?R+"":R},y.prototype.text=function(_,R){var A=p(this,_,R);if(!this.lastNeed)return _.toString("utf8",R);this.lastTotal=A;var E=_.length-(A-this.lastNeed);return _.copy(this.lastChar,0,E),_.toString("utf8",R,E)},y.prototype.fillLast=function(_){return this.lastNeed<=_.length?(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),void(this.lastNeed-=_.length))}},{"safe-buffer":30}],32:[function(i,s){(function(l){(function(){function c(f){try{if(!l.localStorage)return!1}catch{return!1}var y=l.localStorage[f];return y!=null&&(y+"").toLowerCase()==="true"}s.exports=function(f,y){function h(){if(!p){if(c("throwDeprecation"))throw new Error(y);c("traceDeprecation")?console.trace(y):console.warn(y),p=!0}return f.apply(this,arguments)}if(c("noDeprecation"))return f;var p=!1;return h}}).call(this)}).call(this,typeof Gt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Gt)},{}],"/":[function(i,s){function l(S){return S.replace(/a=ice-options:trickle\s\n/g,"")}function c(S){console.warn(S)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const f=i("debug")("simple-peer"),y=i("get-browser-rtc"),h=i("randombytes"),p=i("readable-stream"),g=i("queue-microtask"),v=i("err-code"),{Buffer:b}=i("buffer"),z=65536;class k extends p.Duplex{constructor(u){if(u=Object.assign({allowHalfOpen:!1},u),super(u),this._id=h(4).toString("hex").slice(0,7),this._debug("new peer %o",u),this.channelName=u.initiator?u.channelName||h(20).toString("hex"):null,this.initiator=u.initiator||!1,this.channelConfig=u.channelConfig||k.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},k.config,u.config),this.offerOptions=u.offerOptions||{},this.answerOptions=u.answerOptions||{},this.sdpTransform=u.sdpTransform||(w=>w),this.streams=u.streams||(u.stream?[u.stream]:[]),this.trickle=u.trickle===void 0||u.trickle,this.allowHalfTrickle=u.allowHalfTrickle!==void 0&&u.allowHalfTrickle,this.iceCompleteTimeout=u.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=u.wrtc&&typeof u.wrtc=="object"?u.wrtc:y(),!this._wrtc)throw v(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(w){return void this.destroy(v(w,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=w=>{this._onIceCandidate(w)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(w=>{this.destroy(v(w,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=w=>{this._setupData(w)},this.streams&&this.streams.forEach(w=>{this.addStream(w)}),this._pc.ontrack=w=>{this._onTrack(w)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(u){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof u=="string")try{u=JSON.parse(u)}catch{u={}}this._debug("signal()"),u.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),u.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(u.transceiverRequest.kind,u.transceiverRequest.init)),u.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(u.candidate):this._pendingCandidates.push(u.candidate)),u.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(u)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(w=>{this._addIceCandidate(w)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(w=>{this.destroy(v(w,"ERR_SET_REMOTE_DESCRIPTION"))}),u.sdp||u.candidate||u.renegotiate||u.transceiverRequest||this.destroy(v(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(u){const w=new this._wrtc.RTCIceCandidate(u);this._pc.addIceCandidate(w).catch(C=>{!w.address||w.address.endsWith(".local")?c("Ignoring unsupported ICE candidate."):this.destroy(v(C,"ERR_ADD_ICE_CANDIDATE"))})}send(u){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(u)}}addTransceiver(u,w){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(u,w),this._needsNegotiation()}catch(C){this.destroy(v(C,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:u,init:w}})}}addStream(u){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),u.getTracks().forEach(w=>{this.addTrack(w,u)})}}addTrack(u,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const C=this._senderMap.get(u)||new Map;let j=C.get(w);if(!j)j=this._pc.addTrack(u,w),C.set(w,j),this._senderMap.set(u,C),this._needsNegotiation();else throw j.removed?v(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):v(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(u,w,C){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const j=this._senderMap.get(u),_=j?j.get(C):null;if(!_)throw v(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");w&&this._senderMap.set(w,j),_.replaceTrack==null?this.destroy(v(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):_.replaceTrack(w)}removeTrack(u,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const C=this._senderMap.get(u),j=C?C.get(w):null;if(!j)throw v(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{j.removed=!0,this._pc.removeTrack(j)}catch(_){_.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(j):this.destroy(v(_,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(u){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),u.getTracks().forEach(w=>{this.removeTrack(w,u)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(u){this._destroy(u,()=>{})}_destroy(u,w){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",u&&(u.message||u)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",u&&(u.message||u)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,u&&this.emit("error",u),this.emit("close"),w()}))}_setupData(u){if(!u.channel)return this.destroy(v(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=u.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=z),this.channelName=this._channel.label,this._channel.onmessage=C=>{this._onChannelMessage(C)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=C=>{const j=C.error instanceof Error?C.error:new Error(`Datachannel error: ${C.message} ${C.filename}:${C.lineno}:${C.colno}`);this.destroy(v(j,"ERR_DATA_CHANNEL"))};let w=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(w&&this._onChannelClose(),w=!0):w=!1},5e3)}_read(){}_write(u,w,C){if(this.destroyed)return C(v(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(u)}catch(j){return this.destroy(v(j,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>z?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=C):C(null)}else this._debug("write before connect"),this._chunk=u,this._cb=C}_onFinish(){if(!this.destroyed){const u=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?u():this.once("connect",u)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=l(u.sdp)),u.sdp=this.sdpTransform(u.sdp);const w=()=>{if(!this.destroyed){const C=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp})}};this._pc.setLocalDescription(u).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(C=>{this.destroy(v(C,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(v(u,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(u=>{u.mid||!u.sender.track||u.requested||(u.requested=!0,this.addTransceiver(u.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=l(u.sdp)),u.sdp=this.sdpTransform(u.sdp);const w=()=>{if(!this.destroyed){const C=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(u).then(()=>{this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(C=>{this.destroy(v(C,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(v(u,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(v(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const u=this._pc.iceConnectionState,w=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",u,w),this.emit("iceStateChange",u,w),(u==="connected"||u==="completed")&&(this._pcReady=!0,this._maybeReady()),u==="failed"&&this.destroy(v(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),u==="closed"&&this.destroy(v(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(u){const w=C=>(Object.prototype.toString.call(C.values)==="[object Array]"&&C.values.forEach(j=>{Object.assign(C,j)}),C);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(C=>{const j=[];C.forEach(_=>{j.push(w(_))}),u(null,j)},C=>u(C)):0<this._pc.getStats.length?this._pc.getStats(C=>{if(this.destroyed)return;const j=[];C.result().forEach(_=>{const R={};_.names().forEach(A=>{R[A]=_.stat(A)}),R.id=_.id,R.type=_.type,R.timestamp=_.timestamp,j.push(w(R))}),u(null,j)},C=>u(C)):u(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const u=()=>{this.destroyed||this.getStats((w,C)=>{if(this.destroyed)return;w&&(C=[]);const j={},_={},R={};let A=!1;C.forEach(M=>{(M.type==="remotecandidate"||M.type==="remote-candidate")&&(j[M.id]=M),(M.type==="localcandidate"||M.type==="local-candidate")&&(_[M.id]=M),(M.type==="candidatepair"||M.type==="candidate-pair")&&(R[M.id]=M)});const E=M=>{A=!0;let O=_[M.localCandidateId];O&&(O.ip||O.address)?(this.localAddress=O.ip||O.address,this.localPort=+O.port):O&&O.ipAddress?(this.localAddress=O.ipAddress,this.localPort=+O.portNumber):typeof M.googLocalAddress=="string"&&(O=M.googLocalAddress.split(":"),this.localAddress=O[0],this.localPort=+O[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let W=j[M.remoteCandidateId];W&&(W.ip||W.address)?(this.remoteAddress=W.ip||W.address,this.remotePort=+W.port):W&&W.ipAddress?(this.remoteAddress=W.ipAddress,this.remotePort=+W.portNumber):typeof M.googRemoteAddress=="string"&&(W=M.googRemoteAddress.split(":"),this.remoteAddress=W[0],this.remotePort=+W[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(C.forEach(M=>{M.type==="transport"&&M.selectedCandidatePairId&&E(R[M.selectedCandidatePairId]),(M.type==="googCandidatePair"&&M.googActiveConnection==="true"||(M.type==="candidatepair"||M.type==="candidate-pair")&&M.selected)&&E(M)}),!A&&(!Object.keys(R).length||Object.keys(_).length))return void setTimeout(u,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(O){return this.destroy(v(O,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const M=this._cb;this._cb=null,M(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};u()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>z)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(u=>{this._pc.removeTrack(u),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(u){this.destroyed||(u.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:u.candidate.candidate,sdpMLineIndex:u.candidate.sdpMLineIndex,sdpMid:u.candidate.sdpMid}}):!u.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),u.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(u){if(this.destroyed)return;let w=u.data;w instanceof ArrayBuffer&&(w=b.from(w)),this.push(w)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const u=this._cb;this._cb=null,u(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(u){this.destroyed||u.streams.forEach(w=>{this._debug("on track"),this.emit("track",u.track,w),this._remoteTracks.push({track:u.track,stream:w}),this._remoteStreams.some(C=>C.id===w.id)||(this._remoteStreams.push(w),g(()=>{this._debug("on stream"),this.emit("stream",w)}))})}_debug(){const u=[].slice.call(arguments);u[0]="["+this._id+"] "+u[0],f.apply(null,u)}}k.WEBRTC_SUPPORT=!!y(),k.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},k.channelConfig={},s.exports=k},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(xm);var qx=xm.exports;const Zx=qf(qx),Qu=0,Xu=1,bm=2,km=(e,t)=>{fe(e,Qu);const n=Uw(t);Ie(e,n)},Sm=(e,t,n)=>{fe(e,Xu),Ie(e,Iw(t,n))},e1=(e,t,n)=>Sm(t,n,Ke(e)),Cm=(e,t,n)=>{try{zw(t,Ke(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},t1=(e,t)=>{fe(e,bm),Ie(e,t)},n1=Cm,r1=(e,t,n,r)=>{const o=ge(e);switch(o){case Qu:e1(e,t,n);break;case Xu:Cm(e,n,r);break;case bm:n1(e,n,r);break;default:throw new Error("Unknown message type")}return o},ma=3e4;class o1 extends fg{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Cn();this.getLocalState()!==null&&ma/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((o,i)=>{i!==this.clientID&&ma<=n-o.lastUpdated&&this.states.has(i)&&r.push(i)}),r.length>0&&jc(this,r,"timeout")},on(ma/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),o=r===void 0?0:r.clock+1,i=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:o,lastUpdated:Cn()});const s=[],l=[],c=[],f=[];t===null?f.push(n):i==null?t!=null&&s.push(n):(l.push(n),qo(i,t)||c.push(n)),(s.length>0||c.length>0||f.length>0)&&this.emit("change",[{added:s,updated:c,removed:f},"local"]),this.emit("update",[{added:s,updated:l,removed:f},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const jc=(e,t,n)=>{const r=[];for(let o=0;o<t.length;o++){const i=t[o];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const s=e.meta.get(i);e.meta.set(i,{clock:s.clock+1,lastUpdated:Cn()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},il=(e,t,n=e.states)=>{const r=t.length,o=Qe();fe(o,r);for(let i=0;i<r;i++){const s=t[i],l=n.get(s)||null,c=e.meta.get(s).clock;fe(o,s),fe(o,c),nn(o,JSON.stringify(l))}return ze(o)},i1=(e,t,n)=>{const r=un(t),o=Cn(),i=[],s=[],l=[],c=[],f=ge(r);for(let y=0;y<f;y++){const h=ge(r);let p=ge(r);const g=JSON.parse(vn(r)),v=e.meta.get(h),b=e.states.get(h),z=v===void 0?0:v.clock;(z<p||z===p&&g===null&&e.states.has(h))&&(g===null?h===e.clientID&&e.getLocalState()!=null?p++:e.states.delete(h):e.states.set(h,g),e.meta.set(h,{clock:p,lastUpdated:o}),v===void 0&&g!==null?i.push(h):v!==void 0&&g===null?c.push(h):g!==null&&(qo(g,b)||l.push(h),s.push(h)))}(i.length>0||l.length>0||c.length>0)&&e.emit("change",[{added:i,updated:l,removed:c},n]),(i.length>0||s.length>0||c.length>0)&&e.emit("update",[{added:i,updated:s,removed:c},n])},s1=(e,t)=>{const n=bc(e).buffer,r=bc(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(o=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},_m=(e,t)=>{if(!t)return Au(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(r=>{const o=Qe();return nn(o,"AES-GCM"),Ie(o,n),Ie(o,new Uint8Array(r)),ze(o)})},l1=(e,t)=>{const n=Qe();return fo(n,e),_m(ze(n),t)},Em=(e,t)=>{if(!t)return Au(e);const n=un(e);vn(n)!=="AES-GCM"&&Vv(sn("Unknown encryption algorithm"));const o=Ke(n),i=Ke(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,i).then(s=>new Uint8Array(s))},a1=(e,t)=>Em(e,t).then(n=>ho(un(new Uint8Array(n)))),bt=kw("y-webrtc"),no=0,Tm=3,_i=1,Ju=4,sl=new Map,cr=new Map,jm=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),bt("synced ",zt,e.name,xr," with all peers"))},Rm=(e,t,n)=>{const r=un(t),o=Qe(),i=ge(r);if(e===void 0)return null;const s=e.awareness,l=e.doc;let c=!1;switch(i){case no:{fe(o,no);const f=r1(r,o,l,e);f===Xu&&!e.synced&&n(),f===Qu&&(c=!0);break}case Tm:fe(o,_i),Ie(o,il(s,Array.from(s.getStates().keys()))),c=!0;break;case _i:i1(s,Ke(r),e);break;case Ju:{const f=wr(r)===1,y=vn(r);if(y!==e.peerId&&(e.bcConns.has(y)&&!f||!e.bcConns.has(y)&&f)){const h=[],p=[];f?(e.bcConns.add(y),p.push(y)):(e.bcConns.delete(y),h.push(y)),e.provider.emit("peers",[{added:p,removed:h,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Mm(e)}break}default:return console.error("Unable to compute message"),o}return c?o:null},c1=(e,t)=>{const n=e.room;return bt("received message from ",zt,e.remotePeerId,Ou," (",n.name,")",xr,jl),Rm(n,t,()=>{e.synced=!0,bt("synced ",zt,n.name,xr," with ",zt,e.remotePeerId),jm(n)})},ya=(e,t)=>{bt("send message to ",zt,e.remotePeerId,xr,Ou," (",e.room.name,")",jl);try{e.peer.send(ze(t))}catch{}},u1=(e,t)=>{bt("broadcast message in ",zt,e.name,xr),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class Uf{constructor(t,n,r,o){bt("establishing connection to ",zt,r),this.room=o,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Zx({initiator:n,...o.provider.peerOpts}),this.peer.on("signal",i=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),qu(t,o,{to:r,from:o.peerId,type:"signal",token:this.glareToken,signal:i})}),this.peer.on("connect",()=>{bt("connected to ",zt,r),this.connected=!0;const s=o.provider.doc,l=o.awareness,c=Qe();fe(c,no),km(c,s),ya(this,c);const f=l.getStates();if(f.size>0){const y=Qe();fe(y,_i),Ie(y,il(l,Array.from(f.keys()))),ya(this,y)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,o.webrtcConns.has(this.remotePeerId)&&(o.webrtcConns.delete(this.remotePeerId),o.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),jm(o),this.peer.destroy(),bt("closed connection to ",zt,r),Rc(o)}),this.peer.on("error",i=>{bt("Error in connection to ",zt,r,": ",i),Rc(o)}),this.peer.on("data",i=>{const s=c1(this,i);s!==null&&ya(this,s)})}destroy(){this.peer.destroy()}}const Dn=(e,t)=>_m(t,e.key).then(n=>e.mux(()=>Xx(e.name,n))),$f=(e,t)=>{e.bcconnected&&Dn(e,t),u1(e,t)},Rc=e=>{sl.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&qu(t,e,{type:"announce",from:e.peerId}))})},Mm=e=>{if(e.provider.filterBcConns){const t=Qe();fe(t,Ju),xi(t,1),nn(t,e.peerId),Dn(e,ze(t))}};class d1{constructor(t,n,r,o){this.peerId=vg(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=o,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Jx(),this.bcconnected=!1,this._bcSubscriber=i=>Em(new Uint8Array(i),o).then(s=>this.mux(()=>{const l=Rm(this,s,()=>{});l&&Dn(this,ze(l))})),this._docUpdateHandler=(i,s)=>{const l=Qe();fe(l,no),t1(l,i),$f(this,ze(l))},this._awarenessUpdateHandler=({added:i,updated:s,removed:l},c)=>{const f=i.concat(s).concat(l),y=Qe();fe(y,_i),Ie(y,il(this.awareness,f)),$f(this,ze(y))},this._beforeUnloadHandler=()=>{jc(this.awareness,[t.clientID],"window unload"),cr.forEach(i=>{i.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Rc(this);const t=this.name;Gx(t,this._bcSubscriber),this.bcconnected=!0,Mm(this);const n=Qe();fe(n,no),km(n,this.doc),Dn(this,ze(n));const r=Qe();fe(r,no),Sm(r,this.doc),Dn(this,ze(r));const o=Qe();fe(o,Tm),Dn(this,ze(o));const i=Qe();fe(i,_i),Ie(i,il(this.awareness,[this.doc.clientID])),Dn(this,ze(i))}disconnect(){sl.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),jc(this.awareness,[this.doc.clientID],"disconnect");const t=Qe();fe(t,Ju),xi(t,0),nn(t,this.peerId),Dn(this,ze(t)),Qx(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const f1=(e,t,n,r)=>{if(cr.has(n))throw sn(`A Yjs Doc connected to room "${n}" already exists!`);const o=new d1(e,t,n,r);return cr.set(n,o),o},qu=(e,t,n)=>{t.key?l1(n,t.key).then(r=>{e.send({type:"publish",topic:t.name,data:jg(r)})}):e.send({type:"publish",topic:t.name,data:n})};class h1 extends Vx{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{bt(`connected (${t})`);const n=Array.from(cr.keys());this.send({type:"subscribe",topics:n}),cr.forEach(r=>qu(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,o=cr.get(r);if(o==null||typeof r!="string")return;const i=s=>{const l=o.webrtcConns,c=o.peerId;if(s==null||s.from===c||s.to!==void 0&&s.to!==c||o.bcConns.has(s.from))return;const f=l.has(s.from)?()=>{}:()=>o.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}]);switch(s.type){case"announce":l.size<o.provider.maxConns&&(_t(l,s.from,()=>new Uf(this,!0,s.from,o)),f());break;case"signal":if(s.signal.type==="offer"){const y=l.get(s.from);if(y){const h=s.token,p=y.glareToken;if(p&&p>h){bt("offer rejected: ",s.from);return}y.glareToken=void 0}}if(s.signal.type==="answer"){bt("offer answered by: ",s.from);const y=l.get(s.from);y.glareToken=void 0}s.to===c&&(_t(l,s.from,()=>new Uf(this,!1,s.from,o)).peer.signal(s.signal),f());break}};o.key?typeof n.data=="string"&&a1(Rg(n.data),o.key).then(i):i(n.data)}}}),this.on("disconnect",()=>bt(`disconnect (${t})`))}}const va=e=>{e.emit("status",[{connected:e.connected}])};class p1 extends dg{constructor(t,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:o=null,awareness:i=new o1(n),maxConns:s=20+on(Wv()*15),filterBcConns:l=!0,peerOpts:c={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=l,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=o?s1(o,t):Au(null),this.room=null,this.key.then(f=>{this.room=f1(n,this,t,f),this.shouldConnect?this.room.connect():this.room.disconnect(),va(this)}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=_t(sl,t,()=>new h1(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&(this.room.connect(),va(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),sl.delete(t.url))}),this.room&&(this.room.disconnect(),va(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),cr.delete(this.roomName)}),super.destroy()}}const Ft=new _o,_e=Ft.getMap("players"),Xn=Ft.getMap("zones"),ye=Ft.getMap("cards"),wo=Ft.getMap("baton"),g1=Ft.getMap("seed"),ur=Ft.getArray("log"),os=Ft.getMap("counterTypes"),Zo=Ft.getMap("revealedCard"),dr=new Set,ll=[];function Uo(){return new Set(dr)}function is(e){return dr.has(e)}function m1(e){dr.has(e)?dr.delete(e):dr.add(e),Zu()}function Mc(){dr.clear(),Zu()}function y1(e){e.forEach(t=>dr.add(t)),Zu()}function v1(e){ll.push(e)}function w1(e){const t=ll.indexOf(e);t>-1&&ll.splice(t,1)}function Zu(){ll.forEach(e=>e())}const Wf=["#4CAF50","#2196F3","#F44336","#9C27B0"];function Ze(e){const n=Array.from(_e.keys()).indexOf(e);return n>=0&&n<Wf.length?Wf[n]:"#757575"}function x1(e,t,n=!1){if(_e.size>=4){console.warn("Maximum of 4 players reached");return}_e.set(e,{name:t,lifeTotal:40}),No(`deck-${e}`,"deck",e),No(`hand-${e}`,"hand",e),No(`battlefield-${e}`,"battlefield",e),No(`graveyard-${e}`,"graveyard",e),No(`exile-${e}`,"exile",e),n||b1(e),Ve(e,"player_joined",{name:t})}function b1(e){const t=["Lightning Bolt","Giant Growth","Counterspell","Swords to Plowshares","Dark Ritual","Path to Exile","Brainstorm","Llanowar Elves","Doom Blade","Cancel"];for(let n=0;n<3;n++)Cs(`${e}-card-hand-${n}`,t[n%t.length],e,`hand-${e}`,n);for(let n=0;n<2;n++)Cs(`${e}-card-battlefield-${n}`,t[(n+3)%t.length],e,`battlefield-${e}`,n);for(let n=0;n<50;n++)Cs(`${e}-card-deck-${n}`,t[n%t.length],e,`deck-${e}`,n)}function Hf(e){const t=_e.get(e),n=[];Xn.forEach((i,s)=>{i.owner===e&&n.push(s)}),n.forEach(i=>Xn.delete(i));const r=[];ye.forEach((i,s)=>{i.owner===e&&r.push(s)}),r.forEach(i=>ye.delete(i)),_e.delete(e);const o=ei();if(o&&o.playerId===e){const i=Array.from(_e.keys());i.length>0?Lc(i[0],"main1"):wo.delete("current")}t&&Ve(e,"player_removed",{name:t.name})}function k1(){_e.clear(),Xn.clear(),ye.clear(),wo.clear(),g1.clear(),ur.delete(0,ur.length),console.log("Room reset - all state cleared")}function No(e,t,n){Xn.set(e,{type:t,owner:n})}function Cs(e,t,n,r,o=0){ye.set(e,{oracleId:t,owner:n,zoneId:r,order:o,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{},v:0})}function Al(e,t,n,r,o){const i=ye.get(e);if(!i)return;const s=i.zoneId;ye.set(e,{...i,zoneId:t,order:n??i.order,v:i.v+1}),r&&!o&&Ve(r,"card_moved",{cardId:e,oracleId:i.oracleId,from:s,to:t,order:n})}function S1(e,t,n){const r=ye.get(e);r&&(ye.set(e,{...r,...t,v:r.v+1}),n&&Ve(n,"card_updated",{cardId:e,updates:t}))}function Dc(e,t,n){const r=ye.get(e);r&&(ye.set(e,{...r,tapped:t,v:r.v+1}),n&&Ve(n,"card_updated",{cardId:e,oracleId:r.oracleId,updates:{tapped:t}}))}function nr(e,t,n){S1(e,{faceDown:t},n)}function wa(e,t,n,r){const o=ye.get(e);if(!o)return;const i=Kt(o.zoneId),l=(i.length>0?Math.max(...i.map(c=>c.order)):0)+1;ye.set(e,{...o,position:{x:t,y:n},order:l,v:o.v+1})}function Jt(e,t,n,r){const o=ye.get(e);if(!o)return;const i={...o.counters},s=i[t]??0,l=Math.max(0,s+n);l===0?delete i[t]:i[t]=l,ye.set(e,{...o,counters:i,v:o.v+1}),r&&Ve(r,"counter_modified",{cardId:e,oracleId:o.oracleId,counterType:t,delta:n,newValue:l})}function C1(e,t,n){const r=_e.get(e);r&&(_e.set(e,{...r,lifeTotal:t}),n&&Ve(n,"life_total_set",{playerId:e,newTotal:t}))}function Mr(e,t,n){const r=_e.get(e);if(!r)return;const o=r.lifeTotal+t;_e.set(e,{...r,lifeTotal:o}),n&&Ve(n,"life_total_modified",{playerId:e,delta:t,newTotal:o})}function Lc(e,t){wo.set("current",{playerId:e,step:t}),Ve(e,"turn_changed",{step:t})}function ei(){return wo.get("current")}function Ve(e,t,n){ur.push([{timestamp:Date.now(),playerId:e,action:t,data:n,type:"game"}])}function _1(e,t){ur.push([{timestamp:Date.now(),playerId:e,action:"chat_message",data:{message:t},type:"chat"}])}function Kt(e){const t=[];return ye.forEach(n=>{n.zoneId===e&&t.push(n)}),t.sort((n,r)=>n.order-r.order)}function xo(e){const t=Kt(e);return t.length===0?0:Math.max(...t.map(n=>n.order))+1}function Oo(e,t){var l;const n=`deck-${e}`,r=`hand-${e}`,o=Kt(n),i=Math.min(t,o.length);if(i===0)return;const s=xo(r);for(let c=0;c<i;c++){const f=o[c],y=(l=Array.from(ye.entries()).find(([h,p])=>p===f))==null?void 0:l[0];y&&Al(y,r,s+c,e,!0)}Oi(),Ve(e,"draw_cards",{count:i})}function xa(e,t){var l;const n=`deck-${e}`,r=`graveyard-${e}`,o=Kt(n),i=Math.min(t,o.length);if(i===0)return;const s=xo(r);for(let c=0;c<i;c++){const f=o[c],y=(l=Array.from(ye.entries()).find(([h,p])=>p===f))==null?void 0:l[0];y&&Al(y,r,s+c,e,!0)}Oi(),Ve(e,"mill_cards",{count:i})}function ba(e,t,n=!1){var c;const r=`deck-${e}`,o=`exile-${e}`,i=Kt(r),s=Math.min(t,i.length);if(s===0)return;const l=xo(o);for(let f=0;f<s;f++){const y=i[f],h=(c=Array.from(ye.entries()).find(([p,g])=>g===y))==null?void 0:c[0];h&&(Al(h,o,l+f,e,!0),n&&nr(h,!0))}Oi(),Ve(e,"exile_from_deck",{count:s,faceDown:n})}function Vf(e){const t=`deck-${e}`,n=Kt(t);if(n.length===0)return null;const r=n[0],o=_e.get(e),i=(o==null?void 0:o.name)||e;return Zo.set("current",{cardName:r.oracleId,revealedBy:i,timestamp:Date.now()}),Ve(e,"reveal_top_card",{cardName:r.oracleId}),{cardName:r.oracleId,playerName:i}}function Oi(){Zo.delete("current")}function Dr(e,t){var s;const n=`deck-${e}`,r=Kt(n),o=Math.min(t,r.length),i=[];for(let l=0;l<o;l++){const c=r[l],f=(s=Array.from(ye.entries()).find(([y,h])=>h===c))==null?void 0:s[0];f&&i.push({cardId:f,card:c})}return i}function E1(e){var o;const t=`deck-${e}`,n=Kt(t),r=[];for(const i of n){const s=(o=Array.from(ye.entries()).find(([l,c])=>c===i))==null?void 0:o[0];s&&r.push({cardId:s,card:i})}return r}function T1(e,t,n=[]){const r=`deck-${e}`,o=Kt(r),i=o.length>0?Math.max(...o.map(s=>s.order)):0;t.forEach((s,l)=>{const c=ye.get(s);c&&c.zoneId===r&&ye.set(s,{...c,order:l,v:c.v+1})}),n.forEach((s,l)=>{const c=ye.get(s);c&&c.zoneId===r&&ye.set(s,{...c,order:i+l+1,v:c.v+1})}),Oi(),Ve(e,"scry",{topCount:t.length,bottomCount:n.length})}function ss(e){const t=`deck-${e}`;if(Kt(t).length===0)return;const r=[];ye.forEach((i,s)=>{i.zoneId===t&&r.push(s)});const o=[...r];for(let i=o.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[o[i],o[s]]=[o[s],o[i]]}o.forEach((i,s)=>{const l=ye.get(i);l&&ye.set(i,{...l,order:s,v:l.v+1})}),Oi(),Ve(e,"shuffle_deck",{cardCount:o.length})}function Lt(e,t,n="auto",r){const o=ye.get(e);if(!o)return;let i;n==="top"?(Kt(t).forEach(f=>{var h;const y=(h=Array.from(ye.entries()).find(([p,g])=>g===f))==null?void 0:h[0];y&&ye.set(y,{...f,order:f.order+1,v:f.v+1})}),i=0):i=xo(t);const s=o.zoneId.startsWith("battlefield-"),l=t.startsWith("battlefield-");if(s&&!l&&o.tapped){const c=o.zoneId;ye.set(e,{...o,tapped:!1,zoneId:t,order:i,v:o.v+1}),r&&Ve(r,"card_moved",{cardId:e,oracleId:o.oracleId,from:c,to:t,order:i})}else Al(e,t,i,r)}function ka(e,t,n=1,r){const o=`battlefield-${e}`,i=xo(o);for(let s=0;s<n;s++){const l=`${e}-token-${Date.now()}-${s}-${crypto.randomUUID()}`;ye.set(l,{oracleId:t,owner:e,zoneId:o,order:i+s,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{isToken:!0,imageUrl:r},v:0})}Ve(e,"token_created",{tokenName:t,quantity:n})}function j1(e,t){const n=ye.get(e);n&&(ye.delete(e),t&&Ve(t,"card_deleted",{cardId:e,oracleId:n.oracleId}))}function Yr(){return`crdt-cards-${window.location.hash.replace(/^#/,"")||"default"}`}const Kr=new p1(Yr(),Ft,{signaling:["wss://crdt-cards-signaling.happyground-bfbe302d.westus2.azurecontainerapps.io"]});Kr.on("status",e=>{console.log("WebRTC status:",e.connected?"connected":"disconnected")});Kr.on("synced",e=>{console.log("YJS synced:",e.synced)});window.addEventListener("popstate",()=>{console.log("Room changed, reloading to connect to new room..."),window.location.reload()});console.log("YJS document initialized:",Ft.guid);console.log("Room name:",Yr());console.log("Game state maps ready:",{players:_e.size,zones:Xn.size,cards:ye.size});const ed="crdt-cards-decks",td="crdt-cards-last-deck",_s=[{id:"starter-atraxa",name:"Atraxa, Praetors' Voice",file:"atraxa.txt",description:"Proliferate & Superfriends"},{id:"starter-urdragon",name:"The Ur-Dragon",file:"urdragon.txt",description:"Dragon tribal powerhouse"},{id:"starter-edgar",name:"Edgar Markov",file:"edgar-markov.txt",description:"Vampire tribal aggro"},{id:"starter-krenko",name:"Krenko, Mob Boss",file:"krenko.txt",description:"Goblin tribal combo"},{id:"starter-kaalia",name:"Kaalia of the Vast",file:"kaalia.txt",description:"Angels, Demons, Dragons"}];function ro(){try{const e=localStorage.getItem(ed);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load stored decks:",e),[]}}function nd(e){try{const t=ro(),n=t.findIndex(r=>r.id===e.id);n>=0?t[n]=e:t.push(e),localStorage.setItem(ed,JSON.stringify(t))}catch(t){console.error("Failed to save deck:",t)}}function R1(e){try{const t=ro().filter(n=>n.id!==e);localStorage.setItem(ed,JSON.stringify(t)),Dm()===e&&localStorage.removeItem(td)}catch(t){console.error("Failed to delete deck:",t)}}function Dm(){return localStorage.getItem(td)}function Yf(e){localStorage.setItem(td,e)}function M1(e){const t=e.toLowerCase();return t.includes("moxfield.com")?"moxfield":t.includes("archidekt.com")?"archidekt":t.includes("edhrec.com")?"edhrec":"unknown"}async function D1(e){switch(M1(e)){case"moxfield":return Kf(e);case"archidekt":return L1(e);case"edhrec":return A1();default:return Kf(e)}}async function Kf(e){try{const t=N1(e);if(!t)return{success:!1,error:"Invalid Moxfield URL format"};const n=`https://api.moxfield.com/v2/decks/all/${t}`,o=`https://corsproxy.io/?${encodeURIComponent(n)}`,i=await fetch(o);if(!i.ok)return i.status===404?{success:!1,error:"Deck not found on Moxfield"}:{success:!1,error:`Failed to fetch deck (${i.status})`};const s=await i.json(),l=[];let c=0;if(s.mainboard)for(const[y,h]of Object.entries(s.mainboard)){const p=h.quantity||1;l.push({name:y,quantity:p}),c+=p}const f={id:crypto.randomUUID(),name:s.name||"Imported Deck",moxfieldUrl:e,moxfieldId:t,cardCount:c,importedAt:Date.now(),cards:l};return nd(f),{success:!0,deck:f}}catch(t){return console.error("Failed to import from Moxfield:",t),{success:!1,error:"Network error or invalid deck"}}}async function L1(e){var t,n,r;try{const o=e.match(/archidekt\.com\/decks\/(\d+)/);if(!o)return{success:!1,error:"Invalid Archidekt URL format"};const i=o[1],s=`https://archidekt.com/api/decks/${i}/`,c=`https://corsproxy.io/?${encodeURIComponent(s)}`,f=await fetch(c);if(!f.ok)return f.status===404?{success:!1,error:"Deck not found on Archidekt"}:{success:!1,error:`Failed to fetch deck (${f.status})`};const y=await f.json(),h=[];let p=0;if(y.cards&&Array.isArray(y.cards))for(const v of y.cards){const b=((n=(t=v.card)==null?void 0:t.oracleCard)==null?void 0:n.name)||((r=v.card)==null?void 0:r.name),z=v.quantity||1;b&&(h.push({name:b,quantity:z}),p+=z)}const g={id:crypto.randomUUID(),name:y.name||"Imported Deck",moxfieldUrl:e,moxfieldId:i,cardCount:p,importedAt:Date.now(),cards:h};return nd(g),{success:!0,deck:g}}catch(o){return console.error("Failed to import from Archidekt:",o),{success:!1,error:"Network error or invalid deck"}}}async function A1(){return{success:!1,error:"EDHRec import not yet implemented. Please use Moxfield or Archidekt URLs for now."}}async function z1(e,t){try{const n=await fetch(`/starter-decks/${e}`);if(!n.ok)return n.status===404?{success:!1,error:`Starter deck file not found: ${e}`}:{success:!1,error:`Failed to load starter deck (${n.status})`};const r=await n.text(),o=[];let i=0;const s=r.split(`
`);for(const c of s){const f=c.trim();if(!f)continue;const y=f.match(/^(\d+)\s+(.+)$/);if(y){const h=parseInt(y[1],10),p=y[2].trim();o.push({name:p,quantity:h}),i+=h}}if(o.length===0)return{success:!1,error:"No cards found in starter deck file"};const l={id:crypto.randomUUID(),name:t,moxfieldUrl:`local://${e}`,moxfieldId:e,cardCount:i,importedAt:Date.now(),cards:o};return nd(l),{success:!0,deck:l}}catch(n){return console.error("Failed to import from local file:",n),{success:!1,error:"Failed to load starter deck file"}}}function N1(e){const t=e.trim();let n=t.match(/moxfield\.com\/decks\/([a-zA-Z0-9_-]+)/);return n?n[1]:/^[a-zA-Z0-9_-]+$/.test(t)?t:null}function Gf(e,t){const n=`deck-${e}`,r=[];ye.forEach((i,s)=>{i.zoneId===n&&r.push(s)}),r.forEach(i=>ye.delete(i));let o=0;for(const{name:i,quantity:s}of t.cards)for(let l=0;l<s;l++)Cs(`${e}-deck-${i}-${l}`,i,e,n,o++);Ve(e,"deck_imported",{deckName:t.name,cardCount:t.cardCount})}function rd({title:e,max:t,onConfirm:n,onCancel:r}){const[o,i]=H.useState("1"),s=f=>{f.preventDefault();const y=parseInt(o,10);y>0&&y<=t&&n(y)},l=parseInt(o,10),c=!isNaN(l)&&l>0&&l<=t;return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:d.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"300px",width:"90%"},onClick:f=>f.stopPropagation(),children:[d.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),d.jsxs("form",{onSubmit:s,children:[d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("input",{type:"number",value:o,onChange:f=>i(f.target.value),min:1,max:t,autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1.25rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",textAlign:"center",outline:"none"},onFocus:f=>{f.target.style.borderColor="#2196F3",f.target.select()},onBlur:f=>{f.target.style.borderColor="#ddd"}}),d.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#666",textAlign:"center"},children:["Max: ",t]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),d.jsx("button",{type:"submit",disabled:!c,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:c?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:c?"pointer":"not-allowed"},onMouseEnter:f=>{c&&(f.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:f=>{c&&(f.currentTarget.style.backgroundColor="#4CAF50")},children:"Confirm"})]})]})]})})}function O1({title:e,placeholder:t="",onConfirm:n,onCancel:r}){const[o,i]=H.useState(""),s=c=>{c.preventDefault(),o.trim()&&n(o.trim())},l=o.trim().length>0;return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:d.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:c=>c.stopPropagation(),children:[d.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),d.jsxs("form",{onSubmit:s,children:[d.jsx("div",{style:{marginBottom:"1.5rem"},children:d.jsx("input",{type:"text",value:o,onChange:c=>i(c.target.value),placeholder:t,autoFocus:!0,maxLength:30,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:c=>{c.target.style.borderColor="#2196F3"},onBlur:c=>{c.target.style.borderColor="#ddd"}})}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),d.jsx("button",{type:"submit",disabled:!l,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:l?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:l?"pointer":"not-allowed"},onMouseEnter:c=>{l&&(c.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:c=>{l&&(c.currentTarget.style.backgroundColor="#4CAF50")},children:"Add"})]})]})]})})}const Lm="crdt-cards-image-cache",I1=7,ls=new Map,Sa=new Map;function F1(){try{const e=localStorage.getItem(Lm);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load image cache:",e),{}}}function P1(e){try{localStorage.setItem(Lm,JSON.stringify(e))}catch(t){console.error("Failed to save image cache:",t)}}function B1(e){const t=Date.now(),n=I1*24*60*60*1e3;return t-e.cachedAt<n}async function U1(e){var t,n;try{const r=`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(e)}`,o=await fetch(r);if(!o.ok)return console.warn(`Card not found on Scryfall: ${e}`),null;const i=await o.json();return i.card_faces&&i.card_faces.length>0?((t=i.card_faces[0].image_uris)==null?void 0:t.normal)||null:((n=i.image_uris)==null?void 0:n.normal)||null}catch(r){return console.error(`Failed to fetch card image for ${e}:`,r),null}}function od(e){const t=ls.get(e),[n,r]=H.useState(t||null),[o,i]=H.useState(!t),[s,l]=H.useState(!1);return H.useEffect(()=>{if(!e){r(null),i(!1),l(!1);return}let c=!0;async function f(){const y=ls.get(e);if(y){c&&(r(y),i(!1),l(!1));return}const h=Sa.get(e);if(h){const b=await h;c&&(r(b),i(!1),l(!b));return}i(!0),l(!1);const p=F1(),g=p[e];if(g&&B1(g)){ls.set(e,g.imageUrl),c&&(r(g.imageUrl),i(!1));return}const v=U1(e);Sa.set(e,v);try{const b=await v;c&&(b?(r(b),l(!1),ls.set(e,b),p[e]={imageUrl:b,scryfallId:"",cachedAt:Date.now()},P1(p)):(r(null),l(!0)),i(!1))}finally{Sa.delete(e)}}return f(),()=>{c=!1}},[e]),{imageUrl:n,loading:o,error:s}}function Ac({card:e,cardId:t,playerId:n,isInteractive:r=!0,forceFaceDown:o=!1,opponentPosition:i=null}){var F,B;const[s,l]=H.useState(!1),[c,f]=H.useState(!1),[y,h]=H.useState(!1),[p,g]=H.useState(!1),[v,b]=H.useState(null),[z,k]=H.useState(null),[S,u]=H.useState(null),[w,C]=H.useState(null),[j,_]=H.useState(null),[R,A]=H.useState([]),[E,M]=H.useState([]),[O,W]=H.useState(!1),[ee,se]=H.useState(!1),[de,ve]=H.useState(!1),[U,K]=H.useState(new Set),ue=H.useRef(null),ae=H.useRef(null),G=H.useRef(),Z=o||e.faceDown,ne=e.zoneId.startsWith("battlefield-"),te=(F=e.metadata)==null?void 0:F.imageUrl,{imageUrl:V,loading:ce}=od(Z||te?"":e.oracleId),pe=te||V;H.useEffect(()=>{const D=()=>{const Y=[];os.forEach((J,q)=>{Y.push(q)}),A(Y)};return os.observe(D),D(),()=>{os.unobserve(D)}},[]),H.useEffect(()=>{const D=()=>{const Y=[];_e.forEach((J,q)=>{q!==e.owner&&Y.push({id:q,name:J.name})}),M(Y)};return _e.observe(D),D(),()=>{_e.unobserve(D)}},[e.owner]),H.useEffect(()=>{const D=()=>{ve(is(t))};return v1(D),D(),()=>{w1(D)}},[t]);const be=D=>{os.set(D,!0);const Y=U.has(t);console.log("handleAddCounterType:",{cardId:t,counterType:D,currentlySelected:Y,menuSelectedCardsSize:U.size,menuSelectedCardIds:Array.from(U)}),Y&&U.size>1?(console.log("Applying to multiple cards:",Array.from(U)),U.forEach(J=>{Jt(J,D,1,n)})):(console.log("Applying to single card:",t),Jt(t,D,1,n))},Se={width:"120px",height:"160px",border:"none",borderRadius:"8px",backgroundColor:Z?"#333":"#fff",padding:"0.5rem",position:"relative",transition:"transform 0.3s ease",transform:i==="top"?`scaleX(-1) rotate(180deg) rotate(${e.tapped?90:0}deg)`:`rotate(${e.tapped?90:0}deg)`,cursor:r?"pointer":"default",display:"flex",flexDirection:"column",justifyContent:"space-between"},he={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"#666"},P={position:"absolute",bottom:"5px",right:"5px",backgroundColor:"#9C27B0",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold"},re=w?{position:"fixed",top:`${w.top}px`,left:`${w.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"},le={padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},N=D=>{if(!r)return;if(D.stopPropagation(),D.ctrlKey||D.metaKey){m1(t);return}if(!ne){Mc();return}const Y=is(t),J=Uo();if(Y&&J.size>1){const q=!e.tapped;J.forEach(oe=>{Dc(oe,q,n)})}else Mc(),Dc(t,!e.tapped,n)},I=(D,Y,J)=>{const q=`${D}-${n}`;U.has(t)&&U.size>1?U.forEach(me=>{Lt(me,q,Y||"auto",n),J!==void 0&&nr(me,J,n)}):(Lt(t,q,Y||"auto",n),J!==void 0&&nr(t,J,n)),l(!1),f(!1)},$=D=>{const Y=`battlefield-${D}`;U.has(t)&&U.size>1?U.forEach(q=>{Lt(q,Y,"auto",n),nr(q,!1,n)}):(Lt(t,Y,"auto",n),nr(t,!1,n)),l(!1),f(!1),g(!1)},X=D=>{if(!r){D.preventDefault();return}W(!0);const Y=D.currentTarget.getBoundingClientRect(),J=D.clientX-Y.left,q=D.clientY-Y.top;D.dataTransfer.effectAllowed="move",D.dataTransfer.setData("cardId",t),D.dataTransfer.setData("fromZoneId",e.zoneId),D.dataTransfer.setData("playerId",n),D.dataTransfer.setData("order",e.order.toString()),D.dataTransfer.setData("dragOffsetX",J.toString()),D.dataTransfer.setData("dragOffsetY",q.toString());const oe=Uo();if(de&&oe.size>1){const me=Ft.getMap("cards"),Me=[];e.position?me.forEach((Le,Pt)=>{const vt=Le;oe.has(Pt)&&vt.position&&Me.push({id:Pt,relativeX:vt.position.x-e.position.x,relativeY:vt.position.y-e.position.y})}):oe.forEach(Le=>{Me.push({id:Le,relativeX:0,relativeY:0})}),D.dataTransfer.setData("selectedCards",JSON.stringify(Me))}try{D.dataTransfer.setDragImage(D.currentTarget,J,q)}catch(me){console.warn("Could not set custom drag image:",me)}},T=()=>{W(!1)},a=()=>{Z||!pe||O||(G.current=window.setTimeout(()=>{se(!0)},600))},m=()=>{G.current&&window.clearTimeout(G.current),se(!1)};H.useEffect(()=>()=>{G.current&&window.clearTimeout(G.current)},[]);const x=()=>{if(!ae.current)return null;const D=ae.current.getBoundingClientRect(),Y=488,J=680,q=16;let oe=D.right+q,me=D.top;return oe+Y>window.innerWidth-8&&(oe=D.left-Y-q),me+J>window.innerHeight-8&&(me=Math.max(8,window.innerHeight-J-8)),{top:me,left:oe}},L=ne&&e.position?{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,zIndex:e.order}:{position:"relative"};return d.jsxs("div",{style:L,"data-card-id":t,"data-order":e.order,"data-zone-id":e.zoneId,children:[d.jsxs("div",{ref:ae,style:{...Se,padding:0,overflow:"hidden",opacity:O?.5:1,cursor:r?"grab":"default",border:"none",outline:de?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:de?"0 0 12px rgba(33, 150, 243, 0.8)":"none"},title:Z&&e.owner!==n?void 0:e.oracleId,draggable:r,onDragStart:X,onDragEnd:T,onClick:N,onContextMenu:D=>{if(!r)return;D.preventDefault();const Y=Uo(),J=is(t);K(Y),console.log("Menu opened - captured selection:",{cardId:t,currentlySelected:J,selectedCardsSize:Y.size,selectedCardIds:Array.from(Y)}),l(!s)},onMouseEnter:a,onMouseLeave:m,children:[Z?d.jsx("div",{style:he,children:""}):ce?d.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999"},children:"Loading..."}):pe?d.jsx("img",{src:pe,alt:Z&&e.owner!==n?"Card back":e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}):d.jsxs("div",{style:{width:"100%",height:"100%",padding:"0.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[d.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",wordBreak:"break-all"},children:Z&&e.owner!==n?"Card back":e.oracleId}),d.jsx("div",{style:{fontSize:"0.65rem",color:"#666"},children:Z&&e.owner!==n?"":"No image"})]}),Object.entries(e.counters).length>0&&d.jsxs("div",{style:{position:"absolute",top:"5px",right:"5px",display:"flex",flexDirection:"column",gap:"2px",alignItems:"flex-end"},children:[Object.entries(e.counters).slice(0,3).map(([D,Y])=>{let J=Y.toString();return D==="+1/+1"?J=`+${Y}`:D==="Loyalty"?J=`L${Y}`:D==="-1/-1"?J=`-${Y}`:J=Y.toString(),d.jsx("div",{style:{backgroundColor:D==="Loyalty"?"#9C27B0":"#FF5722",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`${D}: ${Y}`,children:J},D)}),Object.entries(e.counters).length>3&&d.jsx("div",{style:{backgroundColor:"#757575",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`+${Object.entries(e.counters).length-3} more types`,children:"..."})]}),e.attachments.length>0&&d.jsxs("div",{style:P,title:`${e.attachments.length} attachments`,children:["+",e.attachments.length]}),r&&(!Z||e.owner===n)&&d.jsx("button",{ref:ue,onClick:D=>{D.stopPropagation();const Y=Uo(),J=is(t);if(K(Y),console.log("Menu button clicked - captured selection:",{cardId:t,currentlySelected:J,selectedCardsSize:Y.size,selectedCardIds:Array.from(Y)}),!s&&ue.current){const q=ue.current.getBoundingClientRect(),oe=window.innerHeight,me=window.innerWidth;let Me=q.right+8,Le=q.top;const Pt=150;Me+Pt>me&&(Me=q.left-Pt-8);const vt=150;Le+vt>oe&&(Le=Math.max(8,oe-vt-8)),C({top:Le,left:Me})}l(!s)},style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""})]}),r&&s&&vr.createPortal(d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>l(!1)}),d.jsxs("div",{style:re,children:[d.jsxs("div",{style:{...le,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5",h(!1),k(null);const Y=D.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let oe=Y.right+4,me=Y.top;const Me=200,Le=300;oe+Me>J&&(oe=Y.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),b({top:me,left:oe}),f(!0)},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:[d.jsxs("span",{children:["Move to...",U.has(t)&&U.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),d.jsx("span",{children:""})]}),d.jsxs("div",{style:{...le,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5",f(!1),b(null);const Y=D.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let oe=Y.right+4,me=Y.top;const Me=250,Le=400;oe+Me>J&&(oe=Y.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),k({top:me,left:oe}),h(!0)},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:[d.jsxs("span",{children:["Counters...",U.has(t)&&U.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),d.jsx("span",{children:""})]}),(ne||e.zoneId.startsWith("exile-"))&&d.jsxs("div",{style:le,onClick:D=>{D.stopPropagation();const Y=U.has(t),J=!e.faceDown;Y&&U.size>1?U.forEach(q=>{nr(q,J,n)}):nr(t,J,n),l(!1)},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:[e.faceDown?" Turn face up":" Turn face down",U.has(t)&&U.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),((B=e.metadata)==null?void 0:B.isToken)&&d.jsx("div",{style:{...le,backgroundColor:"#ffebee",color:"#c62828",fontWeight:"bold",borderBottom:"none"},onClick:D=>{D.stopPropagation(),j1(t,n),l(!1)},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#ffcdd2"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="#ffebee"},children:" Delete Token"})]}),y&&z&&d.jsxs("div",{style:{position:"fixed",top:`${z.top}px`,left:`${z.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"220px",maxHeight:"400px",overflowY:"auto"},onMouseEnter:()=>h(!0),onMouseLeave:()=>{h(!1),k(null)},children:[Object.entries(e.counters).length>0&&d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"EXISTING COUNTERS"}),Object.entries(e.counters).map(([D,Y])=>d.jsxs("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{style:{fontWeight:"bold"},children:[D,": ",Y]}),d.jsxs("div",{style:{display:"flex",gap:"4px"},children:[d.jsx("button",{onClick:J=>{J.stopPropagation(),U.has(t)&&U.size>1?U.forEach(oe=>{Jt(oe,D,1,n)}):Jt(t,D,1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"+1"}),d.jsx("button",{onClick:J=>{J.stopPropagation(),U.has(t)&&U.size>1?U.forEach(oe=>{Jt(oe,D,-1,n)}):Jt(t,D,-1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"-1"}),d.jsx("button",{onClick:J=>{J.stopPropagation(),_({type:"set",counterType:D}),l(!1),h(!1)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"Set"})]})]},D))]}),d.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADD"}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"4px",borderBottom:Object.entries(e.counters).length>0?"none":"1px solid #eee"},children:[d.jsx("button",{onClick:D=>{D.stopPropagation(),be("+1/+1")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"+1/+1"}),d.jsx("button",{onClick:D=>{D.stopPropagation(),be("Loyalty")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Loyalty"}),R.filter(D=>D!=="+1/+1"&&D!=="Loyalty").map(D=>d.jsx("button",{onClick:Y=>{Y.stopPropagation(),be(D)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:D},D)),d.jsx("button",{onClick:D=>{D.stopPropagation(),_({type:"add"}),l(!1),h(!1)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Custom..."})]})]}),c&&v&&d.jsxs("div",{style:{position:"fixed",top:`${v.top}px`,left:`${v.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>f(!0),onMouseLeave:()=>{f(!1),b(null)},children:[d.jsx("div",{style:le,onClick:()=>I("hand",void 0,!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Hand"}),d.jsx("div",{style:le,onClick:()=>I("battlefield",void 0,!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-up)"}),d.jsx("div",{style:le,onClick:()=>I("battlefield",void 0,!0),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-down)"}),d.jsx("div",{style:le,onClick:()=>I("graveyard",void 0,!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Graveyard"}),d.jsx("div",{style:le,onClick:()=>I("exile",void 0,!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Exile (face-up)"}),d.jsx("div",{style:le,onClick:()=>I("exile",void 0,!0),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Exile (face-down)"}),d.jsx("div",{style:le,onClick:()=>I("deck","top",!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Deck (top)"}),d.jsx("div",{style:le,onClick:()=>I("deck","bottom",!1),onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:" Deck (bottom)"}),E.length>0&&d.jsx("div",{style:{...le,borderBottom:"none"},onMouseEnter:D=>{D.currentTarget.style.backgroundColor="#f5f5f5";const Y=D.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let oe=Y.right+4,me=Y.top;const Me=180,Le=150;oe+Me>J&&(oe=Y.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),u({top:me,left:oe}),g(!0)},onMouseLeave:D=>{D.currentTarget.style.backgroundColor="white"},children:d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{children:[" Player",U.has(t)&&U.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),d.jsx("span",{children:""})]})})]}),p&&S&&E.length>0&&d.jsx("div",{style:{position:"fixed",top:`${S.top}px`,left:`${S.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10001,minWidth:"160px"},onMouseEnter:()=>g(!0),onMouseLeave:()=>{g(!1),u(null)},children:E.map((D,Y)=>{const J=Ze(D.id);return d.jsxs("div",{style:{...le,borderBottom:Y===E.length-1?"none":"1px solid #eee",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>$(D.id),onMouseEnter:q=>{q.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:q=>{q.currentTarget.style.backgroundColor="white"},children:[d.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:J,flexShrink:0}}),d.jsx("span",{children:D.name})]},D.id)})})]}),document.body),r&&(j==null?void 0:j.type)==="set"&&j.counterType&&d.jsx(rd,{title:`Set ${j.counterType} counters`,max:99,onConfirm:D=>{if(U.has(t)&&U.size>1)U.forEach(J=>{const q=Ft.getMap("cards").get(J);if(q){const oe=q.counters[j.counterType]||0;Jt(J,j.counterType,D-oe,n)}});else{const J=e.counters[j.counterType]||0;Jt(t,j.counterType,D-J,n)}_(null)},onCancel:()=>_(null)}),r&&(j==null?void 0:j.type)==="add"&&d.jsx(O1,{title:"Add Counter Type",placeholder:"e.g., +1/+1, Loyalty, Charge",onConfirm:D=>{U.has(t)&&U.size>1?U.forEach(J=>{Jt(J,D,1,n)}):Jt(t,D,1,n),_(null)},onCancel:()=>_(null)}),ee&&pe&&!Z&&(()=>{const D=x();if(!D)return null;const Y=Object.entries(e.counters).length>0;return vr.createPortal(d.jsxs("div",{style:{position:"fixed",top:`${D.top}px`,left:`${D.left}px`,width:"488px",zIndex:1e4,pointerEvents:"none"},children:[d.jsx("img",{src:pe,alt:Z&&e.owner!==n?"Card back":e.oracleId,style:{width:"100%",height:"680px",borderRadius:"12px",border:"4px solid #fff",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",objectFit:"cover"}}),Y&&d.jsxs("div",{style:{marginTop:"8px",backgroundColor:"rgba(0, 0, 0, 0.9)",border:"4px solid #fff",borderRadius:"8px",padding:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[d.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#fff",marginBottom:"8px"},children:"Counters:"}),Object.entries(e.counters).map(([J,q])=>d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"0.85rem",color:"#fff"},children:[d.jsx("span",{children:J}),d.jsxs("span",{style:{fontWeight:"bold"},children:["",q]})]},J))]})]}),document.body)})()]})}function fr({zoneName:e,zoneType:t,cards:n,playerColor:r,playerId:o,onDrawCards:i,onMillCards:s,onExileFromDeck:l,onShuffleDeck:c,isInteractive:f=!0,viewerPlayerId:y,zoneId:h,showHeader:p=!0,opponentPosition:g=null}){const[v,b]=H.useState(null),[z,k]=H.useState(!1),[S,u]=H.useState(!1),[w,C]=H.useState(null),[j,_]=H.useState(null),[R,A]=H.useState("none"),[E,M]=H.useState({width:0,height:0}),O=H.useRef(null),W=t==="battlefield"&&y&&o!==y;H.useEffect(()=>{if(!O.current)return;const G=new ResizeObserver(Z=>{const ne=Z[0];ne&&M({width:ne.contentRect.width,height:ne.contentRect.height})});return G.observe(O.current),()=>G.disconnect()},[]),H.useEffect(()=>{if(!W||n.length===0||E.width===0){A("none");return}let G=1/0,Z=1/0,ne=-1/0,te=-1/0;const V=120,ce=160;n.forEach(({card:F})=>{var Y,J;const B=((Y=F.position)==null?void 0:Y.x)||0,D=((J=F.position)==null?void 0:J.y)||0;G=Math.min(G,B),Z=Math.min(Z,D),ne=Math.max(ne,B+V),te=Math.max(te,D+ce)});const pe=40,be=ne-G+pe*2,Se=te-Z+pe*2,he=(G+ne)/2,P=(Z+te)/2,re=E.width,le=E.height,N=re/be,I=le/Se,$=Math.min(Math.max(Math.min(N,I),.25),1),X=re/2,T=le/2;let a=X-he*$;const m=T-P*$;g==="top"&&(a=X+he*$);const x=`translate(${a}px, ${m}px) scale(${$})`,L=g==="top"?`${x} scaleX(-1)`:x;A(L)},[W,n,o,y,E]);const ee=G=>{G.preventDefault(),G.dataTransfer.dropEffect="move",k(!0)},se=()=>{k(!1)},de=G=>{G.preventDefault(),k(!1);const Z=G.dataTransfer.getData("cardId"),ne=G.dataTransfer.getData("fromZoneId"),te=G.dataTransfer.getData("playerId"),V=G.dataTransfer.getData("selectedCards");if(te!==o){console.log("Cannot drop opponent cards");return}if(t==="battlefield"&&O.current){const ce=O.current.getBoundingClientRect(),pe=parseFloat(G.dataTransfer.getData("dragOffsetX")||"0"),be=parseFloat(G.dataTransfer.getData("dragOffsetY")||"0"),Se=G.clientX-ce.left-pe,he=G.clientY-ce.top-be;if(V)try{const P=JSON.parse(V);P.some(({relativeX:le,relativeY:N})=>le!==0||N!==0)?P.forEach(({id:le,relativeX:N,relativeY:I})=>{G.dataTransfer.getData("fromZoneId")!==h&&Lt(le,h,"auto",o),wa(le,Se+N,he+I,o)}):P.forEach(({id:X},T)=>{G.dataTransfer.getData("fromZoneId")!==h&&Lt(X,h,"auto",o);const m=T%5,x=Math.floor(T/5),L=Se+m*130,F=he+x*170;wa(X,L,F,o)});return}catch(P){console.error("Failed to parse selected cards data:",P)}ne!==h&&Lt(Z,h,"auto",o),wa(Z,Se,he);return}if(V)try{const ce=JSON.parse(V);ne!==h&&ce.forEach(({id:pe})=>{Lt(pe,h,"auto",o)});return}catch(ce){console.error("Failed to parse selected cards data:",ce)}ne!==h&&Lt(Z,h,"auto",o)},ve=G=>{if(t!=="battlefield"||G.button!==0||!O.current||G.target.closest("[data-card-id]"))return;const ne=O.current.getBoundingClientRect(),te=G.clientX-ne.left,V=G.clientY-ne.top;u(!0),C({x:te,y:V}),_({x:te,y:V}),!G.ctrlKey&&!G.metaKey&&Mc()},U=G=>{if(!S||!O.current||!w)return;const Z=O.current.getBoundingClientRect(),ne=G.clientX-Z.left,te=G.clientY-Z.top;_({x:ne,y:te})},K=()=>{if(!S||!w||!j||!O.current){u(!1);return}const G=Math.min(w.x,j.x),Z=Math.max(w.x,j.x),ne=Math.min(w.y,j.y),te=Math.max(w.y,j.y),V=[];n.forEach(({id:ce,card:pe})=>{if(!pe.position)return;const be=pe.position.x+60,Se=pe.position.y+80;be>=G&&be<=Z&&Se>=ne&&Se<=te&&V.push(ce)}),V.length>0&&y1(V),u(!1),C(null),_(null)};if(t==="deck")return d.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),d.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),d.jsx("div",{style:{backgroundColor:"#333",border:"2px solid #666",borderRadius:"8px",padding:"2rem 1rem",textAlign:"center",color:"white",marginBottom:"0.75rem",fontSize:"2rem"},children:""}),d.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[d.jsx("button",{onClick:()=>i==null?void 0:i(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw 1"}),d.jsx("button",{onClick:()=>b({title:"Draw how many cards?",onConfirm:G=>{i==null||i(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw N"}),d.jsx("button",{onClick:()=>s==null?void 0:s(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill 1"}),d.jsx("button",{onClick:()=>b({title:"Mill how many cards?",onConfirm:G=>{s==null||s(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill N"}),d.jsx("button",{onClick:()=>l==null?void 0:l(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#9C27B0":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Exile 1"}),d.jsx("button",{onClick:()=>c==null?void 0:c(),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Shuffle"})]}),v&&d.jsx(rd,{title:v.title,max:n.length,onConfirm:v.onConfirm,onCancel:()=>b(null)})]});if(t==="battlefield")return d.jsxs("div",{style:{backgroundColor:z?"#e3f2fd":"#f5f5f5",borderRadius:"8px",height:"100%",display:"flex",flexDirection:"column",border:z?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},"data-zone-id":h,onDragOver:ee,onDragLeave:se,onDrop:de,children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 1rem",marginBottom:"0.5rem",flexShrink:0},children:[d.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),d.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),d.jsx("div",{ref:O,style:{position:"relative",flex:1,minHeight:0,cursor:S?"crosshair":"default",overflow:W?"hidden":"visible"},onMouseDown:ve,onMouseMove:U,onMouseUp:K,onMouseLeave:()=>{S&&K()},children:d.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",transform:W?R:g==="top"?"scaleX(-1)":"none",transformOrigin:"0 0",transition:"transform 0.3s ease"},children:[n.length===0?d.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards on battlefield"}):n.map(({id:G,card:Z})=>d.jsx(Ac,{cardId:G,card:Z,playerId:y||o,isInteractive:f,forceFaceDown:!1,opponentPosition:g},G)),S&&w&&j&&d.jsx("div",{style:{position:"absolute",left:`${Math.min(w.x,j.x)}px`,top:`${Math.min(w.y,j.y)}px`,width:`${Math.abs(j.x-w.x)}px`,height:`${Math.abs(j.y-w.y)}px`,border:"2px dashed #2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",pointerEvents:"none",zIndex:1e4}})]})})]});const ae=(G=>G<=5?100:G<=10?80:G<=15?60:50)(n.length);return d.jsxs("div",{style:{backgroundColor:z?"#e3f2fd":"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",minHeight:"200px",border:z?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",overflow:"visible"},"data-zone-id":h,onDragOver:ee,onDragLeave:se,onDrop:de,children:[p&&d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),d.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),d.jsx("div",{style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"visible",minHeight:"160px",alignItems:"flex-start",paddingTop:"1rem",paddingBottom:"0.5rem"},children:n.length===0?d.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards in this zone"}):n.map(({id:G,card:Z},ne)=>{const te=t==="hand"&&!!y&&o!==y;return d.jsx("div",{style:{marginLeft:ne===0?"0":`-${100-ae}px`,position:"relative",zIndex:ne,transition:"all 0.2s ease",isolation:"auto"},onMouseEnter:V=>{V.currentTarget.style.zIndex="999",V.currentTarget.style.transform="translateY(-10px)"},onMouseLeave:V=>{V.currentTarget.style.zIndex=String(ne),V.currentTarget.style.transform="translateY(0)"},children:d.jsx(Ac,{cardId:G,card:Z,playerId:y||o,isInteractive:f,forceFaceDown:te},G)},G)})})]})}const $1="crdt-cards-username";function W1({onJoin:e,playerCount:t}){const[n,r]=H.useState(""),[o,i]=H.useState([]),[s,l]=H.useState(""),[c,f]=H.useState(!1),[y,h]=H.useState(""),[p,g]=H.useState(!1),[v,b]=H.useState(""),z=H.useRef(null);H.useEffect(()=>{const A=localStorage.getItem($1);A&&(r(A),setTimeout(()=>{z.current&&z.current.select()},100));const E=ro();i(E);const M=Dm();if(M){const O=E.find(ee=>ee.id===M),W=_s.find(ee=>ee.id===M);(O||W)&&l(M)}},[]);const k=A=>{A.preventDefault(),n.trim()&&s&&e(n.trim(),s)},S=async()=>{if(!y.trim())return;g(!0),b("");const A=await D1(y.trim());if(A.success&&A.deck){const E=ro();i(E),l(A.deck.id),f(!1),h("")}else b(A.error||"Failed to import deck");g(!1)},u=A=>{if(confirm("Delete this deck from your library?")){R1(A);const E=ro();i(E),s===A&&l("")}},w=o.find(A=>A.id===s),C=_s.find(A=>A.id===s),j=w||C,_=t>=4,R=n.trim()&&s;return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:d.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[d.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem",textAlign:"center"},children:" Join Game"}),d.jsxs("p",{style:{margin:"0 0 1rem 0",textAlign:"center",fontSize:"0.9rem",color:"#666"},children:["Room: ",d.jsx("strong",{style:{fontFamily:"monospace",color:"#333"},children:window.location.hash.replace(/^#/,"")||"default"})]}),_?d.jsxs("div",{children:[d.jsx("p",{style:{textAlign:"center",color:"#F44336",marginBottom:"1rem"},children:"This game is full (4/4 players)"}),d.jsx("p",{style:{textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Please try a different room or wait for a player to leave."})]}):d.jsxs("form",{onSubmit:k,children:[d.jsxs("p",{style:{marginBottom:"1rem",textAlign:"center",color:"#666"},children:["Players in room: ",t,"/4"]}),d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("label",{htmlFor:"player-name",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Your Name"}),d.jsx("input",{ref:z,id:"player-name",type:"text",value:n,onChange:A=>r(A.target.value),placeholder:"Enter your name...",autoFocus:!0,maxLength:20,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:A=>{A.target.style.borderColor="#2196F3"},onBlur:A=>{A.target.style.borderColor="#ddd"}})]}),d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("label",{htmlFor:"deck-select",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck (Required)"}),d.jsxs("select",{id:"deck-select",value:s,onChange:A=>{const E=A.target.value;E==="__import__"?(f(!0),l("")):(l(E),f(!1))},style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none",backgroundColor:"white"},children:[d.jsx("option",{value:"",children:"Select a deck..."}),o.length>0&&d.jsx("optgroup",{label:" My Decks",children:o.map(A=>d.jsxs("option",{value:A.id,children:[A.name," (",A.cardCount," cards)"]},A.id))}),d.jsx("optgroup",{label:" Starter Decks",children:_s.map(A=>d.jsxs("option",{value:A.id,children:[A.name," - ",A.description]},A.id))}),d.jsx("option",{value:"__import__",children:"+ Import New Deck..."})]}),j&&d.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f5f5f5",borderRadius:"4px",fontSize:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsxs("span",{style:{color:"#666"},children:[w&&`${w.cardCount} cards  `,"Will draw 7 on join",C&&`  ${C.description}`]}),w&&d.jsx("button",{type:"button",onClick:()=>u(w.id),style:{background:"none",border:"none",color:"#F44336",cursor:"pointer",fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Delete"})]})]}),c&&d.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9f9f9",borderRadius:"6px",border:"1px solid #ddd"},children:[d.jsx("label",{htmlFor:"import-url",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck URL (Moxfield, Archidekt, or EDHRec)"}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("input",{id:"import-url",type:"text",value:y,onChange:A=>h(A.target.value),placeholder:"Paste deck URL from Moxfield, Archidekt, or EDHRec...",disabled:p,style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"}}),d.jsx("button",{type:"button",onClick:S,disabled:!y.trim()||p,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:y.trim()&&!p?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:y.trim()&&!p?"pointer":"not-allowed"},children:p?"Importing...":"Import"})]}),v&&d.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,color:"#F44336",fontSize:"0.75rem"},children:v}),d.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#666"},children:"Deck will be saved to your library for reuse"})]}),d.jsx("button",{type:"submit",disabled:!R,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontWeight:"bold",color:"white",backgroundColor:R?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:R?"pointer":"not-allowed",transition:"background-color 0.2s"},onMouseEnter:A=>{R&&(A.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:A=>{R&&(A.currentTarget.style.backgroundColor="#4CAF50")},children:"Join Game"}),!s&&d.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#FF9800",textAlign:"center"},children:"Please select a deck to join"})]}),d.jsx("p",{style:{marginTop:"1.5rem",marginBottom:0,fontSize:"0.75rem",color:"#999",textAlign:"center"},children:"Share the URL with friends to play together!"})]})})}function H1({message:e,onConfirm:t,onCancel:n,confirmText:r="Confirm",confirmColor:o="#F44336"}){return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n,children:d.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:i=>i.stopPropagation(),children:[d.jsx("p",{style:{margin:"0 0 1.5rem 0",fontSize:"1rem",textAlign:"center",lineHeight:"1.5"},children:e}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[d.jsx("button",{onClick:n,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),d.jsx("button",{onClick:t,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:o,border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.opacity="0.9"},onMouseLeave:i=>{i.currentTarget.style.opacity="1"},children:r})]})]})})}function V1({currentPlayerId:e,players:t,onLeaveGame:n,onRemovePlayer:r,onResetRoom:o}){const[i,s]=H.useState(!1),[l,c]=H.useState(!1);return d.jsxs("div",{style:{position:"relative"},"data-danger-menu":!0,children:[d.jsxs("button",{onClick:()=>s(!i),style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:[" ",d.jsx("span",{style:{fontSize:"0.6rem"},children:""})]}),i&&d.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.25rem",backgroundColor:"white",border:"2px solid #F44336",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"180px"},children:[d.jsx("button",{onClick:()=>{n(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},children:" Leave Game"}),d.jsxs("button",{onClick:()=>c(!l),style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},children:[d.jsx("span",{children:" Remove Player"}),d.jsx("span",{style:{fontSize:"0.7rem"},children:l?"":""})]}),l&&d.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:t.filter(f=>f.id!==e).map(({id:f,player:y})=>d.jsxs("button",{onClick:()=>{r(f),c(!1),s(!1)},style:{width:"100%",padding:"0.5rem 1rem",fontSize:"0.75rem",backgroundColor:"transparent",color:"#666",border:"none",textAlign:"left",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[" ",y.name]},f))}),d.jsx("button",{onClick:()=>{o(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#F44336",border:"none",textAlign:"left",cursor:"pointer",fontWeight:"bold"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#ffebee"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},children:" Reset Room"})]})]})}const Y1=H.memo(function({cards:t,playerId:n,containerWidth:r=300,containerHeight:o=180}){const[i,s]=H.useState("none"),l=H.useRef(null);return H.useEffect(()=>{if(t.length===0){s("none");return}let c=1/0,f=1/0,y=-1/0,h=-1/0;const p=120,g=160;t.forEach(({card:E})=>{var W,ee;const M=((W=E.position)==null?void 0:W.x)||0,O=((ee=E.position)==null?void 0:ee.y)||0;c=Math.min(c,M),f=Math.min(f,O),y=Math.max(y,M+p),h=Math.max(h,O+g)});const v=40,b=y-c+v*2,z=h-f+v*2,k=(c+y)/2,S=(f+h)/2,u=r/b,w=o/z,C=Math.min(Math.max(Math.min(u,w),.1),.5),j=r/2,_=o/2,R=j-k*C,A=_-S*C;s(`translate(${R}px, ${A}px) scale(${C})`)},[t,r,o]),d.jsx("div",{ref:l,style:{width:`${r}px`,height:`${o}px`,position:"relative",overflow:"hidden",pointerEvents:"none"},children:d.jsx("div",{style:{position:"relative",width:"100%",height:"100%",transform:i,transformOrigin:"0 0",transition:"transform 0.3s ease"},children:t.length===0?d.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.75rem",padding:"1rem",textAlign:"center"},children:"No cards"}):t.map(({id:c,card:f})=>d.jsx(Ac,{cardId:c,card:f,playerId:n,isInteractive:!1,forceFaceDown:!1},c))})})});function K1({players:e,currentPlayerId:t,viewingPlayerId:n,currentTurnPlayerId:r,onSelectPlayer:o,getZoneCards:i}){return e.length===0?d.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",borderBottom:"1px solid #ddd",textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Waiting for players to join..."}):d.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"2px solid #ddd",display:"flex",gap:"1rem",padding:"1rem",overflowX:"auto",minHeight:"200px"},children:e.map(({id:s,player:l})=>{const c=s===t,f=s===n,y=s===r,h=i(`battlefield-${s}`),p=i(`hand-${s}`),g=i(`graveyard-${s}`),v=i(`exile-${s}`);return d.jsxs("div",{onClick:()=>o(s),style:{flex:"0 0 auto",minWidth:"280px",width:"280px",height:"180px",backgroundColor:"transparent",border:y?`3px solid ${Ze(s)}`:f?`3px solid ${Ze(s)}`:`2px solid ${Ze(s)}`,borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",position:"relative",overflow:"hidden",boxShadow:f?"0 6px 16px rgba(0,0,0,0.25)":y?`0 0 20px ${Ze(s)}80`:"0 2px 8px rgba(0,0,0,0.1)"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-4px)",b.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.3)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow=f?"0 6px 16px rgba(0,0,0,0.25)":y?`0 0 20px ${Ze(s)}80`:"0 2px 8px rgba(0,0,0,0.1)"},children:[d.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:d.jsx(Y1,{cards:h,playerId:s,containerWidth:280,containerHeight:180})}),d.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0.75rem",boxSizing:"border-box",pointerEvents:"none"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[d.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:Ze(s),boxShadow:"0 0 8px rgba(255,255,255,0.5)",flexShrink:0}}),d.jsx("span",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"#fff"},children:l.name}),c&&d.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"normal",backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 6px",borderRadius:"4px"},children:"You"}),y&&d.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"bold",backgroundColor:Ze(s),padding:"2px 6px",borderRadius:"4px",animation:"pulse 2s infinite"},children:"Turn"})]}),d.jsxs("div",{style:{display:"flex",gap:"0.75rem",fontSize:"0.85rem",color:"#fff",flexWrap:"wrap",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[d.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:[" ",l.lifeTotal]}),d.jsxs("span",{children:[" ",p.length]}),d.jsxs("span",{children:[" ",i(`deck-${s}`).length]}),d.jsxs("span",{children:[" ",g.length]}),d.jsxs("span",{children:[" ",v.length]})]})]})]},s)})})}function G1({currentPlayerId:e}){const[t,n]=H.useState([]),[r,o]=H.useState("all"),[i,s]=H.useState(""),l=H.useRef(null);H.useEffect(()=>{const g=()=>{const v=[];ur.forEach(b=>{v.push(b)}),n(v)};return ur.observe(g),g(),()=>{ur.unobserve(g)}},[]),H.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[t]);const c=g=>{g.preventDefault(),i.trim()&&(_1(e,i.trim()),s(""))},f=g=>{const v=Xn.get(g);return v?v.type.charAt(0).toUpperCase()+v.type.slice(1):g},y=g=>{var z,k;const v=_e.get(g.playerId),b=(v==null?void 0:v.name)||"Unknown";if(g.type==="chat"&&g.action==="chat_message")return g.data.message;switch(g.action){case"player_joined":return`${b} joined the game`;case"player_removed":return`${b} left the game`;case"turn_changed":return`${b}'s turn - ${g.data.step}`;case"draw_cards":return`${b} drew ${g.data.count} card${g.data.count!==1?"s":""}`;case"mill_cards":return`${b} milled ${g.data.count} card${g.data.count!==1?"s":""}`;case"exile_from_deck":return`${b} exiled ${g.data.count} card${g.data.count!==1?"s":""} from deck`;case"shuffle_deck":return`${b} shuffled their deck`;case"card_moved":{const w=g.data.oracleId||"a card",C=f(g.data.to),j=f(g.data.from);return j===C?`${b} moved ${w}`:`${b} moved ${w} from ${j} to ${C}`}case"counter_modified":{const w=g.data.oracleId||"a card",C=g.data.counterType,j=g.data.delta,_=g.data.newValue;if(j>0)return`${b} added ${j===1?"a":j} ${C} counter${j!==1?"s":""} to ${w} (${_} total)`;{const R=Math.abs(j);return`${b} removed ${R} ${C} counter${R!==1?"s":""} from ${w} (${_} total)`}}case"card_updated":if(((z=g.data.updates)==null?void 0:z.tapped)!==void 0){const w=g.data.oracleId||"a card";return`${b} ${g.data.updates.tapped?"tapped":"untapped"} ${w}`}if(((k=g.data.updates)==null?void 0:k.faceDown)!==void 0){const w=g.data.oracleId||"a card";return`${b} ${g.data.updates.faceDown?"turned face down":"turned face up"} ${w}`}return`${b} updated a card`;case"life_total_modified":const S=g.data.delta,u=S>0?"+":"";return`${b} ${S>0?"gained":"lost"} ${Math.abs(S)} life (${u}${S}  ${g.data.newTotal})`;case"life_total_set":return`${b} set life to ${g.data.newTotal}`;default:return`${b}: ${g.action}`}},h=g=>new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),p=t.filter(g=>r==="all"?!0:r==="chat"?g.type==="chat":r==="game"?g.type==="game"||!g.type:!0);return d.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#fff"},children:[d.jsxs("div",{style:{borderBottom:"2px solid #e0e0e0",padding:"0.75rem"},children:[d.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"0.875rem",color:"#666"},children:"CHAT & LOG"}),d.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","chat","game"].map(g=>d.jsx("button",{onClick:()=>o(g),style:{flex:1,padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:r===g?"#2196F3":"#f5f5f5",color:r===g?"white":"#666",border:"none",borderRadius:"4px",cursor:"pointer",textTransform:"capitalize"},children:g==="all"?"All":g==="chat"?"Chat":"Game Log"},g))})]}),d.jsx("div",{ref:l,style:{flex:1,overflowY:"auto",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:p.length===0?d.jsx("div",{style:{color:"#999",fontSize:"0.875rem",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:r==="chat"?"No chat messages yet":"No events yet"}):p.map((g,v)=>{const b=g.type==="chat",z=_e.get(g.playerId),k=Ze(g.playerId);return d.jsx("div",{style:{opacity:b?1:.6,fontSize:"0.875rem",lineHeight:1.4},children:d.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"baseline"},children:[d.jsx("span",{style:{fontSize:"0.65rem",color:"#999",flexShrink:0},children:h(g.timestamp)}),b?d.jsxs(d.Fragment,{children:[d.jsxs("span",{style:{fontWeight:"bold",color:k,flexShrink:0},children:[(z==null?void 0:z.name)||"Unknown",":"]}),d.jsx("span",{style:{color:"#333"},children:y(g)})]}):d.jsx("span",{style:{color:"#666"},children:y(g)})]})},v)})}),d.jsxs("form",{onSubmit:c,style:{borderTop:"2px solid #e0e0e0",padding:"0.75rem",display:"flex",gap:"0.5rem"},children:[d.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Type a message...",style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"},onFocus:g=>{g.target.style.borderColor="#2196F3"},onBlur:g=>{g.target.style.borderColor="#ddd"}}),d.jsx("button",{type:"submit",disabled:!i.trim(),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:i.trim()?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:i.trim()?"pointer":"not-allowed"},children:"Send"})]})]})}function Q1({isOpen:e,onClose:t,currentPlayerId:n}){return e?d.jsxs(d.Fragment,{children:[d.jsx("div",{onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:"fadeIn 0.2s ease"}}),d.jsxs("div",{style:{position:"fixed",top:0,right:0,bottom:0,width:"400px",maxWidth:"90vw",backgroundColor:"#fff",boxShadow:"-4px 0 12px rgba(0, 0, 0, 0.2)",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease"},children:[d.jsxs("div",{style:{padding:"1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[d.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:" Chat & Log"}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:r=>{r.currentTarget.style.color="#333"},onMouseLeave:r=>{r.currentTarget.style.color="#666"},children:""})]}),d.jsx("div",{style:{flex:1,overflow:"hidden"},children:d.jsx(G1,{currentPlayerId:n})})]}),d.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]}):null}function X1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return d.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #757575":"none"},children:[d.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[d.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Graveyard (",n.length," ",n.length===1?"card":"cards",")"]}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:l=>{l.currentTarget.style.color="#333"},onMouseLeave:l=>{l.currentTarget.style.color="#666"},children:""})]}),d.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:d.jsx(fr,{zoneId:`graveyard-${o}`,zoneName:"",zoneType:"graveyard",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function J1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return d.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #9C27B0":"none"},children:[d.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[d.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Exile (",n.length," ",n.length===1?"card":"cards",")"]}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:l=>{l.currentTarget.style.color="#333"},onMouseLeave:l=>{l.currentTarget.style.color="#666"},children:""})]}),d.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:d.jsx(fr,{zoneId:`exile-${o}`,zoneName:"",zoneType:"exile",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function q1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,viewerPlayerId:i,revealedCard:s}){const l=o===i,c=(s==null?void 0:s.revealedBy)===o;return d.jsxs("div",{style:{height:e?"300px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #607D8B":"none"},children:[d.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[d.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Deck (",n.length," ",n.length===1?"card":"cards",")"]}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:f=>{f.currentTarget.style.color="#333"},onMouseLeave:f=>{f.currentTarget.style.color="#666"},children:""})]}),d.jsx("div",{style:{height:"calc(300px - 48px)",overflow:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?d.jsx("div",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Deck is empty"}):l?d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:f,card:y},h)=>{var p;return d.jsxs("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem"},children:[d.jsxs("div",{style:{fontWeight:"bold"},children:["#",h+1]}),d.jsx("div",{style:{fontSize:"0.7rem",color:"#666"},children:((p=y.metadata)==null?void 0:p.name)||y.oracleId.slice(0,8)})]},f)})}):d.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:f,card:y},h)=>{var v;const g=h===0&&c;return d.jsx("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:g?"#fff3e0":"#37474f",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem",color:g?"#000":"#fff"},children:g?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{fontWeight:"bold",color:"#ff9800"},children:" Revealed"}),d.jsx("div",{style:{fontSize:"0.7rem"},children:(s==null?void 0:s.cardName)||((v=y.metadata)==null?void 0:v.name)||y.oracleId.slice(0,8)})]}):d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{fontSize:"2rem"},children:""}),d.jsxs("div",{style:{fontSize:"0.7rem",opacity:.7},children:["#",h+1]})]})},f)})})})]})}function Z1({cards:e,mode:t,playerId:n,onConfirm:r,onCancel:o}){const[i,s]=H.useState(e.map(E=>E.cardId)),[l,c]=H.useState([]),[f,y]=H.useState([]),[h,p]=H.useState(""),[g,v]=H.useState(new Set),b=E=>{s(M=>M.filter(O=>O!==E)),c(M=>[...M,E]),y(M=>M.filter(O=>O!==E))},z=E=>{c(M=>M.filter(O=>O!==E)),s(M=>[...M,E]),y(M=>M.filter(O=>O!==E))},k=E=>{s(M=>M.filter(O=>O!==E)),c(M=>M.filter(O=>O!==E)),y(M=>[...M,E])},S=(E,M,O)=>{(O==="top"?s:O==="bottom"?c:y)(ee=>{const se=ee.indexOf(E);if(se===-1)return ee;const de=M==="up"?se-1:se+1;if(de<0||de>=ee.length)return ee;const ve=[...ee];return[ve[se],ve[de]]=[ve[de],ve[se]],ve})},u=()=>{(t==="scry"||t==="surveil")&&r&&(t==="surveil"&&n&&f.forEach(E=>{Lt(E,`graveyard-${n}`,"auto",n)}),r(i,l)),o()},w=E=>{var O;const M=e.find(W=>W.cardId===E);return M?((O=M.card.metadata)==null?void 0:O.name)||M.card.oracleId:""},C=i.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),j=l.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),_=f.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),R=(E,M)=>{(M.ctrlKey||M.metaKey)&&(M.stopPropagation(),v(O=>{const W=new Set(O);return W.has(E)?W.delete(E):W.add(E),W}))},A=E=>{s(M=>M.filter(O=>O!==E)),c(M=>M.filter(O=>O!==E)),y(M=>M.filter(O=>O!==E)),v(M=>{const O=new Set(M);return O.delete(E),O})};return d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:o,children:d.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},onClick:E=>E.stopPropagation(),children:[d.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem"},children:[t==="scry"?"Scry":t==="surveil"?"Surveil":"View"," ",e.length]}),t==="peek"&&d.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Search for cards and use the menu on each card to move them. Ctrl+click to select multiple cards."}),t==="scry"&&d.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Reorder cards and choose which to put on top or bottom of your deck"}),t==="surveil"&&d.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Put any number of cards in your graveyard and the rest back on top in any order"}),d.jsx("div",{style:{marginBottom:"1rem"},children:d.jsx("input",{type:"text",placeholder:"Search by card name...",value:h,onChange:E=>p(E.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",border:"2px solid #ccc",borderRadius:"6px",boxSizing:"border-box"}})}),C.length>0&&d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Top of Deck (",i.length,h?`, showing ${C.length}`:"",")"]}),d.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:C.map(E=>{const M=e.find(W=>W.cardId===E);if(!M)return null;const O=i.indexOf(E);return d.jsx(Ca,{cardId:E,card:M.card,position:O+1,canMoveUp:(t==="scry"||t==="surveil")&&O>0,canMoveDown:(t==="scry"||t==="surveil")&&O<i.length-1,onMoveUp:()=>S(E,"up","top"),onMoveDown:()=>S(E,"down","top"),onMoveToBottom:t==="scry"?()=>b(E):void 0,onMoveToGraveyard:t==="surveil"?()=>k(E):void 0,isSelected:g.has(E),onClick:W=>R(E,W),playerId:n,mode:t,onCardMoved:A,selectedCards:g},E)})})]}),t==="scry"&&j.length>0&&d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Bottom of Deck (",l.length,h?`, showing ${j.length}`:"",")"]}),d.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:j.map(E=>{const M=e.find(W=>W.cardId===E);if(!M)return null;const O=l.indexOf(E);return d.jsx(Ca,{cardId:E,card:M.card,position:O+1,canMoveUp:O>0,canMoveDown:O<l.length-1,onMoveUp:()=>S(E,"up","bottom"),onMoveDown:()=>S(E,"down","bottom"),onMoveToTop:()=>z(E),isSelected:g.has(E),onClick:W=>R(E,W),playerId:n,mode:t,onCardMoved:A,selectedCards:g},E)})})]}),t==="surveil"&&_.length>0&&d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["To Graveyard (",f.length,h?`, showing ${_.length}`:"",")"]}),d.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:_.map(E=>{const M=e.find(W=>W.cardId===E);if(!M)return null;const O=f.indexOf(E);return d.jsx(Ca,{cardId:E,card:M.card,position:O+1,canMoveUp:O>0,canMoveDown:O<f.length-1,onMoveUp:()=>S(E,"up","graveyard"),onMoveDown:()=>S(E,"down","graveyard"),onMoveToTop:()=>z(E),isSelected:g.has(E),onClick:W=>R(E,W),playerId:n,mode:t,onCardMoved:A,selectedCards:g},E)})})]}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[d.jsx("button",{onClick:o,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer"},children:t==="peek"?"Close":"Cancel"}),(t==="scry"||t==="surveil")&&d.jsx("button",{onClick:u,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Confirm"})]})]})})}function Ca({cardId:e,card:t,position:n,canMoveUp:r,canMoveDown:o,onMoveUp:i,onMoveDown:s,onMoveToBottom:l,onMoveToTop:c,onMoveToGraveyard:f,isSelected:y=!1,onClick:h,playerId:p,mode:g,onCardMoved:v,selectedCards:b=new Set}){const{imageUrl:z,loading:k}=od(t.oracleId),[S,u]=H.useState(!1),[w,C]=H.useState(null),j=R=>{if(R.stopPropagation(),!S&&R.currentTarget){const A=R.currentTarget.getBoundingClientRect(),E=window.innerHeight,M=window.innerWidth;let O=A.right+8,W=A.top;const ee=180;O+ee>M&&(O=A.left-ee-8);const se=200;W+se>E&&(W=Math.max(8,E-se-8)),C({top:W,left:O})}u(!S)},_=(R,A)=>{if(!p)return;const E=`${R}-${p}`;y&&b.size>1?b.forEach(M=>{Lt(M,E,A||"auto",p),v&&v(M)}):(Lt(e,E,A||"auto",p),v&&v(e)),u(!1)};return d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},onClick:h,children:[d.jsxs("div",{style:{width:"150px",height:"210px",borderRadius:"8px",overflow:"hidden",border:"2px solid #333",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",outline:y?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:y?"0 0 12px rgba(33, 150, 243, 0.8)":"none",transition:"all 0.2s ease"},children:[k?d.jsx("div",{style:{fontSize:"0.8rem",color:"#999"},children:"Loading..."}):z?d.jsx("img",{src:z,alt:t.oracleId,style:{width:"100%",height:"100%",objectFit:"cover"}}):d.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:t.oracleId}),g==="peek"&&p&&d.jsx("button",{onClick:j,style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""}),d.jsx("div",{style:{position:"absolute",top:g==="peek"&&p?"35px":"8px",left:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:n})]}),d.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",justifyContent:"center"},children:[r&&d.jsx("button",{onClick:i,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),o&&d.jsx("button",{onClick:s,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),l&&d.jsx("button",{onClick:l,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Bottom"}),c&&d.jsx("button",{onClick:c,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Top"}),f&&d.jsx("button",{onClick:f,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9E9E9E",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Graveyard"})]}),g==="peek"&&p&&S&&vr.createPortal(d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10998},onClick:()=>u(!1)}),d.jsxs("div",{style:{position:"fixed",top:w?`${w.top}px`:"50%",left:w?`${w.left}px`:"50%",transform:w?"none":"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10999,minWidth:"150px"},children:[d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>_("hand"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Hand",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>_("battlefield"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Battlefield",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>_("graveyard"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Graveyard",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>_("exile"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Exile",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>_("deck","top"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Deck (top)",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]}),d.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"none"},onClick:()=>_("deck","bottom"),onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:[" Deck (bottom)",y&&b.size>1&&d.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",b.size," cards)"]})]})]})]}),document.body)]})}function Am({cardCount:e,playerColor:t,playerId:n,revealedCard:r,onDrawOne:o,onDrawN:i,onMillOne:s,onMillN:l,onExileOne:c,onExileN:f,onRevealTop:y,onShuffle:h}){const[p,g]=H.useState(!1),[v,b]=H.useState(!1),[z,k]=H.useState(!1),[S,u]=H.useState(!1),[w,C]=H.useState(!1),[j,_]=H.useState(!1),[R,A]=H.useState(null),[E,M]=H.useState(null),[O,W]=H.useState(null),[ee,se]=H.useState(null),[de,ve]=H.useState(null),[U,K]=H.useState(null),[ue,ae]=H.useState(null),[G,Z]=H.useState(null),[ne,te]=H.useState(!1),[V,ce]=H.useState(null),{imageUrl:pe}=od((r==null?void 0:r.cardName)||""),be=()=>{e>0&&o()},Se=U?{position:"fixed",top:`${U.top}px`,left:`${U.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"absolute",bottom:"100%",left:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"150px"},he={padding:"0.5rem 0.75rem",cursor:e>0?"pointer":"not-allowed",fontSize:"0.75rem",borderBottom:"1px solid #eee"};return d.jsxs("div",{style:{position:"relative"},children:[d.jsxs("div",{onDoubleClick:be,style:{width:"120px",height:"160px",backgroundColor:r&&pe?"transparent":"#333",backgroundImage:r&&pe?`url(${pe})`:"none",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid #666",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:e>0?"pointer":"default",position:"relative",userSelect:"none"},onMouseEnter:P=>{if(!r)return;const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth;let N=re.left-320,I=re.top;N<8&&(N=re.right+20),N+300>le&&(N=Math.max(8,(le-300)/2)),I+420>window.innerHeight&&(I=Math.max(8,window.innerHeight-420-8)),ce({top:I,left:N}),te(!0)},onMouseLeave:()=>{te(!1),ce(null)},children:[!r&&d.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"0.5rem"},children:[e," cards"]}),d.jsx("button",{onClick:P=>{if(P.stopPropagation(),!p){const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth;let N=re.left,I=re.top-8;const $=180;N+$>le&&(N=le-$-8);const X=250;I-X<8?I=re.bottom+8:I=I-X,K({top:I,left:N})}g(!p)},style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(255,255,255,0.9)",border:"1px solid #333",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:""}),d.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",backgroundColor:t,color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[" ",e]})]}),ne&&V&&r&&vr.createPortal(d.jsx("div",{style:{position:"fixed",top:`${V.top}px`,left:`${V.left}px`,width:"300px",height:"420px",borderRadius:"12px",overflow:"hidden",border:"3px solid #333",backgroundColor:"#f5f5f5",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:10001,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:pe?d.jsx("img",{src:pe,alt:r.cardName,style:{width:"100%",height:"100%",objectFit:"cover"}}):d.jsx("div",{style:{padding:"1rem",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:r.cardName})}),document.body),p&&vr.createPortal(d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>{g(!1),b(!1),k(!1),u(!1),C(!1),_(!1)}}),d.jsxs("div",{style:Se,children:[d.jsx("div",{style:{...he,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",k(!1),u(!1),C(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth,N=window.innerHeight;let I=re.right+4,$=re.top;const X=180,T=100;I+X>le&&(I=re.left-X-4),$+T>N&&($=Math.max(8,N-T-8)),A({top:$,left:I}),b(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:d.jsx("span",{children:"Draw "})}),d.jsx("div",{style:{...he,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",b(!1),u(!1),C(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth,N=window.innerHeight;let I=re.right+4,$=re.top;const X=180,T=100;I+X>le&&(I=re.left-X-4),$+T>N&&($=Math.max(8,N-T-8)),M({top:$,left:I}),k(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:d.jsx("span",{children:"Mill "})}),d.jsx("div",{style:{...he,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",b(!1),k(!1),C(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth,N=window.innerHeight;let I=re.right+4,$=re.top;const X=200,T=180;I+X>le&&(I=re.left-X-4),$+T>N&&($=Math.max(8,N-T-8)),W({top:$,left:I}),u(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:d.jsx("span",{children:"Exile "})}),d.jsx("div",{style:{...he,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",b(!1),k(!1),u(!1),_(!1);const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth,N=window.innerHeight;let I=re.right+4,$=re.top;const X=180,T=100;I+X>le&&(I=re.left-X-4),$+T>N&&($=Math.max(8,N-T-8)),se({top:$,left:I}),C(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:d.jsx("span",{children:"Scry "})}),d.jsx("div",{style:{...he,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:P=>{if(e===0)return;P.currentTarget.style.backgroundColor="#f5f5f5",b(!1),k(!1),u(!1),C(!1);const re=P.currentTarget.getBoundingClientRect(),le=window.innerWidth,N=window.innerHeight;let I=re.right+4,$=re.top;const X=180,T=100;I+X>le&&(I=re.left-X-4),$+T>N&&($=Math.max(8,N-T-8)),ve({top:$,left:I}),_(!0)},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:d.jsx("span",{children:"View "})}),d.jsx("div",{style:{...he,backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(y(),g(!1))},onMouseEnter:P=>{e>0&&(P.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:"Reveal Top Card"}),d.jsx("div",{style:{...he,borderBottom:"none",backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(h(),g(!1))},onMouseEnter:P=>{e>0&&(P.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:P=>{e>0&&(P.currentTarget.style.backgroundColor="white")},children:"Shuffle Deck"})]}),v&&R&&d.jsxs("div",{style:{position:"fixed",top:`${R.top}px`,left:`${R.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>b(!0),onMouseLeave:()=>{b(!1),A(null)},children:[d.jsx("div",{style:he,onClick:()=>{o(),g(!1),b(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Draw 1"}),d.jsx("div",{style:{...he,borderBottom:"none"},onClick:()=>{ae({title:"Draw how many cards?",onConfirm:P=>{i(P),ae(null),g(!1),b(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Draw N"})]}),z&&E&&d.jsxs("div",{style:{position:"fixed",top:`${E.top}px`,left:`${E.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>k(!0),onMouseLeave:()=>{k(!1),M(null)},children:[d.jsx("div",{style:he,onClick:()=>{s(),g(!1),k(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Mill 1"}),d.jsx("div",{style:{...he,borderBottom:"none"},onClick:()=>{ae({title:"Mill how many cards?",onConfirm:P=>{l(P),ae(null),g(!1),k(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Mill N"})]}),S&&O&&d.jsxs("div",{style:{position:"fixed",top:`${O.top}px`,left:`${O.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>u(!0),onMouseLeave:()=>{u(!1),W(null)},children:[d.jsx("div",{style:he,onClick:()=>{c(!1),g(!1),u(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-up)"}),d.jsx("div",{style:he,onClick:()=>{ae({title:"Exile how many cards (face-up)?",onConfirm:P=>{f(P,!1),ae(null),g(!1),u(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile N (face-up)"}),d.jsx("div",{style:he,onClick:()=>{c(!0),g(!1),u(!1)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-down)"}),d.jsx("div",{style:{...he,borderBottom:"none"},onClick:()=>{ae({title:"Exile how many cards (face-down)?",onConfirm:P=>{f(P,!0),ae(null),g(!1),u(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Exile N (face-down)"})]}),w&&ee&&d.jsxs("div",{style:{position:"fixed",top:`${ee.top}px`,left:`${ee.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>C(!0),onMouseLeave:()=>{C(!1),se(null)},children:[d.jsx("div",{style:he,onClick:()=>{const P=Dr(n,1);P.length>0&&(Z({cards:P,mode:"scry"}),g(!1),C(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Scry 1"}),d.jsx("div",{style:he,onClick:()=>{ae({title:"Scry how many cards?",onConfirm:P=>{const re=Dr(n,P);re.length>0&&Z({cards:re,mode:"scry"}),ae(null),g(!1),C(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Scry N"}),d.jsx("div",{style:he,onClick:()=>{const P=Dr(n,1);P.length>0&&(Z({cards:P,mode:"surveil"}),g(!1),C(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Surveil 1"}),d.jsx("div",{style:{...he,borderBottom:"none"},onClick:()=>{ae({title:"Surveil how many cards?",onConfirm:P=>{const re=Dr(n,P);re.length>0&&Z({cards:re,mode:"surveil"}),ae(null),g(!1),C(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" Surveil N"})]}),j&&de&&d.jsxs("div",{style:{position:"fixed",top:`${de.top}px`,left:`${de.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>_(!0),onMouseLeave:()=>{_(!1),ve(null)},children:[d.jsx("div",{style:he,onClick:()=>{const P=Dr(n,1);P.length>0&&(Z({cards:P,mode:"peek"}),g(!1),_(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" View 1"}),d.jsx("div",{style:he,onClick:()=>{ae({title:"View how many cards?",onConfirm:P=>{const re=Dr(n,P);re.length>0&&Z({cards:re,mode:"peek"}),ae(null),g(!1),_(!1)}})},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" View N"}),d.jsx("div",{style:{...he,borderBottom:"none"},onClick:()=>{const P=E1(n);P.length>0&&(Z({cards:P,mode:"peek"}),g(!1),_(!1))},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="white"},children:" View Whole Deck"})]})]}),document.body),ue&&d.jsx(rd,{title:ue.title,max:e,onConfirm:ue.onConfirm,onCancel:()=>ae(null)}),G&&d.jsx(Z1,{cards:G.cards,mode:G.mode,playerId:n,onConfirm:G.mode==="scry"?(P,re)=>{T1(n,P,re),Z(null)}:void 0,onCancel:()=>Z(null)})]})}function zm({playerId:e,lifeTotal:t,playerColor:n,currentPlayerId:r}){const[o,i]=H.useState(!1),s=()=>{Mr(e,1,r)},l=()=>{Mr(e,-1,r)};return d.jsxs("div",{style:{position:"relative"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fff",border:`2px solid ${n}`,borderRadius:"8px",padding:"0.5rem"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem",fontWeight:"bold",color:t<=0?"#F44336":"#333"},children:[d.jsx("span",{children:""}),d.jsx("span",{children:t})]}),d.jsx("button",{onClick:s,style:{width:"32px",height:"32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#4CAF50"},children:"+"}),d.jsx("button",{onClick:l,style:{width:"32px",height:"32px",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#da190b"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#F44336"},children:""}),d.jsx("button",{onClick:()=>i(!o),style:{width:"32px",height:"32px",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#616161"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#757575"},children:""})]}),o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>i(!1)}),d.jsxs("div",{style:{position:"absolute",bottom:"100%",right:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"180px"},children:[d.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADJUST"}),d.jsxs("div",{style:{padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",borderBottom:"1px solid #eee"},children:[d.jsx("button",{onClick:()=>{Mr(e,5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+5"}),d.jsx("button",{onClick:()=>{Mr(e,-5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-5"}),d.jsx("button",{onClick:()=>{Mr(e,10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+10"}),d.jsx("button",{onClick:()=>{Mr(e,-10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-10"})]}),d.jsx("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",backgroundColor:"white"},onClick:()=>{const c=prompt("Set life total to:",t.toString());if(c!==null){const f=parseInt(c,10);isNaN(f)||C1(e,f,r)}i(!1)},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="white"},children:"Set Exact Value..."})]})]})]})}const Nm="crdt-cards-recent-tokens",eb=4;function Om(){try{const e=localStorage.getItem(Nm);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load recent tokens:",e),[]}}function tb(e,t){try{const r=Om().filter(i=>i.name!==e);r.unshift({name:e,imageUrl:t,timestamp:Date.now()});const o=r.slice(0,eb);localStorage.setItem(Nm,JSON.stringify(o))}catch(n){console.error("Failed to save recent token:",n)}}const _a=[{name:"Treasure",displayName:"Treasure",color:"#FFD700",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/d/5/d52efeb3-661d-45e9-97c3-af167f889684.jpg?1757379348"},{name:"Food",displayName:"Food",color:"#8B4513",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/f/0fb2c5a4-859e-40ac-8091-7ba44f57b878.jpg?1757379328"},{name:"Clue",displayName:"Clue",color:"#708090",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/1/5/15866ed4-1ca3-427f-99ba-ee26ede9ae18.jpg?1752946432"},{name:"Soldier",displayName:"1/1 Soldier",color:"#F0E68C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/6/3/631c2c16-132d-4607-ab7e-207a6af188e5.jpg?1757686920"},{name:"Zombie",displayName:"2/2 Zombie",color:"#2F4F4F",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/4/c/4cecd5c6-d6c8-4cd5-97a3-cddaf051af15.jpg?1749245686"},{name:"Goblin",displayName:"1/1 Goblin",color:"#DC143C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/e/2/e265ca24-96c0-4654-a8f3-bbffe288970a.jpg?1742506636"},{name:"Beast",displayName:"3/3 Beast",color:"#228B22",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/3/b/3b584d93-5681-4ecd-953c-5ef58307caab.jpg?1752946408"},{name:"Spirit",displayName:"1/1 Spirit",color:"#E6E6FA",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/0/004f2ea4-0477-49b2-ad06-5aac7991103d.jpg?1749245677"}];function nb({playerId:e,onClose:t}){const[n,r]=H.useState(_a.reduce((u,w)=>({...u,[w.name]:1}),{})),[o,i]=H.useState([]),[s,l]=H.useState(""),[c,f]=H.useState([]),[y,h]=H.useState(!1),[p,g]=H.useState("");H.useEffect(()=>{i(Om())},[]);const v=u=>{const w=n[u]||1,C=_a.find(_=>_.name===u),j=C==null?void 0:C.imageUrl;ka(e,u,w,j),t()},b=(u,w)=>{r(C=>({...C,[u]:Math.max(1,Math.min(20,(C[u]||1)+w))}))},z=async()=>{if(s.trim()){h(!0),g(""),f([]);try{const u=`t:token ${s.trim()}`,w=await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(u)}&unique=prints`);if(!w.ok){w.status===404?g("No tokens found matching your search"):g("Failed to search Scryfall"),h(!1);return}const C=await w.json();f(C.data||[])}catch(u){console.error("Search error:",u),g("Network error - could not search Scryfall")}finally{h(!1)}}},k=u=>{var C,j,_;const w=((C=u.image_uris)==null?void 0:C.normal)||((j=u.image_uris)==null?void 0:j.large)||((_=u.image_uris)==null?void 0:_.small);w&&tb(u.name,w),ka(e,u.name,1,w),t()},S=u=>{const w=n[u.name]||1;ka(e,u.name,w,u.imageUrl),t()};return d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:t}),d.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3)",zIndex:9999,width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",padding:"1.5rem"},onClick:u=>u.stopPropagation(),children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #ddd"},children:[d.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"Create Tokens"}),d.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0 0.5rem"},children:""})]}),d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"COMMON TOKENS"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:_a.map(u=>d.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#fafafa"},children:[d.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:u.emoji}),d.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333"},children:u.displayName}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[d.jsx("button",{onClick:()=>b(u.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),d.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[u.name]||1}),d.jsx("button",{onClick:()=>b(u.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),d.jsx("button",{onClick:()=>v(u.name),style:{padding:"0.5rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},u.name))})]}),o.length>0&&d.jsxs("div",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"RECENTLY USED"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:o.map(u=>d.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#f0f8ff"},children:[d.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:""}),d.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:u.name,children:u.name}),d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[d.jsx("button",{onClick:()=>b(u.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),d.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[u.name]||1}),d.jsx("button",{onClick:()=>b(u.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),d.jsx("button",{onClick:()=>S(u),style:{padding:"0.5rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},u.name))})]}),d.jsxs("div",{children:[d.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"SEARCH SCRYFALL"}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[d.jsx("input",{type:"text",placeholder:"Search token name (e.g., dragon, elf)",value:s,onChange:u=>l(u.target.value),onKeyDown:u=>u.key==="Enter"&&z(),style:{flex:1,padding:"0.5rem",border:"2px solid #ddd",borderRadius:"4px",fontSize:"0.875rem"}}),d.jsx("button",{onClick:z,disabled:y||!s.trim(),style:{padding:"0.5rem 1rem",backgroundColor:y?"#ccc":"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:y?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:y?"Searching...":"Search"})]}),p&&d.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",fontSize:"0.875rem"},children:p}),c.length>0&&d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"0.5rem"},children:c.slice(0,20).map(u=>{var w;return d.jsx("div",{onClick:()=>k(u),style:{cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",transition:"transform 0.2s"},onMouseEnter:C=>{C.currentTarget.style.transform="scale(1.05)",C.currentTarget.style.borderColor="#2196F3"},onMouseLeave:C=>{C.currentTarget.style.transform="scale(1)",C.currentTarget.style.borderColor="#ddd"},children:(w=u.image_uris)!=null&&w.small?d.jsx("img",{src:u.image_uris.small,alt:u.name,style:{width:"100%",display:"block"}}):d.jsx("div",{style:{aspectRatio:"5/7",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999",padding:"0.5rem",textAlign:"center"},children:u.name})},u.id)})})]})]})]})}const Qf=["swift","brave","wise","mighty","clever","bold","noble","fierce","mystic","ancient","silver","golden","crimson","azure","emerald","shadow","thunder","frost","flame","storm","lunar","solar"],Xf=["dragon","phoenix","griffin","wizard","knight","mage","sage","warrior","ranger","paladin","rogue","sorcerer","champion","guardian","sentinel","warden","keeper","seeker","voyager"];function Jf(){const e=Qf[Math.floor(Math.random()*Qf.length)],t=Xf[Math.floor(Math.random()*Xf.length)],n=Math.floor(1e3+Math.random()*9e3);return`${e}-${t}-${n}`}function rb(){const[e,t]=H.useState(Jf()),[n,r]=H.useState(""),o=()=>{window.location.hash=e},i=l=>{if(l.preventDefault(),n.trim()){const c=n.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-");window.location.hash=c}},s=()=>{t(Jf())};return d.jsx("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:d.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"3rem",maxWidth:"600px",width:"100%"},children:[d.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[d.jsxs("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[" ",window.location.host]}),d.jsx("p",{style:{margin:0,color:"#666",fontSize:"1.1rem"},children:"Real-time multiplayer card game"}),d.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:d.jsx("a",{href:"https://github.com/rsullivan00/crdt-cards/",target:"_blank",rel:"noopener noreferrer",style:{color:"#667eea",textDecoration:"none"},children:"View code & report bugs on GitHub "})})]}),d.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[d.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" What is this?"}),d.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#555",lineHeight:"1.6"},children:[d.jsx("li",{children:"Play Magic-style card games with friends in real-time"}),d.jsx("li",{children:"No server required - uses peer-to-peer technology (CRDTs)"}),d.jsx("li",{children:"Import decks from Moxfield, Archidekt, or use starter decks"}),d.jsx("li",{children:"Everything syncs instantly across all players"})]})]}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Create a New Room"}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.75rem"},children:[d.jsx("input",{type:"text",value:e,readOnly:!0,style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa",fontFamily:"monospace"}}),d.jsx("button",{onClick:s,style:{padding:"0.75rem",fontSize:"1.25rem",backgroundColor:"#f8f9fa",border:"2px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor="#e9ecef"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="#f8f9fa"},title:"Generate new room name",children:""})]}),d.jsx("button",{onClick:o,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)"},children:"Create Room & Invite Friends"}),d.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"#888",textAlign:"center"},children:"Share the URL with friends to play together"})]}),d.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"2rem 0"}}),d.jsxs("div",{style:{marginBottom:"2rem"},children:[d.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Join Existing Room"}),d.jsx("form",{onSubmit:i,children:d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Enter room name...",style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",fontFamily:"monospace"}}),d.jsx("button",{type:"submit",disabled:!n.trim(),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:n.trim()?"#4CAF50":"#e0e0e0",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",transition:"background-color 0.2s"},children:"Join"})]})})]}),d.jsxs("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"6px",padding:"1rem",fontSize:"0.9rem",color:"#856404"},children:[d.jsx("strong",{children:" Important:"})," Rooms are temporary and ephemeral. All game data is deleted when the last player leaves. Make sure to finish your game in one session!"]})]})})}function ob({isOpen:e,onClose:t}){return e?vr.createPortal(d.jsx(d.Fragment,{children:d.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:d.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},onClick:n=>n.stopPropagation(),children:[d.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[d.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"How to Use"}),d.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0",lineHeight:1},children:""})]}),d.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[d.jsxs("section",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#2196F3"},children:" Multi-Select Cards"}),d.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Ctrl+Click"})," to select/deselect individual cards"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Drag-to-select"})," on battlefield: Click and drag to create a selection rectangle"]}),d.jsxs("li",{children:["Selected cards show a ",d.jsx("span",{style:{color:"#2196F3"},children:"blue outline"})]}),d.jsx("li",{children:"Works in all zones: battlefield, hand, graveyard, and exile"})]})]}),d.jsxs("section",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#4CAF50"},children:" Batch Operations"}),d.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[d.jsxs("li",{children:["Click the ",d.jsx("strong",{children:" menu"})," on any selected card"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Move to..."})," moves all selected cards together"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Counters"})," adds/removes counters on all selected cards"]}),d.jsxs("li",{children:["Menu shows ",d.jsx("strong",{children:"(X cards)"})," when multiple are selected"]}),d.jsx("li",{children:"Selection persists after operations for multi-step workflows"})]})]}),d.jsxs("section",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#9C27B0"},children:" Group Dragging"}),d.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Drag selected cards"})," from hand/graveyard/exile to battlefield"]}),d.jsx("li",{children:"Cards arrange in a grid (5 per row) where you drop them"}),d.jsxs("li",{children:[d.jsx("strong",{children:"Drag within battlefield"})," maintains relative positions"]}),d.jsx("li",{children:"All selected cards move together"})]})]}),d.jsxs("section",{style:{marginBottom:"1.5rem"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#FF9800"},children:" Card Actions"}),d.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Click"})," battlefield cards to tap/untap"]}),d.jsxs("li",{children:[d.jsx("strong",{children:" Menu"})," for moving, adding counters, deleting tokens"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Drag"})," cards to reposition on battlefield"]}),d.jsxs("li",{children:[d.jsx("strong",{children:"Right-click"})," opens the card menu"]})]})]}),d.jsxs("section",{style:{marginBottom:"0.5rem"},children:[d.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#666"},children:" Tips"}),d.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[d.jsx("li",{children:"Click empty space to clear selection"}),d.jsx("li",{children:"Hold Ctrl while drag-selecting to add to existing selection"}),d.jsx("li",{children:"Use batch counters to quickly set up token armies"}),d.jsx("li",{children:"Multi-select works great for moving creatures to attack"})]})]})]})]})})}),document.body):null}function Lr({playerId:e,player:t,currentPlayerId:n,isCurrentPlayer:r,position:o,getZoneCards:i,onDrawCards:s,onMillCards:l,onExileFromDeck:c,onShuffleDeck:f,onRevealTopCard:y,onOpenGraveyard:h,onOpenExile:p,onOpenDeck:g,onCreateToken:v,isCurrentTurn:b,revealedCard:z}){const k=Ze(e),S=r,u=r;return d.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",border:b?`4px solid ${k}`:"2px solid #ddd",backgroundColor:"#f9f9f9",boxShadow:b?`0 0 20px ${k}80`:"none",animation:b?"pulse 2s infinite":"none",overflow:"hidden",display:"flex",flexDirection:"column"},children:[d.jsxs("div",{style:{backgroundColor:k,color:"white",padding:"0.5rem",textAlign:"center",fontWeight:"bold",fontSize:"0.875rem",borderBottom:"2px solid rgba(0,0,0,0.1)",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[d.jsxs("div",{style:{flex:1,textAlign:"center"},children:[t.name," ",r&&"(You)",b&&" "]}),!r&&d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[d.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9,fontWeight:"bold"},children:[" ",t.lifeTotal]}),d.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[" ",i(`hand-${e}`).length]}),d.jsxs("button",{onClick:w=>{w.stopPropagation(),h()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Graveyard",children:[" ",i(`graveyard-${e}`).length]}),d.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Exile",children:[" ",i(`exile-${e}`).length]}),d.jsxs("button",{onClick:w=>{w.stopPropagation(),g()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Deck",children:[" ",i(`deck-${e}`).length]})]})]}),d.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:u?d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:d.jsx(fr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:k,playerId:e,isInteractive:S,viewerPlayerId:n})}),d.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"0.5rem",alignItems:"center"},children:[d.jsx("div",{style:{minWidth:0,overflow:"visible"},children:d.jsx(fr,{zoneId:`hand-${e}`,zoneName:"Hand",zoneType:"hand",cards:i(`hand-${e}`),playerColor:k,playerId:e,isInteractive:S,viewerPlayerId:n})}),d.jsx(Am,{cardCount:i(`deck-${e}`).length,playerColor:k,playerId:e,revealedCard:z,onDrawOne:()=>s(1),onDrawN:s,onMillOne:()=>l(1),onMillN:l,onExileOne:w=>c(1,w),onExileN:(w,C)=>c(w,C),onShuffle:f,onRevealTop:y}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx(zm,{playerId:e,lifeTotal:t.lifeTotal,playerColor:k,currentPlayerId:n}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("button",{onClick:h,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Graveyard",children:""}),d.jsx("button",{onClick:p,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Exile",children:""}),d.jsx("button",{onClick:v,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Create Token",children:""})]})]})]})]}):d.jsx(d.Fragment,{children:d.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:d.jsx(fr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:k,playerId:e,isInteractive:S,viewerPlayerId:n,opponentPosition:o==="top"?"top":null})})})})]})}function ib({players:e,currentPlayerId:t,getZoneCards:n,onDrawCards:r,onMillCards:o,onExileFromDeck:i,onShuffleDeck:s,onRevealTopCard:l,onOpenGraveyard:c,onOpenExile:f,onOpenDeck:y,onCreateToken:h,revealedCard:p}){const g=ei(),v=g==null?void 0:g.playerId,b=e.find(_=>_.id===t),z=e.filter(_=>_.id!==t),k=e.length,u=k===1?{bottom:b,top:null,left:null,right:null}:k===2?{bottom:b,top:z[0],left:null,right:null}:k===3?{bottom:b,top:null,left:z[0],right:z[1]}:{bottom:b,top:null,left:z[0],right:z[1],bottomRight:z[2]},w=k===2,C=k===3,j=k===4;return d.jsxs("div",{style:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:"0px",overflow:"hidden"},children:[w?u.top&&d.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:d.jsx(Lr,{playerId:u.top.id,player:u.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(u.top.id,_),onMillCards:_=>o(u.top.id,_),onExileFromDeck:(_,R)=>i(u.top.id,_,R),onShuffleDeck:()=>s(u.top.id),onRevealTopCard:()=>l(u.top.id),onOpenGraveyard:()=>c(u.top.id),onOpenExile:()=>f(u.top.id),onOpenDeck:()=>y(u.top.id),onCreateToken:()=>h(u.top.id),isCurrentTurn:v===u.top.id,revealedCard:p})}):d.jsxs(d.Fragment,{children:[u.left&&d.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:d.jsx(Lr,{playerId:u.left.id,player:u.left.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(u.left.id,_),onMillCards:_=>o(u.left.id,_),onExileFromDeck:(_,R)=>i(u.left.id,_,R),onShuffleDeck:()=>s(u.left.id),onRevealTopCard:()=>l(u.left.id),onOpenGraveyard:()=>c(u.left.id),onOpenExile:()=>f(u.left.id),onOpenDeck:()=>y(u.left.id),onCreateToken:()=>h(u.left.id),isCurrentTurn:v===u.left.id,revealedCard:p})}),u.right&&d.jsx("div",{style:{gridColumn:"2",gridRow:"1"},children:d.jsx(Lr,{playerId:u.right.id,player:u.right.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(u.right.id,_),onMillCards:_=>o(u.right.id,_),onExileFromDeck:(_,R)=>i(u.right.id,_,R),onShuffleDeck:()=>s(u.right.id),onRevealTopCard:()=>l(u.right.id),onOpenGraveyard:()=>c(u.right.id),onOpenExile:()=>f(u.right.id),onOpenDeck:()=>y(u.right.id),onCreateToken:()=>h(u.right.id),isCurrentTurn:v===u.right.id,revealedCard:p})}),u.top&&d.jsx("div",{style:{gridColumn:"1 / 3",gridRow:"1"},children:d.jsx(Lr,{playerId:u.top.id,player:u.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(u.top.id,_),onMillCards:_=>o(u.top.id,_),onExileFromDeck:(_,R)=>i(u.top.id,_,R),onShuffleDeck:()=>s(u.top.id),onRevealTopCard:()=>l(u.top.id),onOpenGraveyard:()=>c(u.top.id),onOpenExile:()=>f(u.top.id),onOpenDeck:()=>y(u.top.id),onCreateToken:()=>h(u.top.id),isCurrentTurn:v===u.top.id,revealedCard:p})})]}),u.bottom&&d.jsx("div",{style:{gridColumn:w||j?"1":"1 / 3",gridRow:"2"},children:d.jsx(Lr,{playerId:u.bottom.id,player:u.bottom.player,currentPlayerId:t,isCurrentPlayer:!0,position:"bottom",getZoneCards:n,onDrawCards:_=>r(u.bottom.id,_),onMillCards:_=>o(u.bottom.id,_),onExileFromDeck:(_,R)=>i(u.bottom.id,_,R),onShuffleDeck:()=>s(u.bottom.id),onRevealTopCard:()=>l(u.bottom.id),onOpenGraveyard:()=>c(u.bottom.id),onOpenExile:()=>f(u.bottom.id),onOpenDeck:()=>y(u.bottom.id),onCreateToken:()=>h(u.bottom.id),isCurrentTurn:v===u.bottom.id,revealedCard:p})}),j&&u.bottomRight&&d.jsx("div",{style:{gridColumn:"2",gridRow:"2"},children:d.jsx(Lr,{playerId:u.bottomRight.id,player:u.bottomRight.player,currentPlayerId:t,isCurrentPlayer:!1,position:"right",getZoneCards:n,onDrawCards:_=>r(u.bottomRight.id,_),onMillCards:_=>o(u.bottomRight.id,_),onExileFromDeck:(_,R)=>i(u.bottomRight.id,_,R),onShuffleDeck:()=>s(u.bottomRight.id),onRevealTopCard:()=>l(u.bottomRight.id),onOpenGraveyard:()=>c(u.bottomRight.id),onOpenExile:()=>f(u.bottomRight.id),onOpenDeck:()=>y(u.bottomRight.id),onCreateToken:()=>h(u.bottomRight.id),isCurrentTurn:v===u.bottomRight.id,revealedCard:p})}),d.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            box-shadow: 0 0 20px var(--pulse-color, #2196F3)80;
          }
          50% {
            box-shadow: 0 0 40px var(--pulse-color, #2196F3)ff;
          }
        }
      `})]})}function sb(){if(!(window.location.hash&&window.location.hash!=="#"))return d.jsx(rb,{});const[t,n]=H.useState(null),[r,o]=H.useState(!1),[i,s]=H.useState(!1),[l,c]=H.useState(!1),[f,y]=H.useState(null),[,h]=H.useState({}),[p,g]=H.useState(!1),[v,b]=H.useState(!1),[z,k]=H.useState(!1),[S,u]=H.useState(!1),[w,C]=H.useState(!1),[j,_]=H.useState(!1),[R,A]=H.useState(null),[E,M]=H.useState(null),[O,W]=H.useState(()=>localStorage.getItem("crdt-cards-layout-mode")==="table"?"table":"compact"),ee=()=>{const V=O==="compact"?"table":"compact";W(V),localStorage.setItem("crdt-cards-layout-mode",V)};H.useEffect(()=>{const V=`crdt-cards-player-${Yr()}`,ce=localStorage.getItem(V);ce&&_e.has(ce)?n(ce):o(!0);const pe=re=>{s(re.connected)},be=re=>{c(re.synced),re.synced&&ce&&!t&&_e.has(ce)&&(n(ce),o(!1),console.log("Rejoined as existing player:",ce))};Kr.on("status",pe),Kr.on("synced",be);const Se=()=>{h({})};_e.observe(Se),Xn.observe(Se),ye.observe(Se),wo.observe(Se);const he=()=>{const re=Zo.get("current");M(re?{cardName:re.cardName,revealedBy:re.revealedBy}:null)};Zo.observe(he),he(),Se();const P=re=>{if(re.key==="t"||re.key==="T"){const le=document.activeElement;if((le==null?void 0:le.tagName)==="INPUT"||(le==null?void 0:le.tagName)==="TEXTAREA")return;const N=Uo();if(N.size===0||!t)return;const I=ye;let $,X=!1;if(N.forEach(T=>{const a=I.get(T);a&&!$&&($=a,X=a.zoneId.startsWith("battlefield-"))}),$&&X){const T=!$.tapped;N.forEach(a=>{const m=I.get(a);m&&m.zoneId.startsWith("battlefield-")&&Dc(a,T,t)})}}};return window.addEventListener("keydown",P),()=>{_e.unobserve(Se),Xn.unobserve(Se),ye.unobserve(Se),wo.unobserve(Se),Zo.unobserve(he),Kr.off("status",pe),Kr.off("synced",be),window.removeEventListener("keydown",P)}},[t]);const se=async(V,ce)=>{const pe=crypto.randomUUID();x1(pe,V,!0);const be=_s.find(he=>he.id===ce);if(be){const he=await z1(be.file,be.name);he.success&&he.deck&&(Gf(pe,he.deck),Yf(he.deck.id),ss(pe),Oo(pe,7))}else{const P=ro().find(re=>re.id===ce);P&&(Gf(pe,P),Yf(ce),ss(pe),Oo(pe,7))}const Se=`crdt-cards-player-${Yr()}`;localStorage.setItem(Se,pe),localStorage.setItem("crdt-cards-username",V),n(pe),o(!1),!ei()&&_e.size===1&&Lc(pe,"main1")},de=()=>{const V=ei(),ce=Array.from(_e.keys());if(V&&ce.length>0){const be=(ce.indexOf(V.playerId)+1)%ce.length;Lc(ce[be],"main1")}},ve=ei(),U=(ve==null?void 0:ve.playerId)||null,K=()=>{t&&y({message:"Leave this game? Your player and cards will be removed.",onConfirm:()=>{Hf(t);const V=`crdt-cards-player-${Yr()}`;localStorage.removeItem(V),window.location.reload()}})},ue=V=>{const ce=_e.get(V);y({message:`Remove ${(ce==null?void 0:ce.name)||"this player"} from the game? Their cards will be removed.`,onConfirm:()=>{Hf(V)}})},ae=()=>{y({message:"Reset the entire room? This will clear all players, cards, and game state.",onConfirm:()=>{k1();const V=`crdt-cards-player-${Yr()}`;localStorage.removeItem(V),window.location.reload()}})},G=V=>{const ce=[];return ye.forEach((pe,be)=>{pe.zoneId===V&&ce.push({id:be,card:pe})}),ce.sort((pe,be)=>pe.card.order-be.card.order)},Z=[];if(_e.forEach((V,ce)=>{Z.push({id:ce,player:V})}),r)return d.jsx(W1,{onJoin:se,playerCount:_e.size});if(!t)return d.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."});const ne=_e.get(t),te=R||t;return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.7;
          }
        }
      `}),d.jsxs("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"#e0e0e0"},children:[d.jsxs("div",{style:{backgroundColor:"#fff",padding:"0.75rem 1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[d.jsx("h1",{style:{margin:0,fontSize:"1.25rem"},children:window.location.host}),d.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[d.jsx("strong",{children:"You:"})," ",(ne==null?void 0:ne.name)||"Unknown"]})]}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[d.jsx("button",{onClick:ee,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:O==="table"?"#FF9800":"#607D8B",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:`Switch to ${O==="table"?"compact":"table"} view`,children:O==="table"?" Compact":" Table"}),d.jsx("button",{onClick:()=>_(!0),style:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Help",children:"?"}),d.jsx("button",{onClick:de,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Next Turn"}),d.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:i&&l?"#4CAF50":"#FF9800"}}),d.jsx(V1,{currentPlayerId:t||"",players:Z,onLeaveGame:K,onRemovePlayer:ue,onResetRoom:ae})]})]}),O==="compact"&&d.jsx(K1,{players:Z,currentPlayerId:t,viewingPlayerId:R||t,currentTurnPlayerId:U,onSelectPlayer:V=>{A(V===t?null:V)},getZoneCards:G}),O==="table"?d.jsx("div",{style:{flex:1,overflow:"hidden"},children:d.jsx(ib,{players:Z,currentPlayerId:t,getZoneCards:G,onDrawCards:Oo,onMillCards:xa,onExileFromDeck:ba,onShuffleDeck:ss,onRevealTopCard:Vf,onOpenGraveyard:V=>{A(V===t?null:V),b(!0)},onOpenExile:V=>{A(V===t?null:V),k(!0)},onOpenDeck:V=>{A(V===t?null:V),u(!0)},onCreateToken:()=>C(!0),revealedCard:E})}):d.jsxs("div",{style:{flex:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:[d.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:d.jsx(fr,{zoneId:`battlefield-${te}`,zoneName:"Battlefield",zoneType:"battlefield",cards:G(`battlefield-${te}`),playerColor:Ze(te),playerId:te,isInteractive:te===t,viewerPlayerId:t})}),d.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"1rem",alignItems:"center"},children:[d.jsx("div",{style:{minWidth:0,overflow:"visible"},children:d.jsx(fr,{zoneId:`hand-${te}`,zoneName:"Hand",zoneType:"hand",cards:G(`hand-${te}`),playerColor:Ze(te),playerId:te,isInteractive:te===t,viewerPlayerId:t})}),ne&&te===t&&d.jsxs(d.Fragment,{children:[d.jsx(Am,{cardCount:G(`deck-${te}`).length,playerColor:Ze(te),playerId:te,revealedCard:E,onDrawOne:()=>Oo(te,1),onDrawN:V=>Oo(te,V),onMillOne:()=>xa(te,1),onMillN:V=>xa(te,V),onExileOne:V=>ba(te,1,V),onExileN:(V,ce)=>ba(te,V,ce),onRevealTop:()=>{Vf(te)},onShuffle:()=>ss(te)}),d.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[d.jsx(zm,{playerId:te,lifeTotal:ne.lifeTotal,playerColor:Ze(te),currentPlayerId:t}),d.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[d.jsx("button",{onClick:()=>b(!v),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#9C27B0"},title:"Graveyard",children:""}),d.jsx("button",{onClick:()=>k(!z),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#9C27B0"},title:"Exile",children:""}),d.jsx("button",{onClick:()=>C(!w),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#F57C00"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#FF9800"},title:"Create Tokens",children:""}),d.jsx("button",{onClick:()=>g(!p),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#4CAF50",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#388E3C"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#4CAF50"},title:"Chat & Log",children:""})]})]})]})]})]}),d.jsx(X1,{isOpen:v,onClose:()=>b(!1),cards:G(`graveyard-${te}`),playerColor:Ze(te),playerId:te,isInteractive:te===t,viewerPlayerId:t}),d.jsx(J1,{isOpen:z,onClose:()=>k(!1),cards:G(`exile-${te}`),playerColor:Ze(te),playerId:te,isInteractive:te===t,viewerPlayerId:t}),d.jsx(q1,{isOpen:S,onClose:()=>u(!1),cards:G(`deck-${te}`),playerColor:Ze(te),playerId:te,viewerPlayerId:t,revealedCard:E}),d.jsx(Q1,{isOpen:p,onClose:()=>g(!1),currentPlayerId:t}),w&&d.jsx(nb,{playerId:t,onClose:()=>C(!1)}),f&&d.jsx(H1,{message:f.message,onConfirm:f.onConfirm,onCancel:()=>y(null)}),d.jsx(ob,{isOpen:j,onClose:()=>_(!1)})]})]})}if(window.location.pathname!=="/"&&!window.location.hash){const e="/#"+window.location.pathname.slice(1)+window.location.search+window.location.hash;window.location.replace(e)}Ea.createRoot(document.getElementById("root")).render(d.jsx(qm.StrictMode,{children:d.jsx(sb,{})}));
