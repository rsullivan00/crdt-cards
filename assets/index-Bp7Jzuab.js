(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Yt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zf={exports:{}},al={},eh={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=Symbol.for("react.element"),Om=Symbol.for("react.portal"),Fm=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),Bm=Symbol.for("react.provider"),$m=Symbol.for("react.context"),Wm=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Vm=Symbol.for("react.memo"),Ym=Symbol.for("react.lazy"),od=Symbol.iterator;function Km(e){return e===null||typeof e!="object"?null:(e=od&&e[od]||e["@@iterator"],typeof e=="function"?e:null)}var th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nh=Object.assign,rh={};function xo(e,t,n){this.props=e,this.context=t,this.refs=rh,this.updater=n||th}xo.prototype.isReactComponent={};xo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function oh(){}oh.prototype=xo.prototype;function Au(e,t,n){this.props=e,this.context=t,this.refs=rh,this.updater=n||th}var Nu=Au.prototype=new oh;Nu.constructor=Au;nh(Nu,xo.prototype);Nu.isPureReactComponent=!0;var id=Array.isArray,ih=Object.prototype.hasOwnProperty,zu={current:null},sh={key:!0,ref:!0,__self:!0,__source:!0};function lh(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)ih.call(t,r)&&!sh.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:_i,type:e,key:i,ref:s,props:o,_owner:zu.current}}function Gm(e,t){return{$$typeof:_i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Iu(e){return typeof e=="object"&&e!==null&&e.$$typeof===_i}function Qm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var sd=/\/+/g;function Nl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qm(""+e.key):t.toString(36)}function as(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case _i:case Om:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+Nl(s,0):r,id(o)?(n="",e!=null&&(n=e.replace(sd,"$&/")+"/"),as(o,t,n,"",function(d){return d})):o!=null&&(Iu(o)&&(o=Gm(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(sd,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",id(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Nl(i,l);s+=as(i,t,n,u,o)}else if(u=Km(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Nl(i,l++),s+=as(i,t,n,u,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Ii(e,t,n){if(e==null)return e;var r=[],o=0;return as(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Xm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ct={current:null},us={transition:null},Jm={ReactCurrentDispatcher:ct,ReactCurrentBatchConfig:us,ReactCurrentOwner:zu};function ah(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Ii,forEach:function(e,t,n){Ii(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ii(e,function(){t++}),t},toArray:function(e){return Ii(e,function(t){return t})||[]},only:function(e){if(!Iu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=xo;ve.Fragment=Fm;ve.Profiler=Um;ve.PureComponent=Au;ve.StrictMode=Pm;ve.Suspense=Hm;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jm;ve.act=ah;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=nh({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=zu.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)ih.call(t,u)&&!sh.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:_i,type:e.type,key:o,ref:i,props:r,_owner:s}};ve.createContext=function(e){return e={$$typeof:$m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bm,_context:e},e.Consumer=e};ve.createElement=lh;ve.createFactory=function(e){var t=lh.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Wm,render:e}};ve.isValidElement=Iu;ve.lazy=function(e){return{$$typeof:Ym,_payload:{_status:-1,_result:e},_init:Xm}};ve.memo=function(e,t){return{$$typeof:Vm,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=us.transition;us.transition={};try{e()}finally{us.transition=t}};ve.unstable_act=ah;ve.useCallback=function(e,t){return ct.current.useCallback(e,t)};ve.useContext=function(e){return ct.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return ct.current.useDeferredValue(e)};ve.useEffect=function(e,t){return ct.current.useEffect(e,t)};ve.useId=function(){return ct.current.useId()};ve.useImperativeHandle=function(e,t,n){return ct.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return ct.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return ct.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return ct.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return ct.current.useReducer(e,t,n)};ve.useRef=function(e){return ct.current.useRef(e)};ve.useState=function(e){return ct.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return ct.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return ct.current.useTransition()};ve.version="18.3.1";eh.exports=ve;var W=eh.exports;const qm=qf(W);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=W,e0=Symbol.for("react.element"),t0=Symbol.for("react.fragment"),n0=Object.prototype.hasOwnProperty,r0=Zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o0={key:!0,ref:!0,__self:!0,__source:!0};function uh(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)n0.call(t,r)&&!o0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:e0,type:e,key:i,ref:s,props:o,_owner:r0.current}}al.Fragment=t0;al.jsx=uh;al.jsxs=uh;Zf.exports=al;var h=Zf.exports,_a={},ch={exports:{}},Et={},dh={exports:{}},fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,K){var ae=B.length;B.push(K);e:for(;0<ae;){var ue=ae-1>>>1,G=B[ue];if(0<o(G,K))B[ue]=K,B[ae]=G,ae=ue;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],ae=B.pop();if(ae!==K){B[0]=ae;e:for(var ue=0,G=B.length,ne=G>>>1;ue<ne;){var ee=2*(ue+1)-1,Z=B[ee],H=ee+1,le=B[H];if(0>o(Z,ae))H<G&&0>o(le,Z)?(B[ue]=le,B[H]=ae,ue=H):(B[ue]=Z,B[ee]=ae,ue=ee);else if(H<G&&0>o(le,ae))B[ue]=le,B[H]=ae,ue=H;else break e}}return K}function o(B,K){var ae=B.sortIndex-K.sortIndex;return ae!==0?ae:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var u=[],d=[],y=1,f=null,p=3,g=!1,v=!1,b=!1,L=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(B){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=B)r(d),K.sortIndex=K.expirationTime,t(u,K);else break;K=n(d)}}function w(B){if(b=!1,c(B),!v)if(n(u)!==null)v=!0,fe(C);else{var K=n(d);K!==null&&xe(w,K.startTime-B)}}function C(B,K){v=!1,b&&(b=!1,S(j),j=-1),g=!0;var ae=p;try{for(c(K),f=n(u);f!==null&&(!(f.expirationTime>K)||B&&!N());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,p=f.priorityLevel;var G=ue(f.expirationTime<=K);K=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(u)&&r(u),c(K)}else r(u);f=n(u)}if(f!==null)var ne=!0;else{var ee=n(d);ee!==null&&xe(w,ee.startTime-K),ne=!1}return ne}finally{f=null,p=ae,g=!1}}var T=!1,_=null,j=-1,z=5,R=-1;function N(){return!(e.unstable_now()-R<z)}function F(){if(_!==null){var B=e.unstable_now();R=B;var K=!0;try{K=_(!0,B)}finally{K?Y():(T=!1,_=null)}}else T=!1}var Y;if(typeof k=="function")Y=function(){k(F)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,de=ie.port2;ie.port1.onmessage=F,Y=function(){de.postMessage(null)}}else Y=function(){L(F,0)};function fe(B){_=B,T||(T=!0,Y())}function xe(B,K){j=L(function(){B(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){v||g||(v=!0,fe(C))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ae=p;p=K;try{return B()}finally{p=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ae=p;p=B;try{return K()}finally{p=ae}},e.unstable_scheduleCallback=function(B,K,ae){var ue=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ue+ae:ue):ae=ue,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,B={id:y++,callback:K,priorityLevel:B,startTime:ae,expirationTime:G,sortIndex:-1},ae>ue?(B.sortIndex=ae,t(d,B),n(u)===null&&B===n(d)&&(b?(S(j),j=-1):b=!0,xe(w,ae-ue))):(B.sortIndex=G,t(u,B),v||g||(v=!0,fe(C))),B},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(B){var K=p;return function(){var ae=p;p=K;try{return B.apply(this,arguments)}finally{p=ae}}}})(fh);dh.exports=fh;var i0=dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0=W,Ct=i0;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hh=new Set,ei={};function kr(e,t){no(e,t),no(e+"Capture",t)}function no(e,t){for(ei[e]=t,e=0;e<t.length;e++)hh.add(t[e])}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,l0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ld={},ad={};function a0(e){return Ea.call(ad,e)?!0:Ea.call(ld,e)?!1:l0.test(e)?ad[e]=!0:(ld[e]=!0,!1)}function u0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function c0(e,t,n,r){if(t===null||typeof t>"u"||u0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nt[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nt[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nt[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nt[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nt[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nt[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nt[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nt[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nt[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ou=/[\-:]([a-z])/g;function Fu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ou,Fu);nt[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ou,Fu);nt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ou,Fu);nt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nt[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});nt.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nt[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pu(e,t,n,r){var o=nt.hasOwnProperty(t)?nt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(c0(t,n,o,r)&&(n=null),r||o===null?a0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=s0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oi=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Ar=Symbol.for("react.fragment"),Uu=Symbol.for("react.strict_mode"),Ta=Symbol.for("react.profiler"),ph=Symbol.for("react.provider"),gh=Symbol.for("react.context"),Bu=Symbol.for("react.forward_ref"),Ra=Symbol.for("react.suspense"),ja=Symbol.for("react.suspense_list"),$u=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),mh=Symbol.for("react.offscreen"),ud=Symbol.iterator;function Eo(e){return e===null||typeof e!="object"?null:(e=ud&&e[ud]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,zl;function Io(e){if(zl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zl=t&&t[1]||""}return`
`+zl+e}var Il=!1;function Ol(e,t){if(!e||Il)return"";Il=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,l=i.length-1;1<=s&&0<=l&&o[s]!==i[l];)l--;for(;1<=s&&0<=l;s--,l--)if(o[s]!==i[l]){if(s!==1||l!==1)do if(s--,l--,0>l||o[s]!==i[l]){var u=`
`+o[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=s&&0<=l);break}}}finally{Il=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Io(e):""}function d0(e){switch(e.tag){case 5:return Io(e.type);case 16:return Io("Lazy");case 13:return Io("Suspense");case 19:return Io("SuspenseList");case 0:case 2:case 15:return e=Ol(e.type,!1),e;case 11:return e=Ol(e.type.render,!1),e;case 1:return e=Ol(e.type,!0),e;default:return""}}function Ma(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ar:return"Fragment";case Lr:return"Portal";case Ta:return"Profiler";case Uu:return"StrictMode";case Ra:return"Suspense";case ja:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gh:return(e.displayName||"Context")+".Consumer";case ph:return(e._context.displayName||"Context")+".Provider";case Bu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $u:return t=e.displayName||null,t!==null?t:Ma(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return Ma(e(t))}catch{}}return null}function f0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ma(t);case 8:return t===Uu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function h0(e){var t=yh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fi(e){e._valueTracker||(e._valueTracker=h0(e))}function vh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Es(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Da(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function cd(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wh(e,t){t=t.checked,t!=null&&Pu(e,"checked",t,!1)}function La(e,t){wh(e,t);var n=Yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Aa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Aa(e,t.type,Yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Aa(e,t,n){(t!=="number"||Es(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Oo=Array.isArray;function Yr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Na(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Oo(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yn(n)}}function xh(e,t){var n=Yn(t.value),r=Yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function za(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pi,Sh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pi=Pi||document.createElement("div"),Pi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ti(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p0=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(e){p0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bo[t]=Bo[e]})});function kh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Bo.hasOwnProperty(e)&&Bo[e]?(""+t).trim():t+"px"}function Ch(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=kh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var g0=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(e,t){if(t){if(g0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Oa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fa=null;function Wu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pa=null,Kr=null,Gr=null;function pd(e){if(e=Ri(e)){if(typeof Pa!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=hl(t),Pa(e.stateNode,e.type,t))}}function _h(e){Kr?Gr?Gr.push(e):Gr=[e]:Kr=e}function Eh(){if(Kr){var e=Kr,t=Gr;if(Gr=Kr=null,pd(e),t)for(e=0;e<t.length;e++)pd(t[e])}}function Th(e,t){return e(t)}function Rh(){}var Fl=!1;function jh(e,t,n){if(Fl)return e(t,n);Fl=!0;try{return Th(e,t,n)}finally{Fl=!1,(Kr!==null||Gr!==null)&&(Rh(),Eh())}}function ni(e,t){var n=e.stateNode;if(n===null)return null;var r=hl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Ua=!1;if(wn)try{var To={};Object.defineProperty(To,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",To,To),window.removeEventListener("test",To,To)}catch{Ua=!1}function m0(e,t,n,r,o,i,s,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var $o=!1,Ts=null,Rs=!1,Ba=null,y0={onError:function(e){$o=!0,Ts=e}};function v0(e,t,n,r,o,i,s,l,u){$o=!1,Ts=null,m0.apply(y0,arguments)}function w0(e,t,n,r,o,i,s,l,u){if(v0.apply(this,arguments),$o){if($o){var d=Ts;$o=!1,Ts=null}else throw Error(Q(198));Rs||(Rs=!0,Ba=d)}}function Cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gd(e){if(Cr(e)!==e)throw Error(Q(188))}function x0(e){var t=e.alternate;if(!t){if(t=Cr(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return gd(o),e;if(i===r)return gd(o),t;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function Dh(e){return e=x0(e),e!==null?Lh(e):null}function Lh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lh(e);if(t!==null)return t;e=e.sibling}return null}var Ah=Ct.unstable_scheduleCallback,md=Ct.unstable_cancelCallback,b0=Ct.unstable_shouldYield,S0=Ct.unstable_requestPaint,Pe=Ct.unstable_now,k0=Ct.unstable_getCurrentPriorityLevel,Hu=Ct.unstable_ImmediatePriority,Nh=Ct.unstable_UserBlockingPriority,js=Ct.unstable_NormalPriority,C0=Ct.unstable_LowPriority,zh=Ct.unstable_IdlePriority,ul=null,qt=null;function _0(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(ul,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:R0,E0=Math.log,T0=Math.LN2;function R0(e){return e>>>=0,e===0?32:31-(E0(e)/T0|0)|0}var Ui=64,Bi=4194304;function Fo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ms(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var l=s&~o;l!==0?r=Fo(l):(i&=s,i!==0&&(r=Fo(i)))}else s=n&~o,s!==0?r=Fo(s):i!==0&&(r=Fo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),o=1<<n,r|=e[n],t&=~o;return r}function j0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Wt(i),l=1<<s,u=o[s];u===-1?(!(l&n)||l&r)&&(o[s]=j0(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function $a(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ih(){var e=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),e}function Pl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ei(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function D0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Wt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function Vu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ce=0;function Oh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fh,Yu,Ph,Uh,Bh,Wa=!1,$i=[],Fn=null,Pn=null,Un=null,ri=new Map,oi=new Map,Ln=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yd(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":ri.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":oi.delete(t.pointerId)}}function Ro(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Ri(t),t!==null&&Yu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function A0(e,t,n,r,o){switch(t){case"focusin":return Fn=Ro(Fn,e,t,n,r,o),!0;case"dragenter":return Pn=Ro(Pn,e,t,n,r,o),!0;case"mouseover":return Un=Ro(Un,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return ri.set(i,Ro(ri.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,oi.set(i,Ro(oi.get(i)||null,e,t,n,r,o)),!0}return!1}function $h(e){var t=rr(e.target);if(t!==null){var n=Cr(t);if(n!==null){if(t=n.tag,t===13){if(t=Mh(n),t!==null){e.blockedOn=t,Bh(e.priority,function(){Ph(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ha(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Fa=r,n.target.dispatchEvent(r),Fa=null}else return t=Ri(n),t!==null&&Yu(t),e.blockedOn=n,!1;t.shift()}return!0}function vd(e,t,n){cs(e)&&n.delete(t)}function N0(){Wa=!1,Fn!==null&&cs(Fn)&&(Fn=null),Pn!==null&&cs(Pn)&&(Pn=null),Un!==null&&cs(Un)&&(Un=null),ri.forEach(vd),oi.forEach(vd)}function jo(e,t){e.blockedOn===t&&(e.blockedOn=null,Wa||(Wa=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,N0)))}function ii(e){function t(o){return jo(o,e)}if(0<$i.length){jo($i[0],e);for(var n=1;n<$i.length;n++){var r=$i[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Fn!==null&&jo(Fn,e),Pn!==null&&jo(Pn,e),Un!==null&&jo(Un,e),ri.forEach(t),oi.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)$h(n),n.blockedOn===null&&Ln.shift()}var Qr=_n.ReactCurrentBatchConfig,Ds=!0;function z0(e,t,n,r){var o=Ce,i=Qr.transition;Qr.transition=null;try{Ce=1,Ku(e,t,n,r)}finally{Ce=o,Qr.transition=i}}function I0(e,t,n,r){var o=Ce,i=Qr.transition;Qr.transition=null;try{Ce=4,Ku(e,t,n,r)}finally{Ce=o,Qr.transition=i}}function Ku(e,t,n,r){if(Ds){var o=Ha(e,t,n,r);if(o===null)Ql(e,t,r,Ls,n),yd(e,r);else if(A0(o,e,t,n,r))r.stopPropagation();else if(yd(e,r),t&4&&-1<L0.indexOf(e)){for(;o!==null;){var i=Ri(o);if(i!==null&&Fh(i),i=Ha(e,t,n,r),i===null&&Ql(e,t,r,Ls,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else Ql(e,t,r,null,n)}}var Ls=null;function Ha(e,t,n,r){if(Ls=null,e=Wu(r),e=rr(e),e!==null)if(t=Cr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ls=e,null}function Wh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k0()){case Hu:return 1;case Nh:return 4;case js:case C0:return 16;case zh:return 536870912;default:return 16}default:return 16}}var zn=null,Gu=null,ds=null;function Hh(){if(ds)return ds;var e,t=Gu,n=t.length,r,o="value"in zn?zn.value:zn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return ds=o.slice(e,1<r?1-r:void 0)}function fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function wd(){return!1}function Tt(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wi:wd,this.isPropagationStopped=wd,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),t}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qu=Tt(bo),Ti=Ie({},bo,{view:0,detail:0}),O0=Tt(Ti),Ul,Bl,Mo,cl=Ie({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mo&&(Mo&&e.type==="mousemove"?(Ul=e.screenX-Mo.screenX,Bl=e.screenY-Mo.screenY):Bl=Ul=0,Mo=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Bl}}),xd=Tt(cl),F0=Ie({},cl,{dataTransfer:0}),P0=Tt(F0),U0=Ie({},Ti,{relatedTarget:0}),$l=Tt(U0),B0=Ie({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),$0=Tt(B0),W0=Ie({},bo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),H0=Tt(W0),V0=Ie({},bo,{data:0}),bd=Tt(V0),Y0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G0[e])?!!t[e]:!1}function Xu(){return Q0}var X0=Ie({},Ti,{key:function(e){if(e.key){var t=Y0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xu,charCode:function(e){return e.type==="keypress"?fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J0=Tt(X0),q0=Ie({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sd=Tt(q0),Z0=Ie({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xu}),ey=Tt(Z0),ty=Ie({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ny=Tt(ty),ry=Ie({},cl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oy=Tt(ry),iy=[9,13,27,32],Ju=wn&&"CompositionEvent"in window,Wo=null;wn&&"documentMode"in document&&(Wo=document.documentMode);var sy=wn&&"TextEvent"in window&&!Wo,Vh=wn&&(!Ju||Wo&&8<Wo&&11>=Wo),kd=" ",Cd=!1;function Yh(e,t){switch(e){case"keyup":return iy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nr=!1;function ly(e,t){switch(e){case"compositionend":return Kh(t);case"keypress":return t.which!==32?null:(Cd=!0,kd);case"textInput":return e=t.data,e===kd&&Cd?null:e;default:return null}}function ay(e,t){if(Nr)return e==="compositionend"||!Ju&&Yh(e,t)?(e=Hh(),ds=Gu=zn=null,Nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vh&&t.locale!=="ko"?null:t.data;default:return null}}var uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uy[e.type]:t==="textarea"}function Gh(e,t,n,r){_h(r),t=As(t,"onChange"),0<t.length&&(n=new Qu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ho=null,si=null;function cy(e){ip(e,0)}function dl(e){var t=Or(e);if(vh(t))return e}function dy(e,t){if(e==="change")return t}var Qh=!1;if(wn){var Wl;if(wn){var Hl="oninput"in document;if(!Hl){var Ed=document.createElement("div");Ed.setAttribute("oninput","return;"),Hl=typeof Ed.oninput=="function"}Wl=Hl}else Wl=!1;Qh=Wl&&(!document.documentMode||9<document.documentMode)}function Td(){Ho&&(Ho.detachEvent("onpropertychange",Xh),si=Ho=null)}function Xh(e){if(e.propertyName==="value"&&dl(si)){var t=[];Gh(t,si,e,Wu(e)),jh(cy,t)}}function fy(e,t,n){e==="focusin"?(Td(),Ho=t,si=n,Ho.attachEvent("onpropertychange",Xh)):e==="focusout"&&Td()}function hy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dl(si)}function py(e,t){if(e==="click")return dl(t)}function gy(e,t){if(e==="input"||e==="change")return dl(t)}function my(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:my;function li(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ea.call(t,o)||!Vt(e[o],t[o]))return!1}return!0}function Rd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jd(e,t){var n=Rd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rd(n)}}function Jh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qh(){for(var e=window,t=Es();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Es(e.document)}return t}function qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yy(e){var t=qh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jh(n.ownerDocument.documentElement,n)){if(r!==null&&qu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=jd(n,i);var s=jd(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vy=wn&&"documentMode"in document&&11>=document.documentMode,zr=null,Va=null,Vo=null,Ya=!1;function Md(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ya||zr==null||zr!==Es(r)||(r=zr,"selectionStart"in r&&qu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&li(Vo,r)||(Vo=r,r=As(Va,"onSelect"),0<r.length&&(t=new Qu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},Vl={},Zh={};wn&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);function fl(e){if(Vl[e])return Vl[e];if(!Ir[e])return e;var t=Ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Zh)return Vl[e]=t[n];return e}var ep=fl("animationend"),tp=fl("animationiteration"),np=fl("animationstart"),rp=fl("transitionend"),op=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){op.set(e,t),kr(t,[e])}for(var Yl=0;Yl<Dd.length;Yl++){var Kl=Dd[Yl],wy=Kl.toLowerCase(),xy=Kl[0].toUpperCase()+Kl.slice(1);Jn(wy,"on"+xy)}Jn(ep,"onAnimationEnd");Jn(tp,"onAnimationIteration");Jn(np,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(rp,"onTransitionEnd");no("onMouseEnter",["mouseout","mouseover"]);no("onMouseLeave",["mouseout","mouseover"]);no("onPointerEnter",["pointerout","pointerover"]);no("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),by=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function Ld(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,w0(r,t,void 0,e),e.currentTarget=null}function ip(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&o.isPropagationStopped())break e;Ld(o,l,d),i=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&o.isPropagationStopped())break e;Ld(o,l,d),i=u}}}if(Rs)throw e=Ba,Rs=!1,Ba=null,e}function Re(e,t){var n=t[Ja];n===void 0&&(n=t[Ja]=new Set);var r=e+"__bubble";n.has(r)||(sp(t,e,2,!1),n.add(r))}function Gl(e,t,n){var r=0;t&&(r|=4),sp(n,e,r,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function ai(e){if(!e[Vi]){e[Vi]=!0,hh.forEach(function(n){n!=="selectionchange"&&(by.has(n)||Gl(n,!1,e),Gl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vi]||(t[Vi]=!0,Gl("selectionchange",!1,t))}}function sp(e,t,n,r){switch(Wh(t)){case 1:var o=z0;break;case 4:o=I0;break;default:o=Ku}n=o.bind(null,t,n,e),o=void 0,!Ua||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Ql(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;s=s.return}for(;l!==null;){if(s=rr(l),s===null)return;if(u=s.tag,u===5||u===6){r=i=s;continue e}l=l.parentNode}}r=r.return}jh(function(){var d=i,y=Wu(n),f=[];e:{var p=op.get(e);if(p!==void 0){var g=Qu,v=e;switch(e){case"keypress":if(fs(n)===0)break e;case"keydown":case"keyup":g=J0;break;case"focusin":v="focus",g=$l;break;case"focusout":v="blur",g=$l;break;case"beforeblur":case"afterblur":g=$l;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=xd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=P0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ey;break;case ep:case tp:case np:g=$0;break;case rp:g=ny;break;case"scroll":g=O0;break;case"wheel":g=oy;break;case"copy":case"cut":case"paste":g=H0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Sd}var b=(t&4)!==0,L=!b&&e==="scroll",S=b?p!==null?p+"Capture":null:p;b=[];for(var k=d,c;k!==null;){c=k;var w=c.stateNode;if(c.tag===5&&w!==null&&(c=w,S!==null&&(w=ni(k,S),w!=null&&b.push(ui(k,w,c)))),L)break;k=k.return}0<b.length&&(p=new g(p,v,null,n,y),f.push({event:p,listeners:b}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",p&&n!==Fa&&(v=n.relatedTarget||n.fromElement)&&(rr(v)||v[xn]))break e;if((g||p)&&(p=y.window===y?y:(p=y.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=d,v=v?rr(v):null,v!==null&&(L=Cr(v),v!==L||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=d),g!==v)){if(b=xd,w="onMouseLeave",S="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(b=Sd,w="onPointerLeave",S="onPointerEnter",k="pointer"),L=g==null?p:Or(g),c=v==null?p:Or(v),p=new b(w,k+"leave",g,n,y),p.target=L,p.relatedTarget=c,w=null,rr(y)===d&&(b=new b(S,k+"enter",v,n,y),b.target=c,b.relatedTarget=L,w=b),L=w,g&&v)t:{for(b=g,S=v,k=0,c=b;c;c=Rr(c))k++;for(c=0,w=S;w;w=Rr(w))c++;for(;0<k-c;)b=Rr(b),k--;for(;0<c-k;)S=Rr(S),c--;for(;k--;){if(b===S||S!==null&&b===S.alternate)break t;b=Rr(b),S=Rr(S)}b=null}else b=null;g!==null&&Ad(f,p,g,b,!1),v!==null&&L!==null&&Ad(f,L,v,b,!0)}}e:{if(p=d?Or(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var C=dy;else if(_d(p))if(Qh)C=gy;else{C=hy;var T=fy}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=py);if(C&&(C=C(e,d))){Gh(f,C,n,y);break e}T&&T(e,p,d),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Aa(p,"number",p.value)}switch(T=d?Or(d):window,e){case"focusin":(_d(T)||T.contentEditable==="true")&&(zr=T,Va=d,Vo=null);break;case"focusout":Vo=Va=zr=null;break;case"mousedown":Ya=!0;break;case"contextmenu":case"mouseup":case"dragend":Ya=!1,Md(f,n,y);break;case"selectionchange":if(vy)break;case"keydown":case"keyup":Md(f,n,y)}var _;if(Ju)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Nr?Yh(e,n)&&(j="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(j="onCompositionStart");j&&(Vh&&n.locale!=="ko"&&(Nr||j!=="onCompositionStart"?j==="onCompositionEnd"&&Nr&&(_=Hh()):(zn=y,Gu="value"in zn?zn.value:zn.textContent,Nr=!0)),T=As(d,j),0<T.length&&(j=new bd(j,e,null,n,y),f.push({event:j,listeners:T}),_?j.data=_:(_=Kh(n),_!==null&&(j.data=_)))),(_=sy?ly(e,n):ay(e,n))&&(d=As(d,"onBeforeInput"),0<d.length&&(y=new bd("onBeforeInput","beforeinput",null,n,y),f.push({event:y,listeners:d}),y.data=_))}ip(f,t)})}function ui(e,t,n){return{instance:e,listener:t,currentTarget:n}}function As(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ni(e,n),i!=null&&r.unshift(ui(e,i,o)),i=ni(e,t),i!=null&&r.push(ui(e,i,o))),e=e.return}return r}function Rr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ad(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,o?(u=ni(n,i),u!=null&&s.unshift(ui(n,u,l))):o||(u=ni(n,i),u!=null&&s.push(ui(n,u,l)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Sy=/\r\n?/g,ky=/\u0000|\uFFFD/g;function Nd(e){return(typeof e=="string"?e:""+e).replace(Sy,`
`).replace(ky,"")}function Yi(e,t,n){if(t=Nd(t),Nd(e)!==t&&n)throw Error(Q(425))}function Ns(){}var Ka=null,Ga=null;function Qa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xa=typeof setTimeout=="function"?setTimeout:void 0,Cy=typeof clearTimeout=="function"?clearTimeout:void 0,zd=typeof Promise=="function"?Promise:void 0,_y=typeof queueMicrotask=="function"?queueMicrotask:typeof zd<"u"?function(e){return zd.resolve(null).then(e).catch(Ey)}:Xa;function Ey(e){setTimeout(function(){throw e})}function Xl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),ii(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);ii(t)}function Bn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Id(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var So=Math.random().toString(36).slice(2),Jt="__reactFiber$"+So,ci="__reactProps$"+So,xn="__reactContainer$"+So,Ja="__reactEvents$"+So,Ty="__reactListeners$"+So,Ry="__reactHandles$"+So;function rr(e){var t=e[Jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[Jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Id(e);e!==null;){if(n=e[Jt])return n;e=Id(e)}return t}e=n,n=e.parentNode}return null}function Ri(e){return e=e[Jt]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function hl(e){return e[ci]||null}var qa=[],Fr=-1;function qn(e){return{current:e}}function je(e){0>Fr||(e.current=qa[Fr],qa[Fr]=null,Fr--)}function Te(e,t){Fr++,qa[Fr]=e.current,e.current=t}var Kn={},lt=qn(Kn),pt=qn(!1),hr=Kn;function ro(e,t){var n=e.type.contextTypes;if(!n)return Kn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function gt(e){return e=e.childContextTypes,e!=null}function zs(){je(pt),je(lt)}function Od(e,t,n){if(lt.current!==Kn)throw Error(Q(168));Te(lt,t),Te(pt,n)}function lp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Q(108,f0(e)||"Unknown",o));return Ie({},n,r)}function Is(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,hr=lt.current,Te(lt,e),Te(pt,pt.current),!0}function Fd(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=lp(e,t,hr),r.__reactInternalMemoizedMergedChildContext=e,je(pt),je(lt),Te(lt,e)):je(pt),Te(pt,n)}var fn=null,pl=!1,Jl=!1;function ap(e){fn===null?fn=[e]:fn.push(e)}function jy(e){pl=!0,ap(e)}function Zn(){if(!Jl&&fn!==null){Jl=!0;var e=0,t=Ce;try{var n=fn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fn=null,pl=!1}catch(o){throw fn!==null&&(fn=fn.slice(e+1)),Ah(Hu,Zn),o}finally{Ce=t,Jl=!1}}return null}var Pr=[],Ur=0,Os=null,Fs=0,Rt=[],jt=0,pr=null,pn=1,gn="";function er(e,t){Pr[Ur++]=Fs,Pr[Ur++]=Os,Os=e,Fs=t}function up(e,t,n){Rt[jt++]=pn,Rt[jt++]=gn,Rt[jt++]=pr,pr=e;var r=pn;e=gn;var o=32-Wt(r)-1;r&=~(1<<o),n+=1;var i=32-Wt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,pn=1<<32-Wt(t)+o|n<<o|r,gn=i+e}else pn=1<<i|n<<o|r,gn=e}function Zu(e){e.return!==null&&(er(e,1),up(e,1,0))}function ec(e){for(;e===Os;)Os=Pr[--Ur],Pr[Ur]=null,Fs=Pr[--Ur],Pr[Ur]=null;for(;e===pr;)pr=Rt[--jt],Rt[jt]=null,gn=Rt[--jt],Rt[jt]=null,pn=Rt[--jt],Rt[jt]=null}var St=null,xt=null,De=!1,$t=null;function cp(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Pd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,xt=Bn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pr!==null?{id:pn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,xt=null,!0):!1;default:return!1}}function Za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eu(e){if(De){var t=xt;if(t){var n=t;if(!Pd(e,t)){if(Za(e))throw Error(Q(418));t=Bn(n.nextSibling);var r=St;t&&Pd(e,t)?cp(r,n):(e.flags=e.flags&-4097|2,De=!1,St=e)}}else{if(Za(e))throw Error(Q(418));e.flags=e.flags&-4097|2,De=!1,St=e}}}function Ud(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function Ki(e){if(e!==St)return!1;if(!De)return Ud(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qa(e.type,e.memoizedProps)),t&&(t=xt)){if(Za(e))throw dp(),Error(Q(418));for(;t;)cp(e,t),t=Bn(t.nextSibling)}if(Ud(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){xt=Bn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}xt=null}}else xt=St?Bn(e.stateNode.nextSibling):null;return!0}function dp(){for(var e=xt;e;)e=Bn(e.nextSibling)}function oo(){xt=St=null,De=!1}function tc(e){$t===null?$t=[e]:$t.push(e)}var My=_n.ReactCurrentBatchConfig;function Do(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var l=o.refs;s===null?delete l[i]:l[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function Gi(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bd(e){var t=e._init;return t(e._payload)}function fp(e){function t(S,k){if(e){var c=S.deletions;c===null?(S.deletions=[k],S.flags|=16):c.push(k)}}function n(S,k){if(!e)return null;for(;k!==null;)t(S,k),k=k.sibling;return null}function r(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function o(S,k){return S=Vn(S,k),S.index=0,S.sibling=null,S}function i(S,k,c){return S.index=c,e?(c=S.alternate,c!==null?(c=c.index,c<k?(S.flags|=2,k):c):(S.flags|=2,k)):(S.flags|=1048576,k)}function s(S){return e&&S.alternate===null&&(S.flags|=2),S}function l(S,k,c,w){return k===null||k.tag!==6?(k=oa(c,S.mode,w),k.return=S,k):(k=o(k,c),k.return=S,k)}function u(S,k,c,w){var C=c.type;return C===Ar?y(S,k,c.props.children,w,c.key):k!==null&&(k.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Bd(C)===k.type)?(w=o(k,c.props),w.ref=Do(S,k,c),w.return=S,w):(w=ws(c.type,c.key,c.props,null,S.mode,w),w.ref=Do(S,k,c),w.return=S,w)}function d(S,k,c,w){return k===null||k.tag!==4||k.stateNode.containerInfo!==c.containerInfo||k.stateNode.implementation!==c.implementation?(k=ia(c,S.mode,w),k.return=S,k):(k=o(k,c.children||[]),k.return=S,k)}function y(S,k,c,w,C){return k===null||k.tag!==7?(k=lr(c,S.mode,w,C),k.return=S,k):(k=o(k,c),k.return=S,k)}function f(S,k,c){if(typeof k=="string"&&k!==""||typeof k=="number")return k=oa(""+k,S.mode,c),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Oi:return c=ws(k.type,k.key,k.props,null,S.mode,c),c.ref=Do(S,null,k),c.return=S,c;case Lr:return k=ia(k,S.mode,c),k.return=S,k;case jn:var w=k._init;return f(S,w(k._payload),c)}if(Oo(k)||Eo(k))return k=lr(k,S.mode,c,null),k.return=S,k;Gi(S,k)}return null}function p(S,k,c,w){var C=k!==null?k.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return C!==null?null:l(S,k,""+c,w);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Oi:return c.key===C?u(S,k,c,w):null;case Lr:return c.key===C?d(S,k,c,w):null;case jn:return C=c._init,p(S,k,C(c._payload),w)}if(Oo(c)||Eo(c))return C!==null?null:y(S,k,c,w,null);Gi(S,c)}return null}function g(S,k,c,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return S=S.get(c)||null,l(k,S,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oi:return S=S.get(w.key===null?c:w.key)||null,u(k,S,w,C);case Lr:return S=S.get(w.key===null?c:w.key)||null,d(k,S,w,C);case jn:var T=w._init;return g(S,k,c,T(w._payload),C)}if(Oo(w)||Eo(w))return S=S.get(c)||null,y(k,S,w,C,null);Gi(k,w)}return null}function v(S,k,c,w){for(var C=null,T=null,_=k,j=k=0,z=null;_!==null&&j<c.length;j++){_.index>j?(z=_,_=null):z=_.sibling;var R=p(S,_,c[j],w);if(R===null){_===null&&(_=z);break}e&&_&&R.alternate===null&&t(S,_),k=i(R,k,j),T===null?C=R:T.sibling=R,T=R,_=z}if(j===c.length)return n(S,_),De&&er(S,j),C;if(_===null){for(;j<c.length;j++)_=f(S,c[j],w),_!==null&&(k=i(_,k,j),T===null?C=_:T.sibling=_,T=_);return De&&er(S,j),C}for(_=r(S,_);j<c.length;j++)z=g(_,S,j,c[j],w),z!==null&&(e&&z.alternate!==null&&_.delete(z.key===null?j:z.key),k=i(z,k,j),T===null?C=z:T.sibling=z,T=z);return e&&_.forEach(function(N){return t(S,N)}),De&&er(S,j),C}function b(S,k,c,w){var C=Eo(c);if(typeof C!="function")throw Error(Q(150));if(c=C.call(c),c==null)throw Error(Q(151));for(var T=C=null,_=k,j=k=0,z=null,R=c.next();_!==null&&!R.done;j++,R=c.next()){_.index>j?(z=_,_=null):z=_.sibling;var N=p(S,_,R.value,w);if(N===null){_===null&&(_=z);break}e&&_&&N.alternate===null&&t(S,_),k=i(N,k,j),T===null?C=N:T.sibling=N,T=N,_=z}if(R.done)return n(S,_),De&&er(S,j),C;if(_===null){for(;!R.done;j++,R=c.next())R=f(S,R.value,w),R!==null&&(k=i(R,k,j),T===null?C=R:T.sibling=R,T=R);return De&&er(S,j),C}for(_=r(S,_);!R.done;j++,R=c.next())R=g(_,S,j,R.value,w),R!==null&&(e&&R.alternate!==null&&_.delete(R.key===null?j:R.key),k=i(R,k,j),T===null?C=R:T.sibling=R,T=R);return e&&_.forEach(function(F){return t(S,F)}),De&&er(S,j),C}function L(S,k,c,w){if(typeof c=="object"&&c!==null&&c.type===Ar&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case Oi:e:{for(var C=c.key,T=k;T!==null;){if(T.key===C){if(C=c.type,C===Ar){if(T.tag===7){n(S,T.sibling),k=o(T,c.props.children),k.return=S,S=k;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===jn&&Bd(C)===T.type){n(S,T.sibling),k=o(T,c.props),k.ref=Do(S,T,c),k.return=S,S=k;break e}n(S,T);break}else t(S,T);T=T.sibling}c.type===Ar?(k=lr(c.props.children,S.mode,w,c.key),k.return=S,S=k):(w=ws(c.type,c.key,c.props,null,S.mode,w),w.ref=Do(S,k,c),w.return=S,S=w)}return s(S);case Lr:e:{for(T=c.key;k!==null;){if(k.key===T)if(k.tag===4&&k.stateNode.containerInfo===c.containerInfo&&k.stateNode.implementation===c.implementation){n(S,k.sibling),k=o(k,c.children||[]),k.return=S,S=k;break e}else{n(S,k);break}else t(S,k);k=k.sibling}k=ia(c,S.mode,w),k.return=S,S=k}return s(S);case jn:return T=c._init,L(S,k,T(c._payload),w)}if(Oo(c))return v(S,k,c,w);if(Eo(c))return b(S,k,c,w);Gi(S,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,k!==null&&k.tag===6?(n(S,k.sibling),k=o(k,c),k.return=S,S=k):(n(S,k),k=oa(c,S.mode,w),k.return=S,S=k),s(S)):n(S,k)}return L}var io=fp(!0),hp=fp(!1),Ps=qn(null),Us=null,Br=null,nc=null;function rc(){nc=Br=Us=null}function oc(e){var t=Ps.current;je(Ps),e._currentValue=t}function tu(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xr(e,t){Us=e,nc=Br=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(nc!==e)if(e={context:e,memoizedValue:t,next:null},Br===null){if(Us===null)throw Error(Q(308));Br=e,Us.dependencies={lanes:0,firstContext:e}}else Br=Br.next=e;return t}var or=null;function ic(e){or===null?or=[e]:or.push(e)}function pp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,ic(t)):(n.next=o.next,o.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function sc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,bn(e,n)}return o=r.interleaved,o===null?(t.next=t,ic(r)):(t.next=o.next,o.next=t),r.interleaved=t,bn(e,n)}function hs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vu(e,n)}}function $d(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var o=e.updateQueue;Mn=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var u=l,d=u.next;u.next=null,s===null?i=d:s.next=d,s=u;var y=e.alternate;y!==null&&(y=y.updateQueue,l=y.lastBaseUpdate,l!==s&&(l===null?y.firstBaseUpdate=d:l.next=d,y.lastBaseUpdate=u))}if(i!==null){var f=o.baseState;s=0,y=d=u=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){y!==null&&(y=y.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(p=t,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=Ie({},f,p);break e;case 2:Mn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},y===null?(d=y=g,u=f):y=y.next=g,s|=p;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;p=l,l=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(y===null&&(u=f),o.baseState=u,o.firstBaseUpdate=d,o.lastBaseUpdate=y,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);mr|=s,e.lanes=s,e.memoizedState=f}}function Wd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Q(191,o));o.call(r)}}}var ji={},Zt=qn(ji),di=qn(ji),fi=qn(ji);function ir(e){if(e===ji)throw Error(Q(174));return e}function lc(e,t){switch(Te(fi,t),Te(di,e),Te(Zt,ji),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:za(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=za(t,e)}je(Zt),Te(Zt,t)}function so(){je(Zt),je(di),je(fi)}function mp(e){ir(fi.current);var t=ir(Zt.current),n=za(t,e.type);t!==n&&(Te(di,e),Te(Zt,n))}function ac(e){di.current===e&&(je(Zt),je(di))}var Ae=qn(0);function $s(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function uc(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var ps=_n.ReactCurrentDispatcher,Zl=_n.ReactCurrentBatchConfig,gr=0,ze=null,Be=null,Ge=null,Ws=!1,Yo=!1,hi=0,Dy=0;function rt(){throw Error(Q(321))}function cc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function dc(e,t,n,r,o,i){if(gr=i,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ps.current=e===null||e.memoizedState===null?zy:Iy,e=n(r,o),Yo){i=0;do{if(Yo=!1,hi=0,25<=i)throw Error(Q(301));i+=1,Ge=Be=null,t.updateQueue=null,ps.current=Oy,e=n(r,o)}while(Yo)}if(ps.current=Hs,t=Be!==null&&Be.next!==null,gr=0,Ge=Be=ze=null,Ws=!1,t)throw Error(Q(300));return e}function fc(){var e=hi!==0;return hi=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?ze.memoizedState=Ge=e:Ge=Ge.next=e,Ge}function It(){if(Be===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=Ge===null?ze.memoizedState:Ge.next;if(t!==null)Ge=t,Be=e;else{if(e===null)throw Error(Q(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ge===null?ze.memoizedState=Ge=e:Ge=Ge.next=e}return Ge}function pi(e,t){return typeof t=="function"?t(e):t}function ea(e){var t=It(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Be,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var l=s=null,u=null,d=i;do{var y=d.lane;if((gr&y)===y)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,s=r):u=u.next=f,ze.lanes|=y,mr|=y}d=d.next}while(d!==null&&d!==i);u===null?s=r:u.next=l,Vt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,ze.lanes|=i,mr|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ta(e){var t=It(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Vt(i,t.memoizedState)||(ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function yp(){}function vp(e,t){var n=ze,r=It(),o=t(),i=!Vt(r.memoizedState,o);if(i&&(r.memoizedState=o,ht=!0),r=r.queue,hc(bp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,gi(9,xp.bind(null,n,r,o,t),void 0,null),Je===null)throw Error(Q(349));gr&30||wp(n,t,o)}return o}function wp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xp(e,t,n,r){t.value=n,t.getSnapshot=r,Sp(t)&&kp(e)}function bp(e,t,n){return n(function(){Sp(t)&&kp(e)})}function Sp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch{return!0}}function kp(e){var t=bn(e,1);t!==null&&Ht(t,e,1,-1)}function Hd(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ny.bind(null,ze,e),[t.memoizedState,e]}function gi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ze.updateQueue,t===null?(t={lastEffect:null,stores:null},ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cp(){return It().memoizedState}function gs(e,t,n,r){var o=Xt();ze.flags|=e,o.memoizedState=gi(1|t,n,void 0,r===void 0?null:r)}function gl(e,t,n,r){var o=It();r=r===void 0?null:r;var i=void 0;if(Be!==null){var s=Be.memoizedState;if(i=s.destroy,r!==null&&cc(r,s.deps)){o.memoizedState=gi(t,n,i,r);return}}ze.flags|=e,o.memoizedState=gi(1|t,n,i,r)}function Vd(e,t){return gs(8390656,8,e,t)}function hc(e,t){return gl(2048,8,e,t)}function _p(e,t){return gl(4,2,e,t)}function Ep(e,t){return gl(4,4,e,t)}function Tp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rp(e,t,n){return n=n!=null?n.concat([e]):null,gl(4,4,Tp.bind(null,t,e),n)}function pc(){}function jp(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mp(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Dp(e,t,n){return gr&21?(Vt(n,t)||(n=Ih(),ze.lanes|=n,mr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function Ly(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Zl.transition;Zl.transition={};try{e(!1),t()}finally{Ce=n,Zl.transition=r}}function Lp(){return It().memoizedState}function Ay(e,t,n){var r=Hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ap(e))Np(t,n);else if(n=pp(e,t,n,r),n!==null){var o=ut();Ht(n,e,r,o),zp(n,t,r)}}function Ny(e,t,n){var r=Hn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ap(e))Np(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(o.hasEagerState=!0,o.eagerState=l,Vt(l,s)){var u=t.interleaved;u===null?(o.next=o,ic(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=pp(e,t,o,r),n!==null&&(o=ut(),Ht(n,e,r,o),zp(n,t,r))}}function Ap(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function Np(e,t){Yo=Ws=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function zp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vu(e,n)}}var Hs={readContext:zt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},zy={readContext:zt,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Vd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gs(4194308,4,Tp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){return gs(4,2,e,t)},useMemo:function(e,t){var n=Xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ay.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:Hd,useDebugValue:pc,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=Hd(!1),t=e[0];return e=Ly.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ze,o=Xt();if(De){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),Je===null)throw Error(Q(349));gr&30||wp(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Vd(bp.bind(null,r,i,e),[e]),r.flags|=2048,gi(9,xp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Xt(),t=Je.identifierPrefix;if(De){var n=gn,r=pn;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Dy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Iy={readContext:zt,useCallback:jp,useContext:zt,useEffect:hc,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Ep,useMemo:Mp,useReducer:ea,useRef:Cp,useState:function(){return ea(pi)},useDebugValue:pc,useDeferredValue:function(e){var t=It();return Dp(t,Be.memoizedState,e)},useTransition:function(){var e=ea(pi)[0],t=It().memoizedState;return[e,t]},useMutableSource:yp,useSyncExternalStore:vp,useId:Lp,unstable_isNewReconciler:!1},Oy={readContext:zt,useCallback:jp,useContext:zt,useEffect:hc,useImperativeHandle:Rp,useInsertionEffect:_p,useLayoutEffect:Ep,useMemo:Mp,useReducer:ta,useRef:Cp,useState:function(){return ta(pi)},useDebugValue:pc,useDeferredValue:function(e){var t=It();return Be===null?t.memoizedState=e:Dp(t,Be.memoizedState,e)},useTransition:function(){var e=ta(pi)[0],t=It().memoizedState;return[e,t]},useMutableSource:yp,useSyncExternalStore:vp,useId:Lp,unstable_isNewReconciler:!1};function Ut(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ml={isMounted:function(e){return(e=e._reactInternals)?Cr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),o=Hn(e),i=mn(r,o);i.payload=t,n!=null&&(i.callback=n),t=$n(e,i,o),t!==null&&(Ht(t,e,o,r),hs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),o=Hn(e),i=mn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=$n(e,i,o),t!==null&&(Ht(t,e,o,r),hs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=Hn(e),o=mn(n,r);o.tag=2,t!=null&&(o.callback=t),t=$n(e,o,r),t!==null&&(Ht(t,e,r,n),hs(t,e,r))}};function Yd(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!li(n,r)||!li(o,i):!0}function Ip(e,t,n){var r=!1,o=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=zt(i):(o=gt(t)?hr:lt.current,r=t.contextTypes,i=(r=r!=null)?ro(e,o):Kn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Kd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function ru(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},sc(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=zt(i):(i=gt(t)?hr:lt.current,o.context=ro(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(nu(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ml.enqueueReplaceState(o,o.state,null),Bs(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do n+=d0(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function na(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ou(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Fy=typeof WeakMap=="function"?WeakMap:Map;function Op(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,pu=r),ou(e,t)},n}function Fp(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ou(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ou(e,t),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Gd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=qy.bind(null,e,t,n),t.then(e,e))}function Qd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xd(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,$n(n,t,1))),n.lanes|=1),e)}var Py=_n.ReactCurrentOwner,ht=!1;function at(e,t,n,r){t.child=e===null?hp(t,null,n,r):io(t,e.child,n,r)}function Jd(e,t,n,r,o){n=n.render;var i=t.ref;return Xr(t,o),r=dc(e,t,n,r,i,o),n=fc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sn(e,t,o)):(De&&n&&Zu(t),t.flags|=1,at(e,t,r,o),t.child)}function qd(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Sc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Pp(e,t,i,r,o)):(e=ws(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:li,n(s,r)&&e.ref===t.ref)return Sn(e,t,o)}return t.flags|=1,e=Vn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Pp(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(li(i,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,Sn(e,t,o)}return iu(e,t,n,r,o)}function Up(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Wr,wt),wt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Wr,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Wr,wt),wt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Te(Wr,wt),wt|=r;return at(e,t,o,n),t.child}function Bp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iu(e,t,n,r,o){var i=gt(n)?hr:lt.current;return i=ro(t,i),Xr(t,o),n=dc(e,t,n,r,i,o),r=fc(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sn(e,t,o)):(De&&r&&Zu(t),t.flags|=1,at(e,t,n,o),t.child)}function Zd(e,t,n,r,o){if(gt(n)){var i=!0;Is(t)}else i=!1;if(Xr(t,o),t.stateNode===null)ms(e,t),Ip(t,n,r),ru(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var u=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=gt(n)?hr:lt.current,d=ro(t,d));var y=n.getDerivedStateFromProps,f=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Kd(t,s,r,d),Mn=!1;var p=t.memoizedState;s.state=p,Bs(t,r,s,o),u=t.memoizedState,l!==r||p!==u||pt.current||Mn?(typeof y=="function"&&(nu(t,n,y,r),u=t.memoizedState),(l=Mn||Yd(t,n,l,r,p,u,d))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=d,r=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,gp(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Ut(t.type,l),s.props=d,f=t.pendingProps,p=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=zt(u):(u=gt(n)?hr:lt.current,u=ro(t,u));var g=n.getDerivedStateFromProps;(y=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||p!==u)&&Kd(t,s,r,u),Mn=!1,p=t.memoizedState,s.state=p,Bs(t,r,s,o);var v=t.memoizedState;l!==f||p!==v||pt.current||Mn?(typeof g=="function"&&(nu(t,n,g,r),v=t.memoizedState),(d=Mn||Yd(t,n,d,r,p,v,u)||!1)?(y||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,u)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=u,r=d):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return su(e,t,n,r,i,o)}function su(e,t,n,r,o,i){Bp(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&Fd(t,n,!1),Sn(e,t,i);r=t.stateNode,Py.current=t;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=io(t,e.child,null,i),t.child=io(t,null,l,i)):at(e,t,l,i),t.memoizedState=r.state,o&&Fd(t,n,!0),t.child}function $p(e){var t=e.stateNode;t.pendingContext?Od(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Od(e,t.context,!1),lc(e,t.containerInfo)}function ef(e,t,n,r,o){return oo(),tc(o),t.flags|=256,at(e,t,n,r),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function au(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wp(e,t,n){var r=t.pendingProps,o=Ae.current,i=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Te(Ae,o&1),e===null)return eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=wl(s,r,0,null),e=lr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=au(n),t.memoizedState=lu,e):gc(t,s));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return Uy(e,t,s,r,l,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,l=o.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Vn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=Vn(l,i):(i=lr(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?au(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=lu,r}return i=e.child,e=i.sibling,r=Vn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gc(e,t){return t=wl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qi(e,t,n,r){return r!==null&&tc(r),io(t,e.child,null,n),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uy(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=na(Error(Q(422))),Qi(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=wl({mode:"visible",children:r.children},o,0,null),i=lr(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&io(t,e.child,null,s),t.child.memoizedState=au(s),t.memoizedState=lu,i);if(!(t.mode&1))return Qi(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Q(419)),r=na(i,r,void 0),Qi(e,t,s,r)}if(l=(s&e.childLanes)!==0,ht||l){if(r=Je,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,bn(e,o),Ht(r,e,o,-1))}return bc(),r=na(Error(Q(421))),Qi(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Zy.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,xt=Bn(o.nextSibling),St=t,De=!0,$t=null,e!==null&&(Rt[jt++]=pn,Rt[jt++]=gn,Rt[jt++]=pr,pn=e.id,gn=e.overflow,pr=t),t=gc(t,r.children),t.flags|=4096,t)}function tf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tu(e.return,t,n)}function ra(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Hp(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(at(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tf(e,n,t);else if(e.tag===19)tf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Te(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&$s(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ra(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$s(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ra(t,!0,n,null,i);break;case"together":ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ms(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Vn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function By(e,t,n){switch(t.tag){case 3:$p(t),oo();break;case 5:mp(t);break;case 1:gt(t.type)&&Is(t);break;case 4:lc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Te(Ps,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Wp(e,t,n):(Te(Ae,Ae.current&1),e=Sn(e,t,n),e!==null?e.sibling:null);Te(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Hp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Up(e,t,n)}return Sn(e,t,n)}var Vp,uu,Yp,Kp;Vp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};Yp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ir(Zt.current);var i=null;switch(n){case"input":o=Da(e,o),r=Da(e,r),i=[];break;case"select":o=Ie({},o,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":o=Na(e,o),r=Na(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ns)}Ia(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var l=o[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ei.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ei.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",e),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Kp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Lo(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $y(e,t,n){var r=t.pendingProps;switch(ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return gt(t.type)&&zs(),ot(t),null;case 3:return r=t.stateNode,so(),je(pt),je(lt),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$t!==null&&(yu($t),$t=null))),uu(e,t),ot(t),null;case 5:ac(t);var o=ir(fi.current);if(n=t.type,e!==null&&t.stateNode!=null)Yp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return ot(t),null}if(e=ir(Zt.current),Ki(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Jt]=t,r[ci]=i,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(o=0;o<Po.length;o++)Re(Po[o],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":cd(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":fd(r,i),Re("invalid",r)}Ia(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var l=i[s];s==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yi(r.textContent,l,e),o=["children",""+l]):ei.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Re("scroll",r)}switch(n){case"input":Fi(r),dd(r,i,!0);break;case"textarea":Fi(r),hd(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ns)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Jt]=t,e[ci]=r,Vp(e,t,!1,!1),t.stateNode=e;e:{switch(s=Oa(n,r),n){case"dialog":Re("cancel",e),Re("close",e),o=r;break;case"iframe":case"object":case"embed":Re("load",e),o=r;break;case"video":case"audio":for(o=0;o<Po.length;o++)Re(Po[o],e);o=r;break;case"source":Re("error",e),o=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),o=r;break;case"details":Re("toggle",e),o=r;break;case"input":cd(e,r),o=Da(e,r),Re("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Ie({},r,{value:void 0}),Re("invalid",e);break;case"textarea":fd(e,r),o=Na(e,r),Re("invalid",e);break;default:o=r}Ia(n,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Ch(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Sh(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ti(e,u):typeof u=="number"&&ti(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ei.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",e):u!=null&&Pu(e,i,u,s))}switch(n){case"input":Fi(e),dd(e,r,!1);break;case"textarea":Fi(e),hd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Yr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Yr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ns)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Kp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=ir(fi.current),ir(Zt.current),Ki(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jt]=t,(i=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:Yi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jt]=t,t.stateNode=r}return ot(t),null;case 13:if(je(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&xt!==null&&t.mode&1&&!(t.flags&128))dp(),oo(),t.flags|=98560,i=!1;else if(i=Ki(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Jt]=t}else oo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),i=!1}else $t!==null&&(yu($t),$t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?$e===0&&($e=3):bc())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return so(),uu(e,t),e===null&&ai(t.stateNode.containerInfo),ot(t),null;case 10:return oc(t.type._context),ot(t),null;case 17:return gt(t.type)&&zs(),ot(t),null;case 19:if(je(Ae),i=t.memoizedState,i===null)return ot(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Lo(i,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=$s(e),s!==null){for(t.flags|=128,Lo(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Te(Ae,Ae.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pe()>ao&&(t.flags|=128,r=!0,Lo(i,!1),t.lanes=4194304)}else{if(!r)if(e=$s(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!De)return ot(t),null}else 2*Pe()-i.renderingStartTime>ao&&n!==1073741824&&(t.flags|=128,r=!0,Lo(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pe(),t.sibling=null,n=Ae.current,Te(Ae,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return xc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Wy(e,t){switch(ec(t),t.tag){case 1:return gt(t.type)&&zs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return so(),je(pt),je(lt),uc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ac(t),null;case 13:if(je(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));oo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Ae),null;case 4:return so(),null;case 10:return oc(t.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var Xi=!1,it=!1,Hy=typeof WeakSet=="function"?WeakSet:Set,oe=null;function $r(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function cu(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var nf=!1;function Vy(e,t){if(Ka=Ds,e=qh(),qu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,d=0,y=0,f=e,p=null;t:for(;;){for(var g;f!==n||o!==0&&f.nodeType!==3||(l=s+o),f!==i||r!==0&&f.nodeType!==3||(u=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===e)break t;if(p===n&&++d===o&&(l=s),p===i&&++y===r&&(u=s),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ga={focusedElem:e,selectionRange:n},Ds=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,L=v.memoizedState,S=t.stateNode,k=S.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ut(t.type,b),L);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(w){Fe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return v=nf,nf=!1,v}function Ko(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&cu(t,n,i)}o=o.next}while(o!==r)}}function yl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function du(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gp(e){var t=e.alternate;t!==null&&(e.alternate=null,Gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jt],delete t[ci],delete t[Ja],delete t[Ty],delete t[Ry])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qp(e){return e.tag===5||e.tag===3||e.tag===4}function rf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ns));else if(r!==4&&(e=e.child,e!==null))for(fu(e,t,n),e=e.sibling;e!==null;)fu(e,t,n),e=e.sibling}function hu(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hu(e,t,n),e=e.sibling;e!==null;)hu(e,t,n),e=e.sibling}var qe=null,Bt=!1;function Rn(e,t,n){for(n=n.child;n!==null;)Xp(e,t,n),n=n.sibling}function Xp(e,t,n){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(ul,n)}catch{}switch(n.tag){case 5:it||$r(n,t);case 6:var r=qe,o=Bt;qe=null,Rn(e,t,n),qe=r,Bt=o,qe!==null&&(Bt?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Bt?(e=qe,n=n.stateNode,e.nodeType===8?Xl(e.parentNode,n):e.nodeType===1&&Xl(e,n),ii(e)):Xl(qe,n.stateNode));break;case 4:r=qe,o=Bt,qe=n.stateNode.containerInfo,Bt=!0,Rn(e,t,n),qe=r,Bt=o;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&cu(n,t,s),o=o.next}while(o!==r)}Rn(e,t,n);break;case 1:if(!it&&($r(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Fe(n,t,l)}Rn(e,t,n);break;case 21:Rn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Rn(e,t,n),it=r):Rn(e,t,n);break;default:Rn(e,t,n)}}function of(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Hy),t.forEach(function(r){var o=ev.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Pt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Bt=!1;break e;case 3:qe=l.stateNode.containerInfo,Bt=!0;break e;case 4:qe=l.stateNode.containerInfo,Bt=!0;break e}l=l.return}if(qe===null)throw Error(Q(160));Xp(i,s,o),qe=null,Bt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(d){Fe(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jp(t,e),t=t.sibling}function Jp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pt(t,e),Kt(e),r&4){try{Ko(3,e,e.return),yl(3,e)}catch(b){Fe(e,e.return,b)}try{Ko(5,e,e.return)}catch(b){Fe(e,e.return,b)}}break;case 1:Pt(t,e),Kt(e),r&512&&n!==null&&$r(n,n.return);break;case 5:if(Pt(t,e),Kt(e),r&512&&n!==null&&$r(n,n.return),e.flags&32){var o=e.stateNode;try{ti(o,"")}catch(b){Fe(e,e.return,b)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wh(o,i),Oa(l,s);var d=Oa(l,i);for(s=0;s<u.length;s+=2){var y=u[s],f=u[s+1];y==="style"?Ch(o,f):y==="dangerouslySetInnerHTML"?Sh(o,f):y==="children"?ti(o,f):Pu(o,y,f,d)}switch(l){case"input":La(o,i);break;case"textarea":xh(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Yr(o,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Yr(o,!!i.multiple,i.defaultValue,!0):Yr(o,!!i.multiple,i.multiple?[]:"",!1))}o[ci]=i}catch(b){Fe(e,e.return,b)}}break;case 6:if(Pt(t,e),Kt(e),r&4){if(e.stateNode===null)throw Error(Q(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(b){Fe(e,e.return,b)}}break;case 3:if(Pt(t,e),Kt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch(b){Fe(e,e.return,b)}break;case 4:Pt(t,e),Kt(e);break;case 13:Pt(t,e),Kt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(vc=Pe())),r&4&&of(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(it=(d=it)||y,Pt(t,e),it=d):Pt(t,e),Kt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(oe=e,y=e.child;y!==null;){for(f=oe=y;oe!==null;){switch(p=oe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ko(4,p,p.return);break;case 1:$r(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){Fe(r,n,b)}}break;case 5:$r(p,p.return);break;case 22:if(p.memoizedState!==null){lf(f);continue}}g!==null?(g.return=p,oe=g):lf(f)}y=y.sibling}e:for(y=null,f=e;;){if(f.tag===5){if(y===null){y=f;try{o=f.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,u=f.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=kh("display",s))}catch(b){Fe(e,e.return,b)}}}else if(f.tag===6){if(y===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(b){Fe(e,e.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pt(t,e),Kt(e),r&4&&of(e);break;case 21:break;default:Pt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Qp(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ti(o,""),r.flags&=-33);var i=rf(e);hu(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,l=rf(e);fu(e,l,s);break;default:throw Error(Q(161))}}catch(u){Fe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yy(e,t,n){oe=e,qp(e)}function qp(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var o=oe,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Xi;if(!s){var l=o.alternate,u=l!==null&&l.memoizedState!==null||it;l=Xi;var d=it;if(Xi=s,(it=u)&&!d)for(oe=o;oe!==null;)s=oe,u=s.child,s.tag===22&&s.memoizedState!==null?af(o):u!==null?(u.return=s,oe=u):af(o);for(;i!==null;)oe=i,qp(i),i=i.sibling;oe=o,Xi=l,it=d}sf(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,oe=i):sf(e)}}function sf(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||yl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Ut(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wd(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wd(t,s,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var f=y.dehydrated;f!==null&&ii(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}it||t.flags&512&&du(t)}catch(p){Fe(t,t.return,p)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function lf(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function af(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yl(4,t)}catch(u){Fe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Fe(t,o,u)}}var i=t.return;try{du(t)}catch(u){Fe(t,i,u)}break;case 5:var s=t.return;try{du(t)}catch(u){Fe(t,s,u)}}}catch(u){Fe(t,t.return,u)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var Ky=Math.ceil,Vs=_n.ReactCurrentDispatcher,mc=_n.ReactCurrentOwner,Nt=_n.ReactCurrentBatchConfig,Se=0,Je=null,Ue=null,et=0,wt=0,Wr=qn(0),$e=0,mi=null,mr=0,vl=0,yc=0,Go=null,ft=null,vc=0,ao=1/0,dn=null,Ys=!1,pu=null,Wn=null,Ji=!1,In=null,Ks=0,Qo=0,gu=null,ys=-1,vs=0;function ut(){return Se&6?Pe():ys!==-1?ys:ys=Pe()}function Hn(e){return e.mode&1?Se&2&&et!==0?et&-et:My.transition!==null?(vs===0&&(vs=Ih()),vs):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Wh(e.type)),e):1}function Ht(e,t,n,r){if(50<Qo)throw Qo=0,gu=null,Error(Q(185));Ei(e,n,r),(!(Se&2)||e!==Je)&&(e===Je&&(!(Se&2)&&(vl|=n),$e===4&&An(e,et)),mt(e,r),n===1&&Se===0&&!(t.mode&1)&&(ao=Pe()+500,pl&&Zn()))}function mt(e,t){var n=e.callbackNode;M0(e,t);var r=Ms(e,e===Je?et:0);if(r===0)n!==null&&md(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&md(n),t===1)e.tag===0?jy(uf.bind(null,e)):ap(uf.bind(null,e)),_y(function(){!(Se&6)&&Zn()}),n=null;else{switch(Oh(r)){case 1:n=Hu;break;case 4:n=Nh;break;case 16:n=js;break;case 536870912:n=zh;break;default:n=js}n=sg(n,Zp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Zp(e,t){if(ys=-1,vs=0,Se&6)throw Error(Q(327));var n=e.callbackNode;if(Jr()&&e.callbackNode!==n)return null;var r=Ms(e,e===Je?et:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gs(e,r);else{t=r;var o=Se;Se|=2;var i=tg();(Je!==e||et!==t)&&(dn=null,ao=Pe()+500,sr(e,t));do try{Xy();break}catch(l){eg(e,l)}while(!0);rc(),Vs.current=i,Se=o,Ue!==null?t=0:(Je=null,et=0,t=$e)}if(t!==0){if(t===2&&(o=$a(e),o!==0&&(r=o,t=mu(e,o))),t===1)throw n=mi,sr(e,0),An(e,r),mt(e,Pe()),n;if(t===6)An(e,r);else{if(o=e.current.alternate,!(r&30)&&!Gy(o)&&(t=Gs(e,r),t===2&&(i=$a(e),i!==0&&(r=i,t=mu(e,i))),t===1))throw n=mi,sr(e,0),An(e,r),mt(e,Pe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:tr(e,ft,dn);break;case 3:if(An(e,r),(r&130023424)===r&&(t=vc+500-Pe(),10<t)){if(Ms(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xa(tr.bind(null,e,ft,dn),t);break}tr(e,ft,dn);break;case 4:if(An(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-Wt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ky(r/1960))-r,10<r){e.timeoutHandle=Xa(tr.bind(null,e,ft,dn),r);break}tr(e,ft,dn);break;case 5:tr(e,ft,dn);break;default:throw Error(Q(329))}}}return mt(e,Pe()),e.callbackNode===n?Zp.bind(null,e):null}function mu(e,t){var n=Go;return e.current.memoizedState.isDehydrated&&(sr(e,t).flags|=256),e=Gs(e,t),e!==2&&(t=ft,ft=n,t!==null&&yu(t)),e}function yu(e){ft===null?ft=e:ft.push.apply(ft,e)}function Gy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Vt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~yc,t&=~vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(Se&6)throw Error(Q(327));Jr();var t=Ms(e,0);if(!(t&1))return mt(e,Pe()),null;var n=Gs(e,t);if(e.tag!==0&&n===2){var r=$a(e);r!==0&&(t=r,n=mu(e,r))}if(n===1)throw n=mi,sr(e,0),An(e,t),mt(e,Pe()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tr(e,ft,dn),mt(e,Pe()),null}function wc(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(ao=Pe()+500,pl&&Zn())}}function yr(e){In!==null&&In.tag===0&&!(Se&6)&&Jr();var t=Se;Se|=1;var n=Nt.transition,r=Ce;try{if(Nt.transition=null,Ce=1,e)return e()}finally{Ce=r,Nt.transition=n,Se=t,!(Se&6)&&Zn()}}function xc(){wt=Wr.current,je(Wr)}function sr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cy(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zs();break;case 3:so(),je(pt),je(lt),uc();break;case 5:ac(r);break;case 4:so();break;case 13:je(Ae);break;case 19:je(Ae);break;case 10:oc(r.type._context);break;case 22:case 23:xc()}n=n.return}if(Je=e,Ue=e=Vn(e.current,null),et=wt=t,$e=0,mi=null,yc=vl=mr=0,ft=Go=null,or!==null){for(t=0;t<or.length;t++)if(n=or[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}or=null}return e}function eg(e,t){do{var n=Ue;try{if(rc(),ps.current=Hs,Ws){for(var r=ze.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ws=!1}if(gr=0,Ge=Be=ze=null,Yo=!1,hi=0,mc.current=null,n===null||n.return===null){$e=1,mi=t,Ue=null;break}e:{var i=e,s=n.return,l=n,u=t;if(t=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,y=l,f=y.tag;if(!(y.mode&1)&&(f===0||f===11||f===15)){var p=y.alternate;p?(y.updateQueue=p.updateQueue,y.memoizedState=p.memoizedState,y.lanes=p.lanes):(y.updateQueue=null,y.memoizedState=null)}var g=Qd(s);if(g!==null){g.flags&=-257,Xd(g,s,l,i,t),g.mode&1&&Gd(i,d,t),t=g,u=d;var v=t.updateQueue;if(v===null){var b=new Set;b.add(u),t.updateQueue=b}else v.add(u);break e}else{if(!(t&1)){Gd(i,d,t),bc();break e}u=Error(Q(426))}}else if(De&&l.mode&1){var L=Qd(s);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Xd(L,s,l,i,t),tc(lo(u,l));break e}}i=u=lo(u,l),$e!==4&&($e=2),Go===null?Go=[i]:Go.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var S=Op(i,u,t);$d(i,S);break e;case 1:l=u;var k=i.type,c=i.stateNode;if(!(i.flags&128)&&(typeof k.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(Wn===null||!Wn.has(c)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Fp(i,l,t);$d(i,w);break e}}i=i.return}while(i!==null)}rg(n)}catch(C){t=C,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function tg(){var e=Vs.current;return Vs.current=Hs,e===null?Hs:e}function bc(){($e===0||$e===3||$e===2)&&($e=4),Je===null||!(mr&268435455)&&!(vl&268435455)||An(Je,et)}function Gs(e,t){var n=Se;Se|=2;var r=tg();(Je!==e||et!==t)&&(dn=null,sr(e,t));do try{Qy();break}catch(o){eg(e,o)}while(!0);if(rc(),Se=n,Vs.current=r,Ue!==null)throw Error(Q(261));return Je=null,et=0,$e}function Qy(){for(;Ue!==null;)ng(Ue)}function Xy(){for(;Ue!==null&&!b0();)ng(Ue)}function ng(e){var t=ig(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?rg(e):Ue=t,mc.current=null}function rg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Wy(n,t),n!==null){n.flags&=32767,Ue=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,Ue=null;return}}else if(n=$y(n,t,wt),n!==null){Ue=n;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);$e===0&&($e=5)}function tr(e,t,n){var r=Ce,o=Nt.transition;try{Nt.transition=null,Ce=1,Jy(e,t,n,r)}finally{Nt.transition=o,Ce=r}return null}function Jy(e,t,n,r){do Jr();while(In!==null);if(Se&6)throw Error(Q(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(D0(e,i),e===Je&&(Ue=Je=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ji||(Ji=!0,sg(js,function(){return Jr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Nt.transition,Nt.transition=null;var s=Ce;Ce=1;var l=Se;Se|=4,mc.current=null,Vy(e,n),Jp(n,e),yy(Ga),Ds=!!Ka,Ga=Ka=null,e.current=n,Yy(n),S0(),Se=l,Ce=s,Nt.transition=i}else e.current=n;if(Ji&&(Ji=!1,In=e,Ks=o),i=e.pendingLanes,i===0&&(Wn=null),_0(n.stateNode),mt(e,Pe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Ys)throw Ys=!1,e=pu,pu=null,e;return Ks&1&&e.tag!==0&&Jr(),i=e.pendingLanes,i&1?e===gu?Qo++:(Qo=0,gu=e):Qo=0,Zn(),null}function Jr(){if(In!==null){var e=Oh(Ks),t=Nt.transition,n=Ce;try{if(Nt.transition=null,Ce=16>e?16:e,In===null)var r=!1;else{if(e=In,In=null,Ks=0,Se&6)throw Error(Q(331));var o=Se;for(Se|=4,oe=e.current;oe!==null;){var i=oe,s=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(oe=d;oe!==null;){var y=oe;switch(y.tag){case 0:case 11:case 15:Ko(8,y,i)}var f=y.child;if(f!==null)f.return=y,oe=f;else for(;oe!==null;){y=oe;var p=y.sibling,g=y.return;if(Gp(y),y===d){oe=null;break}if(p!==null){p.return=g,oe=p;break}oe=g}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var L=b.sibling;b.sibling=null,b=L}while(b!==null)}}oe=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,oe=s;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ko(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,oe=S;break e}oe=i.return}}var k=e.current;for(oe=k;oe!==null;){s=oe;var c=s.child;if(s.subtreeFlags&2064&&c!==null)c.return=s,oe=c;else e:for(s=k;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yl(9,l)}}catch(C){Fe(l,l.return,C)}if(l===s){oe=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,oe=w;break e}oe=l.return}}if(Se=o,Zn(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(ul,e)}catch{}r=!0}return r}finally{Ce=n,Nt.transition=t}}return!1}function cf(e,t,n){t=lo(n,t),t=Op(e,t,1),e=$n(e,t,1),t=ut(),e!==null&&(Ei(e,1,t),mt(e,t))}function Fe(e,t,n){if(e.tag===3)cf(e,e,n);else for(;t!==null;){if(t.tag===3){cf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){e=lo(n,e),e=Fp(t,e,1),t=$n(t,e,1),e=ut(),t!==null&&(Ei(t,1,e),mt(t,e));break}}t=t.return}}function qy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(et&n)===n&&($e===4||$e===3&&(et&130023424)===et&&500>Pe()-vc?sr(e,0):yc|=n),mt(e,t)}function og(e,t){t===0&&(e.mode&1?(t=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):t=1);var n=ut();e=bn(e,t),e!==null&&(Ei(e,t,n),mt(e,n))}function Zy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),og(e,n)}function ev(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),og(e,n)}var ig;ig=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,By(e,t,n);ht=!!(e.flags&131072)}else ht=!1,De&&t.flags&1048576&&up(t,Fs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ms(e,t),e=t.pendingProps;var o=ro(t,lt.current);Xr(t,n),o=dc(null,t,r,e,o,n);var i=fc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(i=!0,Is(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,sc(t),o.updater=ml,t.stateNode=o,o._reactInternals=t,ru(t,r,e,n),t=su(null,t,r,!0,i,n)):(t.tag=0,De&&i&&Zu(t),at(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ms(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=nv(r),e=Ut(r,e),o){case 0:t=iu(null,t,r,e,n);break e;case 1:t=Zd(null,t,r,e,n);break e;case 11:t=Jd(null,t,r,e,n);break e;case 14:t=qd(null,t,r,Ut(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),iu(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Zd(e,t,r,o,n);case 3:e:{if($p(t),e===null)throw Error(Q(387));r=t.pendingProps,i=t.memoizedState,o=i.element,gp(e,t),Bs(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=lo(Error(Q(423)),t),t=ef(e,t,r,n,o);break e}else if(r!==o){o=lo(Error(Q(424)),t),t=ef(e,t,r,n,o);break e}else for(xt=Bn(t.stateNode.containerInfo.firstChild),St=t,De=!0,$t=null,n=hp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(oo(),r===o){t=Sn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return mp(t),e===null&&eu(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,Qa(r,o)?s=null:i!==null&&Qa(r,i)&&(t.flags|=32),Bp(e,t),at(e,t,s,n),t.child;case 6:return e===null&&eu(t),null;case 13:return Wp(e,t,n);case 4:return lc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=io(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),Jd(e,t,r,o,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,Te(Ps,r._currentValue),r._currentValue=s,i!==null)if(Vt(i.value,s)){if(i.children===o.children&&!pt.current){t=Sn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){s=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=mn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?u.next=u:(u.next=y.next,y.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),tu(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Q(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tu(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}at(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Xr(t,n),o=zt(o),r=r(o),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,o=Ut(r,t.pendingProps),o=Ut(r.type,o),qd(e,t,r,o,n);case 15:return Pp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Ut(r,o),ms(e,t),t.tag=1,gt(r)?(e=!0,Is(t)):e=!1,Xr(t,n),Ip(t,r,o),ru(t,r,o,n),su(null,t,r,!0,e,n);case 19:return Hp(e,t,n);case 22:return Up(e,t,n)}throw Error(Q(156,t.tag))};function sg(e,t){return Ah(e,t)}function tv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new tv(e,t,n,r)}function Sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nv(e){if(typeof e=="function")return Sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bu)return 11;if(e===$u)return 14}return 2}function Vn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ws(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Sc(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ar:return lr(n.children,o,i,t);case Uu:s=8,o|=8;break;case Ta:return e=Lt(12,n,t,o|2),e.elementType=Ta,e.lanes=i,e;case Ra:return e=Lt(13,n,t,o),e.elementType=Ra,e.lanes=i,e;case ja:return e=Lt(19,n,t,o),e.elementType=ja,e.lanes=i,e;case mh:return wl(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ph:s=10;break e;case gh:s=9;break e;case Bu:s=11;break e;case $u:s=14;break e;case jn:s=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Lt(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function lr(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function wl(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=mh,e.lanes=n,e.stateNode={isHidden:!1},e}function oa(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function ia(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function kc(e,t,n,r,o,i,s,l,u){return e=new rv(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Lt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sc(i),e}function ov(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lg(e){if(!e)return Kn;e=e._reactInternals;e:{if(Cr(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(gt(n))return lp(e,n,t)}return t}function ag(e,t,n,r,o,i,s,l,u){return e=kc(n,r,!0,e,o,i,s,l,u),e.context=lg(null),n=e.current,r=ut(),o=Hn(n),i=mn(r,o),i.callback=t??null,$n(n,i,o),e.current.lanes=o,Ei(e,o,r),mt(e,r),e}function xl(e,t,n,r){var o=t.current,i=ut(),s=Hn(o);return n=lg(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$n(o,t,s),e!==null&&(Ht(e,o,s,i),hs(e,o,s)),s}function Qs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function df(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cc(e,t){df(e,t),(e=e.alternate)&&df(e,t)}function iv(){return null}var ug=typeof reportError=="function"?reportError:function(e){console.error(e)};function _c(e){this._internalRoot=e}bl.prototype.render=_c.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));xl(e,t,null,null)};bl.prototype.unmount=_c.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){xl(null,e,null,null)}),t[xn]=null}};function bl(e){this._internalRoot=e}bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&$h(e)}};function Ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ff(){}function sv(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=Qs(s);i.call(d)}}var s=ag(t,r,e,0,null,!1,!1,"",ff);return e._reactRootContainer=s,e[xn]=s.current,ai(e.nodeType===8?e.parentNode:e),yr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var d=Qs(u);l.call(d)}}var u=kc(e,0,!1,null,null,!1,!1,"",ff);return e._reactRootContainer=u,e[xn]=u.current,ai(e.nodeType===8?e.parentNode:e),yr(function(){xl(t,u,n,r)}),u}function kl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var l=o;o=function(){var u=Qs(s);l.call(u)}}xl(t,s,e,o)}else s=sv(n,t,e,o,r);return Qs(s)}Fh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Fo(t.pendingLanes);n!==0&&(Vu(t,n|1),mt(t,Pe()),!(Se&6)&&(ao=Pe()+500,Zn()))}break;case 13:yr(function(){var r=bn(e,1);if(r!==null){var o=ut();Ht(r,e,1,o)}}),Cc(e,1)}};Yu=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=ut();Ht(t,e,134217728,n)}Cc(e,134217728)}};Ph=function(e){if(e.tag===13){var t=Hn(e),n=bn(e,t);if(n!==null){var r=ut();Ht(n,e,t,r)}Cc(e,t)}};Uh=function(){return Ce};Bh=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};Pa=function(e,t,n){switch(t){case"input":if(La(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=hl(r);if(!o)throw Error(Q(90));vh(r),La(r,o)}}}break;case"textarea":xh(e,n);break;case"select":t=n.value,t!=null&&Yr(e,!!n.multiple,t,!1)}};Th=wc;Rh=yr;var lv={usingClientEntryPoint:!1,Events:[Ri,Or,hl,_h,Eh,wc]},Ao={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},av={bundleType:Ao.bundleType,version:Ao.version,rendererPackageName:Ao.rendererPackageName,rendererConfig:Ao.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ao.findFiberByHostInstance||iv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qi.isDisabled&&qi.supportsFiber)try{ul=qi.inject(av),qt=qi}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(t))throw Error(Q(200));return ov(e,t,null,n)};Et.createRoot=function(e,t){if(!Ec(e))throw Error(Q(299));var n=!1,r="",o=ug;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=kc(e,1,!1,null,null,n,!1,r,o),e[xn]=t.current,ai(e.nodeType===8?e.parentNode:e),new _c(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=Dh(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return yr(e)};Et.hydrate=function(e,t,n){if(!Sl(t))throw Error(Q(200));return kl(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!Ec(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=ug;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=ag(t,null,e,1,n??null,o,!1,i,s),e[xn]=t.current,ai(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new bl(t)};Et.render=function(e,t,n){if(!Sl(t))throw Error(Q(200));return kl(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!Sl(e))throw Error(Q(40));return e._reactRootContainer?(yr(function(){kl(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};Et.unstable_batchedUpdates=wc;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Sl(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return kl(e,t,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function cg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cg)}catch(e){console.error(e)}}cg(),ch.exports=Et;var uo=ch.exports,hf=uo;_a.createRoot=hf.createRoot,_a.hydrateRoot=hf.hydrateRoot;const yt=()=>new Map,vu=e=>{const t=yt();return e.forEach((n,r)=>{t.set(r,n)}),t},_t=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},uv=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},cv=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Gn=()=>new Set,sa=e=>e[e.length-1],dv=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},kn=Array.from,fv=Array.isArray;class dg{constructor(){this._observers=yt()}on(t,n){return _t(this._observers,t,Gn).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return kn((this._observers.get(t)||yt()).values()).forEach(r=>r(...n))}destroy(){this._observers=yt()}}class fg{constructor(){this._observers=yt()}on(t,n){_t(this._observers,t,Gn).add(n)}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return kn((this._observers.get(t)||yt()).values()).forEach(r=>r(...n))}destroy(){this._observers=yt()}}const nn=Math.floor,xs=Math.abs,hv=Math.log10,Tc=(e,t)=>e<t?e:t,_r=(e,t)=>e>t?e:t,hg=e=>e!==0?e<0:1/e<0,pf=1,gf=2,la=4,aa=8,yi=32,yn=64,kt=128,Cl=31,wu=63,ar=127,pv=2147483647,pg=Number.MAX_SAFE_INTEGER,gv=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&nn(e)===e),mv=String.fromCharCode,yv=e=>e.toLowerCase(),vv=/^\s*/g,wv=e=>e.replace(vv,""),xv=/([A-Z])/g,mf=(e,t)=>wv(e.replace(xv,n=>`${t}${yv(n)}`)),bv=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},vi=typeof TextEncoder<"u"?new TextEncoder:null,Sv=e=>vi.encode(e),xu=vi?Sv:bv;let Xo=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Xo&&Xo.decode(new Uint8Array).length===1&&(Xo=null);class Mi{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Qe=()=>new Mi,kv=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},Ne=e=>{const t=new Uint8Array(kv(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Cv=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(_r(n,t)*2),e.cpos=0)},Ye=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},wi=Ye,ce=(e,t)=>{for(;t>ar;)Ye(e,kt|ar&t),t=nn(t/128);Ye(e,ar&t)},Rc=(e,t)=>{const n=hg(t);for(n&&(t=-t),Ye(e,(t>wu?kt:0)|(n?yn:0)|wu&t),t=nn(t/64);t>0;)Ye(e,(t>ar?kt:0)|ar&t),t=nn(t/128)},bu=new Uint8Array(3e4),_v=bu.length/3,Ev=(e,t)=>{if(t.length<_v){const n=vi.encodeInto(t,bu).written||0;ce(e,n);for(let r=0;r<n;r++)Ye(e,bu[r])}else Oe(e,xu(t))},Tv=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;ce(e,r);for(let o=0;o<r;o++)Ye(e,n.codePointAt(o))},en=vi&&vi.encodeInto?Ev:Tv,_l=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Tc(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(_r(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Oe=(e,t)=>{ce(e,t.byteLength),_l(e,t)},jc=(e,t)=>{Cv(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Rv=(e,t)=>jc(e,4).setFloat32(0,t,!1),jv=(e,t)=>jc(e,8).setFloat64(0,t,!1),Mv=(e,t)=>jc(e,8).setBigInt64(0,t,!1),yf=new DataView(new ArrayBuffer(4)),Dv=e=>(yf.setFloat32(0,e),yf.getFloat32(0)===e),co=(e,t)=>{switch(typeof t){case"string":Ye(e,119),en(e,t);break;case"number":gv(t)&&xs(t)<=pv?(Ye(e,125),Rc(e,t)):Dv(t)?(Ye(e,124),Rv(e,t)):(Ye(e,123),jv(e,t));break;case"bigint":Ye(e,122),Mv(e,t);break;case"object":if(t===null)Ye(e,126);else if(fv(t)){Ye(e,117),ce(e,t.length);for(let n=0;n<t.length;n++)co(e,t[n])}else if(t instanceof Uint8Array)Ye(e,116),Oe(e,t);else{Ye(e,118);const n=Object.keys(t);ce(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];en(e,o),co(e,t[o])}}break;case"boolean":Ye(e,t?120:121);break;default:Ye(e,127)}};class vf extends Mi{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&ce(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const wf=e=>{e.count>0&&(Rc(e.encoder,e.count===1?e.s:-e.s),e.count>1&&ce(e.encoder,e.count-2))};class bs{constructor(){this.encoder=new Mi,this.s=0,this.count=0}write(t){this.s===t?this.count++:(wf(this),this.count=1,this.s=t)}toUint8Array(){return wf(this),Ne(this.encoder)}}const xf=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);Rc(e.encoder,t),e.count>1&&ce(e.encoder,e.count-2)}};class ua{constructor(){this.encoder=new Mi,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(xf(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return xf(this),Ne(this.encoder)}}class Lv{constructor(){this.sarr=[],this.s="",this.lensE=new bs}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Mi;return this.sarr.push(this.s),this.s="",en(t,this.sarr.join("")),_l(t,this.lensE.toUint8Array()),Ne(t)}}const rn=e=>new Error(e),tn=()=>{throw rn("Method unimplemented")},on=()=>{throw rn("Unexpected case")},gg=rn("Unexpected end of array"),mg=rn("Integer out of Range");class El{constructor(t){this.arr=t,this.pos=0}}const an=e=>new El(e),Av=e=>e.pos!==e.arr.length,Nv=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Ke=e=>Nv(e,ge(e)),vr=e=>e.arr[e.pos++],ge=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&ar)*n,n*=128,o<kt)return t;if(t>pg)throw mg}throw gg},Mc=e=>{let t=e.arr[e.pos++],n=t&wu,r=64;const o=(t&yn)>0?-1:1;if(!(t&kt))return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&ar)*r,r*=128,t<kt)return o*n;if(n>pg)throw mg}throw gg},zv=e=>{let t=ge(e);if(t===0)return"";{let n=String.fromCodePoint(vr(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(vr(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},Iv=e=>Xo.decode(Ke(e)),vn=Xo?Iv:zv,Dc=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Ov=e=>Dc(e,4).getFloat32(0,!1),Fv=e=>Dc(e,8).getFloat64(0,!1),Pv=e=>Dc(e,8).getBigInt64(0,!1),Uv=[e=>{},e=>null,Mc,Ov,Fv,Pv,e=>!1,e=>!0,vn,e=>{const t=ge(e),n={};for(let r=0;r<t;r++){const o=vn(e);n[o]=fo(e)}return n},e=>{const t=ge(e),n=[];for(let r=0;r<t;r++)n.push(fo(e));return n},Ke],fo=e=>Uv[127-vr(e)](e);class bf extends El{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Av(this)?this.count=ge(this)+1:this.count=-1),this.count--,this.s}}class Ss extends El{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Mc(this);const t=hg(this.s);this.count=1,t&&(this.s=-this.s,this.count=ge(this)+2)}return this.count--,this.s}}class ca extends El{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Mc(this),n=t&1;this.diff=nn(t/2),this.count=1,n&&(this.count=ge(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Bv{constructor(t){this.decoder=new Ss(t),this.str=vn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const $v=crypto.getRandomValues.bind(crypto),Wv=Math.random,yg=()=>$v(new Uint32Array(1))[0],Hv="10000000-1000-4000-8000"+-1e11,vg=()=>Hv.replace(/[018]/g,e=>(e^yg()&15>>e/4).toString(16)),Cn=Date.now,Sf=e=>new Promise(e);Promise.all.bind(Promise);const Vv=e=>Promise.reject(e),Lc=e=>Promise.resolve(e),kf=e=>e===void 0?null:e;class Yv{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let wg=new Yv,Ac=!0;try{typeof localStorage<"u"&&localStorage&&(wg=localStorage,Ac=!1)}catch{}const xg=wg,Kv=e=>Ac||addEventListener("storage",e),Gv=e=>Ac||removeEventListener("storage",e),Qv=Object.assign,bg=Object.keys,Xv=(e,t)=>{for(const n in e)t(e[n],n)},Cf=e=>bg(e).length,_f=e=>bg(e).length,Jv=e=>{for(const t in e)return!1;return!0},qv=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Sg=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Zv=(e,t)=>e===t||_f(e)===_f(t)&&qv(e,(n,r)=>(n!==void 0||Sg(t,r))&&t[r]===n),ew=Object.freeze,kg=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&kg(e[t])}return ew(e)},Ef=Symbol("Equality"),Nc=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Nc(e,t,n+1)}},tw=()=>{},nw=e=>e,Jo=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[Ef]!=null)return e[Ef](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Jo(e.get(n),t.get(n)))return!1;break}case Object:if(Cf(e)!==Cf(t))return!1;for(const n in e)if(!Sg(e,n)||!Jo(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Jo(e[n],t[n]))return!1;break;default:return!1}return!0},rw=(e,t)=>t.includes(e);var Cg={};const ho=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",_g=typeof window<"u"&&typeof document<"u"&&!ho;let Gt;const ow=()=>{if(Gt===void 0)if(ho){Gt=yt();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Gt.set(t,""),t=r):t!==null&&(Gt.set(t,r),t=null)}t!==null&&Gt.set(t,"")}else typeof location=="object"?(Gt=yt(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Gt.set(`--${mf(t,"-")}`,n),Gt.set(`-${mf(t,"-")}`,n)}})):Gt=yt();return Gt},Su=e=>ow().has(e),xi=e=>kf(ho?Cg[e.toUpperCase().replaceAll("-","_")]:xg.getItem(e)),Eg=e=>Su("--"+e)||xi(e)!==null;Eg("production");const iw=ho&&rw(Cg.FORCE_COLOR,["true","1","2"]),sw=iw||!Su("--no-colors")&&!Eg("no-color")&&(!ho||process.stdout.isTTY)&&(!ho||Su("--color")||xi("COLORTERM")!==null||(xi("TERM")||"").includes("color")),Tg=e=>new Uint8Array(e),lw=(e,t,n)=>new Uint8Array(e,t,n),aw=e=>new Uint8Array(e),uw=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=mv(e[n]);return btoa(t)},cw=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),dw=e=>{const t=atob(e),n=Tg(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},fw=e=>{const t=Buffer.from(e,"base64");return lw(t.buffer,t.byteOffset,t.byteLength)},Rg=_g?uw:cw,jg=_g?dw:fw,hw=e=>{const t=Tg(e.byteLength);return t.set(e),t};class pw{constructor(t,n){this.left=t,this.right=n}}const cn=(e,t)=>new pw(e,t);typeof DOMParser<"u"&&new DOMParser;const gw=e=>uv(e,(t,n)=>`${n}:${t};`).join(""),mw=JSON.stringify,En=Symbol,At=En(),wr=En(),Mg=En(),zc=En(),Dg=En(),Lg=En(),Ag=En(),Tl=En(),Rl=En(),yw=e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},Tf=[Dg,Ag,Tl,Mg];let da=0,Rf=Cn();const vw=(e,t)=>{const n=Tf[da],r=xi("log"),o=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return da=(da+1)%Tf.length,t+=": ",o?(...i)=>{var u;i.length===1&&((u=i[0])==null?void 0:u.constructor)===Function&&(i=i[0]());const s=Cn(),l=s-Rf;Rf=s,e(n,t,Rl,...i.map(d=>{switch(d!=null&&d.constructor===Uint8Array&&(d=Array.from(d)),typeof d){case"string":case"symbol":return d;default:return mw(d)}}),n," +"+l+"ms")}:tw},ww={[At]:cn("font-weight","bold"),[wr]:cn("font-weight","normal"),[Mg]:cn("color","blue"),[Dg]:cn("color","green"),[zc]:cn("color","grey"),[Lg]:cn("color","red"),[Ag]:cn("color","purple"),[Tl]:cn("color","orange"),[Rl]:cn("color","black")},xw=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=yt();let o=[],i=0;for(;i<e.length;i++){const l=e[i],u=ww[l];if(u!==void 0)r.set(u.left,u.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const d=gw(r);i>0||d.length>0?(t.push("%c"+l),n.push(d)):t.push(l)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const l=e[i];l instanceof Symbol||o.push(l)}return o},Ng=sw?xw:yw,zg=(...e)=>{console.log(...Ng(e)),Ig.forEach(t=>t.print(e))},bw=(...e)=>{console.warn(...Ng(e)),e.unshift(Tl),Ig.forEach(t=>t.print(e))},Ig=Gn(),Sw=e=>vw(zg,e),Og=e=>({[Symbol.iterator](){return this},next:e}),kw=(e,t)=>Og(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),fa=(e,t)=>Og(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Ic{constructor(t,n){this.clock=t,this.len=n}}class Di{constructor(){this.clients=new Map}}const Fg=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],l=s.id.clock+s.length;for(let u=0,d=r[u];u<r.length&&d.clock<l;d=r[++u])Jg(e,i,d.clock,d.len,n)}}),Cw=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=nn((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},Pg=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&Cw(n,t.clock)!==null},Oc=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=_r(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},_w=e=>{const t=new Di;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)dv(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return Oc(t),t},Xs=(e,t,n,r)=>{_t(e.clients,t,()=>[]).push(new Ic(n,r))},Ew=()=>new Di,Tw=e=>{const t=Ew();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const l=s.id.clock;let u=s.length;if(i+1<n.length)for(let d=n[i+1];i+1<n.length&&d.deleted;d=n[++i+1])u+=d.length;o.push(new Ic(l,u))}}o.length>0&&t.clients.set(r,o)}),t},ko=(e,t)=>{ce(e.restEncoder,t.clients.size),kn(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),ce(e.restEncoder,n);const o=r.length;ce(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},Fc=e=>{const t=new Di,n=ge(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=ge(e.restDecoder),i=ge(e.restDecoder);if(i>0){const s=_t(t.clients,o,()=>[]);for(let l=0;l<i;l++)s.push(new Ic(e.readDsClock(),e.readDsLen()))}}return t},jf=(e,t,n)=>{const r=new Di,o=ge(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=ge(e.restDecoder),l=ge(e.restDecoder),u=n.clients.get(s)||[],d=Xe(n,s);for(let y=0;y<l;y++){const f=e.readDsClock(),p=f+e.readDsLen();if(f<d){d<p&&Xs(r,s,d,p-d);let g=sn(u,f),v=u[g];for(!v.deleted&&v.id.clock<f&&(u.splice(g+1,0,rl(t,v,f-v.id.clock)),g++);g<u.length&&(v=u[g++],v.id.clock<p);)v.deleted||(p<v.id.clock+v.length&&u.splice(g,0,rl(t,v,p-v.id.clock)),v.delete(t))}else Xs(r,s,f,p-f)}}if(r.clients.size>0){const i=new xr;return ce(i.restEncoder,0),ko(i,r),i.toUint8Array()}return null},Ug=yg;class Co extends dg{constructor({guid:t=vg(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=Ug(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Qg,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Sf(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const u=()=>Sf(d=>{const y=f=>{(f===void 0||f===!0)&&(this.off("sync",y),d())};this.on("sync",y)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Ee(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(kn(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Ee(this,t,n)}get(t,n=tt){const r=_t(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==tt&&o!==n)if(o===tt){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Zr)}getText(t=""){return this.get(t,mo)}getMap(t=""){return this.get(t,go)}getXmlElement(t=""){return this.get(t,yo)}getXmlFragment(t=""){return this.get(t,br)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,kn(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new Co({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Ee(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Bg{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return ge(this.restDecoder)}readDsLen(){return ge(this.restDecoder)}}class $g extends Bg{readLeftID(){return we(ge(this.restDecoder),ge(this.restDecoder))}readRightID(){return we(ge(this.restDecoder),ge(this.restDecoder))}readClient(){return ge(this.restDecoder)}readInfo(){return vr(this.restDecoder)}readString(){return vn(this.restDecoder)}readParentInfo(){return ge(this.restDecoder)===1}readTypeRef(){return ge(this.restDecoder)}readLen(){return ge(this.restDecoder)}readAny(){return fo(this.restDecoder)}readBuf(){return hw(Ke(this.restDecoder))}readJSON(){return JSON.parse(vn(this.restDecoder))}readKey(){return vn(this.restDecoder)}}class Rw{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ge(this.restDecoder),this.dsCurrVal}readDsLen(){const t=ge(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class po extends Rw{constructor(t){super(t),this.keys=[],ge(t),this.keyClockDecoder=new ca(Ke(t)),this.clientDecoder=new Ss(Ke(t)),this.leftClockDecoder=new ca(Ke(t)),this.rightClockDecoder=new ca(Ke(t)),this.infoDecoder=new bf(Ke(t),vr),this.stringDecoder=new Bv(Ke(t)),this.parentInfoDecoder=new bf(Ke(t),vr),this.typeRefDecoder=new Ss(Ke(t)),this.lenDecoder=new Ss(Ke(t))}readLeftID(){return new qr(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new qr(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return fo(this.restDecoder)}readBuf(){return Ke(this.restDecoder)}readJSON(){return fo(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Wg{constructor(){this.restEncoder=Qe()}toUint8Array(){return Ne(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){ce(this.restEncoder,t)}writeDsLen(t){ce(this.restEncoder,t)}}class Li extends Wg{writeLeftID(t){ce(this.restEncoder,t.client),ce(this.restEncoder,t.clock)}writeRightID(t){ce(this.restEncoder,t.client),ce(this.restEncoder,t.clock)}writeClient(t){ce(this.restEncoder,t)}writeInfo(t){wi(this.restEncoder,t)}writeString(t){en(this.restEncoder,t)}writeParentInfo(t){ce(this.restEncoder,t?1:0)}writeTypeRef(t){ce(this.restEncoder,t)}writeLen(t){ce(this.restEncoder,t)}writeAny(t){co(this.restEncoder,t)}writeBuf(t){Oe(this.restEncoder,t)}writeJSON(t){en(this.restEncoder,JSON.stringify(t))}writeKey(t){en(this.restEncoder,t)}}class Hg{constructor(){this.restEncoder=Qe(),this.dsCurrVal=0}toUint8Array(){return Ne(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,ce(this.restEncoder,n)}writeDsLen(t){t===0&&on(),ce(this.restEncoder,t-1),this.dsCurrVal+=t}}class xr extends Hg{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ua,this.clientEncoder=new bs,this.leftClockEncoder=new ua,this.rightClockEncoder=new ua,this.infoEncoder=new vf(wi),this.stringEncoder=new Lv,this.parentInfoEncoder=new vf(wi),this.typeRefEncoder=new bs,this.lenEncoder=new bs}toUint8Array(){const t=Qe();return ce(t,0),Oe(t,this.keyClockEncoder.toUint8Array()),Oe(t,this.clientEncoder.toUint8Array()),Oe(t,this.leftClockEncoder.toUint8Array()),Oe(t,this.rightClockEncoder.toUint8Array()),Oe(t,Ne(this.infoEncoder)),Oe(t,this.stringEncoder.toUint8Array()),Oe(t,Ne(this.parentInfoEncoder)),Oe(t,this.typeRefEncoder.toUint8Array()),Oe(t,this.lenEncoder.toUint8Array()),_l(t,Ne(this.restEncoder)),Ne(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){co(this.restEncoder,t)}writeBuf(t){Oe(this.restEncoder,t)}writeJSON(t){co(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const jw=(e,t,n,r)=>{r=_r(r,t[0].id.clock);const o=sn(t,r);ce(e.restEncoder,t.length-o),e.writeClient(n),ce(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},Pc=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{Xe(t,i)>o&&r.set(i,o)}),jl(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),ce(e.restEncoder,r.size),kn(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{jw(e,t.clients.get(o),o,i)})},Mw=(e,t)=>{const n=yt(),r=ge(e.restDecoder);for(let o=0;o<r;o++){const i=ge(e.restDecoder),s=new Array(i),l=e.readClient();let u=ge(e.restDecoder);n.set(l,{i:0,refs:s});for(let d=0;d<i;d++){const y=e.readInfo();switch(Cl&y){case 0:{const f=e.readLen();s[d]=new Mt(we(l,u),f),u+=f;break}case 10:{const f=ge(e.restDecoder);s[d]=new Dt(we(l,u),f),u+=f;break}default:{const f=(y&(yn|kt))===0,p=new We(we(l,u),null,(y&kt)===kt?e.readLeftID():null,null,(y&yn)===yn?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(y&yi)===yi?e.readString():null,mm(e,y));s[d]=p,u+=p.length}}}}return n},Dw=(e,t,n)=>{const r=[];let o=kn(n.keys()).sort((g,v)=>g-v);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let g=n.get(o[o.length-1]);for(;g.refs.length===g.i;)if(o.pop(),o.length>0)g=n.get(o[o.length-1]);else return null;return g};let s=i();if(s===null)return null;const l=new Qg,u=new Map,d=(g,v)=>{const b=u.get(g);(b==null||b>v)&&u.set(g,v)};let y=s.refs[s.i++];const f=new Map,p=()=>{for(const g of r){const v=g.id.client,b=n.get(v);b?(b.i--,l.clients.set(v,b.refs.slice(b.i)),n.delete(v),b.i=0,b.refs=[]):l.clients.set(v,[g]),o=o.filter(L=>L!==v)}r.length=0};for(;;){if(y.constructor!==Dt){const v=_t(f,y.id.client,()=>Xe(t,y.id.client))-y.id.clock;if(v<0)r.push(y),d(y.id.client,y.id.clock-1),p();else{const b=y.getMissing(e,t);if(b!==null){r.push(y);const L=n.get(b)||{refs:[],i:0};if(L.refs.length===L.i)d(b,Xe(t,b)),p();else{y=L.refs[L.i++];continue}}else(v===0||v<y.length)&&(y.integrate(e,v),f.set(y.id.client,y.id.clock+y.length))}}if(r.length>0)y=r.pop();else if(s!==null&&s.i<s.refs.length)y=s.refs[s.i++];else{if(s=i(),s===null)break;y=s.refs[s.i++]}}if(l.clients.size>0){const g=new xr;return Pc(g,l,new Map),ce(g.restEncoder,0),{missing:u,update:g.toUint8Array()}}return null},Lw=(e,t)=>Pc(e,t.doc.store,t.beforeState),Aw=(e,t,n,r=new po(e))=>Ee(t,o=>{o.local=!1;let i=!1;const s=o.doc,l=s.store,u=Mw(r,s),d=Dw(o,l,u),y=l.pendingStructs;if(y){for(const[p,g]of y.missing)if(g<Xe(l,p)){i=!0;break}if(d){for(const[p,g]of d.missing){const v=y.missing.get(p);(v==null||v>g)&&y.missing.set(p,g)}y.update=Js([y.update,d.update])}}else l.pendingStructs=d;const f=jf(r,o,l);if(l.pendingDs){const p=new po(an(l.pendingDs));ge(p.restDecoder);const g=jf(p,o,l);f&&g?l.pendingDs=Js([f,g]):l.pendingDs=f||g}else l.pendingDs=f;if(i){const p=l.pendingStructs.update;l.pendingStructs=null,Vg(o.doc,p)}},n,!1),Vg=(e,t,n,r=po)=>{const o=an(t);Aw(o,e,n,new r(o))},Nw=(e,t,n)=>Vg(e,t,n,$g),zw=(e,t,n=new Map)=>{Pc(e,t.store,n),ko(e,Tw(t.store))},Iw=(e,t=new Uint8Array([0]),n=new xr)=>{const r=Yg(t);zw(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(qw(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===Li)return Xw(o.map((i,s)=>s===0?i:ex(i)));if(n.constructor===xr)return Js(o)}return o[0]},Ow=(e,t)=>Iw(e,t,new Li),Fw=e=>{const t=new Map,n=ge(e.restDecoder);for(let r=0;r<n;r++){const o=ge(e.restDecoder),i=ge(e.restDecoder);t.set(o,i)}return t},Yg=e=>Fw(new Bg(an(e))),Kg=(e,t)=>(ce(e.restEncoder,t.size),kn(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{ce(e.restEncoder,n),ce(e.restEncoder,r)}),e),Pw=(e,t)=>Kg(e,jl(t.store)),Uw=(e,t=new Hg)=>(e instanceof Map?Kg(t,e):Pw(t,e),t.toUint8Array()),Bw=e=>Uw(e,new Wg);class $w{constructor(){this.l=[]}}const Mf=()=>new $w,Df=(e,t)=>e.l.push(t),Lf=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Gg=(e,t,n)=>Nc(e.l,[t,n]);class qr{constructor(t,n){this.client=t,this.clock=n}}const Zi=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,we=(e,t)=>new qr(e,t),Ww=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw on()},Dr=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Pg(t.ds,e.id),ku=(e,t)=>{const n=_t(e.meta,ku,Gn),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<Xe(r,i)&&Qn(e,we(i,o))}),Fg(e,t.ds,o=>{}),n.add(t))};class Qg{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const jl=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},Xe=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Xg=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw on()}n.push(t)},sn=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=nn(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=nn((n+r)/2)}throw on()},Hw=(e,t)=>{const n=e.clients.get(t.client);return n[sn(n,t.clock)]},ha=Hw,Cu=(e,t,n)=>{const r=sn(t,n),o=t[r];return o.id.clock<n&&o instanceof We?(t.splice(r+1,0,rl(e,o,n-o.id.clock)),r+1):r},Qn=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Cu(e,n,t.clock)]},Af=(e,t,n)=>{const r=t.clients.get(n.client),o=sn(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Mt&&r.splice(o+1,0,rl(e,i,n.clock-i.id.clock+1)),i},Vw=(e,t,n)=>{const r=e.clients.get(t.id.client);r[sn(r,t.id.clock)]=n},Jg=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=Cu(e,t,n),l;do l=t[s++],i<l.id.clock+l.length&&Cu(e,t,i),o(l);while(s<t.length&&t[s].id.clock<i)};class Yw{constructor(t,n,r){this.doc=t,this.deleteSet=new Di,this.beforeState=jl(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Nf=(e,t)=>t.deleteSet.clients.size===0&&!cv(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Oc(t.deleteSet),Lw(e,t),ko(e,t.deleteSet),!0),zf=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&_t(e.changed,t,Gn).add(n)},ks=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof We&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},Kw=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const l=o[s],u=l.clock+l.len;for(let d=sn(i,l.clock),y=i[d];d<i.length&&y.id.clock<u;y=i[++d]){const f=i[d];if(l.clock+l.len<=f.id.clock)break;f instanceof We&&f.deleted&&!f.keep&&n(f)&&f.gc(t,!1)}}}},Gw=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],l=Tc(o.length-1,1+sn(o,s.clock+s.len-1));for(let u=l,d=o[u];u>0&&d.id.clock>=s.clock;d=o[u])u-=1+ks(o,u)}})},qg=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{Oc(i),n.afterState=jl(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((u,d)=>l.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,u)})),l.push(()=>{n.changedParentTypes.forEach((u,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(u=u.filter(y=>y.target._item===null||!y.target._item.deleted),u.forEach(y=>{y.currentTarget=d,y._path=null}),u.sort((y,f)=>y.path.length-f.path.length),Gg(d._dEH,u,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),Nc(l,[]),n._needFormattingCleanup&&px(n)}finally{r.gc&&Kw(i,o,r.gcFilter),Gw(i,o),n.afterState.forEach((y,f)=>{const p=n.beforeState.get(f)||0;if(p!==y){const g=o.clients.get(f),v=_r(sn(g,p),1);for(let b=g.length-1;b>=v;)b-=1+ks(g,b)}});for(let y=s.length-1;y>=0;y--){const{client:f,clock:p}=s[y].id,g=o.clients.get(f),v=sn(g,p);v+1<g.length&&ks(g,v+1)>1||v>0&&ks(g,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(zg(Tl,At,"[yjs] ",wr,Lg,"Changed the client-id because another client seems to be using it."),r.clientID=Ug()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const y=new Li;Nf(y,n)&&r.emit("update",[y.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const y=new xr;Nf(y,n)&&r.emit("updateV2",[y.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:d}=n;(l.size>0||d.size>0||u.size>0)&&(l.forEach(y=>{y.clientID=r.clientID,y.collectionid==null&&(y.collectionid=r.collectionid),r.subdocs.add(y)}),d.forEach(y=>r.subdocs.delete(y)),r.emit("subdocs",[{loaded:u,added:l,removed:d},r,n]),d.forEach(y=>y.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):qg(e,t+1)}}},Ee=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new Yw(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const l=e._transaction===o[0];e._transaction=null,l&&qg(o,0)}}return s};function*Qw(e){const t=ge(e.restDecoder);for(let n=0;n<t;n++){const r=ge(e.restDecoder),o=e.readClient();let i=ge(e.restDecoder);for(let s=0;s<r;s++){const l=e.readInfo();if(l===10){const u=ge(e.restDecoder);yield new Dt(we(o,i),u),i+=u}else if(Cl&l){const u=(l&(yn|kt))===0,d=new We(we(o,i),null,(l&kt)===kt?e.readLeftID():null,null,(l&yn)===yn?e.readRightID():null,u?e.readParentInfo()?e.readString():e.readLeftID():null,u&&(l&yi)===yi?e.readString():null,mm(e,l));yield d,i+=d.length}else{const u=e.readLen();yield new Mt(we(o,i),u),i+=u}}}}class Uc{constructor(t,n){this.gen=Qw(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Dt);return this.curr}}class Bc{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Xw=e=>Js(e,$g,Li),Jw=(e,t)=>{if(e.constructor===Mt){const{client:n,clock:r}=e.id;return new Mt(we(n,r+t),e.length-t)}else if(e.constructor===Dt){const{client:n,clock:r}=e.id;return new Dt(we(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new We(we(r,o+t),null,we(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Js=(e,t=po,n=xr)=>{if(e.length===1)return e[0];const r=e.map(y=>new t(an(y)));let o=r.map(y=>new Uc(y,!0)),i=null;const s=new n,l=new Bc(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,g)=>{if(p.curr.id.client===g.curr.id.client){const v=p.curr.id.clock-g.curr.id.clock;return v===0?p.curr.constructor===g.curr.constructor?0:p.curr.constructor===Dt?1:-1:v}else return g.curr.id.client-p.curr.id.client}),o.length!==0;){const y=o[0],f=y.curr.id.client;if(i!==null){let p=y.curr,g=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=y.next(),g=!0;if(p===null||p.id.client!==f||g&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)Nn(l,i.struct,i.offset),i={struct:p,offset:0},y.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===Dt)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{Nn(l,i.struct,i.offset);const v=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Dt(we(f,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-p.id.clock;v>0&&(i.struct.constructor===Dt?i.struct.length-=v:p=Jw(p,v)),i.struct.mergeWith(p)||(Nn(l,i.struct,i.offset),i={struct:p,offset:0},y.next())}}else i={struct:y.curr,offset:0},y.next();for(let p=y.curr;p!==null&&p.id.client===f&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==Dt;p=y.next())Nn(l,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(Nn(l,i.struct,i.offset),i=null),$c(l);const u=r.map(y=>Fc(y)),d=_w(u);return ko(s,d),s.toUint8Array()},qw=(e,t,n=po,r=xr)=>{const o=Yg(t),i=new r,s=new Bc(i),l=new n(an(e)),u=new Uc(l,!1);for(;u.curr;){const y=u.curr,f=y.id.client,p=o.get(f)||0;if(u.curr.constructor===Dt){u.next();continue}if(y.id.clock+y.length>p)for(Nn(s,y,_r(p-y.id.clock,0)),u.next();u.curr&&u.curr.id.client===f;)Nn(s,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===f&&u.curr.id.clock+u.curr.length<=p;)u.next()}$c(s);const d=Fc(l);return ko(i,d),i.toUint8Array()},Zg=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Ne(e.encoder.restEncoder)}),e.encoder.restEncoder=Qe(),e.written=0)},Nn=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Zg(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),ce(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},$c=e=>{Zg(e);const t=e.encoder.restEncoder;ce(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];ce(t,r.written),_l(t,r.restEncoder)}},Zw=(e,t,n,r)=>{const o=new n(an(e)),i=new Uc(o,!1),s=new r,l=new Bc(s);for(let d=i.curr;d!==null;d=i.next())Nn(l,t(d),0);$c(l);const u=Fc(o);return ko(s,u),s.toUint8Array()},ex=e=>Zw(e,nw,po,Li),If="You must not compute changes after the event-handler fired.";class Ml{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tx(this.currentTarget,this.target))}deletes(t){return Pg(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw rn(If);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,l;if(this.adds(i)){let u=i.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(i))if(u!==null&&this.deletes(u))s="delete",l=sa(u.content.getContent());else return;else u!==null&&this.deletes(u)?(s="update",l=sa(u.content.getContent())):(s="add",l=void 0)}else if(this.deletes(i))s="delete",l=sa(i.content.getContent());else return;t.set(o,{action:s,oldValue:l})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw rn(If);const n=this.target,r=Gn(),o=Gn(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const u=()=>{l&&i.push(l)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((l===null||l.delete===void 0)&&(u(),l={delete:0}),l.delete+=d.length,o.add(d)):this.adds(d)?((l===null||l.insert===void 0)&&(u(),l={insert:[]}),l.insert=l.insert.concat(d.content.getContent()),r.add(d)):((l===null||l.retain===void 0)&&(u(),l={retain:0}),l.retain+=d.length);l!==null&&l.retain===void 0&&u()}this._changes=t}return t}}const tx=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},st=()=>{bw("Invalid access: Add Yjs type to a document before reading data.")},em=80;let Wc=0;class nx{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=Wc++}}const rx=e=>{e.timestamp=Wc++},tm=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Wc++},ox=(e,t,n)=>{if(e.length>=em){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return tm(r,t,n),r}else{const r=new nx(t,n);return e.push(r),r}},Dl=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>xs(t-i.index)<xs(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,rx(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&xs(n.index-o)<r.parent.length/em?(tm(n,r,o),n):ox(e._searchMarker,r,o)},bi=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=_r(t,o.index+n))}},Ll=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;_t(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Gg(r._eH,n,t)};class tt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Mf(),this._dEH=Mf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw tn()}clone(){throw tn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Df(this._eH,t)}observeDeep(t){Df(this._dEH,t)}unobserve(t){Lf(this._eH,t)}unobserveDeep(t){Lf(this._dEH,t)}toJSON(){}}const nm=(e,t,n)=>{e.doc??st(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let l=t;l<s.length&&r>0;l++)o.push(s[l]),r--;t=0}}i=i.right}return o},rm=e=>{e.doc??st();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},Si=(e,t)=>{let n=0,r=e._start;for(e.doc??st();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},om=(e,t)=>{const n=[];return Si(e,(r,o)=>{n.push(t(r,o,e))}),n},ix=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},im=(e,t)=>{e.doc??st();const n=Dl(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},qs=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,l=i.store,u=n===null?t._start:n.right;let d=[];const y=()=>{d.length>0&&(o=new We(we(s,Xe(l,s)),o,o&&o.lastId,u,u&&u.id,t,null,new Sr(d)),o.integrate(e,0),d=[])};r.forEach(f=>{if(f===null)d.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(f);break;default:switch(y(),f.constructor){case Uint8Array:case ArrayBuffer:o=new We(we(s,Xe(l,s)),o,o&&o.lastId,u,u&&u.id,t,null,new Ai(new Uint8Array(f))),o.integrate(e,0);break;case Co:o=new We(we(s,Xe(l,s)),o,o&&o.lastId,u,u&&u.id,t,null,new Ni(f)),o.integrate(e,0);break;default:if(f instanceof tt)o=new We(we(s,Xe(l,s)),o,o&&o.lastId,u,u&&u.id,t,null,new Tn(f)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),y()},sm=()=>rn("Length exceeded!"),lm=(e,t,n,r)=>{if(n>t._length)throw sm();if(n===0)return t._searchMarker&&bi(t._searchMarker,n,r.length),qs(e,t,null,r);const o=n,i=Dl(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Qn(e,we(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&bi(t._searchMarker,o,r.length),qs(e,t,s,r)},sx=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return qs(e,t,o,n)},am=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=Dl(t,n);let l=t._start;for(s!==null&&(l=s.p,n-=s.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Qn(e,we(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Qn(e,we(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw sm();t._searchMarker&&bi(t._searchMarker,o,-i+r)},Zs=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},Hc=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let l;if(r==null)l=new Sr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Sr([r]);break;case Uint8Array:l=new Ai(r);break;case Co:l=new Ni(r);break;default:if(r instanceof tt)l=new Tn(r);else throw new Error("Unexpected content type")}new We(we(s,Xe(i.store,s)),o,o&&o.lastId,null,null,t,n,l).integrate(e,0)},Vc=(e,t)=>{e.doc??st();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},um=e=>{const t={};return e.doc??st(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},cm=(e,t)=>{e.doc??st();const n=e._map.get(t);return n!==void 0&&!n.deleted},lx=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Dr(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},es=e=>(e.doc??st(),kw(e._map.entries(),t=>!t[1].deleted));class ax extends Ml{}class Zr extends tt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Zr;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Zr}clone(){const t=new Zr;return t.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),t}get length(){return this.doc??st(),this._length}_callObserver(t,n){super._callObserver(t,n),Ll(this,t,new ax(this,t))}insert(t,n){this.doc!==null?Ee(this.doc,r=>{lm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Ee(this.doc,n=>{sx(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Ee(this.doc,r=>{am(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return im(this,t)}toArray(){return rm(this)}slice(t=0,n=this.length){return nm(this,t,n)}toJSON(){return this.map(t=>t instanceof tt?t.toJSON():t)}map(t){return om(this,t)}forEach(t){Si(this,t)}[Symbol.iterator](){return ix(this)}_write(t){t.writeTypeRef(Ax)}}const ux=e=>new Zr;class cx extends Ml{constructor(t,n,r){super(t,n),this.keysChanged=r}}class go extends tt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new go}clone(){const t=new go;return this.forEach((n,r)=>{t.set(r,n instanceof tt?n.clone():n)}),t}_callObserver(t,n){Ll(this,t,new cx(this,t,n))}toJSON(){this.doc??st();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof tt?o.toJSON():o}}),t}get size(){return[...es(this)].length}keys(){return fa(es(this),t=>t[0])}values(){return fa(es(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return fa(es(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??st(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Ee(this.doc,r=>{Hc(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Vc(this,t)}has(t){return cm(this,t)}clear(){this.doc!==null?Ee(this.doc,t=>{this.forEach(function(n,r,o){Zs(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Nx)}}const dx=e=>new go,On=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&Zv(e,t);class _u{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&on(),this.right.content.constructor){case He:this.right.deleted||_o(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Of=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case He:t.right.deleted||_o(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Qn(e,we(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},ts=(e,t,n,r)=>{const o=new Map,i=r?Dl(t,n):null;if(i){const s=new _u(i.p.left,i.p,i.index,o);return Of(e,s,n-i.index)}else{const s=new _u(null,t._start,0,o);return Of(e,s,n)}},dm=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===He&&On(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,l)=>{const u=n.left,d=n.right,y=new We(we(i,Xe(o.store,i)),u,u&&u.lastId,d,d&&d.id,t,null,new He(l,s));y.integrate(e,0),n.right=y,n.forward()})},_o=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},fm=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===He&&On(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},hm=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const l in r){const u=r[l],d=n.currentAttributes.get(l)??null;if(!On(d,u)){s.set(l,d);const{left:y,right:f}=n;n.right=new We(we(i,Xe(o.store,i)),y,y&&y.lastId,f,f&&f.id,t,null,new He(l,u)),n.right.integrate(e,0),n.forward()}}return s},pa=(e,t,n,r,o)=>{n.currentAttributes.forEach((p,g)=>{o[g]===void 0&&(o[g]=null)});const i=e.doc,s=i.clientID;fm(n,o);const l=hm(e,t,n,o),u=r.constructor===String?new ln(r):r instanceof tt?new Tn(r):new Er(r);let{left:d,right:y,index:f}=n;t._searchMarker&&bi(t._searchMarker,n.index,u.getLength()),y=new We(we(s,Xe(i.store,s)),d,d&&d.lastId,y,y&&y.id,t,null,u),y.integrate(e,0),n.right=y,n.index=f,n.forward(),dm(e,t,n,l)},Ff=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;fm(n,o);const l=hm(e,t,n,o);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===He));){if(!n.right.deleted)switch(n.right.content.constructor){case He:{const{key:u,value:d}=n.right.content,y=o[u];if(y!==void 0){if(On(y,d))l.delete(u);else{if(r===0)break e;l.set(u,d)}n.right.delete(e)}else n.currentAttributes.set(u,d);break}default:r<n.right.length&&Qn(e,we(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new We(we(s,Xe(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new ln(u)),n.right.integrate(e,0),n.forward()}dm(e,t,n,l)},pm=(e,t,n,r,o)=>{let i=t;const s=yt();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===He){const d=i.content;s.set(d.key,d)}i=i.right}let l=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const d=t.content;switch(d.constructor){case He:{const{key:y,value:f}=d,p=r.get(y)??null;(s.get(y)!==d||p===f)&&(t.delete(e),l++,!u&&(o.get(y)??null)===f&&p!==f&&(p===null?o.delete(y):o.set(y,p))),!u&&!t.deleted&&_o(o,d);break}}}t=t.right}return l},fx=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===He){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},hx=e=>{let t=0;return Ee(e.doc,n=>{let r=e._start,o=e._start,i=yt();const s=vu(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case He:_o(s,o.content);break;default:t+=pm(n,r,o,i,s),i=vu(s),r=o;break}o=o.right}}),t},px=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&Jg(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===He&&s.constructor!==Mt&&t.add(s.parent)})}Ee(n,r=>{Fg(e,e.deleteSet,o=>{if(o instanceof Mt||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===He?t.add(i):fx(r,o)});for(const o of t)hx(o)})},Pf=(e,t,n)=>{const r=n,o=vu(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Tn:case Er:case ln:n<t.right.length&&Qn(e,we(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&pm(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&bi(s._searchMarker,t.index,-r+n),t};class gx extends Ml{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Ee(t,r=>{const o=new Map,i=new Map;let s=this.target._start,l=null;const u={};let d="",y=0,f=0;const p=()=>{if(l!==null){let g=null;switch(l){case"delete":f>0&&(g={delete:f}),f=0;break;case"insert":(typeof d=="object"||d.length>0)&&(g={insert:d},o.size>0&&(g.attributes={},o.forEach((v,b)=>{v!==null&&(g.attributes[b]=v)}))),d="";break;case"retain":y>0&&(g={retain:y},Jv(u)||(g.attributes=Qv({},u))),y=0;break}g&&n.push(g),l=null}};for(;s!==null;){switch(s.content.constructor){case Tn:case Er:this.adds(s)?this.deletes(s)||(p(),l="insert",d=s.content.getContent()[0],p()):this.deletes(s)?(l!=="delete"&&(p(),l="delete"),f+=1):s.deleted||(l!=="retain"&&(p(),l="retain"),y+=1);break;case ln:this.adds(s)?this.deletes(s)||(l!=="insert"&&(p(),l="insert"),d+=s.content.str):this.deletes(s)?(l!=="delete"&&(p(),l="delete"),f+=s.length):s.deleted||(l!=="retain"&&(p(),l="retain"),y+=s.length);break;case He:{const{key:g,value:v}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(g)??null;On(b,v)?v!==null&&s.delete(r):(l==="retain"&&p(),On(v,i.get(g)??null)?delete u[g]:u[g]=v)}}else if(this.deletes(s)){i.set(g,v);const b=o.get(g)??null;On(b,v)||(l==="retain"&&p(),u[g]=b)}else if(!s.deleted){i.set(g,v);const b=u[g];b!==void 0&&(On(b,v)?b!==null&&s.delete(r):(l==="retain"&&p(),v===null?delete u[g]:u[g]=v))}s.deleted||(l==="insert"&&p(),_o(o,s.content));break}}s=s.right}for(p();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class mo extends tt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??st(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new mo}clone(){const t=new mo;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new gx(this,t,n);Ll(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??st();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ln&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Ee(this.doc,r=>{const o=new _u(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const l=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof l!="string"||l.length>0)&&pa(r,this,o,l,s.attributes||{})}else s.retain!==void 0?Ff(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&Pf(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??st();const o=[],i=new Map,s=this.doc;let l="",u=this._start;function d(){if(l.length>0){const f={};let p=!1;i.forEach((v,b)=>{p=!0,f[b]=v});const g={insert:l};p&&(g.attributes=f),o.push(g),l=""}}const y=()=>{for(;u!==null;){if(Dr(u,t)||n!==void 0&&Dr(u,n))switch(u.content.constructor){case ln:{const f=i.get("ychange");t!==void 0&&!Dr(u,t)?(f===void 0||f.user!==u.id.client||f.type!=="removed")&&(d(),i.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!Dr(u,n)?(f===void 0||f.user!==u.id.client||f.type!=="added")&&(d(),i.set("ychange",r?r("added",u.id):{type:"added"})):f!==void 0&&(d(),i.delete("ychange")),l+=u.content.str;break}case Tn:case Er:{d();const f={insert:u.content.getContent()[0]};if(i.size>0){const p={};f.attributes=p,i.forEach((g,v)=>{p[v]=g})}o.push(f);break}case He:Dr(u,t)&&(d(),_o(i,u.content));break}u=u.right}d()};return t||n?Ee(s,f=>{t&&ku(f,t),n&&ku(f,n),y()},"cleanup"):y(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Ee(o,i=>{const s=ts(i,this,t,!r);r||(r={},s.currentAttributes.forEach((l,u)=>{r[u]=l})),pa(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?Ee(o,i=>{const s=ts(i,this,t,!r);pa(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Ee(r,o=>{Pf(o,ts(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?Ee(o,i=>{const s=ts(i,this,t,!1);s.right!==null&&Ff(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Ee(this.doc,r=>{Hc(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Vc(this,t)}getAttributes(){return um(this)}_write(t){t.writeTypeRef(zx)}}const mx=e=>new mo;class ga{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??st()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===yo||n.constructor===br)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class br extends tt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new br}clone(){const t=new br;return t.insert(0,this.toArray().map(n=>n instanceof tt?n.clone():n)),t}get length(){return this.doc??st(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new ga(this,t)}querySelector(t){t=t.toUpperCase();const r=new ga(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),kn(new ga(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Ll(this,t,new wx(this,n,t))}toString(){return om(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Si(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?Ee(this.doc,r=>{lm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Ee(this.doc,r=>{const o=t&&t instanceof tt?t._item:t;qs(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw rn("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?Ee(this.doc,r=>{am(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return rm(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return im(this,t)}slice(t=0,n=this.length){return nm(this,t,n)}forEach(t){Si(this,t)}_write(t){t.writeTypeRef(Ox)}}const yx=e=>new br;class yo extends br{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new yo(this.nodeName)}clone(){const t=new yo(this.nodeName),n=this.getAttributes();return Xv(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof tt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const l in t)r.push(l);r.sort();const o=r.length;for(let l=0;l<o;l++){const u=r[l];n.push(u+'="'+t[u]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?Ee(this.doc,n=>{Zs(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Ee(this.doc,r=>{Hc(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Vc(this,t)}hasAttribute(t){return cm(this,t)}getAttributes(t){return t?lx(this,t):um(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const l=i[s];typeof l=="string"&&o.setAttribute(s,l)}return Si(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(Ix),t.writeKey(this.nodeName)}}const vx=e=>new yo(e.readKey());class wx extends Ml{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class el extends go{constructor(t){super(),this.hookName=t}_copy(){return new el(this.hookName)}clone(){const t=new el(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(Fx),t.writeKey(this.hookName)}}const xx=e=>new el(e.readKey());class tl extends mo{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new tl}clone(){const t=new tl;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,l)=>s.key<l.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const l=i.attrs[s];r+=` ${l.key}="${l.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(Px)}}const bx=e=>new tl;class Yc{constructor(t,n){this.id=t,this.length=n}get deleted(){throw tn()}mergeWith(t){return!1}write(t,n,r){throw tn()}integrate(t,n){throw tn()}}const Sx=0;class Mt extends Yc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Xg(t.doc.store,this)}write(t,n){t.writeInfo(Sx),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Ai{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ai(this.content)}splice(t){throw tn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const kx=e=>new Ai(e.readBuf());class ki{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ki(this.len)}splice(t){const n=new ki(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Xs(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const Cx=e=>new ki(e.readLen()),gm=(e,t)=>new Co({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class Ni{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Ni(gm(this.doc.guid,this.opts))}splice(t){throw tn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const _x=e=>new Ni(gm(e.readString(),e.readAny()));class Er{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Er(this.embed)}splice(t){throw tn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const Ex=e=>new Er(e.readJSON());class He{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new He(this.key,this.value)}splice(t){throw tn()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const Tx=e=>new He(e.readKey(),e.readJSON());class nl{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new nl(this.arr)}splice(t){const n=new nl(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const Rx=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new nl(n)},jx=xi("node_env")==="development";class Sr{constructor(t){this.arr=t,jx&&kg(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Sr(this.arr)}splice(t){const n=new Sr(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const Mx=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Sr(n)};class ln{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ln(this.str)}splice(t){const n=new ln(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Dx=e=>new ln(e.readString()),Lx=[ux,dx,mx,vx,yx,xx,bx],Ax=0,Nx=1,zx=2,Ix=3,Ox=4,Fx=5,Px=6;class Tn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Tn(this.type._copy())}splice(t){throw tn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const Ux=e=>new Tn(Lx[e.readTypeRef()](e)),rl=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new We(we(r,o+n),t,we(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=we(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i};class We extends Yc{constructor(t,n,r,o,i,s,l,u){super(t,u.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=l,this.redone=null,this.content=u,this.info=this.content.isCountable()?gf:0}set marker(t){(this.info&aa)>0!==t&&(this.info^=aa)}get marker(){return(this.info&aa)>0}get keep(){return(this.info&pf)>0}set keep(t){this.keep!==t&&(this.info^=pf)}get countable(){return(this.info&gf)>0}get deleted(){return(this.info&la)>0}set deleted(t){this.deleted!==t&&(this.info^=la)}markDeleted(){this.info|=la}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Xe(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Xe(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===qr&&this.id.client!==this.parent.client&&this.parent.clock>=Xe(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Af(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Qn(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Mt||this.right&&this.right.constructor===Mt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===We?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===We&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===qr){const r=ha(n,this.parent);r.constructor===Mt?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Af(t,t.doc.store,we(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Zi(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Zi(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(ha(t.doc.store,o.origin)))i.has(ha(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Xg(t.doc.store,this),this.content.integrate(t,this),zf(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new Mt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:we(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&Zi(t.origin,this.lastId)&&this.right===t&&Zi(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Xs(t.deleteSet,this.id.client,this.id.clock,this.length),zf(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw on();this.content.gc(t),n?Vw(t,this,new Mt(this.id,this.length)):this.content=new ki(this.length)}write(t,n){const r=n>0?we(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&Cl|(r===null?0:kt)|(o===null?0:yn)|(i===null?0:yi);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const l=this.parent;if(l._item!==void 0){const u=l._item;if(u===null){const d=Ww(l);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(u.id)}else l.constructor===String?(t.writeParentInfo(!0),t.writeString(l)):l.constructor===qr?(t.writeParentInfo(!1),t.writeLeftID(l)):on();i!==null&&t.writeString(i)}this.content.write(t,n)}}const mm=(e,t)=>Bx[t&Cl](e),Bx=[()=>{on()},Cx,Rx,kx,Dx,Ex,Tx,Ux,Mx,_x,()=>{on()}],$x=10;class Dt extends Yc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){on()}write(t,n){t.writeInfo($x),ce(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vm="__ $YJS$ __";ym[vm]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");ym[vm]=!0;const Wx=1200,Hx=2500,ol=3e4,Eu=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=s=>{e.lastMessageReceived=Cn();const l=s.data,u=typeof l=="string"?JSON.parse(l):l;u&&u.type==="pong"&&(clearTimeout(r),r=setTimeout(i,ol/2)),e.emit("message",[u,e])};const o=s=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:s},e])):e.unsuccessfulReconnects++,setTimeout(Eu,Tc(hv(e.unsuccessfulReconnects+1)*Wx,Hx),e)),clearTimeout(r)},i=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>o(null),t.onerror=s=>o(s),t.onopen=()=>{e.lastMessageReceived=Cn(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(i,ol/2)}}};class Vx extends fg{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&ol<Cn()-this.lastMessageReceived&&this.ws.close()},ol/2),Eu(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Eu(this)}}const wm=new Map;class Yx{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:jg(n.newValue||"")}),Kv(this._onChange)}postMessage(t){xg.setItem(this.room,Rg(aw(t)))}close(){Gv(this._onChange)}}const Kx=typeof BroadcastChannel>"u"?Yx:BroadcastChannel,Kc=e=>_t(wm,e,()=>{const t=Gn(),n=new Kx(e);return n.onmessage=r=>t.forEach(o=>o(r.data,"broadcastchannel")),{bc:n,subs:t}}),Gx=(e,t)=>(Kc(e).subs.add(t),t),Qx=(e,t)=>{const n=Kc(e),r=n.subs.delete(t);return r&&n.subs.size===0&&(n.bc.close(),wm.delete(e)),r},Xx=(e,t,n=null)=>{const r=Kc(e);r.bc.postMessage(t),r.subs.forEach(o=>o(t,n))},Jx=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}};function ns(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xm={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,r=Math.abs,o=Math.pow;return function(){function i(s,l,u){function d(p,g){if(!l[p]){if(!s[p]){var v=typeof ns=="function"&&ns;if(!g&&v)return v(p,!0);if(y)return y(p,!0);var b=new Error("Cannot find module '"+p+"'");throw b.code="MODULE_NOT_FOUND",b}var L=l[p]={exports:{}};s[p][0].call(L.exports,function(S){var k=s[p][1][S];return d(k||S)},L,L.exports,i,s,l,u)}return l[p].exports}for(var y=typeof ns=="function"&&ns,f=0;f<u.length;f++)d(u[f]);return d}return i}()({1:[function(i,s,l){function u(w){var C=w.length;if(0<C%4)throw new Error("Invalid string. Length must be a multiple of 4");var T=w.indexOf("=");T===-1&&(T=C);var _=T===C?0:4-T%4;return[T,_]}function d(w,C,T){return 3*(C+T)/4-T}function y(w){var C,T,_=u(w),j=_[0],z=_[1],R=new L(d(w,j,z)),N=0,F=0<z?j-4:j;for(T=0;T<F;T+=4)C=b[w.charCodeAt(T)]<<18|b[w.charCodeAt(T+1)]<<12|b[w.charCodeAt(T+2)]<<6|b[w.charCodeAt(T+3)],R[N++]=255&C>>16,R[N++]=255&C>>8,R[N++]=255&C;return z===2&&(C=b[w.charCodeAt(T)]<<2|b[w.charCodeAt(T+1)]>>4,R[N++]=255&C),z===1&&(C=b[w.charCodeAt(T)]<<10|b[w.charCodeAt(T+1)]<<4|b[w.charCodeAt(T+2)]>>2,R[N++]=255&C>>8,R[N++]=255&C),R}function f(w){return v[63&w>>18]+v[63&w>>12]+v[63&w>>6]+v[63&w]}function p(w,C,T){for(var _,j=[],z=C;z<T;z+=3)_=(16711680&w[z]<<16)+(65280&w[z+1]<<8)+(255&w[z+2]),j.push(f(_));return j.join("")}function g(w){for(var C,T=w.length,_=T%3,j=[],z=16383,R=0,N=T-_;R<N;R+=z)j.push(p(w,R,R+z>N?N:R+z));return _===1?(C=w[T-1],j.push(v[C>>2]+v[63&C<<4]+"==")):_===2&&(C=(w[T-2]<<8)+w[T-1],j.push(v[C>>10]+v[63&C>>4]+v[63&C<<2]+"=")),j.join("")}l.byteLength=function(w){var C=u(w),T=C[0],_=C[1];return 3*(T+_)/4-_},l.toByteArray=y,l.fromByteArray=g;for(var v=[],b=[],L=typeof Uint8Array>"u"?Array:Uint8Array,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0,c=S.length;k<c;++k)v[k]=S[k],b[S.charCodeAt(k)]=k;b[45]=62,b[95]=63},{}],2:[function(){},{}],3:[function(i,s,l){(function(){(function(){var u=String.fromCharCode,d=Math.min;function y(a){if(2147483647<a)throw new RangeError('The value "'+a+'" is invalid for option "size"');var m=new Uint8Array(a);return m.__proto__=f.prototype,m}function f(a,m,x){if(typeof a=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(a)}return p(a,m,x)}function p(a,m,x){if(typeof a=="string")return L(a,m);if(ArrayBuffer.isView(a))return S(a);if(a==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(A(a,ArrayBuffer)||a&&A(a.buffer,ArrayBuffer))return k(a,m,x);if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var D=a.valueOf&&a.valueOf();if(D!=null&&D!==a)return f.from(D,m,x);var O=c(a);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof a[Symbol.toPrimitive]=="function")return f.from(a[Symbol.toPrimitive]("string"),m,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function g(a){if(typeof a!="number")throw new TypeError('"size" argument must be of type number');if(0>a)throw new RangeError('The value "'+a+'" is invalid for option "size"')}function v(a,m,x){return g(a),0>=a||m===void 0?y(a):typeof x=="string"?y(a).fill(m,x):y(a).fill(m)}function b(a){return g(a),y(0>a?0:0|w(a))}function L(a,m){if((typeof m!="string"||m==="")&&(m="utf8"),!f.isEncoding(m))throw new TypeError("Unknown encoding: "+m);var x=0|C(a,m),D=y(x),O=D.write(a,m);return O!==x&&(D=D.slice(0,O)),D}function S(a){for(var m=0>a.length?0:0|w(a.length),x=y(m),D=0;D<m;D+=1)x[D]=255&a[D];return x}function k(a,m,x){if(0>m||a.byteLength<m)throw new RangeError('"offset" is outside of buffer bounds');if(a.byteLength<m+(x||0))throw new RangeError('"length" is outside of buffer bounds');var D;return D=m===void 0&&x===void 0?new Uint8Array(a):x===void 0?new Uint8Array(a,m):new Uint8Array(a,m,x),D.__proto__=f.prototype,D}function c(a){if(f.isBuffer(a)){var m=0|w(a.length),x=y(m);return x.length===0||a.copy(x,0,0,m),x}return a.length===void 0?a.type==="Buffer"&&Array.isArray(a.data)?S(a.data):void 0:typeof a.length!="number"||I(a.length)?y(0):S(a)}function w(a){if(a>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function C(a,m){if(f.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||A(a,ArrayBuffer))return a.byteLength;if(typeof a!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);var x=a.length,D=2<arguments.length&&arguments[2]===!0;if(!D&&x===0)return 0;for(var O=!1;;)switch(m){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return ke(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return re(a).length;default:if(O)return D?-1:ke(a).length;m=(""+m).toLowerCase(),O=!0}}function T(a,m,x){var D=!1;if((m===void 0||0>m)&&(m=0),m>this.length||((x===void 0||x>this.length)&&(x=this.length),0>=x)||(x>>>=0,m>>>=0,x<=m))return"";for(a||(a="utf8");;)switch(a){case"hex":return ue(this,m,x);case"utf8":case"utf-8":return xe(this,m,x);case"ascii":return K(this,m,x);case"latin1":case"binary":return ae(this,m,x);case"base64":return fe(this,m,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,m,x);default:if(D)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),D=!0}}function _(a,m,x){var D=a[m];a[m]=a[x],a[x]=D}function j(a,m,x,D,O){if(a.length===0)return-1;if(typeof x=="string"?(D=x,x=0):2147483647<x?x=2147483647:-2147483648>x&&(x=-2147483648),x=+x,I(x)&&(x=O?0:a.length-1),0>x&&(x=a.length+x),x>=a.length){if(O)return-1;x=a.length-1}else if(0>x)if(O)x=0;else return-1;if(typeof m=="string"&&(m=f.from(m,D)),f.isBuffer(m))return m.length===0?-1:z(a,m,x,D,O);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(a,m,x):Uint8Array.prototype.lastIndexOf.call(a,m,x):z(a,[m],x,D,O);throw new TypeError("val must be string, number or Buffer")}function z(a,m,x,D,O){function P(Le,Ft){return M===1?Le[Ft]:Le.readUInt16BE(Ft*M)}var M=1,V=a.length,J=m.length;if(D!==void 0&&(D=(D+"").toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(2>a.length||2>m.length)return-1;M=2,V/=2,J/=2,x/=2}var q;if(O){var te=-1;for(q=x;q<V;q++)if(P(a,q)!==P(m,te===-1?0:q-te))te!==-1&&(q-=q-te),te=-1;else if(te===-1&&(te=q),q-te+1===J)return te*M}else for(x+J>V&&(x=V-J),q=x;0<=q;q--){for(var me=!0,Me=0;Me<J;Me++)if(P(a,q+Me)!==P(m,Me)){me=!1;break}if(me)return q}return-1}function R(a,m,x,D){x=+x||0;var O=a.length-x;D?(D=+D,D>O&&(D=O)):D=O;var P=m.length;D>P/2&&(D=P/2);for(var M,V=0;V<D;++V){if(M=parseInt(m.substr(2*V,2),16),I(M))return V;a[x+V]=M}return V}function N(a,m,x,D){return se(ke(m,a.length-x),a,x,D)}function F(a,m,x,D){return se(pe(m),a,x,D)}function Y(a,m,x,D){return F(a,m,x,D)}function ie(a,m,x,D){return se(re(m),a,x,D)}function de(a,m,x,D){return se(U(m,a.length-x),a,x,D)}function fe(a,m,x){return m===0&&x===a.length?$.fromByteArray(a):$.fromByteArray(a.slice(m,x))}function xe(a,m,x){x=d(a.length,x);for(var D=[],O=m;O<x;){var P=a[O],M=null,V=239<P?4:223<P?3:191<P?2:1;if(O+V<=x){var J,q,te,me;V===1?128>P&&(M=P):V===2?(J=a[O+1],(192&J)==128&&(me=(31&P)<<6|63&J,127<me&&(M=me))):V===3?(J=a[O+1],q=a[O+2],(192&J)==128&&(192&q)==128&&(me=(15&P)<<12|(63&J)<<6|63&q,2047<me&&(55296>me||57343<me)&&(M=me))):V===4&&(J=a[O+1],q=a[O+2],te=a[O+3],(192&J)==128&&(192&q)==128&&(192&te)==128&&(me=(15&P)<<18|(63&J)<<12|(63&q)<<6|63&te,65535<me&&1114112>me&&(M=me)))}M===null?(M=65533,V=1):65535<M&&(M-=65536,D.push(55296|1023&M>>>10),M=56320|1023&M),D.push(M),O+=V}return B(D)}function B(a){var m=a.length;if(m<=4096)return u.apply(String,a);for(var x="",D=0;D<m;)x+=u.apply(String,a.slice(D,D+=4096));return x}function K(a,m,x){var D="";x=d(a.length,x);for(var O=m;O<x;++O)D+=u(127&a[O]);return D}function ae(a,m,x){var D="";x=d(a.length,x);for(var O=m;O<x;++O)D+=u(a[O]);return D}function ue(a,m,x){var D=a.length;(!m||0>m)&&(m=0),(!x||0>x||x>D)&&(x=D);for(var O="",P=m;P<x;++P)O+=be(a[P]);return O}function G(a,m,x){for(var D=a.slice(m,x),O="",P=0;P<D.length;P+=2)O+=u(D[P]+256*D[P+1]);return O}function ne(a,m,x){if(a%1!=0||0>a)throw new RangeError("offset is not uint");if(a+m>x)throw new RangeError("Trying to access beyond buffer length")}function ee(a,m,x,D,O,P){if(!f.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>O||m<P)throw new RangeError('"value" argument is out of bounds');if(x+D>a.length)throw new RangeError("Index out of range")}function Z(a,m,x,D){if(x+D>a.length)throw new RangeError("Index out of range");if(0>x)throw new RangeError("Index out of range")}function H(a,m,x,D,O){return m=+m,x>>>=0,O||Z(a,m,x,4),X.write(a,m,x,D,23,4),x+4}function le(a,m,x,D,O){return m=+m,x>>>=0,O||Z(a,m,x,8),X.write(a,m,x,D,52,8),x+8}function he(a){if(a=a.split("=")[0],a=a.trim().replace(E,""),2>a.length)return"";for(;a.length%4!=0;)a+="=";return a}function be(a){return 16>a?"0"+a.toString(16):a.toString(16)}function ke(a,m){m=m||1/0;for(var x,D=a.length,O=null,P=[],M=0;M<D;++M){if(x=a.charCodeAt(M),55295<x&&57344>x){if(!O){if(56319<x){-1<(m-=3)&&P.push(239,191,189);continue}else if(M+1===D){-1<(m-=3)&&P.push(239,191,189);continue}O=x;continue}if(56320>x){-1<(m-=3)&&P.push(239,191,189),O=x;continue}x=(O-55296<<10|x-56320)+65536}else O&&-1<(m-=3)&&P.push(239,191,189);if(O=null,128>x){if(0>(m-=1))break;P.push(x)}else if(2048>x){if(0>(m-=2))break;P.push(192|x>>6,128|63&x)}else if(65536>x){if(0>(m-=3))break;P.push(224|x>>12,128|63&x>>6,128|63&x)}else if(1114112>x){if(0>(m-=4))break;P.push(240|x>>18,128|63&x>>12,128|63&x>>6,128|63&x)}else throw new Error("Invalid code point")}return P}function pe(a){for(var m=[],x=0;x<a.length;++x)m.push(255&a.charCodeAt(x));return m}function U(a,m){for(var x,D,O,P=[],M=0;M<a.length&&!(0>(m-=2));++M)x=a.charCodeAt(M),D=x>>8,O=x%256,P.push(O),P.push(D);return P}function re(a){return $.toByteArray(he(a))}function se(a,m,x,D){for(var O=0;O<D&&!(O+x>=m.length||O>=a.length);++O)m[O+x]=a[O];return O}function A(a,m){return a instanceof m||a!=null&&a.constructor!=null&&a.constructor.name!=null&&a.constructor.name===m.name}function I(a){return a!==a}var $=i("base64-js"),X=i("ieee754");l.Buffer=f,l.SlowBuffer=function(a){return+a!=a&&(a=0),f.alloc(+a)},l.INSPECT_MAX_BYTES=50,l.kMaxLength=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},a.foo()===42}catch{return!1}}(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){return f.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){return f.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=function(a,m,x){return p(a,m,x)},f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(a,m,x){return v(a,m,x)},f.allocUnsafe=function(a){return b(a)},f.allocUnsafeSlow=function(a){return b(a)},f.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==f.prototype},f.compare=function(a,m){if(A(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),A(m,Uint8Array)&&(m=f.from(m,m.offset,m.byteLength)),!f.isBuffer(a)||!f.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===m)return 0;for(var x=a.length,D=m.length,O=0,P=d(x,D);O<P;++O)if(a[O]!==m[O]){x=a[O],D=m[O];break}return x<D?-1:D<x?1:0},f.isEncoding=function(a){switch((a+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,m){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return f.alloc(0);var x;if(m===void 0)for(m=0,x=0;x<a.length;++x)m+=a[x].length;var D=f.allocUnsafe(m),O=0;for(x=0;x<a.length;++x){var P=a[x];if(A(P,Uint8Array)&&(P=f.from(P)),!f.isBuffer(P))throw new TypeError('"list" argument must be an Array of Buffers');P.copy(D,O),O+=P.length}return D},f.byteLength=C,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var a=this.length;if(a%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<a;m+=2)_(this,m,m+1);return this},f.prototype.swap32=function(){var a=this.length;if(a%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<a;m+=4)_(this,m,m+3),_(this,m+1,m+2);return this},f.prototype.swap64=function(){var a=this.length;if(a%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<a;m+=8)_(this,m,m+7),_(this,m+1,m+6),_(this,m+2,m+5),_(this,m+3,m+4);return this},f.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?xe(this,0,a):T.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||f.compare(this,a)===0},f.prototype.inspect=function(){var a="",m=l.INSPECT_MAX_BYTES;return a=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(a+=" ... "),"<Buffer "+a+">"},f.prototype.compare=function(a,m,x,D,O){if(A(a,Uint8Array)&&(a=f.from(a,a.offset,a.byteLength)),!f.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(m===void 0&&(m=0),x===void 0&&(x=a?a.length:0),D===void 0&&(D=0),O===void 0&&(O=this.length),0>m||x>a.length||0>D||O>this.length)throw new RangeError("out of range index");if(D>=O&&m>=x)return 0;if(D>=O)return-1;if(m>=x)return 1;if(m>>>=0,x>>>=0,D>>>=0,O>>>=0,this===a)return 0;for(var P=O-D,M=x-m,V=d(P,M),J=this.slice(D,O),q=a.slice(m,x),te=0;te<V;++te)if(J[te]!==q[te]){P=J[te],M=q[te];break}return P<M?-1:M<P?1:0},f.prototype.includes=function(a,m,x){return this.indexOf(a,m,x)!==-1},f.prototype.indexOf=function(a,m,x){return j(this,a,m,x,!0)},f.prototype.lastIndexOf=function(a,m,x){return j(this,a,m,x,!1)},f.prototype.write=function(a,m,x,D){if(m===void 0)D="utf8",x=this.length,m=0;else if(x===void 0&&typeof m=="string")D=m,x=this.length,m=0;else if(isFinite(m))m>>>=0,isFinite(x)?(x>>>=0,D===void 0&&(D="utf8")):(D=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var O=this.length-m;if((x===void 0||x>O)&&(x=O),0<a.length&&(0>x||0>m)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");D||(D="utf8");for(var P=!1;;)switch(D){case"hex":return R(this,a,m,x);case"utf8":case"utf-8":return N(this,a,m,x);case"ascii":return F(this,a,m,x);case"latin1":case"binary":return Y(this,a,m,x);case"base64":return ie(this,a,m,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,a,m,x);default:if(P)throw new TypeError("Unknown encoding: "+D);D=(""+D).toLowerCase(),P=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(a,m){var x=this.length;a=~~a,m=m===void 0?x:~~m,0>a?(a+=x,0>a&&(a=0)):a>x&&(a=x),0>m?(m+=x,0>m&&(m=0)):m>x&&(m=x),m<a&&(m=a);var D=this.subarray(a,m);return D.__proto__=f.prototype,D},f.prototype.readUIntLE=function(a,m,x){a>>>=0,m>>>=0,x||ne(a,m,this.length);for(var D=this[a],O=1,P=0;++P<m&&(O*=256);)D+=this[a+P]*O;return D},f.prototype.readUIntBE=function(a,m,x){a>>>=0,m>>>=0,x||ne(a,m,this.length);for(var D=this[a+--m],O=1;0<m&&(O*=256);)D+=this[a+--m]*O;return D},f.prototype.readUInt8=function(a,m){return a>>>=0,m||ne(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,m){return a>>>=0,m||ne(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,m){return a>>>=0,m||ne(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,m){return a>>>=0,m||ne(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,m){return a>>>=0,m||ne(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,m,x){a>>>=0,m>>>=0,x||ne(a,m,this.length);for(var D=this[a],O=1,P=0;++P<m&&(O*=256);)D+=this[a+P]*O;return O*=128,D>=O&&(D-=o(2,8*m)),D},f.prototype.readIntBE=function(a,m,x){a>>>=0,m>>>=0,x||ne(a,m,this.length);for(var D=m,O=1,P=this[a+--D];0<D&&(O*=256);)P+=this[a+--D]*O;return O*=128,P>=O&&(P-=o(2,8*m)),P},f.prototype.readInt8=function(a,m){return a>>>=0,m||ne(a,1,this.length),128&this[a]?-1*(255-this[a]+1):this[a]},f.prototype.readInt16LE=function(a,m){a>>>=0,m||ne(a,2,this.length);var x=this[a]|this[a+1]<<8;return 32768&x?4294901760|x:x},f.prototype.readInt16BE=function(a,m){a>>>=0,m||ne(a,2,this.length);var x=this[a+1]|this[a]<<8;return 32768&x?4294901760|x:x},f.prototype.readInt32LE=function(a,m){return a>>>=0,m||ne(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,m){return a>>>=0,m||ne(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,m){return a>>>=0,m||ne(a,4,this.length),X.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,m){return a>>>=0,m||ne(a,4,this.length),X.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,m){return a>>>=0,m||ne(a,8,this.length),X.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,m){return a>>>=0,m||ne(a,8,this.length),X.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,m,x,D){if(a=+a,m>>>=0,x>>>=0,!D){var O=o(2,8*x)-1;ee(this,a,m,x,O,0)}var P=1,M=0;for(this[m]=255&a;++M<x&&(P*=256);)this[m+M]=255&a/P;return m+x},f.prototype.writeUIntBE=function(a,m,x,D){if(a=+a,m>>>=0,x>>>=0,!D){var O=o(2,8*x)-1;ee(this,a,m,x,O,0)}var P=x-1,M=1;for(this[m+P]=255&a;0<=--P&&(M*=256);)this[m+P]=255&a/M;return m+x},f.prototype.writeUInt8=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,1,255,0),this[m]=255&a,m+1},f.prototype.writeUInt16LE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,2,65535,0),this[m]=255&a,this[m+1]=a>>>8,m+2},f.prototype.writeUInt16BE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,2,65535,0),this[m]=a>>>8,this[m+1]=255&a,m+2},f.prototype.writeUInt32LE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,4,4294967295,0),this[m+3]=a>>>24,this[m+2]=a>>>16,this[m+1]=a>>>8,this[m]=255&a,m+4},f.prototype.writeUInt32BE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,4,4294967295,0),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=255&a,m+4},f.prototype.writeIntLE=function(a,m,x,D){if(a=+a,m>>>=0,!D){var O=o(2,8*x-1);ee(this,a,m,x,O-1,-O)}var P=0,M=1,V=0;for(this[m]=255&a;++P<x&&(M*=256);)0>a&&V===0&&this[m+P-1]!==0&&(V=1),this[m+P]=255&(a/M>>0)-V;return m+x},f.prototype.writeIntBE=function(a,m,x,D){if(a=+a,m>>>=0,!D){var O=o(2,8*x-1);ee(this,a,m,x,O-1,-O)}var P=x-1,M=1,V=0;for(this[m+P]=255&a;0<=--P&&(M*=256);)0>a&&V===0&&this[m+P+1]!==0&&(V=1),this[m+P]=255&(a/M>>0)-V;return m+x},f.prototype.writeInt8=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,1,127,-128),0>a&&(a=255+a+1),this[m]=255&a,m+1},f.prototype.writeInt16LE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,2,32767,-32768),this[m]=255&a,this[m+1]=a>>>8,m+2},f.prototype.writeInt16BE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,2,32767,-32768),this[m]=a>>>8,this[m+1]=255&a,m+2},f.prototype.writeInt32LE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,4,2147483647,-2147483648),this[m]=255&a,this[m+1]=a>>>8,this[m+2]=a>>>16,this[m+3]=a>>>24,m+4},f.prototype.writeInt32BE=function(a,m,x){return a=+a,m>>>=0,x||ee(this,a,m,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),this[m]=a>>>24,this[m+1]=a>>>16,this[m+2]=a>>>8,this[m+3]=255&a,m+4},f.prototype.writeFloatLE=function(a,m,x){return H(this,a,m,!0,x)},f.prototype.writeFloatBE=function(a,m,x){return H(this,a,m,!1,x)},f.prototype.writeDoubleLE=function(a,m,x){return le(this,a,m,!0,x)},f.prototype.writeDoubleBE=function(a,m,x){return le(this,a,m,!1,x)},f.prototype.copy=function(a,m,x,D){if(!f.isBuffer(a))throw new TypeError("argument should be a Buffer");if(x||(x=0),D||D===0||(D=this.length),m>=a.length&&(m=a.length),m||(m=0),0<D&&D<x&&(D=x),D===x||a.length===0||this.length===0)return 0;if(0>m)throw new RangeError("targetStart out of bounds");if(0>x||x>=this.length)throw new RangeError("Index out of range");if(0>D)throw new RangeError("sourceEnd out of bounds");D>this.length&&(D=this.length),a.length-m<D-x&&(D=a.length-m+x);var O=D-x;if(this===a&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,x,D);else if(this===a&&x<m&&m<D)for(var P=O-1;0<=P;--P)a[P+m]=this[P+x];else Uint8Array.prototype.set.call(a,this.subarray(x,D),m);return O},f.prototype.fill=function(a,m,x,D){if(typeof a=="string"){if(typeof m=="string"?(D=m,m=0,x=this.length):typeof x=="string"&&(D=x,x=this.length),D!==void 0&&typeof D!="string")throw new TypeError("encoding must be a string");if(typeof D=="string"&&!f.isEncoding(D))throw new TypeError("Unknown encoding: "+D);if(a.length===1){var O=a.charCodeAt(0);(D==="utf8"&&128>O||D==="latin1")&&(a=O)}}else typeof a=="number"&&(a&=255);if(0>m||this.length<m||this.length<x)throw new RangeError("Out of range index");if(x<=m)return this;m>>>=0,x=x===void 0?this.length:x>>>0,a||(a=0);var P;if(typeof a=="number")for(P=m;P<x;++P)this[P]=a;else{var M=f.isBuffer(a)?a:f.from(a,D),V=M.length;if(V===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(P=0;P<x-m;++P)this[P+m]=M[P%V]}return this};var E=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(i,s,l){(function(u){(function(){function d(){let f;try{f=l.storage.getItem("debug")}catch{}return!f&&typeof u<"u"&&"env"in u&&(f=u.env.DEBUG),f}l.formatArgs=function(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;f.splice(1,0,p,"color: inherit");let g=0,v=0;f[0].replace(/%[a-zA-Z%]/g,b=>{b==="%%"||(g++,b==="%c"&&(v=g))}),f.splice(v,0,p)},l.save=function(f){try{f?l.storage.setItem("debug",f):l.storage.removeItem("debug")}catch{}},l.load=d,l.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},l.storage=function(){try{return localStorage}catch{}}(),l.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),s.exports=i("./common")(l);const{formatters:y}=s.exports;y.j=function(f){try{return JSON.stringify(f)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}).call(this)}).call(this,i("_process"))},{"./common":5,_process:12}],5:[function(i,s){s.exports=function(l){function u(f){function p(...b){if(!p.enabled)return;const L=p,S=+new Date,k=S-(g||S);L.diff=k,L.prev=g,L.curr=S,g=S,b[0]=u.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let c=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(C,T)=>{if(C==="%%")return"%";c++;const _=u.formatters[T];if(typeof _=="function"){const j=b[c];C=_.call(L,j),b.splice(c,1),c--}return C}),u.formatArgs.call(L,b),(L.log||u.log).apply(L,b)}let g,v=null;return p.namespace=f,p.useColors=u.useColors(),p.color=u.selectColor(f),p.extend=d,p.destroy=u.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>v===null?u.enabled(f):v,set:b=>{v=b}}),typeof u.init=="function"&&u.init(p),p}function d(f,p){const g=u(this.namespace+(typeof p>"u"?":":p)+f);return g.log=this.log,g}function y(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}return u.debug=u,u.default=u,u.coerce=function(f){return f instanceof Error?f.stack||f.message:f},u.disable=function(){const f=[...u.names.map(y),...u.skips.map(y).map(p=>"-"+p)].join(",");return u.enable(""),f},u.enable=function(f){u.save(f),u.names=[],u.skips=[];let p;const g=(typeof f=="string"?f:"").split(/[\s,]+/),v=g.length;for(p=0;p<v;p++)g[p]&&(f=g[p].replace(/\*/g,".*?"),f[0]==="-"?u.skips.push(new RegExp("^"+f.substr(1)+"$")):u.names.push(new RegExp("^"+f+"$")))},u.enabled=function(f){if(f[f.length-1]==="*")return!0;let p,g;for(p=0,g=u.skips.length;p<g;p++)if(u.skips[p].test(f))return!1;for(p=0,g=u.names.length;p<g;p++)if(u.names[p].test(f))return!0;return!1},u.humanize=i("ms"),u.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(l).forEach(f=>{u[f]=l[f]}),u.names=[],u.skips=[],u.formatters={},u.selectColor=function(f){let p=0;for(let g=0;g<f.length;g++)p=(p<<5)-p+f.charCodeAt(g),p|=0;return u.colors[r(p)%u.colors.length]},u.enable(u.load()),u}},{ms:11}],6:[function(i,s){function l(u,d){for(const y in d)Object.defineProperty(u,y,{value:d[y],enumerable:!0,configurable:!0});return u}s.exports=function(u,d,y){if(!u||typeof u=="string")throw new TypeError("Please pass an Error to err-code");y||(y={}),typeof d=="object"&&(y=d,d=""),d&&(y.code=d);try{return l(u,y)}catch{y.message=u.message,y.stack=u.stack;const p=function(){};return p.prototype=Object.create(Object.getPrototypeOf(u)),l(new p,y)}}},{}],7:[function(i,s){function l(R){console&&console.warn&&console.warn(R)}function u(){u.init.call(this)}function d(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}function y(R){return R._maxListeners===void 0?u.defaultMaxListeners:R._maxListeners}function f(R,N,F,Y){var ie,de,fe;if(d(F),de=R._events,de===void 0?(de=R._events=Object.create(null),R._eventsCount=0):(de.newListener!==void 0&&(R.emit("newListener",N,F.listener?F.listener:F),de=R._events),fe=de[N]),fe===void 0)fe=de[N]=F,++R._eventsCount;else if(typeof fe=="function"?fe=de[N]=Y?[F,fe]:[fe,F]:Y?fe.unshift(F):fe.push(F),ie=y(R),0<ie&&fe.length>ie&&!fe.warned){fe.warned=!0;var xe=new Error("Possible EventEmitter memory leak detected. "+fe.length+" "+(N+" listeners added. Use emitter.setMaxListeners() to increase limit"));xe.name="MaxListenersExceededWarning",xe.emitter=R,xe.type=N,xe.count=fe.length,l(xe)}return R}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(R,N,F){var Y={fired:!1,wrapFn:void 0,target:R,type:N,listener:F},ie=p.bind(Y);return ie.listener=F,Y.wrapFn=ie,ie}function v(R,N,F){var Y=R._events;if(Y===void 0)return[];var ie=Y[N];return ie===void 0?[]:typeof ie=="function"?F?[ie.listener||ie]:[ie]:F?k(ie):L(ie,ie.length)}function b(R){var N=this._events;if(N!==void 0){var F=N[R];if(typeof F=="function")return 1;if(F!==void 0)return F.length}return 0}function L(R,N){for(var F=Array(N),Y=0;Y<N;++Y)F[Y]=R[Y];return F}function S(R,N){for(;N+1<R.length;N++)R[N]=R[N+1];R.pop()}function k(R){for(var N=Array(R.length),F=0;F<N.length;++F)N[F]=R[F].listener||R[F];return N}function c(R,N,F){typeof R.on=="function"&&w(R,"error",N,F)}function w(R,N,F,Y){if(typeof R.on=="function")Y.once?R.once(N,F):R.on(N,F);else if(typeof R.addEventListener=="function")R.addEventListener(N,function ie(de){Y.once&&R.removeEventListener(N,ie),F(de)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}var C,T=typeof Reflect=="object"?Reflect:null,_=T&&typeof T.apply=="function"?T.apply:function(R,N,F){return Function.prototype.apply.call(R,N,F)};C=T&&typeof T.ownKeys=="function"?T.ownKeys:Object.getOwnPropertySymbols?function(R){return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R))}:function(R){return Object.getOwnPropertyNames(R)};var j=Number.isNaN||function(R){return R!==R};s.exports=u,s.exports.once=function(R,N){return new Promise(function(F,Y){function ie(fe){R.removeListener(N,de),Y(fe)}function de(){typeof R.removeListener=="function"&&R.removeListener("error",ie),F([].slice.call(arguments))}w(R,N,de,{once:!0}),N!=="error"&&c(R,ie,{once:!0})})},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var z=10;Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return z},set:function(R){if(typeof R!="number"||0>R||j(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");z=R}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(R){if(typeof R!="number"||0>R||j(R))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+R+".");return this._maxListeners=R,this},u.prototype.getMaxListeners=function(){return y(this)},u.prototype.emit=function(R){for(var N=[],F=1;F<arguments.length;F++)N.push(arguments[F]);var Y=R==="error",ie=this._events;if(ie!==void 0)Y=Y&&ie.error===void 0;else if(!Y)return!1;if(Y){var de;if(0<N.length&&(de=N[0]),de instanceof Error)throw de;var fe=new Error("Unhandled error."+(de?" ("+de.message+")":""));throw fe.context=de,fe}var xe=ie[R];if(xe===void 0)return!1;if(typeof xe=="function")_(xe,this,N);else for(var B=xe.length,K=L(xe,B),F=0;F<B;++F)_(K[F],this,N);return!0},u.prototype.addListener=function(R,N){return f(this,R,N,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(R,N){return f(this,R,N,!0)},u.prototype.once=function(R,N){return d(N),this.on(R,g(this,R,N)),this},u.prototype.prependOnceListener=function(R,N){return d(N),this.prependListener(R,g(this,R,N)),this},u.prototype.removeListener=function(R,N){var F,Y,ie,de,fe;if(d(N),Y=this._events,Y===void 0)return this;if(F=Y[R],F===void 0)return this;if(F===N||F.listener===N)--this._eventsCount==0?this._events=Object.create(null):(delete Y[R],Y.removeListener&&this.emit("removeListener",R,F.listener||N));else if(typeof F!="function"){for(ie=-1,de=F.length-1;0<=de;de--)if(F[de]===N||F[de].listener===N){fe=F[de].listener,ie=de;break}if(0>ie)return this;ie===0?F.shift():S(F,ie),F.length===1&&(Y[R]=F[0]),Y.removeListener!==void 0&&this.emit("removeListener",R,fe||N)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(R){var N,F,Y;if(F=this._events,F===void 0)return this;if(F.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):F[R]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete F[R]),this;if(arguments.length===0){var ie,de=Object.keys(F);for(Y=0;Y<de.length;++Y)ie=de[Y],ie!=="removeListener"&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=F[R],typeof N=="function")this.removeListener(R,N);else if(N!==void 0)for(Y=N.length-1;0<=Y;Y--)this.removeListener(R,N[Y]);return this},u.prototype.listeners=function(R){return v(this,R,!0)},u.prototype.rawListeners=function(R){return v(this,R,!1)},u.listenerCount=function(R,N){return typeof R.listenerCount=="function"?R.listenerCount(N):b.call(R,N)},u.prototype.listenerCount=b,u.prototype.eventNames=function(){return 0<this._eventsCount?C(this._events):[]}},{}],8:[function(i,s){s.exports=function(){if(typeof globalThis>"u")return null;var l={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return l.RTCPeerConnection?l:null}},{}],9:[function(i,s,l){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */l.read=function(u,d,y,f,p){var g,v,b=8*p-f-1,L=(1<<b)-1,S=L>>1,k=-7,c=y?p-1:0,w=y?-1:1,C=u[d+c];for(c+=w,g=C&(1<<-k)-1,C>>=-k,k+=b;0<k;g=256*g+u[d+c],c+=w,k-=8);for(v=g&(1<<-k)-1,g>>=-k,k+=f;0<k;v=256*v+u[d+c],c+=w,k-=8);if(g===0)g=1-S;else{if(g===L)return v?NaN:(C?-1:1)*(1/0);v+=o(2,f),g-=S}return(C?-1:1)*v*o(2,g-f)},l.write=function(u,d,y,f,p,g){var v,b,L,S=Math.LN2,k=Math.log,c=8*g-p-1,w=(1<<c)-1,C=w>>1,T=p===23?o(2,-24)-o(2,-77):0,_=f?0:g-1,j=f?1:-1,z=0>d||d===0&&0>1/d?1:0;for(d=r(d),isNaN(d)||d===1/0?(b=isNaN(d)?1:0,v=w):(v=n(k(d)/S),1>d*(L=o(2,-v))&&(v--,L*=2),d+=1<=v+C?T/L:T*o(2,1-C),2<=d*L&&(v++,L/=2),v+C>=w?(b=0,v=w):1<=v+C?(b=(d*L-1)*o(2,p),v+=C):(b=d*o(2,C-1)*o(2,p),v=0));8<=p;u[y+_]=255&b,_+=j,b/=256,p-=8);for(v=v<<p|b,c+=p;0<c;u[y+_]=255&v,_+=j,v/=256,c-=8);u[y+_-j]|=128*z}},{}],10:[function(i,s){s.exports=typeof Object.create=="function"?function(l,u){u&&(l.super_=u,l.prototype=Object.create(u.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:function(l,u){if(u){l.super_=u;var d=function(){};d.prototype=u.prototype,l.prototype=new d,l.prototype.constructor=l}}},{}],11:[function(i,s){var l=Math.round;function u(p){if(p+="",!(100<p.length)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(g){var v=parseFloat(g[1]),b=(g[2]||"ms").toLowerCase();return b==="years"||b==="year"||b==="yrs"||b==="yr"||b==="y"?315576e5*v:b==="weeks"||b==="week"||b==="w"?6048e5*v:b==="days"||b==="day"||b==="d"?864e5*v:b==="hours"||b==="hour"||b==="hrs"||b==="hr"||b==="h"?36e5*v:b==="minutes"||b==="minute"||b==="mins"||b==="min"||b==="m"?6e4*v:b==="seconds"||b==="second"||b==="secs"||b==="sec"||b==="s"?1e3*v:b==="milliseconds"||b==="millisecond"||b==="msecs"||b==="msec"||b==="ms"?v:void 0}}}function d(p){var g=r(p);return 864e5<=g?l(p/864e5)+"d":36e5<=g?l(p/36e5)+"h":6e4<=g?l(p/6e4)+"m":1e3<=g?l(p/1e3)+"s":p+"ms"}function y(p){var g=r(p);return 864e5<=g?f(p,g,864e5,"day"):36e5<=g?f(p,g,36e5,"hour"):6e4<=g?f(p,g,6e4,"minute"):1e3<=g?f(p,g,1e3,"second"):p+" ms"}function f(p,g,v,b){return l(p/v)+" "+b+(g>=1.5*v?"s":"")}s.exports=function(p,g){g=g||{};var v=typeof p;if(v=="string"&&0<p.length)return u(p);if(v==="number"&&isFinite(p))return g.long?y(p):d(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},{}],12:[function(i,s){function l(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function d(T){if(b===setTimeout)return setTimeout(T,0);if((b===l||!b)&&setTimeout)return b=setTimeout,setTimeout(T,0);try{return b(T,0)}catch{try{return b.call(null,T,0)}catch{return b.call(this,T,0)}}}function y(T){if(L===clearTimeout)return clearTimeout(T);if((L===u||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(T);try{return L(T)}catch{try{return L.call(null,T)}catch{return L.call(this,T)}}}function f(){w&&k&&(w=!1,k.length?c=k.concat(c):C=-1,c.length&&p())}function p(){if(!w){var T=d(f);w=!0;for(var _=c.length;_;){for(k=c,c=[];++C<_;)k&&k[C].run();C=-1,_=c.length}k=null,w=!1,y(T)}}function g(T,_){this.fun=T,this.array=_}function v(){}var b,L,S=s.exports={};(function(){try{b=typeof setTimeout=="function"?setTimeout:l}catch{b=l}try{L=typeof clearTimeout=="function"?clearTimeout:u}catch{L=u}})();var k,c=[],w=!1,C=-1;S.nextTick=function(T){var _=Array(arguments.length-1);if(1<arguments.length)for(var j=1;j<arguments.length;j++)_[j-1]=arguments[j];c.push(new g(T,_)),c.length!==1||w||d(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},S.title="browser",S.browser=!0,S.env={},S.argv=[],S.version="",S.versions={},S.on=v,S.addListener=v,S.once=v,S.off=v,S.removeListener=v,S.removeAllListeners=v,S.emit=v,S.prependListener=v,S.prependOnceListener=v,S.listeners=function(){return[]},S.binding=function(){throw new Error("process.binding is not supported")},S.cwd=function(){return"/"},S.chdir=function(){throw new Error("process.chdir is not supported")},S.umask=function(){return 0}},{}],13:[function(i,s){(function(l){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let u;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?l:window):d=>(u||(u=Promise.resolve())).then(d).catch(y=>setTimeout(()=>{throw y},0))}).call(this)}).call(this,typeof Yt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Yt)},{}],14:[function(i,s){(function(l,u){(function(){var d=i("safe-buffer").Buffer,y=u.crypto||u.msCrypto;s.exports=y&&y.getRandomValues?function(f,p){if(f>4294967295)throw new RangeError("requested too many random bytes");var g=d.allocUnsafe(f);if(0<f)if(65536<f)for(var v=0;v<f;v+=65536)y.getRandomValues(g.slice(v,v+65536));else y.getRandomValues(g);return typeof p=="function"?l.nextTick(function(){p(null,g)}):g}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof Yt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Yt)},{_process:12,"safe-buffer":30}],15:[function(i,s){function l(v,b){v.prototype=Object.create(b.prototype),v.prototype.constructor=v,v.__proto__=b}function u(v,b,L){function S(c,w,C){return typeof b=="string"?b:b(c,w,C)}L||(L=Error);var k=function(c){function w(C,T,_){return c.call(this,S(C,T,_))||this}return l(w,c),w}(L);k.prototype.name=L.name,k.prototype.code=v,g[v]=k}function d(v,b){if(Array.isArray(v)){var L=v.length;return v=v.map(function(S){return S+""}),2<L?"one of ".concat(b," ").concat(v.slice(0,L-1).join(", "),", or ")+v[L-1]:L===2?"one of ".concat(b," ").concat(v[0]," or ").concat(v[1]):"of ".concat(b," ").concat(v[0])}return"of ".concat(b," ").concat(v+"")}function y(v,b,L){return v.substr(0,b.length)===b}function f(v,b,L){return(L===void 0||L>v.length)&&(L=v.length),v.substring(L-b.length,L)===b}function p(v,b,L){return typeof L!="number"&&(L=0),!(L+b.length>v.length)&&v.indexOf(b,L)!==-1}var g={};u("ERR_INVALID_OPT_VALUE",function(v,b){return'The value "'+b+'" is invalid for option "'+v+'"'},TypeError),u("ERR_INVALID_ARG_TYPE",function(v,b,L){var S;typeof b=="string"&&y(b,"not ")?(S="must not be",b=b.replace(/^not /,"")):S="must be";var k;if(f(v," argument"))k="The ".concat(v," ").concat(S," ").concat(d(b,"type"));else{var c=p(v,".")?"property":"argument";k='The "'.concat(v,'" ').concat(c," ").concat(S," ").concat(d(b,"type"))}return k+=". Received type ".concat(typeof L),k},TypeError),u("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),u("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),u("ERR_STREAM_PREMATURE_CLOSE","Premature close"),u("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),u("ERR_STREAM_WRITE_AFTER_END","write after end"),u("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),u("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),u("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=g},{}],16:[function(i,s){(function(l){(function(){function u(S){return this instanceof u?(p.call(this,S),g.call(this,S),this.allowHalfOpen=!0,void(S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d))))):new u(S)}function d(){this._writableState.ended||l.nextTick(y,this)}function y(S){S.end()}var f=Object.keys||function(S){var k=[];for(var c in S)k.push(c);return k};s.exports=u;var p=i("./_stream_readable"),g=i("./_stream_writable");i("inherits")(u,p);for(var v,b=f(g.prototype),L=0;L<b.length;L++)v=b[L],u.prototype[v]||(u.prototype[v]=g.prototype[v]);Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(S){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=S,this._writableState.destroyed=S)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(i,s){function l(d){return this instanceof l?void u.call(this,d):new l(d)}s.exports=l;var u=i("./_stream_transform");i("inherits")(l,u),l.prototype._transform=function(d,y,f){f(null,d)}},{"./_stream_transform":19,inherits:10}],18:[function(i,s){(function(l,u){(function(){function d(E){return G.from(E)}function y(E){return G.isBuffer(E)||E instanceof ne}function f(E,a,m){return typeof E.prependListener=="function"?E.prependListener(a,m):void(E._events&&E._events[a]?Array.isArray(E._events[a])?E._events[a].unshift(m):E._events[a]=[m,E._events[a]]:E.on(a,m))}function p(E,a,m){B=B||i("./_stream_duplex"),E=E||{},typeof m!="boolean"&&(m=a instanceof B),this.objectMode=!!E.objectMode,m&&(this.objectMode=this.objectMode||!!E.readableObjectMode),this.highWaterMark=pe(this,E,"readableHighWaterMark",m),this.buffer=new he,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=E.emitClose!==!1,this.autoDestroy=!!E.autoDestroy,this.destroyed=!1,this.defaultEncoding=E.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,E.encoding&&(!Z&&(Z=i("string_decoder/").StringDecoder),this.decoder=new Z(E.encoding),this.encoding=E.encoding)}function g(E){if(B=B||i("./_stream_duplex"),!(this instanceof g))return new g(E);var a=this instanceof B;this._readableState=new p(E,this,a),this.readable=!0,E&&(typeof E.read=="function"&&(this._read=E.read),typeof E.destroy=="function"&&(this._destroy=E.destroy)),ue.call(this)}function v(E,a,m,x,D){K("readableAddChunk",a);var O=E._readableState;if(a===null)O.reading=!1,c(E,O);else{var P;if(D||(P=L(O,a)),P)$(E,P);else if(!(O.objectMode||a&&0<a.length))x||(O.reading=!1,T(E,O));else if(typeof a=="string"||O.objectMode||Object.getPrototypeOf(a)===G.prototype||(a=d(a)),x)O.endEmitted?$(E,new I):b(E,O,a,!0);else if(O.ended)$(E,new se);else{if(O.destroyed)return!1;O.reading=!1,O.decoder&&!m?(a=O.decoder.write(a),O.objectMode||a.length!==0?b(E,O,a,!1):T(E,O)):b(E,O,a,!1)}}return!O.ended&&(O.length<O.highWaterMark||O.length===0)}function b(E,a,m,x){a.flowing&&a.length===0&&!a.sync?(a.awaitDrain=0,E.emit("data",m)):(a.length+=a.objectMode?1:m.length,x?a.buffer.unshift(m):a.buffer.push(m),a.needReadable&&w(E)),T(E,a)}function L(E,a){var m;return y(a)||typeof a=="string"||a===void 0||E.objectMode||(m=new re("chunk",["string","Buffer","Uint8Array"],a)),m}function S(E){return 1073741824<=E?E=1073741824:(E--,E|=E>>>1,E|=E>>>2,E|=E>>>4,E|=E>>>8,E|=E>>>16,E++),E}function k(E,a){return 0>=E||a.length===0&&a.ended?0:a.objectMode?1:E===E?(E>a.highWaterMark&&(a.highWaterMark=S(E)),E<=a.length?E:a.ended?a.length:(a.needReadable=!0,0)):a.flowing&&a.length?a.buffer.head.data.length:a.length}function c(E,a){if(K("onEofChunk"),!a.ended){if(a.decoder){var m=a.decoder.end();m&&m.length&&(a.buffer.push(m),a.length+=a.objectMode?1:m.length)}a.ended=!0,a.sync?w(E):(a.needReadable=!1,!a.emittedReadable&&(a.emittedReadable=!0,C(E)))}}function w(E){var a=E._readableState;K("emitReadable",a.needReadable,a.emittedReadable),a.needReadable=!1,a.emittedReadable||(K("emitReadable",a.flowing),a.emittedReadable=!0,l.nextTick(C,E))}function C(E){var a=E._readableState;K("emitReadable_",a.destroyed,a.length,a.ended),!a.destroyed&&(a.length||a.ended)&&(E.emit("readable"),a.emittedReadable=!1),a.needReadable=!a.flowing&&!a.ended&&a.length<=a.highWaterMark,Y(E)}function T(E,a){a.readingMore||(a.readingMore=!0,l.nextTick(_,E,a))}function _(E,a){for(;!a.reading&&!a.ended&&(a.length<a.highWaterMark||a.flowing&&a.length===0);){var m=a.length;if(K("maybeReadMore read 0"),E.read(0),m===a.length)break}a.readingMore=!1}function j(E){return function(){var a=E._readableState;K("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,a.awaitDrain===0&&ae(E,"data")&&(a.flowing=!0,Y(E))}}function z(E){var a=E._readableState;a.readableListening=0<E.listenerCount("readable"),a.resumeScheduled&&!a.paused?a.flowing=!0:0<E.listenerCount("data")&&E.resume()}function R(E){K("readable nexttick read 0"),E.read(0)}function N(E,a){a.resumeScheduled||(a.resumeScheduled=!0,l.nextTick(F,E,a))}function F(E,a){K("resume",a.reading),a.reading||E.read(0),a.resumeScheduled=!1,E.emit("resume"),Y(E),a.flowing&&!a.reading&&E.read(0)}function Y(E){var a=E._readableState;for(K("flow",a.flowing);a.flowing&&E.read()!==null;);}function ie(E,a){if(a.length===0)return null;var m;return a.objectMode?m=a.buffer.shift():!E||E>=a.length?(m=a.decoder?a.buffer.join(""):a.buffer.length===1?a.buffer.first():a.buffer.concat(a.length),a.buffer.clear()):m=a.buffer.consume(E,a.decoder),m}function de(E){var a=E._readableState;K("endReadable",a.endEmitted),a.endEmitted||(a.ended=!0,l.nextTick(fe,a,E))}function fe(E,a){if(K("endReadableNT",E.endEmitted,E.length),!E.endEmitted&&E.length===0&&(E.endEmitted=!0,a.readable=!1,a.emit("end"),E.autoDestroy)){var m=a._writableState;(!m||m.autoDestroy&&m.finished)&&a.destroy()}}function xe(E,a){for(var m=0,x=E.length;m<x;m++)if(E[m]===a)return m;return-1}s.exports=g;var B;g.ReadableState=p;var K;i("events").EventEmitter;var ae=function(E,a){return E.listeners(a).length},ue=i("./internal/streams/stream"),G=i("buffer").Buffer,ne=u.Uint8Array||function(){},ee=i("util");K=ee&&ee.debuglog?ee.debuglog("stream"):function(){};var Z,H,le,he=i("./internal/streams/buffer_list"),be=i("./internal/streams/destroy"),ke=i("./internal/streams/state"),pe=ke.getHighWaterMark,U=i("../errors").codes,re=U.ERR_INVALID_ARG_TYPE,se=U.ERR_STREAM_PUSH_AFTER_EOF,A=U.ERR_METHOD_NOT_IMPLEMENTED,I=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(g,ue);var $=be.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(E){this._readableState&&(this._readableState.destroyed=E)}}),g.prototype.destroy=be.destroy,g.prototype._undestroy=be.undestroy,g.prototype._destroy=function(E,a){a(E)},g.prototype.push=function(E,a){var m,x=this._readableState;return x.objectMode?m=!0:typeof E=="string"&&(a=a||x.defaultEncoding,a!==x.encoding&&(E=G.from(E,a),a=""),m=!0),v(this,E,a,!1,m)},g.prototype.unshift=function(E){return v(this,E,null,!0,!1)},g.prototype.isPaused=function(){return this._readableState.flowing===!1},g.prototype.setEncoding=function(E){Z||(Z=i("string_decoder/").StringDecoder);var a=new Z(E);this._readableState.decoder=a,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,x="";m!==null;)x+=a.write(m.data),m=m.next;return this._readableState.buffer.clear(),x!==""&&this._readableState.buffer.push(x),this._readableState.length=x.length,this},g.prototype.read=function(E){K("read",E),E=parseInt(E,10);var a=this._readableState,m=E;if(E!==0&&(a.emittedReadable=!1),E===0&&a.needReadable&&((a.highWaterMark===0?0<a.length:a.length>=a.highWaterMark)||a.ended))return K("read: emitReadable",a.length,a.ended),a.length===0&&a.ended?de(this):w(this),null;if(E=k(E,a),E===0&&a.ended)return a.length===0&&de(this),null;var x=a.needReadable;K("need readable",x),(a.length===0||a.length-E<a.highWaterMark)&&(x=!0,K("length less than watermark",x)),a.ended||a.reading?(x=!1,K("reading or ended",x)):x&&(K("do read"),a.reading=!0,a.sync=!0,a.length===0&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,!a.reading&&(E=k(m,a)));var D;return D=0<E?ie(E,a):null,D===null?(a.needReadable=a.length<=a.highWaterMark,E=0):(a.length-=E,a.awaitDrain=0),a.length===0&&(!a.ended&&(a.needReadable=!0),m!==E&&a.ended&&de(this)),D!==null&&this.emit("data",D),D},g.prototype._read=function(){$(this,new A("_read()"))},g.prototype.pipe=function(E,a){function m(vt,Tr){K("onunpipe"),vt===q&&Tr&&Tr.hasUnpiped===!1&&(Tr.hasUnpiped=!0,D())}function x(){K("onend"),E.end()}function D(){K("cleanup"),E.removeListener("close",M),E.removeListener("finish",V),E.removeListener("drain",Le),E.removeListener("error",P),E.removeListener("unpipe",m),q.removeListener("end",x),q.removeListener("end",J),q.removeListener("data",O),Ft=!0,te.awaitDrain&&(!E._writableState||E._writableState.needDrain)&&Le()}function O(vt){K("ondata");var Tr=E.write(vt);K("dest.write",Tr),Tr===!1&&((te.pipesCount===1&&te.pipes===E||1<te.pipesCount&&xe(te.pipes,E)!==-1)&&!Ft&&(K("false write response, pause",te.awaitDrain),te.awaitDrain++),q.pause())}function P(vt){K("onerror",vt),J(),E.removeListener("error",P),ae(E,"error")===0&&$(E,vt)}function M(){E.removeListener("finish",V),J()}function V(){K("onfinish"),E.removeListener("close",M),J()}function J(){K("unpipe"),q.unpipe(E)}var q=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=E;break;case 1:te.pipes=[te.pipes,E];break;default:te.pipes.push(E)}te.pipesCount+=1,K("pipe count=%d opts=%j",te.pipesCount,a);var me=(!a||a.end!==!1)&&E!==l.stdout&&E!==l.stderr,Me=me?x:J;te.endEmitted?l.nextTick(Me):q.once("end",Me),E.on("unpipe",m);var Le=j(q);E.on("drain",Le);var Ft=!1;return q.on("data",O),f(E,"error",P),E.once("close",M),E.once("finish",V),E.emit("pipe",q),te.flowing||(K("pipe resume"),q.resume()),E},g.prototype.unpipe=function(E){var a=this._readableState,m={hasUnpiped:!1};if(a.pipesCount===0)return this;if(a.pipesCount===1)return E&&E!==a.pipes?this:(E||(E=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,E&&E.emit("unpipe",this,m),this);if(!E){var x=a.pipes,D=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var O=0;O<D;O++)x[O].emit("unpipe",this,{hasUnpiped:!1});return this}var P=xe(a.pipes,E);return P===-1?this:(a.pipes.splice(P,1),a.pipesCount-=1,a.pipesCount===1&&(a.pipes=a.pipes[0]),E.emit("unpipe",this,m),this)},g.prototype.on=function(E,a){var m=ue.prototype.on.call(this,E,a),x=this._readableState;return E==="data"?(x.readableListening=0<this.listenerCount("readable"),x.flowing!==!1&&this.resume()):E=="readable"&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,K("on readable",x.length,x.reading),x.length?w(this):!x.reading&&l.nextTick(R,this)),m},g.prototype.addListener=g.prototype.on,g.prototype.removeListener=function(E,a){var m=ue.prototype.removeListener.call(this,E,a);return E==="readable"&&l.nextTick(z,this),m},g.prototype.removeAllListeners=function(E){var a=ue.prototype.removeAllListeners.apply(this,arguments);return(E==="readable"||E===void 0)&&l.nextTick(z,this),a},g.prototype.resume=function(){var E=this._readableState;return E.flowing||(K("resume"),E.flowing=!E.readableListening,N(this,E)),E.paused=!1,this},g.prototype.pause=function(){return K("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(K("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},g.prototype.wrap=function(E){var a=this,m=this._readableState,x=!1;for(var D in E.on("end",function(){if(K("wrapped end"),m.decoder&&!m.ended){var P=m.decoder.end();P&&P.length&&a.push(P)}a.push(null)}),E.on("data",function(P){if(K("wrapped data"),m.decoder&&(P=m.decoder.write(P)),!(m.objectMode&&P==null)&&(m.objectMode||P&&P.length)){var M=a.push(P);M||(x=!0,E.pause())}}),E)this[D]===void 0&&typeof E[D]=="function"&&(this[D]=function(P){return function(){return E[P].apply(E,arguments)}}(D));for(var O=0;O<X.length;O++)E.on(X[O],this.emit.bind(this,X[O]));return this._read=function(P){K("wrapped _read",P),x&&(x=!1,E.resume())},this},typeof Symbol=="function"&&(g.prototype[Symbol.asyncIterator]=function(){return H===void 0&&(H=i("./internal/streams/async_iterator")),H(this)}),Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(g.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(g.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(E){this._readableState&&(this._readableState.flowing=E)}}),g._fromList=ie,Object.defineProperty(g.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(g.from=function(E,a){return le===void 0&&(le=i("./internal/streams/from")),le(g,E,a)})}).call(this)}).call(this,i("_process"),typeof Yt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Yt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(i,s){function l(S,k){var c=this._transformState;c.transforming=!1;var w=c.writecb;if(w===null)return this.emit("error",new g);c.writechunk=null,c.writecb=null,k!=null&&this.push(k),w(S);var C=this._readableState;C.reading=!1,(C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}function u(S){return this instanceof u?(L.call(this,S),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,S&&(typeof S.transform=="function"&&(this._transform=S.transform),typeof S.flush=="function"&&(this._flush=S.flush)),void this.on("prefinish",d)):new u(S)}function d(){var S=this;typeof this._flush!="function"||this._readableState.destroyed?y(this,null,null):this._flush(function(k,c){y(S,k,c)})}function y(S,k,c){if(k)return S.emit("error",k);if(c!=null&&S.push(c),S._writableState.length)throw new b;if(S._transformState.transforming)throw new v;return S.push(null)}s.exports=u;var f=i("../errors").codes,p=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_TRANSFORM_ALREADY_TRANSFORMING,b=f.ERR_TRANSFORM_WITH_LENGTH_0,L=i("./_stream_duplex");i("inherits")(u,L),u.prototype.push=function(S,k){return this._transformState.needTransform=!1,L.prototype.push.call(this,S,k)},u.prototype._transform=function(S,k,c){c(new p("_transform()"))},u.prototype._write=function(S,k,c){var w=this._transformState;if(w.writecb=c,w.writechunk=S,w.writeencoding=k,!w.transforming){var C=this._readableState;(w.needTransform||C.needReadable||C.length<C.highWaterMark)&&this._read(C.highWaterMark)}},u.prototype._read=function(){var S=this._transformState;S.writechunk===null||S.transforming?S.needTransform=!0:(S.transforming=!0,this._transform(S.writechunk,S.writeencoding,S.afterTransform))},u.prototype._destroy=function(S,k){L.prototype._destroy.call(this,S,function(c){k(c)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(i,s){(function(l,u){(function(){function d(A){var I=this;this.next=null,this.entry=null,this.finish=function(){de(I,A)}}function y(A){return K.from(A)}function f(A){return K.isBuffer(A)||A instanceof ae}function p(){}function g(A,I,$){fe=fe||i("./_stream_duplex"),A=A||{},typeof $!="boolean"&&($=I instanceof fe),this.objectMode=!!A.objectMode,$&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=ne(this,A,"writableHighWaterMark",$),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var X=A.decodeStrings===!1;this.decodeStrings=!X,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(E){T(I,E)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function v(A){fe=fe||i("./_stream_duplex");var I=this instanceof fe;return I||se.call(v,this)?(this._writableState=new g(A,this,I),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),void B.call(this)):new v(A)}function b(A,I){var $=new pe;re(A,$),l.nextTick(I,$)}function L(A,I,$,X){var E;return $===null?E=new ke:typeof $!="string"&&!I.objectMode&&(E=new Z("chunk",["string","Buffer"],$)),!E||(re(A,E),l.nextTick(X,E),!1)}function S(A,I,$){return A.objectMode||A.decodeStrings===!1||typeof I!="string"||(I=K.from(I,$)),I}function k(A,I,$,X,E,a){if(!$){var m=S(I,X,E);X!==m&&($=!0,E="buffer",X=m)}var x=I.objectMode?1:X.length;I.length+=x;var D=I.length<I.highWaterMark;if(D||(I.needDrain=!0),I.writing||I.corked){var O=I.lastBufferedRequest;I.lastBufferedRequest={chunk:X,encoding:E,isBuf:$,callback:a,next:null},O?O.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else c(A,I,!1,x,X,E,a);return D}function c(A,I,$,X,E,a,m){I.writelen=X,I.writecb=m,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new be("write")):$?A._writev(E,I.onwrite):A._write(E,a,I.onwrite),I.sync=!1}function w(A,I,$,X,E){--I.pendingcb,$?(l.nextTick(E,X),l.nextTick(Y,A,I),A._writableState.errorEmitted=!0,re(A,X)):(E(X),A._writableState.errorEmitted=!0,re(A,X),Y(A,I))}function C(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function T(A,I){var $=A._writableState,X=$.sync,E=$.writecb;if(typeof E!="function")throw new le;if(C($),I)w(A,$,X,I,E);else{var a=R($)||A.destroyed;a||$.corked||$.bufferProcessing||!$.bufferedRequest||z(A,$),X?l.nextTick(_,A,$,a,E):_(A,$,a,E)}}function _(A,I,$,X){$||j(A,I),I.pendingcb--,X(),Y(A,I)}function j(A,I){I.length===0&&I.needDrain&&(I.needDrain=!1,A.emit("drain"))}function z(A,I){I.bufferProcessing=!0;var $=I.bufferedRequest;if(A._writev&&$&&$.next){var X=I.bufferedRequestCount,E=Array(X),a=I.corkedRequestsFree;a.entry=$;for(var m=0,x=!0;$;)E[m]=$,$.isBuf||(x=!1),$=$.next,m+=1;E.allBuffers=x,c(A,I,!0,I.length,E,"",a.finish),I.pendingcb++,I.lastBufferedRequest=null,a.next?(I.corkedRequestsFree=a.next,a.next=null):I.corkedRequestsFree=new d(I),I.bufferedRequestCount=0}else{for(;$;){var D=$.chunk,O=$.encoding,P=$.callback,M=I.objectMode?1:D.length;if(c(A,I,!1,M,D,O,P),$=$.next,I.bufferedRequestCount--,I.writing)break}$===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=$,I.bufferProcessing=!1}function R(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function N(A,I){A._final(function($){I.pendingcb--,$&&re(A,$),I.prefinished=!0,A.emit("prefinish"),Y(A,I)})}function F(A,I){I.prefinished||I.finalCalled||(typeof A._final!="function"||I.destroyed?(I.prefinished=!0,A.emit("prefinish")):(I.pendingcb++,I.finalCalled=!0,l.nextTick(N,A,I)))}function Y(A,I){var $=R(I);if($&&(F(A,I),I.pendingcb===0&&(I.finished=!0,A.emit("finish"),I.autoDestroy))){var X=A._readableState;(!X||X.autoDestroy&&X.endEmitted)&&A.destroy()}return $}function ie(A,I,$){I.ending=!0,Y(A,I),$&&(I.finished?l.nextTick($):A.once("finish",$)),I.ended=!0,A.writable=!1}function de(A,I,$){var X=A.entry;for(A.entry=null;X;){var E=X.callback;I.pendingcb--,E($),X=X.next}I.corkedRequestsFree.next=A}s.exports=v;var fe;v.WritableState=g;var xe={deprecate:i("util-deprecate")},B=i("./internal/streams/stream"),K=i("buffer").Buffer,ae=u.Uint8Array||function(){},ue=i("./internal/streams/destroy"),G=i("./internal/streams/state"),ne=G.getHighWaterMark,ee=i("../errors").codes,Z=ee.ERR_INVALID_ARG_TYPE,H=ee.ERR_METHOD_NOT_IMPLEMENTED,le=ee.ERR_MULTIPLE_CALLBACK,he=ee.ERR_STREAM_CANNOT_PIPE,be=ee.ERR_STREAM_DESTROYED,ke=ee.ERR_STREAM_NULL_VALUES,pe=ee.ERR_STREAM_WRITE_AFTER_END,U=ee.ERR_UNKNOWN_ENCODING,re=ue.errorOrDestroy;i("inherits")(v,B),g.prototype.getBuffer=function(){for(var A=this.bufferedRequest,I=[];A;)I.push(A),A=A.next;return I},function(){try{Object.defineProperty(g.prototype,"buffer",{get:xe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var se;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(se=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(A){return!!se.call(this,A)||this===v&&A&&A._writableState instanceof g}})):se=function(A){return A instanceof this},v.prototype.pipe=function(){re(this,new he)},v.prototype.write=function(A,I,$){var X=this._writableState,E=!1,a=!X.objectMode&&f(A);return a&&!K.isBuffer(A)&&(A=y(A)),typeof I=="function"&&($=I,I=null),a?I="buffer":!I&&(I=X.defaultEncoding),typeof $!="function"&&($=p),X.ending?b(this,$):(a||L(this,X,A,$))&&(X.pendingcb++,E=k(this,X,a,A,I,$)),E},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&z(this,A))},v.prototype.setDefaultEncoding=function(A){if(typeof A=="string"&&(A=A.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((A+"").toLowerCase())))throw new U(A);return this._writableState.defaultEncoding=A,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(A,I,$){$(new H("_write()"))},v.prototype._writev=null,v.prototype.end=function(A,I,$){var X=this._writableState;return typeof A=="function"?($=A,A=null,I=null):typeof I=="function"&&($=I,I=null),A!=null&&this.write(A,I),X.corked&&(X.corked=1,this.uncork()),X.ending||ie(this,X,$),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),v.prototype.destroy=ue.destroy,v.prototype._undestroy=ue.undestroy,v.prototype._destroy=function(A,I){I(A)}}).call(this)}).call(this,i("_process"),typeof Yt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Yt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(i,s){(function(l){(function(){function u(j,z,R){return z in j?Object.defineProperty(j,z,{value:R,enumerable:!0,configurable:!0,writable:!0}):j[z]=R,j}function d(j,z){return{value:j,done:z}}function y(j){var z=j[b];if(z!==null){var R=j[C].read();R!==null&&(j[c]=null,j[b]=null,j[L]=null,z(d(R,!1)))}}function f(j){l.nextTick(y,j)}function p(j,z){return function(R,N){j.then(function(){return z[k]?void R(d(void 0,!0)):void z[w](R,N)},N)}}var g,v=i("./end-of-stream"),b=Symbol("lastResolve"),L=Symbol("lastReject"),S=Symbol("error"),k=Symbol("ended"),c=Symbol("lastPromise"),w=Symbol("handlePromise"),C=Symbol("stream"),T=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((g={get stream(){return this[C]},next:function(){var j=this,z=this[S];if(z!==null)return Promise.reject(z);if(this[k])return Promise.resolve(d(void 0,!0));if(this[C].destroyed)return new Promise(function(Y,ie){l.nextTick(function(){j[S]?ie(j[S]):Y(d(void 0,!0))})});var R,N=this[c];if(N)R=new Promise(p(N,this));else{var F=this[C].read();if(F!==null)return Promise.resolve(d(F,!1));R=new Promise(this[w])}return this[c]=R,R}},u(g,Symbol.asyncIterator,function(){return this}),u(g,"return",function(){var j=this;return new Promise(function(z,R){j[C].destroy(null,function(N){return N?void R(N):void z(d(void 0,!0))})})}),g),T);s.exports=function(j){var z,R=Object.create(_,(z={},u(z,C,{value:j,writable:!0}),u(z,b,{value:null,writable:!0}),u(z,L,{value:null,writable:!0}),u(z,S,{value:null,writable:!0}),u(z,k,{value:j._readableState.endEmitted,writable:!0}),u(z,w,{value:function(N,F){var Y=R[C].read();Y?(R[c]=null,R[b]=null,R[L]=null,N(d(Y,!1))):(R[b]=N,R[L]=F)},writable:!0}),z));return R[c]=null,v(j,function(N){if(N&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"){var F=R[L];return F!==null&&(R[c]=null,R[b]=null,R[L]=null,F(N)),void(R[S]=N)}var Y=R[b];Y!==null&&(R[c]=null,R[b]=null,R[L]=null,Y(d(void 0,!0))),R[k]=!0}),j.on("readable",f.bind(null,R)),R}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":24,_process:12}],22:[function(i,s){function l(c,w){var C=Object.keys(c);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(c);w&&(T=T.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),C.push.apply(C,T)}return C}function u(c){for(var w,C=1;C<arguments.length;C++)w=arguments[C]==null?{}:arguments[C],C%2?l(Object(w),!0).forEach(function(T){d(c,T,w[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(w)):l(Object(w)).forEach(function(T){Object.defineProperty(c,T,Object.getOwnPropertyDescriptor(w,T))});return c}function d(c,w,C){return w in c?Object.defineProperty(c,w,{value:C,enumerable:!0,configurable:!0,writable:!0}):c[w]=C,c}function y(c,w){if(!(c instanceof w))throw new TypeError("Cannot call a class as a function")}function f(c,w){for(var C,T=0;T<w.length;T++)C=w[T],C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(c,C.key,C)}function p(c,w,C){return w&&f(c.prototype,w),c}function g(c,w,C){b.prototype.copy.call(c,w,C)}var v=i("buffer"),b=v.Buffer,L=i("util"),S=L.inspect,k=S&&S.custom||"inspect";s.exports=function(){function c(){y(this,c),this.head=null,this.tail=null,this.length=0}return p(c,[{key:"push",value:function(w){var C={data:w,next:null};0<this.length?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(w){var C={data:w,next:this.head};this.length===0&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var C=this.head,T=""+C.data;C=C.next;)T+=w+C.data;return T}},{key:"concat",value:function(w){if(this.length===0)return b.alloc(0);for(var C=b.allocUnsafe(w>>>0),T=this.head,_=0;T;)g(T.data,C,_),_+=T.data.length,T=T.next;return C}},{key:"consume",value:function(w,C){var T;return w<this.head.data.length?(T=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?T=this.shift():T=C?this._getString(w):this._getBuffer(w),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var C=this.head,T=1,_=C.data;for(w-=_.length;C=C.next;){var j=C.data,z=w>j.length?j.length:w;if(_+=z===j.length?j:j.slice(0,w),w-=z,w===0){z===j.length?(++T,this.head=C.next?C.next:this.tail=null):(this.head=C,C.data=j.slice(z));break}++T}return this.length-=T,_}},{key:"_getBuffer",value:function(w){var C=b.allocUnsafe(w),T=this.head,_=1;for(T.data.copy(C),w-=T.data.length;T=T.next;){var j=T.data,z=w>j.length?j.length:w;if(j.copy(C,C.length-w,0,z),w-=z,w===0){z===j.length?(++_,this.head=T.next?T.next:this.tail=null):(this.head=T,T.data=j.slice(z));break}++_}return this.length-=_,C}},{key:k,value:function(w,C){return S(this,u({},C,{depth:0,customInspect:!1}))}}]),c}()},{buffer:3,util:2}],23:[function(i,s){(function(l){(function(){function u(f,p){y(f,p),d(f)}function d(f){f._writableState&&!f._writableState.emitClose||f._readableState&&!f._readableState.emitClose||f.emit("close")}function y(f,p){f.emit("error",p)}s.exports={destroy:function(f,p){var g=this,v=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return v||b?(p?p(f):f&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,l.nextTick(y,this,f)):l.nextTick(y,this,f)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(f||null,function(L){!p&&L?g._writableState?g._writableState.errorEmitted?l.nextTick(d,g):(g._writableState.errorEmitted=!0,l.nextTick(u,g,L)):l.nextTick(u,g,L):p?(l.nextTick(d,g),p(L)):l.nextTick(d,g)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(f,p){var g=f._readableState,v=f._writableState;g&&g.autoDestroy||v&&v.autoDestroy?f.destroy(p):f.emit("error",p)}}}).call(this)}).call(this,i("_process"))},{_process:12}],24:[function(i,s){function l(p){var g=!1;return function(){if(!g){g=!0;for(var v=arguments.length,b=Array(v),L=0;L<v;L++)b[L]=arguments[L];p.apply(this,b)}}}function u(){}function d(p){return p.setHeader&&typeof p.abort=="function"}function y(p,g,v){if(typeof g=="function")return y(p,null,g);g||(g={}),v=l(v||u);var b=g.readable||g.readable!==!1&&p.readable,L=g.writable||g.writable!==!1&&p.writable,S=function(){p.writable||c()},k=p._writableState&&p._writableState.finished,c=function(){L=!1,k=!0,b||v.call(p)},w=p._readableState&&p._readableState.endEmitted,C=function(){b=!1,w=!0,L||v.call(p)},T=function(z){v.call(p,z)},_=function(){var z;return b&&!w?(p._readableState&&p._readableState.ended||(z=new f),v.call(p,z)):L&&!k?(p._writableState&&p._writableState.ended||(z=new f),v.call(p,z)):void 0},j=function(){p.req.on("finish",c)};return d(p)?(p.on("complete",c),p.on("abort",_),p.req?j():p.on("request",j)):L&&!p._writableState&&(p.on("end",S),p.on("close",S)),p.on("end",C),p.on("finish",c),g.error!==!1&&p.on("error",T),p.on("close",_),function(){p.removeListener("complete",c),p.removeListener("abort",_),p.removeListener("request",j),p.req&&p.req.removeListener("finish",c),p.removeListener("end",S),p.removeListener("close",S),p.removeListener("finish",c),p.removeListener("end",C),p.removeListener("error",T),p.removeListener("close",_)}}var f=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;s.exports=y},{"../../../errors":15}],25:[function(i,s){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(i,s){function l(k){var c=!1;return function(){c||(c=!0,k.apply(void 0,arguments))}}function u(k){if(k)throw k}function d(k){return k.setHeader&&typeof k.abort=="function"}function y(k,c,w,C){C=l(C);var T=!1;k.on("close",function(){T=!0}),v===void 0&&(v=i("./end-of-stream")),v(k,{readable:c,writable:w},function(j){return j?C(j):(T=!0,void C())});var _=!1;return function(j){if(!T)return _?void 0:(_=!0,d(k)?k.abort():typeof k.destroy=="function"?k.destroy():void C(j||new S("pipe")))}}function f(k){k()}function p(k,c){return k.pipe(c)}function g(k){return k.length&&typeof k[k.length-1]=="function"?k.pop():u}var v,b=i("../../../errors").codes,L=b.ERR_MISSING_ARGS,S=b.ERR_STREAM_DESTROYED;s.exports=function(){for(var k=arguments.length,c=Array(k),w=0;w<k;w++)c[w]=arguments[w];var C=g(c);if(Array.isArray(c[0])&&(c=c[0]),2>c.length)throw new L("streams");var T,_=c.map(function(j,z){var R=z<c.length-1;return y(j,R,0<z,function(N){T||(T=N),N&&_.forEach(f),R||(_.forEach(f),C(T))})});return c.reduce(p)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(i,s){function l(d,y,f){return d.highWaterMark==null?y?d[f]:null:d.highWaterMark}var u=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(d,y,f,p){var g=l(y,p,f);if(g!=null){if(!(isFinite(g)&&n(g)===g)||0>g){var v=p?f:"highWaterMark";throw new u(v,g)}return n(g)}return d.objectMode?16:16384}}},{"../../../errors":15}],28:[function(i,s){s.exports=i("events").EventEmitter},{events:7}],29:[function(i,s,l){l=s.exports=i("./lib/_stream_readable.js"),l.Stream=l,l.Readable=l,l.Writable=i("./lib/_stream_writable.js"),l.Duplex=i("./lib/_stream_duplex.js"),l.Transform=i("./lib/_stream_transform.js"),l.PassThrough=i("./lib/_stream_passthrough.js"),l.finished=i("./lib/internal/streams/end-of-stream.js"),l.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(i,s,l){function u(p,g){for(var v in p)g[v]=p[v]}function d(p,g,v){return f(p,g,v)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var y=i("buffer"),f=y.Buffer;f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?s.exports=y:(u(y,l),l.Buffer=d),d.prototype=Object.create(f.prototype),u(f,d),d.from=function(p,g,v){if(typeof p=="number")throw new TypeError("Argument must not be a number");return f(p,g,v)},d.alloc=function(p,g,v){if(typeof p!="number")throw new TypeError("Argument must be a number");var b=f(p);return g===void 0?b.fill(0):typeof v=="string"?b.fill(g,v):b.fill(g),b},d.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return f(p)},d.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return y.SlowBuffer(p)}},{buffer:3}],31:[function(i,s,l){function u(_){if(!_)return"utf8";for(var j;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(j)return;_=(""+_).toLowerCase(),j=!0}}function d(_){var j=u(_);if(typeof j!="string"&&(C.isEncoding===T||!T(_)))throw new Error("Unknown encoding: "+_);return j||_}function y(_){this.encoding=d(_);var j;switch(this.encoding){case"utf16le":this.text=b,this.end=L,j=4;break;case"utf8":this.fillLast=v,j=4;break;case"base64":this.text=S,this.end=k,j=3;break;default:return this.write=c,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=C.allocUnsafe(j)}function f(_){return 127>=_?0:_>>5==6?2:_>>4==14?3:_>>3==30?4:_>>6==2?-1:-2}function p(_,j,z){var R=j.length-1;if(R<z)return 0;var N=f(j[R]);return 0<=N?(0<N&&(_.lastNeed=N-1),N):--R<z||N===-2?0:(N=f(j[R]),0<=N?(0<N&&(_.lastNeed=N-2),N):--R<z||N===-2?0:(N=f(j[R]),0<=N?(0<N&&(N===2?N=0:_.lastNeed=N-3),N):0))}function g(_,j){if((192&j[0])!=128)return _.lastNeed=0,"";if(1<_.lastNeed&&1<j.length){if((192&j[1])!=128)return _.lastNeed=1,"";if(2<_.lastNeed&&2<j.length&&(192&j[2])!=128)return _.lastNeed=2,""}}function v(_){var j=this.lastTotal-this.lastNeed,z=g(this,_);return z===void 0?this.lastNeed<=_.length?(_.copy(this.lastChar,j,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,j,0,_.length),void(this.lastNeed-=_.length)):z}function b(_,j){if((_.length-j)%2==0){var z=_.toString("utf16le",j);if(z){var R=z.charCodeAt(z.length-1);if(55296<=R&&56319>=R)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",j,_.length-1)}function L(_){var j=_&&_.length?this.write(_):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return j+this.lastChar.toString("utf16le",0,z)}return j}function S(_,j){var z=(_.length-j)%3;return z==0?_.toString("base64",j):(this.lastNeed=3-z,this.lastTotal=3,z==1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",j,_.length-z))}function k(_){var j=_&&_.length?this.write(_):"";return this.lastNeed?j+this.lastChar.toString("base64",0,3-this.lastNeed):j}function c(_){return _.toString(this.encoding)}function w(_){return _&&_.length?this.write(_):""}var C=i("safe-buffer").Buffer,T=C.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};l.StringDecoder=y,y.prototype.write=function(_){if(_.length===0)return"";var j,z;if(this.lastNeed){if(j=this.fillLast(_),j===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<_.length?j?j+this.text(_,z):this.text(_,z):j||""},y.prototype.end=function(_){var j=_&&_.length?this.write(_):"";return this.lastNeed?j+"":j},y.prototype.text=function(_,j){var z=p(this,_,j);if(!this.lastNeed)return _.toString("utf8",j);this.lastTotal=z;var R=_.length-(z-this.lastNeed);return _.copy(this.lastChar,0,R),_.toString("utf8",j,R)},y.prototype.fillLast=function(_){return this.lastNeed<=_.length?(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),void(this.lastNeed-=_.length))}},{"safe-buffer":30}],32:[function(i,s){(function(l){(function(){function u(d){try{if(!l.localStorage)return!1}catch{return!1}var y=l.localStorage[d];return y!=null&&(y+"").toLowerCase()==="true"}s.exports=function(d,y){function f(){if(!p){if(u("throwDeprecation"))throw new Error(y);u("traceDeprecation")?console.trace(y):console.warn(y),p=!0}return d.apply(this,arguments)}if(u("noDeprecation"))return d;var p=!1;return f}}).call(this)}).call(this,typeof Yt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Yt)},{}],"/":[function(i,s){function l(k){return k.replace(/a=ice-options:trickle\s\n/g,"")}function u(k){console.warn(k)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const d=i("debug")("simple-peer"),y=i("get-browser-rtc"),f=i("randombytes"),p=i("readable-stream"),g=i("queue-microtask"),v=i("err-code"),{Buffer:b}=i("buffer"),L=65536;class S extends p.Duplex{constructor(c){if(c=Object.assign({allowHalfOpen:!1},c),super(c),this._id=f(4).toString("hex").slice(0,7),this._debug("new peer %o",c),this.channelName=c.initiator?c.channelName||f(20).toString("hex"):null,this.initiator=c.initiator||!1,this.channelConfig=c.channelConfig||S.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},S.config,c.config),this.offerOptions=c.offerOptions||{},this.answerOptions=c.answerOptions||{},this.sdpTransform=c.sdpTransform||(w=>w),this.streams=c.streams||(c.stream?[c.stream]:[]),this.trickle=c.trickle===void 0||c.trickle,this.allowHalfTrickle=c.allowHalfTrickle!==void 0&&c.allowHalfTrickle,this.iceCompleteTimeout=c.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=c.wrtc&&typeof c.wrtc=="object"?c.wrtc:y(),!this._wrtc)throw v(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(w){return void this.destroy(v(w,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=w=>{this._onIceCandidate(w)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(w=>{this.destroy(v(w,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=w=>{this._setupData(w)},this.streams&&this.streams.forEach(w=>{this.addStream(w)}),this._pc.ontrack=w=>{this._onTrack(w)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(c){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof c=="string")try{c=JSON.parse(c)}catch{c={}}this._debug("signal()"),c.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),c.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(c.transceiverRequest.kind,c.transceiverRequest.init)),c.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(c.candidate):this._pendingCandidates.push(c.candidate)),c.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(c)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(w=>{this._addIceCandidate(w)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(w=>{this.destroy(v(w,"ERR_SET_REMOTE_DESCRIPTION"))}),c.sdp||c.candidate||c.renegotiate||c.transceiverRequest||this.destroy(v(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(c){const w=new this._wrtc.RTCIceCandidate(c);this._pc.addIceCandidate(w).catch(C=>{!w.address||w.address.endsWith(".local")?u("Ignoring unsupported ICE candidate."):this.destroy(v(C,"ERR_ADD_ICE_CANDIDATE"))})}send(c){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(c)}}addTransceiver(c,w){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(c,w),this._needsNegotiation()}catch(C){this.destroy(v(C,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:c,init:w}})}}addStream(c){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),c.getTracks().forEach(w=>{this.addTrack(w,c)})}}addTrack(c,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const C=this._senderMap.get(c)||new Map;let T=C.get(w);if(!T)T=this._pc.addTrack(c,w),C.set(w,T),this._senderMap.set(c,C),this._needsNegotiation();else throw T.removed?v(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):v(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(c,w,C){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const T=this._senderMap.get(c),_=T?T.get(C):null;if(!_)throw v(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");w&&this._senderMap.set(w,T),_.replaceTrack==null?this.destroy(v(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):_.replaceTrack(w)}removeTrack(c,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const C=this._senderMap.get(c),T=C?C.get(w):null;if(!T)throw v(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{T.removed=!0,this._pc.removeTrack(T)}catch(_){_.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(T):this.destroy(v(_,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(c){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),c.getTracks().forEach(w=>{this.removeTrack(w,c)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,g(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(c){this._destroy(c,()=>{})}_destroy(c,w){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",c&&(c.message||c)),g(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",c&&(c.message||c)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,c&&this.emit("error",c),this.emit("close"),w()}))}_setupData(c){if(!c.channel)return this.destroy(v(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=c.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=L),this.channelName=this._channel.label,this._channel.onmessage=C=>{this._onChannelMessage(C)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=C=>{const T=C.error instanceof Error?C.error:new Error(`Datachannel error: ${C.message} ${C.filename}:${C.lineno}:${C.colno}`);this.destroy(v(T,"ERR_DATA_CHANNEL"))};let w=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(w&&this._onChannelClose(),w=!0):w=!1},5e3)}_read(){}_write(c,w,C){if(this.destroyed)return C(v(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(c)}catch(T){return this.destroy(v(T,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>L?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=C):C(null)}else this._debug("write before connect"),this._chunk=c,this._cb=C}_onFinish(){if(!this.destroyed){const c=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?c():this.once("connect",c)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(c=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(c.sdp=l(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const w=()=>{if(!this.destroyed){const C=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp})}};this._pc.setLocalDescription(c).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(C=>{this.destroy(v(C,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(c=>{this.destroy(v(c,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(c=>{c.mid||!c.sender.track||c.requested||(c.requested=!0,this.addTransceiver(c.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(c=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(c.sdp=l(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const w=()=>{if(!this.destroyed){const C=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:C.type,sdp:C.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(c).then(()=>{this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(C=>{this.destroy(v(C,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(c=>{this.destroy(v(c,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(v(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const c=this._pc.iceConnectionState,w=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",c,w),this.emit("iceStateChange",c,w),(c==="connected"||c==="completed")&&(this._pcReady=!0,this._maybeReady()),c==="failed"&&this.destroy(v(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),c==="closed"&&this.destroy(v(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(c){const w=C=>(Object.prototype.toString.call(C.values)==="[object Array]"&&C.values.forEach(T=>{Object.assign(C,T)}),C);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(C=>{const T=[];C.forEach(_=>{T.push(w(_))}),c(null,T)},C=>c(C)):0<this._pc.getStats.length?this._pc.getStats(C=>{if(this.destroyed)return;const T=[];C.result().forEach(_=>{const j={};_.names().forEach(z=>{j[z]=_.stat(z)}),j.id=_.id,j.type=_.type,j.timestamp=_.timestamp,T.push(w(j))}),c(null,T)},C=>c(C)):c(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const c=()=>{this.destroyed||this.getStats((w,C)=>{if(this.destroyed)return;w&&(C=[]);const T={},_={},j={};let z=!1;C.forEach(N=>{(N.type==="remotecandidate"||N.type==="remote-candidate")&&(T[N.id]=N),(N.type==="localcandidate"||N.type==="local-candidate")&&(_[N.id]=N),(N.type==="candidatepair"||N.type==="candidate-pair")&&(j[N.id]=N)});const R=N=>{z=!0;let F=_[N.localCandidateId];F&&(F.ip||F.address)?(this.localAddress=F.ip||F.address,this.localPort=+F.port):F&&F.ipAddress?(this.localAddress=F.ipAddress,this.localPort=+F.portNumber):typeof N.googLocalAddress=="string"&&(F=N.googLocalAddress.split(":"),this.localAddress=F[0],this.localPort=+F[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let Y=T[N.remoteCandidateId];Y&&(Y.ip||Y.address)?(this.remoteAddress=Y.ip||Y.address,this.remotePort=+Y.port):Y&&Y.ipAddress?(this.remoteAddress=Y.ipAddress,this.remotePort=+Y.portNumber):typeof N.googRemoteAddress=="string"&&(Y=N.googRemoteAddress.split(":"),this.remoteAddress=Y[0],this.remotePort=+Y[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(C.forEach(N=>{N.type==="transport"&&N.selectedCandidatePairId&&R(j[N.selectedCandidatePairId]),(N.type==="googCandidatePair"&&N.googActiveConnection==="true"||(N.type==="candidatepair"||N.type==="candidate-pair")&&N.selected)&&R(N)}),!z&&(!Object.keys(j).length||Object.keys(_).length))return void setTimeout(c,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(F){return this.destroy(v(F,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const N=this._cb;this._cb=null,N(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};c()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>L)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(c=>{this._pc.removeTrack(c),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(c){this.destroyed||(c.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:c.candidate.candidate,sdpMLineIndex:c.candidate.sdpMLineIndex,sdpMid:c.candidate.sdpMid}}):!c.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),c.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(c){if(this.destroyed)return;let w=c.data;w instanceof ArrayBuffer&&(w=b.from(w)),this.push(w)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const c=this._cb;this._cb=null,c(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(c){this.destroyed||c.streams.forEach(w=>{this._debug("on track"),this.emit("track",c.track,w),this._remoteTracks.push({track:c.track,stream:w}),this._remoteStreams.some(C=>C.id===w.id)||(this._remoteStreams.push(w),g(()=>{this._debug("on stream"),this.emit("stream",w)}))})}_debug(){const c=[].slice.call(arguments);c[0]="["+this._id+"] "+c[0],d.apply(null,c)}}S.WEBRTC_SUPPORT=!!y(),S.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},S.channelConfig={},s.exports=S},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(xm);var qx=xm.exports;const Zx=qf(qx),Gc=0,Qc=1,bm=2,Sm=(e,t)=>{ce(e,Gc);const n=Bw(t);Oe(e,n)},km=(e,t,n)=>{ce(e,Qc),Oe(e,Ow(t,n))},e1=(e,t,n)=>km(t,n,Ke(e)),Cm=(e,t,n)=>{try{Nw(t,Ke(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},t1=(e,t)=>{ce(e,bm),Oe(e,t)},n1=Cm,r1=(e,t,n,r)=>{const o=ge(e);switch(o){case Gc:e1(e,t,n);break;case Qc:Cm(e,n,r);break;case bm:n1(e,n,r);break;default:throw new Error("Unknown message type")}return o},ma=3e4;class o1 extends fg{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Cn();this.getLocalState()!==null&&ma/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((o,i)=>{i!==this.clientID&&ma<=n-o.lastUpdated&&this.states.has(i)&&r.push(i)}),r.length>0&&Tu(this,r,"timeout")},nn(ma/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),o=r===void 0?0:r.clock+1,i=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:o,lastUpdated:Cn()});const s=[],l=[],u=[],d=[];t===null?d.push(n):i==null?t!=null&&s.push(n):(l.push(n),Jo(i,t)||u.push(n)),(s.length>0||u.length>0||d.length>0)&&this.emit("change",[{added:s,updated:u,removed:d},"local"]),this.emit("update",[{added:s,updated:l,removed:d},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const Tu=(e,t,n)=>{const r=[];for(let o=0;o<t.length;o++){const i=t[o];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const s=e.meta.get(i);e.meta.set(i,{clock:s.clock+1,lastUpdated:Cn()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},il=(e,t,n=e.states)=>{const r=t.length,o=Qe();ce(o,r);for(let i=0;i<r;i++){const s=t[i],l=n.get(s)||null,u=e.meta.get(s).clock;ce(o,s),ce(o,u),en(o,JSON.stringify(l))}return Ne(o)},i1=(e,t,n)=>{const r=an(t),o=Cn(),i=[],s=[],l=[],u=[],d=ge(r);for(let y=0;y<d;y++){const f=ge(r);let p=ge(r);const g=JSON.parse(vn(r)),v=e.meta.get(f),b=e.states.get(f),L=v===void 0?0:v.clock;(L<p||L===p&&g===null&&e.states.has(f))&&(g===null?f===e.clientID&&e.getLocalState()!=null?p++:e.states.delete(f):e.states.set(f,g),e.meta.set(f,{clock:p,lastUpdated:o}),v===void 0&&g!==null?i.push(f):v!==void 0&&g===null?u.push(f):g!==null&&(Jo(g,b)||l.push(f),s.push(f)))}(i.length>0||l.length>0||u.length>0)&&e.emit("change",[{added:i,updated:l,removed:u},n]),(i.length>0||s.length>0||u.length>0)&&e.emit("update",[{added:i,updated:s,removed:u},n])},s1=(e,t)=>{const n=xu(e).buffer,r=xu(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(o=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},_m=(e,t)=>{if(!t)return Lc(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(r=>{const o=Qe();return en(o,"AES-GCM"),Oe(o,n),Oe(o,new Uint8Array(r)),Ne(o)})},l1=(e,t)=>{const n=Qe();return co(n,e),_m(Ne(n),t)},Em=(e,t)=>{if(!t)return Lc(e);const n=an(e);vn(n)!=="AES-GCM"&&Vv(rn("Unknown encryption algorithm"));const o=Ke(n),i=Ke(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,i).then(s=>new Uint8Array(s))},a1=(e,t)=>Em(e,t).then(n=>fo(an(new Uint8Array(n)))),bt=Sw("y-webrtc"),eo=0,Tm=3,Ci=1,Xc=4,sl=new Map,ur=new Map,Rm=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),bt("synced ",At,e.name,wr," with all peers"))},jm=(e,t,n)=>{const r=an(t),o=Qe(),i=ge(r);if(e===void 0)return null;const s=e.awareness,l=e.doc;let u=!1;switch(i){case eo:{ce(o,eo);const d=r1(r,o,l,e);d===Qc&&!e.synced&&n(),d===Gc&&(u=!0);break}case Tm:ce(o,Ci),Oe(o,il(s,Array.from(s.getStates().keys()))),u=!0;break;case Ci:i1(s,Ke(r),e);break;case Xc:{const d=vr(r)===1,y=vn(r);if(y!==e.peerId&&(e.bcConns.has(y)&&!d||!e.bcConns.has(y)&&d)){const f=[],p=[];d?(e.bcConns.add(y),p.push(y)):(e.bcConns.delete(y),f.push(y)),e.provider.emit("peers",[{added:p,removed:f,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Mm(e)}break}default:return console.error("Unable to compute message"),o}return u?o:null},u1=(e,t)=>{const n=e.room;return bt("received message from ",At,e.remotePeerId,zc," (",n.name,")",wr,Rl),jm(n,t,()=>{e.synced=!0,bt("synced ",At,n.name,wr," with ",At,e.remotePeerId),Rm(n)})},ya=(e,t)=>{bt("send message to ",At,e.remotePeerId,wr,zc," (",e.room.name,")",Rl);try{e.peer.send(Ne(t))}catch{}},c1=(e,t)=>{bt("broadcast message in ",At,e.name,wr),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class Uf{constructor(t,n,r,o){bt("establishing connection to ",At,r),this.room=o,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Zx({initiator:n,...o.provider.peerOpts}),this.peer.on("signal",i=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),Jc(t,o,{to:r,from:o.peerId,type:"signal",token:this.glareToken,signal:i})}),this.peer.on("connect",()=>{bt("connected to ",At,r),this.connected=!0;const s=o.provider.doc,l=o.awareness,u=Qe();ce(u,eo),Sm(u,s),ya(this,u);const d=l.getStates();if(d.size>0){const y=Qe();ce(y,Ci),Oe(y,il(l,Array.from(d.keys()))),ya(this,y)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,o.webrtcConns.has(this.remotePeerId)&&(o.webrtcConns.delete(this.remotePeerId),o.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),Rm(o),this.peer.destroy(),bt("closed connection to ",At,r),Ru(o)}),this.peer.on("error",i=>{bt("Error in connection to ",At,r,": ",i),Ru(o)}),this.peer.on("data",i=>{const s=u1(this,i);s!==null&&ya(this,s)})}destroy(){this.peer.destroy()}}const Dn=(e,t)=>_m(t,e.key).then(n=>e.mux(()=>Xx(e.name,n))),Bf=(e,t)=>{e.bcconnected&&Dn(e,t),c1(e,t)},Ru=e=>{sl.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&Jc(t,e,{type:"announce",from:e.peerId}))})},Mm=e=>{if(e.provider.filterBcConns){const t=Qe();ce(t,Xc),wi(t,1),en(t,e.peerId),Dn(e,Ne(t))}};class d1{constructor(t,n,r,o){this.peerId=vg(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=o,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Jx(),this.bcconnected=!1,this._bcSubscriber=i=>Em(new Uint8Array(i),o).then(s=>this.mux(()=>{const l=jm(this,s,()=>{});l&&Dn(this,Ne(l))})),this._docUpdateHandler=(i,s)=>{const l=Qe();ce(l,eo),t1(l,i),Bf(this,Ne(l))},this._awarenessUpdateHandler=({added:i,updated:s,removed:l},u)=>{const d=i.concat(s).concat(l),y=Qe();ce(y,Ci),Oe(y,il(this.awareness,d)),Bf(this,Ne(y))},this._beforeUnloadHandler=()=>{Tu(this.awareness,[t.clientID],"window unload"),ur.forEach(i=>{i.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Ru(this);const t=this.name;Gx(t,this._bcSubscriber),this.bcconnected=!0,Mm(this);const n=Qe();ce(n,eo),Sm(n,this.doc),Dn(this,Ne(n));const r=Qe();ce(r,eo),km(r,this.doc),Dn(this,Ne(r));const o=Qe();ce(o,Tm),Dn(this,Ne(o));const i=Qe();ce(i,Ci),Oe(i,il(this.awareness,[this.doc.clientID])),Dn(this,Ne(i))}disconnect(){sl.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Tu(this.awareness,[this.doc.clientID],"disconnect");const t=Qe();ce(t,Xc),wi(t,0),en(t,this.peerId),Dn(this,Ne(t)),Qx(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const f1=(e,t,n,r)=>{if(ur.has(n))throw rn(`A Yjs Doc connected to room "${n}" already exists!`);const o=new d1(e,t,n,r);return ur.set(n,o),o},Jc=(e,t,n)=>{t.key?l1(n,t.key).then(r=>{e.send({type:"publish",topic:t.name,data:Rg(r)})}):e.send({type:"publish",topic:t.name,data:n})};class h1 extends Vx{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{bt(`connected (${t})`);const n=Array.from(ur.keys());this.send({type:"subscribe",topics:n}),ur.forEach(r=>Jc(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,o=ur.get(r);if(o==null||typeof r!="string")return;const i=s=>{const l=o.webrtcConns,u=o.peerId;if(s==null||s.from===u||s.to!==void 0&&s.to!==u||o.bcConns.has(s.from))return;const d=l.has(s.from)?()=>{}:()=>o.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}]);switch(s.type){case"announce":l.size<o.provider.maxConns&&(_t(l,s.from,()=>new Uf(this,!0,s.from,o)),d());break;case"signal":if(s.signal.type==="offer"){const y=l.get(s.from);if(y){const f=s.token,p=y.glareToken;if(p&&p>f){bt("offer rejected: ",s.from);return}y.glareToken=void 0}}if(s.signal.type==="answer"){bt("offer answered by: ",s.from);const y=l.get(s.from);y.glareToken=void 0}s.to===u&&(_t(l,s.from,()=>new Uf(this,!1,s.from,o)).peer.signal(s.signal),d());break}};o.key?typeof n.data=="string"&&a1(jg(n.data),o.key).then(i):i(n.data)}}}),this.on("disconnect",()=>bt(`disconnect (${t})`))}}const va=e=>{e.emit("status",[{connected:e.connected}])};class p1 extends dg{constructor(t,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:o=null,awareness:i=new o1(n),maxConns:s=20+nn(Wv()*15),filterBcConns:l=!0,peerOpts:u={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=l,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=u,this.key=o?s1(o,t):Lc(null),this.room=null,this.key.then(d=>{this.room=f1(n,this,t,d),this.shouldConnect?this.room.connect():this.room.disconnect(),va(this)}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=_t(sl,t,()=>new h1(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&(this.room.connect(),va(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),sl.delete(t.url))}),this.room&&(this.room.disconnect(),va(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),ur.delete(this.roomName)}),super.destroy()}}const Ot=new Co,_e=Ot.getMap("players"),Xn=Ot.getMap("zones"),ye=Ot.getMap("cards"),vo=Ot.getMap("baton"),g1=Ot.getMap("seed"),cr=Ot.getArray("log"),rs=Ot.getMap("counterTypes"),qo=Ot.getMap("revealedCard"),dr=new Set,ll=[];function Uo(){return new Set(dr)}function os(e){return dr.has(e)}function m1(e){dr.has(e)?dr.delete(e):dr.add(e),qc()}function ju(){dr.clear(),qc()}function y1(e){e.forEach(t=>dr.add(t)),qc()}function v1(e){ll.push(e)}function w1(e){const t=ll.indexOf(e);t>-1&&ll.splice(t,1)}function qc(){ll.forEach(e=>e())}const $f=["#4CAF50","#2196F3","#F44336","#9C27B0"];function Ze(e){const n=Array.from(_e.keys()).indexOf(e);return n>=0&&n<$f.length?$f[n]:"#757575"}function x1(e,t,n=!1){if(_e.size>=4){console.warn("Maximum of 4 players reached");return}_e.set(e,{name:t,lifeTotal:40}),No(`deck-${e}`,"deck",e),No(`hand-${e}`,"hand",e),No(`battlefield-${e}`,"battlefield",e),No(`graveyard-${e}`,"graveyard",e),No(`exile-${e}`,"exile",e),n||b1(e),Ve(e,"player_joined",{name:t})}function b1(e){const t=["Lightning Bolt","Giant Growth","Counterspell","Swords to Plowshares","Dark Ritual","Path to Exile","Brainstorm","Llanowar Elves","Doom Blade","Cancel"];for(let n=0;n<3;n++)Cs(`${e}-card-hand-${n}`,t[n%t.length],e,`hand-${e}`,n);for(let n=0;n<2;n++)Cs(`${e}-card-battlefield-${n}`,t[(n+3)%t.length],e,`battlefield-${e}`,n);for(let n=0;n<50;n++)Cs(`${e}-card-deck-${n}`,t[n%t.length],e,`deck-${e}`,n)}function Wf(e){const t=_e.get(e),n=[];Xn.forEach((i,s)=>{i.owner===e&&n.push(s)}),n.forEach(i=>Xn.delete(i));const r=[];ye.forEach((i,s)=>{i.owner===e&&r.push(s)}),r.forEach(i=>ye.delete(i)),_e.delete(e);const o=Zo();if(o&&o.playerId===e){const i=Array.from(_e.keys());i.length>0?Du(i[0],"main1"):vo.delete("current")}t&&Ve(e,"player_removed",{name:t.name})}function S1(){_e.clear(),Xn.clear(),ye.clear(),vo.clear(),g1.clear(),cr.delete(0,cr.length),console.log("Room reset - all state cleared")}function No(e,t,n){Xn.set(e,{type:t,owner:n})}function Cs(e,t,n,r,o=0){ye.set(e,{oracleId:t,owner:n,zoneId:r,order:o,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{},v:0})}function Al(e,t,n,r,o){const i=ye.get(e);if(!i)return;const s=i.zoneId;ye.set(e,{...i,zoneId:t,order:n??i.order,v:i.v+1}),r&&!o&&Ve(r,"card_moved",{cardId:e,oracleId:i.oracleId,from:s,to:t,order:n})}function k1(e,t,n){const r=ye.get(e);r&&(ye.set(e,{...r,...t,v:r.v+1}),n&&Ve(n,"card_updated",{cardId:e,updates:t}))}function Mu(e,t,n){const r=ye.get(e);r&&(ye.set(e,{...r,tapped:t,v:r.v+1}),n&&Ve(n,"card_updated",{cardId:e,oracleId:r.oracleId,updates:{tapped:t}}))}function nr(e,t,n){k1(e,{faceDown:t},n)}function wa(e,t,n,r){const o=ye.get(e);if(!o)return;const i=un(o.zoneId),l=(i.length>0?Math.max(...i.map(u=>u.order)):0)+1;ye.set(e,{...o,position:{x:t,y:n},order:l,v:o.v+1})}function Qt(e,t,n,r){const o=ye.get(e);if(!o)return;const i={...o.counters},s=i[t]??0,l=Math.max(0,s+n);l===0?delete i[t]:i[t]=l,ye.set(e,{...o,counters:i,v:o.v+1}),r&&Ve(r,"counter_modified",{cardId:e,oracleId:o.oracleId,counterType:t,delta:n,newValue:l})}function C1(e,t,n){const r=_e.get(e);r&&(_e.set(e,{...r,lifeTotal:t}),n&&Ve(n,"life_total_set",{playerId:e,newTotal:t}))}function jr(e,t,n){const r=_e.get(e);if(!r)return;const o=r.lifeTotal+t;_e.set(e,{...r,lifeTotal:o}),n&&Ve(n,"life_total_modified",{playerId:e,delta:t,newTotal:o})}function Du(e,t){vo.set("current",{playerId:e,step:t}),Ve(e,"turn_changed",{step:t})}function Zo(){return vo.get("current")}function Ve(e,t,n){cr.push([{timestamp:Date.now(),playerId:e,action:t,data:n,type:"game"}])}function _1(e,t){cr.push([{timestamp:Date.now(),playerId:e,action:"chat_message",data:{message:t},type:"chat"}])}function un(e){const t=[];return ye.forEach(n=>{n.zoneId===e&&t.push(n)}),t.sort((n,r)=>n.order-r.order)}function wo(e){const t=un(e);return t.length===0?0:Math.max(...t.map(n=>n.order))+1}function zo(e,t){var l;const n=`deck-${e}`,r=`hand-${e}`,o=un(n),i=Math.min(t,o.length);if(i===0)return;const s=wo(r);for(let u=0;u<i;u++){const d=o[u],y=(l=Array.from(ye.entries()).find(([f,p])=>p===d))==null?void 0:l[0];y&&Al(y,r,s+u,e,!0)}zi(),Ve(e,"draw_cards",{count:i})}function xa(e,t){var l;const n=`deck-${e}`,r=`graveyard-${e}`,o=un(n),i=Math.min(t,o.length);if(i===0)return;const s=wo(r);for(let u=0;u<i;u++){const d=o[u],y=(l=Array.from(ye.entries()).find(([f,p])=>p===d))==null?void 0:l[0];y&&Al(y,r,s+u,e,!0)}zi(),Ve(e,"mill_cards",{count:i})}function ba(e,t,n=!1){var u;const r=`deck-${e}`,o=`exile-${e}`,i=un(r),s=Math.min(t,i.length);if(s===0)return;const l=wo(o);for(let d=0;d<s;d++){const y=i[d],f=(u=Array.from(ye.entries()).find(([p,g])=>g===y))==null?void 0:u[0];f&&(Al(f,o,l+d,e,!0),n&&nr(f,!0))}zi(),Ve(e,"exile_from_deck",{count:s,faceDown:n})}function Hf(e){const t=`deck-${e}`,n=un(t);if(n.length===0)return null;const r=n[0],o=_e.get(e),i=(o==null?void 0:o.name)||e;return qo.set("current",{cardName:r.oracleId,revealedBy:i,timestamp:Date.now()}),Ve(e,"reveal_top_card",{cardName:r.oracleId}),{cardName:r.oracleId,playerName:i}}function zi(){qo.delete("current")}function is(e,t){var s;const n=`deck-${e}`,r=un(n),o=Math.min(t,r.length),i=[];for(let l=0;l<o;l++){const u=r[l],d=(s=Array.from(ye.entries()).find(([y,f])=>f===u))==null?void 0:s[0];d&&i.push({cardId:d,card:u})}return i}function E1(e,t,n=[]){const r=`deck-${e}`,o=un(r),i=o.length>0?Math.max(...o.map(s=>s.order)):0;t.forEach((s,l)=>{const u=ye.get(s);u&&u.zoneId===r&&ye.set(s,{...u,order:l,v:u.v+1})}),n.forEach((s,l)=>{const u=ye.get(s);u&&u.zoneId===r&&ye.set(s,{...u,order:i+l+1,v:u.v+1})}),zi(),Ve(e,"scry",{topCount:t.length,bottomCount:n.length})}function ss(e){const t=`deck-${e}`;if(un(t).length===0)return;const r=[];ye.forEach((i,s)=>{i.zoneId===t&&r.push(s)});const o=[...r];for(let i=o.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[o[i],o[s]]=[o[s],o[i]]}o.forEach((i,s)=>{const l=ye.get(i);l&&ye.set(i,{...l,order:s,v:l.v+1})}),zi(),Ve(e,"shuffle_deck",{cardCount:o.length})}function hn(e,t,n="auto",r){const o=ye.get(e);if(!o)return;let i;n==="top"?(un(t).forEach(d=>{var f;const y=(f=Array.from(ye.entries()).find(([p,g])=>g===d))==null?void 0:f[0];y&&ye.set(y,{...d,order:d.order+1,v:d.v+1})}),i=0):i=wo(t);const s=o.zoneId.startsWith("battlefield-"),l=t.startsWith("battlefield-");if(s&&!l&&o.tapped){const u=o.zoneId;ye.set(e,{...o,tapped:!1,zoneId:t,order:i,v:o.v+1}),r&&Ve(r,"card_moved",{cardId:e,oracleId:o.oracleId,from:u,to:t,order:i})}else Al(e,t,i,r)}function Sa(e,t,n=1,r){const o=`battlefield-${e}`,i=wo(o);for(let s=0;s<n;s++){const l=`${e}-token-${Date.now()}-${s}-${crypto.randomUUID()}`;ye.set(l,{oracleId:t,owner:e,zoneId:o,order:i+s,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{isToken:!0,imageUrl:r},v:0})}Ve(e,"token_created",{tokenName:t,quantity:n})}function T1(e,t){const n=ye.get(e);n&&(ye.delete(e),t&&Ve(t,"card_deleted",{cardId:e,oracleId:n.oracleId}))}function Hr(){return`crdt-cards-${window.location.hash.replace(/^#/,"")||"default"}`}const Vr=new p1(Hr(),Ot,{signaling:["wss://crdt-cards-signaling.happyground-bfbe302d.westus2.azurecontainerapps.io"]});Vr.on("status",e=>{console.log("WebRTC status:",e.connected?"connected":"disconnected")});Vr.on("synced",e=>{console.log("YJS synced:",e.synced)});window.addEventListener("popstate",()=>{console.log("Room changed, reloading to connect to new room..."),window.location.reload()});console.log("YJS document initialized:",Ot.guid);console.log("Room name:",Hr());console.log("Game state maps ready:",{players:_e.size,zones:Xn.size,cards:ye.size});const Zc="crdt-cards-decks",ed="crdt-cards-last-deck",_s=[{id:"starter-atraxa",name:"Atraxa, Praetors' Voice",file:"atraxa.txt",description:"Proliferate & Superfriends"},{id:"starter-urdragon",name:"The Ur-Dragon",file:"urdragon.txt",description:"Dragon tribal powerhouse"},{id:"starter-edgar",name:"Edgar Markov",file:"edgar-markov.txt",description:"Vampire tribal aggro"},{id:"starter-krenko",name:"Krenko, Mob Boss",file:"krenko.txt",description:"Goblin tribal combo"},{id:"starter-kaalia",name:"Kaalia of the Vast",file:"kaalia.txt",description:"Angels, Demons, Dragons"}];function to(){try{const e=localStorage.getItem(Zc);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load stored decks:",e),[]}}function td(e){try{const t=to(),n=t.findIndex(r=>r.id===e.id);n>=0?t[n]=e:t.push(e),localStorage.setItem(Zc,JSON.stringify(t))}catch(t){console.error("Failed to save deck:",t)}}function R1(e){try{const t=to().filter(n=>n.id!==e);localStorage.setItem(Zc,JSON.stringify(t)),Dm()===e&&localStorage.removeItem(ed)}catch(t){console.error("Failed to delete deck:",t)}}function Dm(){return localStorage.getItem(ed)}function Vf(e){localStorage.setItem(ed,e)}function j1(e){const t=e.toLowerCase();return t.includes("moxfield.com")?"moxfield":t.includes("archidekt.com")?"archidekt":t.includes("edhrec.com")?"edhrec":"unknown"}async function M1(e){switch(j1(e)){case"moxfield":return Yf(e);case"archidekt":return D1(e);case"edhrec":return L1();default:return Yf(e)}}async function Yf(e){try{const t=N1(e);if(!t)return{success:!1,error:"Invalid Moxfield URL format"};const n=`https://api.moxfield.com/v2/decks/all/${t}`,o=`https://corsproxy.io/?${encodeURIComponent(n)}`,i=await fetch(o);if(!i.ok)return i.status===404?{success:!1,error:"Deck not found on Moxfield"}:{success:!1,error:`Failed to fetch deck (${i.status})`};const s=await i.json(),l=[];let u=0;if(s.mainboard)for(const[y,f]of Object.entries(s.mainboard)){const p=f.quantity||1;l.push({name:y,quantity:p}),u+=p}const d={id:crypto.randomUUID(),name:s.name||"Imported Deck",moxfieldUrl:e,moxfieldId:t,cardCount:u,importedAt:Date.now(),cards:l};return td(d),{success:!0,deck:d}}catch(t){return console.error("Failed to import from Moxfield:",t),{success:!1,error:"Network error or invalid deck"}}}async function D1(e){var t,n,r;try{const o=e.match(/archidekt\.com\/decks\/(\d+)/);if(!o)return{success:!1,error:"Invalid Archidekt URL format"};const i=o[1],s=`https://archidekt.com/api/decks/${i}/`,u=`https://corsproxy.io/?${encodeURIComponent(s)}`,d=await fetch(u);if(!d.ok)return d.status===404?{success:!1,error:"Deck not found on Archidekt"}:{success:!1,error:`Failed to fetch deck (${d.status})`};const y=await d.json(),f=[];let p=0;if(y.cards&&Array.isArray(y.cards))for(const v of y.cards){const b=((n=(t=v.card)==null?void 0:t.oracleCard)==null?void 0:n.name)||((r=v.card)==null?void 0:r.name),L=v.quantity||1;b&&(f.push({name:b,quantity:L}),p+=L)}const g={id:crypto.randomUUID(),name:y.name||"Imported Deck",moxfieldUrl:e,moxfieldId:i,cardCount:p,importedAt:Date.now(),cards:f};return td(g),{success:!0,deck:g}}catch(o){return console.error("Failed to import from Archidekt:",o),{success:!1,error:"Network error or invalid deck"}}}async function L1(){return{success:!1,error:"EDHRec import not yet implemented. Please use Moxfield or Archidekt URLs for now."}}async function A1(e,t){try{const n=await fetch(`/starter-decks/${e}`);if(!n.ok)return n.status===404?{success:!1,error:`Starter deck file not found: ${e}`}:{success:!1,error:`Failed to load starter deck (${n.status})`};const r=await n.text(),o=[];let i=0;const s=r.split(`
`);for(const u of s){const d=u.trim();if(!d)continue;const y=d.match(/^(\d+)\s+(.+)$/);if(y){const f=parseInt(y[1],10),p=y[2].trim();o.push({name:p,quantity:f}),i+=f}}if(o.length===0)return{success:!1,error:"No cards found in starter deck file"};const l={id:crypto.randomUUID(),name:t,moxfieldUrl:`local://${e}`,moxfieldId:e,cardCount:i,importedAt:Date.now(),cards:o};return td(l),{success:!0,deck:l}}catch(n){return console.error("Failed to import from local file:",n),{success:!1,error:"Failed to load starter deck file"}}}function N1(e){const t=e.trim();let n=t.match(/moxfield\.com\/decks\/([a-zA-Z0-9_-]+)/);return n?n[1]:/^[a-zA-Z0-9_-]+$/.test(t)?t:null}function Kf(e,t){const n=`deck-${e}`,r=[];ye.forEach((i,s)=>{i.zoneId===n&&r.push(s)}),r.forEach(i=>ye.delete(i));let o=0;for(const{name:i,quantity:s}of t.cards)for(let l=0;l<s;l++)Cs(`${e}-deck-${i}-${l}`,i,e,n,o++);Ve(e,"deck_imported",{deckName:t.name,cardCount:t.cardCount})}function nd({title:e,max:t,onConfirm:n,onCancel:r}){const[o,i]=W.useState("1"),s=d=>{d.preventDefault();const y=parseInt(o,10);y>0&&y<=t&&n(y)},l=parseInt(o,10),u=!isNaN(l)&&l>0&&l<=t;return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"300px",width:"90%"},onClick:d=>d.stopPropagation(),children:[h.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),h.jsxs("form",{onSubmit:s,children:[h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("input",{type:"number",value:o,onChange:d=>i(d.target.value),min:1,max:t,autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1.25rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",textAlign:"center",outline:"none"},onFocus:d=>{d.target.style.borderColor="#2196F3",d.target.select()},onBlur:d=>{d.target.style.borderColor="#ddd"}}),h.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#666",textAlign:"center"},children:["Max: ",t]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!u,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:u?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:u?"pointer":"not-allowed"},onMouseEnter:d=>{u&&(d.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:d=>{u&&(d.currentTarget.style.backgroundColor="#4CAF50")},children:"Confirm"})]})]})]})})}function z1({title:e,placeholder:t="",onConfirm:n,onCancel:r}){const[o,i]=W.useState(""),s=u=>{u.preventDefault(),o.trim()&&n(o.trim())},l=o.trim().length>0;return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:u=>u.stopPropagation(),children:[h.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),h.jsxs("form",{onSubmit:s,children:[h.jsx("div",{style:{marginBottom:"1.5rem"},children:h.jsx("input",{type:"text",value:o,onChange:u=>i(u.target.value),placeholder:t,autoFocus:!0,maxLength:30,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:u=>{u.target.style.borderColor="#2196F3"},onBlur:u=>{u.target.style.borderColor="#ddd"}})}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),h.jsx("button",{type:"submit",disabled:!l,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:l?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:l?"pointer":"not-allowed"},onMouseEnter:u=>{l&&(u.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:u=>{l&&(u.currentTarget.style.backgroundColor="#4CAF50")},children:"Add"})]})]})]})})}const Lm="crdt-cards-image-cache",I1=7,ls=new Map,ka=new Map;function O1(){try{const e=localStorage.getItem(Lm);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load image cache:",e),{}}}function F1(e){try{localStorage.setItem(Lm,JSON.stringify(e))}catch(t){console.error("Failed to save image cache:",t)}}function P1(e){const t=Date.now(),n=I1*24*60*60*1e3;return t-e.cachedAt<n}async function U1(e){var t,n;try{const r=`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(e)}`,o=await fetch(r);if(!o.ok)return console.warn(`Card not found on Scryfall: ${e}`),null;const i=await o.json();return i.card_faces&&i.card_faces.length>0?((t=i.card_faces[0].image_uris)==null?void 0:t.normal)||null:((n=i.image_uris)==null?void 0:n.normal)||null}catch(r){return console.error(`Failed to fetch card image for ${e}:`,r),null}}function rd(e){const t=ls.get(e),[n,r]=W.useState(t||null),[o,i]=W.useState(!t),[s,l]=W.useState(!1);return W.useEffect(()=>{if(!e){r(null),i(!1),l(!1);return}let u=!0;async function d(){const y=ls.get(e);if(y){u&&(r(y),i(!1),l(!1));return}const f=ka.get(e);if(f){const b=await f;u&&(r(b),i(!1),l(!b));return}i(!0),l(!1);const p=O1(),g=p[e];if(g&&P1(g)){ls.set(e,g.imageUrl),u&&(r(g.imageUrl),i(!1));return}const v=U1(e);ka.set(e,v);try{const b=await v;u&&(b?(r(b),l(!1),ls.set(e,b),p[e]={imageUrl:b,scryfallId:"",cachedAt:Date.now()},F1(p)):(r(null),l(!0)),i(!1))}finally{ka.delete(e)}}return d(),()=>{u=!1}},[e]),{imageUrl:n,loading:o,error:s}}function Lu({card:e,cardId:t,playerId:n,isInteractive:r=!0,forceFaceDown:o=!1,opponentPosition:i=null}){var O,P;const[s,l]=W.useState(!1),[u,d]=W.useState(!1),[y,f]=W.useState(!1),[p,g]=W.useState(!1),[v,b]=W.useState(null),[L,S]=W.useState(null),[k,c]=W.useState(null),[w,C]=W.useState(null),[T,_]=W.useState(null),[j,z]=W.useState([]),[R,N]=W.useState([]),[F,Y]=W.useState(!1),[ie,de]=W.useState(!1),[fe,xe]=W.useState(!1),[B,K]=W.useState(new Set),ae=W.useRef(null),ue=W.useRef(null),G=W.useRef(),ne=o||e.faceDown,ee=e.zoneId.startsWith("battlefield-"),Z=(O=e.metadata)==null?void 0:O.imageUrl,{imageUrl:H,loading:le}=rd(ne||Z?"":e.oracleId),he=Z||H;W.useEffect(()=>{const M=()=>{const V=[];rs.forEach((J,q)=>{V.push(q)}),z(V)};return rs.observe(M),M(),()=>{rs.unobserve(M)}},[]),W.useEffect(()=>{const M=()=>{const V=[];_e.forEach((J,q)=>{q!==e.owner&&V.push({id:q,name:J.name})}),N(V)};return _e.observe(M),M(),()=>{_e.unobserve(M)}},[e.owner]),W.useEffect(()=>{const M=()=>{xe(os(t))};return v1(M),M(),()=>{w1(M)}},[t]);const be=M=>{rs.set(M,!0);const V=B.has(t);console.log("handleAddCounterType:",{cardId:t,counterType:M,currentlySelected:V,menuSelectedCardsSize:B.size,menuSelectedCardIds:Array.from(B)}),V&&B.size>1?(console.log("Applying to multiple cards:",Array.from(B)),B.forEach(J=>{Qt(J,M,1,n)})):(console.log("Applying to single card:",t),Qt(t,M,1,n))},ke={width:"120px",height:"160px",border:"none",borderRadius:"8px",backgroundColor:ne?"#333":"#fff",padding:"0.5rem",position:"relative",transition:"transform 0.3s ease",transform:i==="top"?`scaleX(-1) rotate(180deg) rotate(${e.tapped?90:0}deg)`:`rotate(${e.tapped?90:0}deg)`,cursor:r?"pointer":"default",display:"flex",flexDirection:"column",justifyContent:"space-between"},pe={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"#666"},U={position:"absolute",bottom:"5px",right:"5px",backgroundColor:"#9C27B0",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold"},re=w?{position:"fixed",top:`${w.top}px`,left:`${w.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"},se={padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},A=M=>{if(!r)return;if(M.stopPropagation(),M.ctrlKey||M.metaKey){m1(t);return}if(!ee){ju();return}const V=os(t),J=Uo();if(V&&J.size>1){const q=!e.tapped;J.forEach(te=>{Mu(te,q,n)})}else ju(),Mu(t,!e.tapped,n)},I=(M,V,J)=>{const q=`${M}-${n}`;B.has(t)&&B.size>1?B.forEach(me=>{hn(me,q,V||"auto",n),J!==void 0&&nr(me,J,n)}):(hn(t,q,V||"auto",n),J!==void 0&&nr(t,J,n)),l(!1),d(!1)},$=M=>{const V=`battlefield-${M}`;B.has(t)&&B.size>1?B.forEach(q=>{hn(q,V,"auto",n),nr(q,!1,n)}):(hn(t,V,"auto",n),nr(t,!1,n)),l(!1),d(!1),g(!1)},X=M=>{if(!r){M.preventDefault();return}Y(!0);const V=M.currentTarget.getBoundingClientRect(),J=M.clientX-V.left,q=M.clientY-V.top;M.dataTransfer.effectAllowed="move",M.dataTransfer.setData("cardId",t),M.dataTransfer.setData("fromZoneId",e.zoneId),M.dataTransfer.setData("playerId",n),M.dataTransfer.setData("order",e.order.toString()),M.dataTransfer.setData("dragOffsetX",J.toString()),M.dataTransfer.setData("dragOffsetY",q.toString());const te=Uo();if(fe&&te.size>1){const me=Ot.getMap("cards"),Me=[];e.position?me.forEach((Le,Ft)=>{const vt=Le;te.has(Ft)&&vt.position&&Me.push({id:Ft,relativeX:vt.position.x-e.position.x,relativeY:vt.position.y-e.position.y})}):te.forEach(Le=>{Me.push({id:Le,relativeX:0,relativeY:0})}),M.dataTransfer.setData("selectedCards",JSON.stringify(Me))}try{M.dataTransfer.setDragImage(M.currentTarget,J,q)}catch(me){console.warn("Could not set custom drag image:",me)}},E=()=>{Y(!1)},a=()=>{ne||!he||F||(G.current=window.setTimeout(()=>{de(!0)},600))},m=()=>{G.current&&window.clearTimeout(G.current),de(!1)};W.useEffect(()=>()=>{G.current&&window.clearTimeout(G.current)},[]);const x=()=>{if(!ue.current)return null;const M=ue.current.getBoundingClientRect(),V=488,J=680,q=16;let te=M.right+q,me=M.top;return te+V>window.innerWidth-8&&(te=M.left-V-q),me+J>window.innerHeight-8&&(me=Math.max(8,window.innerHeight-J-8)),{top:me,left:te}},D=ee&&e.position?{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,zIndex:e.order}:{position:"relative"};return h.jsxs("div",{style:D,"data-card-id":t,"data-order":e.order,"data-zone-id":e.zoneId,children:[h.jsxs("div",{ref:ue,style:{...ke,padding:0,overflow:"hidden",opacity:F?.5:1,cursor:r?"grab":"default",border:"none",outline:fe?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:fe?"0 0 12px rgba(33, 150, 243, 0.8)":"none"},title:!ne||e.owner===n?e.oracleId:void 0,draggable:r,onDragStart:X,onDragEnd:E,onClick:A,onContextMenu:M=>{if(!r)return;M.preventDefault();const V=Uo(),J=os(t);K(V),console.log("Menu opened - captured selection:",{cardId:t,currentlySelected:J,selectedCardsSize:V.size,selectedCardIds:Array.from(V)}),l(!s)},onMouseEnter:a,onMouseLeave:m,children:[ne?h.jsx("div",{style:pe,children:""}):le?h.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999"},children:"Loading..."}):he?h.jsx("img",{src:he,alt:e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}):h.jsxs("div",{style:{width:"100%",height:"100%",padding:"0.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[h.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",wordBreak:"break-all"},children:e.oracleId}),h.jsx("div",{style:{fontSize:"0.65rem",color:"#666"},children:"No image"})]}),Object.entries(e.counters).length>0&&h.jsxs("div",{style:{position:"absolute",top:"5px",right:"5px",display:"flex",flexDirection:"column",gap:"2px",alignItems:"flex-end"},children:[Object.entries(e.counters).slice(0,3).map(([M,V])=>{let J=V.toString();return M==="+1/+1"?J=`+${V}`:M==="Loyalty"?J=`L${V}`:M==="-1/-1"?J=`-${V}`:J=V.toString(),h.jsx("div",{style:{backgroundColor:M==="Loyalty"?"#9C27B0":"#FF5722",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`${M}: ${V}`,children:J},M)}),Object.entries(e.counters).length>3&&h.jsx("div",{style:{backgroundColor:"#757575",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`+${Object.entries(e.counters).length-3} more types`,children:"..."})]}),e.attachments.length>0&&h.jsxs("div",{style:U,title:`${e.attachments.length} attachments`,children:["+",e.attachments.length]}),r&&(!ne||e.owner===n)&&h.jsx("button",{ref:ae,onClick:M=>{M.stopPropagation();const V=Uo(),J=os(t);if(K(V),console.log("Menu button clicked - captured selection:",{cardId:t,currentlySelected:J,selectedCardsSize:V.size,selectedCardIds:Array.from(V)}),!s&&ae.current){const q=ae.current.getBoundingClientRect(),te=window.innerHeight,me=window.innerWidth;let Me=q.right+8,Le=q.top;const Ft=150;Me+Ft>me&&(Me=q.left-Ft-8);const vt=150;Le+vt>te&&(Le=Math.max(8,te-vt-8)),C({top:Le,left:Me})}l(!s)},style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""})]}),r&&s&&uo.createPortal(h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>l(!1)}),h.jsxs("div",{style:re,children:[h.jsxs("div",{style:{...se,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5",f(!1),S(null);const V=M.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let te=V.right+4,me=V.top;const Me=200,Le=300;te+Me>J&&(te=V.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),b({top:me,left:te}),d(!0)},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:[h.jsxs("span",{children:["Move to...",B.has(t)&&B.size>1&&h.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",B.size," cards)"]})]}),h.jsx("span",{children:""})]}),h.jsxs("div",{style:{...se,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5",d(!1),b(null);const V=M.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let te=V.right+4,me=V.top;const Me=250,Le=400;te+Me>J&&(te=V.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),S({top:me,left:te}),f(!0)},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:[h.jsxs("span",{children:["Counters...",B.has(t)&&B.size>1&&h.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",B.size," cards)"]})]}),h.jsx("span",{children:""})]}),(ee||e.zoneId.startsWith("exile-"))&&h.jsxs("div",{style:se,onClick:M=>{M.stopPropagation();const V=B.has(t),J=!e.faceDown;V&&B.size>1?B.forEach(q=>{nr(q,J,n)}):nr(t,J,n),l(!1)},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:[e.faceDown?" Turn face up":" Turn face down",B.has(t)&&B.size>1&&h.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",B.size," cards)"]})]}),((P=e.metadata)==null?void 0:P.isToken)&&h.jsx("div",{style:{...se,backgroundColor:"#ffebee",color:"#c62828",fontWeight:"bold",borderBottom:"none"},onClick:M=>{M.stopPropagation(),T1(t,n),l(!1)},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#ffcdd2"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="#ffebee"},children:" Delete Token"})]}),y&&L&&h.jsxs("div",{style:{position:"fixed",top:`${L.top}px`,left:`${L.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"220px",maxHeight:"400px",overflowY:"auto"},onMouseEnter:()=>f(!0),onMouseLeave:()=>{f(!1),S(null)},children:[Object.entries(e.counters).length>0&&h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"EXISTING COUNTERS"}),Object.entries(e.counters).map(([M,V])=>h.jsxs("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("span",{style:{fontWeight:"bold"},children:[M,": ",V]}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{onClick:J=>{J.stopPropagation(),B.has(t)&&B.size>1?B.forEach(te=>{Qt(te,M,1,n)}):Qt(t,M,1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"+1"}),h.jsx("button",{onClick:J=>{J.stopPropagation(),B.has(t)&&B.size>1?B.forEach(te=>{Qt(te,M,-1,n)}):Qt(t,M,-1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"-1"}),h.jsx("button",{onClick:J=>{J.stopPropagation(),_({type:"set",counterType:M}),l(!1),f(!1)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"Set"})]})]},M))]}),h.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADD"}),h.jsxs("div",{style:{padding:"0.5rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"4px",borderBottom:Object.entries(e.counters).length>0?"none":"1px solid #eee"},children:[h.jsx("button",{onClick:M=>{M.stopPropagation(),be("+1/+1")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"+1/+1"}),h.jsx("button",{onClick:M=>{M.stopPropagation(),be("Loyalty")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Loyalty"}),j.filter(M=>M!=="+1/+1"&&M!=="Loyalty").map(M=>h.jsx("button",{onClick:V=>{V.stopPropagation(),be(M)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:M},M)),h.jsx("button",{onClick:M=>{M.stopPropagation(),_({type:"add"}),l(!1),f(!1)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Custom..."})]})]}),u&&v&&h.jsxs("div",{style:{position:"fixed",top:`${v.top}px`,left:`${v.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>d(!0),onMouseLeave:()=>{d(!1),b(null)},children:[h.jsx("div",{style:se,onClick:()=>I("hand",void 0,!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Hand"}),h.jsx("div",{style:se,onClick:()=>I("battlefield",void 0,!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-up)"}),h.jsx("div",{style:se,onClick:()=>I("battlefield",void 0,!0),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-down)"}),h.jsx("div",{style:se,onClick:()=>I("graveyard",void 0,!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Graveyard"}),h.jsx("div",{style:se,onClick:()=>I("exile",void 0,!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Exile (face-up)"}),h.jsx("div",{style:se,onClick:()=>I("exile",void 0,!0),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Exile (face-down)"}),h.jsx("div",{style:se,onClick:()=>I("deck","top",!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Deck (top)"}),h.jsx("div",{style:se,onClick:()=>I("deck","bottom",!1),onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:" Deck (bottom)"}),R.length>0&&h.jsx("div",{style:{...se,borderBottom:"none"},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="#f5f5f5";const V=M.currentTarget.getBoundingClientRect(),J=window.innerWidth,q=window.innerHeight;let te=V.right+4,me=V.top;const Me=180,Le=150;te+Me>J&&(te=V.left-Me-4),me+Le>q&&(me=Math.max(8,q-Le-8)),c({top:me,left:te}),g(!0)},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="white"},children:h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("span",{children:[" Player",B.has(t)&&B.size>1&&h.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",B.size," cards)"]})]}),h.jsx("span",{children:""})]})})]}),p&&k&&R.length>0&&h.jsx("div",{style:{position:"fixed",top:`${k.top}px`,left:`${k.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10001,minWidth:"160px"},onMouseEnter:()=>g(!0),onMouseLeave:()=>{g(!1),c(null)},children:R.map((M,V)=>{const J=Ze(M.id);return h.jsxs("div",{style:{...se,borderBottom:V===R.length-1?"none":"1px solid #eee",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>$(M.id),onMouseEnter:q=>{q.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:q=>{q.currentTarget.style.backgroundColor="white"},children:[h.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:J,flexShrink:0}}),h.jsx("span",{children:M.name})]},M.id)})})]}),document.body),r&&(T==null?void 0:T.type)==="set"&&T.counterType&&h.jsx(nd,{title:`Set ${T.counterType} counters`,max:99,onConfirm:M=>{if(B.has(t)&&B.size>1)B.forEach(J=>{const q=Ot.getMap("cards").get(J);if(q){const te=q.counters[T.counterType]||0;Qt(J,T.counterType,M-te,n)}});else{const J=e.counters[T.counterType]||0;Qt(t,T.counterType,M-J,n)}_(null)},onCancel:()=>_(null)}),r&&(T==null?void 0:T.type)==="add"&&h.jsx(z1,{title:"Add Counter Type",placeholder:"e.g., +1/+1, Loyalty, Charge",onConfirm:M=>{B.has(t)&&B.size>1?B.forEach(J=>{Qt(J,M,1,n)}):Qt(t,M,1,n),_(null)},onCancel:()=>_(null)}),ie&&he&&!ne&&(()=>{const M=x();if(!M)return null;const V=Object.entries(e.counters).length>0;return uo.createPortal(h.jsxs("div",{style:{position:"fixed",top:`${M.top}px`,left:`${M.left}px`,width:"488px",zIndex:1e4,pointerEvents:"none"},children:[h.jsx("img",{src:he,alt:e.oracleId,style:{width:"100%",height:"680px",borderRadius:"12px",border:"4px solid #fff",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",objectFit:"cover"}}),V&&h.jsxs("div",{style:{marginTop:"8px",backgroundColor:"rgba(0, 0, 0, 0.9)",border:"4px solid #fff",borderRadius:"8px",padding:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[h.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#fff",marginBottom:"8px"},children:"Counters:"}),Object.entries(e.counters).map(([J,q])=>h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"0.85rem",color:"#fff"},children:[h.jsx("span",{children:J}),h.jsxs("span",{style:{fontWeight:"bold"},children:["",q]})]},J))]})]}),document.body)})()]})}function fr({zoneName:e,zoneType:t,cards:n,playerColor:r,playerId:o,onDrawCards:i,onMillCards:s,onExileFromDeck:l,onShuffleDeck:u,isInteractive:d=!0,viewerPlayerId:y,zoneId:f,showHeader:p=!0,opponentPosition:g=null}){const[v,b]=W.useState(null),[L,S]=W.useState(!1),[k,c]=W.useState(!1),[w,C]=W.useState(null),[T,_]=W.useState(null),[j,z]=W.useState("none"),[R,N]=W.useState({width:0,height:0}),F=W.useRef(null),Y=t==="battlefield"&&y&&o!==y;W.useEffect(()=>{if(!F.current)return;const G=new ResizeObserver(ne=>{const ee=ne[0];ee&&N({width:ee.contentRect.width,height:ee.contentRect.height})});return G.observe(F.current),()=>G.disconnect()},[]),W.useEffect(()=>{if(!Y||n.length===0||R.width===0){z("none");return}let G=1/0,ne=1/0,ee=-1/0,Z=-1/0;const H=120,le=160;n.forEach(({card:O})=>{var V,J;const P=((V=O.position)==null?void 0:V.x)||0,M=((J=O.position)==null?void 0:J.y)||0;G=Math.min(G,P),ne=Math.min(ne,M),ee=Math.max(ee,P+H),Z=Math.max(Z,M+le)});const he=40,be=ee-G+he*2,ke=Z-ne+he*2,pe=(G+ee)/2,U=(ne+Z)/2,re=R.width,se=R.height,A=re/be,I=se/ke,$=Math.min(Math.max(Math.min(A,I),.25),1),X=re/2,E=se/2;let a=X-pe*$;const m=E-U*$;g==="top"&&(a=X+pe*$);const x=`translate(${a}px, ${m}px) scale(${$})`,D=g==="top"?`${x} scaleX(-1)`:x;z(D)},[Y,n,o,y,R]);const ie=G=>{G.preventDefault(),G.dataTransfer.dropEffect="move",S(!0)},de=()=>{S(!1)},fe=G=>{G.preventDefault(),S(!1);const ne=G.dataTransfer.getData("cardId"),ee=G.dataTransfer.getData("fromZoneId"),Z=G.dataTransfer.getData("playerId"),H=G.dataTransfer.getData("selectedCards");if(Z!==o){console.log("Cannot drop opponent cards");return}if(t==="battlefield"&&F.current){const le=F.current.getBoundingClientRect(),he=parseFloat(G.dataTransfer.getData("dragOffsetX")||"0"),be=parseFloat(G.dataTransfer.getData("dragOffsetY")||"0"),ke=G.clientX-le.left-he,pe=G.clientY-le.top-be;if(H)try{const U=JSON.parse(H);U.some(({relativeX:se,relativeY:A})=>se!==0||A!==0)?U.forEach(({id:se,relativeX:A,relativeY:I})=>{G.dataTransfer.getData("fromZoneId")!==f&&hn(se,f,"auto",o),wa(se,ke+A,pe+I,o)}):U.forEach(({id:X},E)=>{G.dataTransfer.getData("fromZoneId")!==f&&hn(X,f,"auto",o);const m=E%5,x=Math.floor(E/5),D=ke+m*130,O=pe+x*170;wa(X,D,O,o)});return}catch(U){console.error("Failed to parse selected cards data:",U)}ee!==f&&hn(ne,f,"auto",o),wa(ne,ke,pe);return}if(H)try{const le=JSON.parse(H);ee!==f&&le.forEach(({id:he})=>{hn(he,f,"auto",o)});return}catch(le){console.error("Failed to parse selected cards data:",le)}ee!==f&&hn(ne,f,"auto",o)},xe=G=>{if(t!=="battlefield"||G.button!==0||!F.current||G.target.closest("[data-card-id]"))return;const ee=F.current.getBoundingClientRect(),Z=G.clientX-ee.left,H=G.clientY-ee.top;c(!0),C({x:Z,y:H}),_({x:Z,y:H}),!G.ctrlKey&&!G.metaKey&&ju()},B=G=>{if(!k||!F.current||!w)return;const ne=F.current.getBoundingClientRect(),ee=G.clientX-ne.left,Z=G.clientY-ne.top;_({x:ee,y:Z})},K=()=>{if(!k||!w||!T||!F.current){c(!1);return}const G=Math.min(w.x,T.x),ne=Math.max(w.x,T.x),ee=Math.min(w.y,T.y),Z=Math.max(w.y,T.y),H=[];n.forEach(({id:le,card:he})=>{if(!he.position)return;const be=he.position.x+60,ke=he.position.y+80;be>=G&&be<=ne&&ke>=ee&&ke<=Z&&H.push(le)}),H.length>0&&y1(H),c(!1),C(null),_(null)};if(t==="deck")return h.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),h.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),h.jsx("div",{style:{backgroundColor:"#333",border:"2px solid #666",borderRadius:"8px",padding:"2rem 1rem",textAlign:"center",color:"white",marginBottom:"0.75rem",fontSize:"2rem"},children:""}),h.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[h.jsx("button",{onClick:()=>i==null?void 0:i(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw 1"}),h.jsx("button",{onClick:()=>b({title:"Draw how many cards?",onConfirm:G=>{i==null||i(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw N"}),h.jsx("button",{onClick:()=>s==null?void 0:s(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill 1"}),h.jsx("button",{onClick:()=>b({title:"Mill how many cards?",onConfirm:G=>{s==null||s(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill N"}),h.jsx("button",{onClick:()=>l==null?void 0:l(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#9C27B0":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Exile 1"}),h.jsx("button",{onClick:()=>u==null?void 0:u(),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Shuffle"})]}),v&&h.jsx(nd,{title:v.title,max:n.length,onConfirm:v.onConfirm,onCancel:()=>b(null)})]});if(t==="battlefield")return h.jsxs("div",{style:{backgroundColor:L?"#e3f2fd":"#f5f5f5",borderRadius:"8px",height:"100%",display:"flex",flexDirection:"column",border:L?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},"data-zone-id":f,onDragOver:ie,onDragLeave:de,onDrop:fe,children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 1rem",marginBottom:"0.5rem",flexShrink:0},children:[h.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),h.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),h.jsx("div",{ref:F,style:{position:"relative",flex:1,minHeight:0,cursor:k?"crosshair":"default",overflow:Y?"hidden":"visible"},onMouseDown:xe,onMouseMove:B,onMouseUp:K,onMouseLeave:()=>{k&&K()},children:h.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",transform:Y?j:g==="top"?"scaleX(-1)":"none",transformOrigin:"0 0",transition:"transform 0.3s ease"},children:[n.length===0?h.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards on battlefield"}):n.map(({id:G,card:ne})=>h.jsx(Lu,{cardId:G,card:ne,playerId:o,isInteractive:d,forceFaceDown:!1,opponentPosition:g},G)),k&&w&&T&&h.jsx("div",{style:{position:"absolute",left:`${Math.min(w.x,T.x)}px`,top:`${Math.min(w.y,T.y)}px`,width:`${Math.abs(T.x-w.x)}px`,height:`${Math.abs(T.y-w.y)}px`,border:"2px dashed #2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",pointerEvents:"none",zIndex:1e4}})]})})]});const ue=(G=>G<=5?100:G<=10?80:G<=15?60:50)(n.length);return h.jsxs("div",{style:{backgroundColor:L?"#e3f2fd":"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem",minHeight:"200px",border:L?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",overflow:"visible"},"data-zone-id":f,onDragOver:ie,onDragLeave:de,onDrop:fe,children:[p&&h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),h.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),h.jsx("div",{style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"visible",minHeight:"160px",alignItems:"flex-start",paddingTop:"1rem",paddingBottom:"0.5rem"},children:n.length===0?h.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards in this zone"}):n.map(({id:G,card:ne},ee)=>{const Z=t==="hand"&&!!y&&o!==y;return h.jsx("div",{style:{marginLeft:ee===0?"0":`-${100-ue}px`,position:"relative",zIndex:ee,transition:"all 0.2s ease",isolation:"auto"},onMouseEnter:H=>{H.currentTarget.style.zIndex="999",H.currentTarget.style.transform="translateY(-10px)"},onMouseLeave:H=>{H.currentTarget.style.zIndex=String(ee),H.currentTarget.style.transform="translateY(0)"},children:h.jsx(Lu,{cardId:G,card:ne,playerId:o,isInteractive:d,forceFaceDown:Z},G)},G)})})]})}const B1="crdt-cards-username";function $1({onJoin:e,playerCount:t}){const[n,r]=W.useState(""),[o,i]=W.useState([]),[s,l]=W.useState(""),[u,d]=W.useState(!1),[y,f]=W.useState(""),[p,g]=W.useState(!1),[v,b]=W.useState(""),L=W.useRef(null);W.useEffect(()=>{const z=localStorage.getItem(B1);z&&(r(z),setTimeout(()=>{L.current&&L.current.select()},100));const R=to();i(R);const N=Dm();if(N){const F=R.find(ie=>ie.id===N),Y=_s.find(ie=>ie.id===N);(F||Y)&&l(N)}},[]);const S=z=>{z.preventDefault(),n.trim()&&s&&e(n.trim(),s)},k=async()=>{if(!y.trim())return;g(!0),b("");const z=await M1(y.trim());if(z.success&&z.deck){const R=to();i(R),l(z.deck.id),d(!1),f("")}else b(z.error||"Failed to import deck");g(!1)},c=z=>{if(confirm("Delete this deck from your library?")){R1(z);const R=to();i(R),s===z&&l("")}},w=o.find(z=>z.id===s),C=_s.find(z=>z.id===s),T=w||C,_=t>=4,j=n.trim()&&s;return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:h.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[h.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem",textAlign:"center"},children:" Join Game"}),h.jsxs("p",{style:{margin:"0 0 1rem 0",textAlign:"center",fontSize:"0.9rem",color:"#666"},children:["Room: ",h.jsx("strong",{style:{fontFamily:"monospace",color:"#333"},children:window.location.hash.replace(/^#/,"")||"default"})]}),_?h.jsxs("div",{children:[h.jsx("p",{style:{textAlign:"center",color:"#F44336",marginBottom:"1rem"},children:"This game is full (4/4 players)"}),h.jsx("p",{style:{textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Please try a different room or wait for a player to leave."})]}):h.jsxs("form",{onSubmit:S,children:[h.jsxs("p",{style:{marginBottom:"1rem",textAlign:"center",color:"#666"},children:["Players in room: ",t,"/4"]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("label",{htmlFor:"player-name",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Your Name"}),h.jsx("input",{ref:L,id:"player-name",type:"text",value:n,onChange:z=>r(z.target.value),placeholder:"Enter your name...",autoFocus:!0,maxLength:20,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:z=>{z.target.style.borderColor="#2196F3"},onBlur:z=>{z.target.style.borderColor="#ddd"}})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("label",{htmlFor:"deck-select",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck (Required)"}),h.jsxs("select",{id:"deck-select",value:s,onChange:z=>{const R=z.target.value;R==="__import__"?(d(!0),l("")):(l(R),d(!1))},style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none",backgroundColor:"white"},children:[h.jsx("option",{value:"",children:"Select a deck..."}),o.length>0&&h.jsx("optgroup",{label:" My Decks",children:o.map(z=>h.jsxs("option",{value:z.id,children:[z.name," (",z.cardCount," cards)"]},z.id))}),h.jsx("optgroup",{label:" Starter Decks",children:_s.map(z=>h.jsxs("option",{value:z.id,children:[z.name," - ",z.description]},z.id))}),h.jsx("option",{value:"__import__",children:"+ Import New Deck..."})]}),T&&h.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f5f5f5",borderRadius:"4px",fontSize:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("span",{style:{color:"#666"},children:[w&&`${w.cardCount} cards  `,"Will draw 7 on join",C&&`  ${C.description}`]}),w&&h.jsx("button",{type:"button",onClick:()=>c(w.id),style:{background:"none",border:"none",color:"#F44336",cursor:"pointer",fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Delete"})]})]}),u&&h.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9f9f9",borderRadius:"6px",border:"1px solid #ddd"},children:[h.jsx("label",{htmlFor:"import-url",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck URL (Moxfield, Archidekt, or EDHRec)"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{id:"import-url",type:"text",value:y,onChange:z=>f(z.target.value),placeholder:"Paste deck URL from Moxfield, Archidekt, or EDHRec...",disabled:p,style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"}}),h.jsx("button",{type:"button",onClick:k,disabled:!y.trim()||p,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:y.trim()&&!p?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:y.trim()&&!p?"pointer":"not-allowed"},children:p?"Importing...":"Import"})]}),v&&h.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,color:"#F44336",fontSize:"0.75rem"},children:v}),h.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#666"},children:"Deck will be saved to your library for reuse"})]}),h.jsx("button",{type:"submit",disabled:!j,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontWeight:"bold",color:"white",backgroundColor:j?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:j?"pointer":"not-allowed",transition:"background-color 0.2s"},onMouseEnter:z=>{j&&(z.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:z=>{j&&(z.currentTarget.style.backgroundColor="#4CAF50")},children:"Join Game"}),!s&&h.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#FF9800",textAlign:"center"},children:"Please select a deck to join"})]}),h.jsx("p",{style:{marginTop:"1.5rem",marginBottom:0,fontSize:"0.75rem",color:"#999",textAlign:"center"},children:"Share the URL with friends to play together!"})]})})}function W1({message:e,onConfirm:t,onCancel:n,confirmText:r="Confirm",confirmColor:o="#F44336"}){return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n,children:h.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:i=>i.stopPropagation(),children:[h.jsx("p",{style:{margin:"0 0 1.5rem 0",fontSize:"1rem",textAlign:"center",lineHeight:"1.5"},children:e}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[h.jsx("button",{onClick:n,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),h.jsx("button",{onClick:t,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:o,border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.opacity="0.9"},onMouseLeave:i=>{i.currentTarget.style.opacity="1"},children:r})]})]})})}function H1({currentPlayerId:e,players:t,onLeaveGame:n,onRemovePlayer:r,onResetRoom:o}){const[i,s]=W.useState(!1),[l,u]=W.useState(!1);return h.jsxs("div",{style:{position:"relative"},"data-danger-menu":!0,children:[h.jsxs("button",{onClick:()=>s(!i),style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:[" ",h.jsx("span",{style:{fontSize:"0.6rem"},children:""})]}),i&&h.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.25rem",backgroundColor:"white",border:"2px solid #F44336",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"180px"},children:[h.jsx("button",{onClick:()=>{n(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:" Leave Game"}),h.jsxs("button",{onClick:()=>u(!l),style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:[h.jsx("span",{children:" Remove Player"}),h.jsx("span",{style:{fontSize:"0.7rem"},children:l?"":""})]}),l&&h.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:t.filter(d=>d.id!==e).map(({id:d,player:y})=>h.jsxs("button",{onClick:()=>{r(d),u(!1),s(!1)},style:{width:"100%",padding:"0.5rem 1rem",fontSize:"0.75rem",backgroundColor:"transparent",color:"#666",border:"none",textAlign:"left",cursor:"pointer"},onMouseEnter:f=>{f.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:f=>{f.currentTarget.style.backgroundColor="transparent"},children:[" ",y.name]},d))}),h.jsx("button",{onClick:()=>{o(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#F44336",border:"none",textAlign:"left",cursor:"pointer",fontWeight:"bold"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#ffebee"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:" Reset Room"})]})]})}const V1=W.memo(function({cards:t,playerId:n,containerWidth:r=300,containerHeight:o=180}){const[i,s]=W.useState("none"),l=W.useRef(null);return W.useEffect(()=>{if(t.length===0){s("none");return}let u=1/0,d=1/0,y=-1/0,f=-1/0;const p=120,g=160;t.forEach(({card:R})=>{var Y,ie;const N=((Y=R.position)==null?void 0:Y.x)||0,F=((ie=R.position)==null?void 0:ie.y)||0;u=Math.min(u,N),d=Math.min(d,F),y=Math.max(y,N+p),f=Math.max(f,F+g)});const v=40,b=y-u+v*2,L=f-d+v*2,S=(u+y)/2,k=(d+f)/2,c=r/b,w=o/L,C=Math.min(Math.max(Math.min(c,w),.1),.5),T=r/2,_=o/2,j=T-S*C,z=_-k*C;s(`translate(${j}px, ${z}px) scale(${C})`)},[t,r,o]),h.jsx("div",{ref:l,style:{width:`${r}px`,height:`${o}px`,position:"relative",overflow:"hidden",pointerEvents:"none"},children:h.jsx("div",{style:{position:"relative",width:"100%",height:"100%",transform:i,transformOrigin:"0 0",transition:"transform 0.3s ease"},children:t.length===0?h.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.75rem",padding:"1rem",textAlign:"center"},children:"No cards"}):t.map(({id:u,card:d})=>h.jsx(Lu,{cardId:u,card:d,playerId:n,isInteractive:!1,forceFaceDown:!1},u))})})});function Y1({players:e,currentPlayerId:t,viewingPlayerId:n,currentTurnPlayerId:r,onSelectPlayer:o,getZoneCards:i}){return e.length===0?h.jsx("div",{style:{backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",borderBottom:"1px solid #ddd",textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Waiting for players to join..."}):h.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"2px solid #ddd",display:"flex",gap:"1rem",padding:"1rem",overflowX:"auto",minHeight:"200px"},children:e.map(({id:s,player:l})=>{const u=s===t,d=s===n,y=s===r,f=i(`battlefield-${s}`),p=i(`hand-${s}`),g=i(`graveyard-${s}`),v=i(`exile-${s}`);return h.jsxs("div",{onClick:()=>o(s),style:{flex:"0 0 auto",minWidth:"280px",width:"280px",height:"180px",backgroundColor:"transparent",border:y?`3px solid ${Ze(s)}`:d?`3px solid ${Ze(s)}`:`2px solid ${Ze(s)}`,borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",position:"relative",overflow:"hidden",boxShadow:d?"0 6px 16px rgba(0,0,0,0.25)":y?`0 0 20px ${Ze(s)}80`:"0 2px 8px rgba(0,0,0,0.1)"},onMouseEnter:b=>{b.currentTarget.style.transform="translateY(-4px)",b.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.3)"},onMouseLeave:b=>{b.currentTarget.style.transform="translateY(0)",b.currentTarget.style.boxShadow=d?"0 6px 16px rgba(0,0,0,0.25)":y?`0 0 20px ${Ze(s)}80`:"0 2px 8px rgba(0,0,0,0.1)"},children:[h.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:h.jsx(V1,{cards:f,playerId:s,containerWidth:280,containerHeight:180})}),h.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0.75rem",boxSizing:"border-box",pointerEvents:"none"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[h.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:Ze(s),boxShadow:"0 0 8px rgba(255,255,255,0.5)",flexShrink:0}}),h.jsx("span",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"#fff"},children:l.name}),u&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"normal",backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 6px",borderRadius:"4px"},children:"You"}),y&&h.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"bold",backgroundColor:Ze(s),padding:"2px 6px",borderRadius:"4px",animation:"pulse 2s infinite"},children:"Turn"})]}),h.jsxs("div",{style:{display:"flex",gap:"0.75rem",fontSize:"0.85rem",color:"#fff",flexWrap:"wrap",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[h.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:[" ",l.lifeTotal]}),h.jsxs("span",{children:[" ",p.length]}),h.jsxs("span",{children:[" ",i(`deck-${s}`).length]}),h.jsxs("span",{children:[" ",g.length]}),h.jsxs("span",{children:[" ",v.length]})]})]})]},s)})})}function K1({currentPlayerId:e}){const[t,n]=W.useState([]),[r,o]=W.useState("all"),[i,s]=W.useState(""),l=W.useRef(null);W.useEffect(()=>{const g=()=>{const v=[];cr.forEach(b=>{v.push(b)}),n(v)};return cr.observe(g),g(),()=>{cr.unobserve(g)}},[]),W.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[t]);const u=g=>{g.preventDefault(),i.trim()&&(_1(e,i.trim()),s(""))},d=g=>{const v=Xn.get(g);return v?v.type.charAt(0).toUpperCase()+v.type.slice(1):g},y=g=>{var L,S;const v=_e.get(g.playerId),b=(v==null?void 0:v.name)||"Unknown";if(g.type==="chat"&&g.action==="chat_message")return g.data.message;switch(g.action){case"player_joined":return`${b} joined the game`;case"player_removed":return`${b} left the game`;case"turn_changed":return`${b}'s turn - ${g.data.step}`;case"draw_cards":return`${b} drew ${g.data.count} card${g.data.count!==1?"s":""}`;case"mill_cards":return`${b} milled ${g.data.count} card${g.data.count!==1?"s":""}`;case"exile_from_deck":return`${b} exiled ${g.data.count} card${g.data.count!==1?"s":""} from deck`;case"shuffle_deck":return`${b} shuffled their deck`;case"card_moved":{const w=g.data.oracleId||"a card",C=d(g.data.to),T=d(g.data.from);return T===C?`${b} moved ${w}`:`${b} moved ${w} from ${T} to ${C}`}case"counter_modified":{const w=g.data.oracleId||"a card",C=g.data.counterType,T=g.data.delta,_=g.data.newValue;if(T>0)return`${b} added ${T===1?"a":T} ${C} counter${T!==1?"s":""} to ${w} (${_} total)`;{const j=Math.abs(T);return`${b} removed ${j} ${C} counter${j!==1?"s":""} from ${w} (${_} total)`}}case"card_updated":if(((L=g.data.updates)==null?void 0:L.tapped)!==void 0){const w=g.data.oracleId||"a card";return`${b} ${g.data.updates.tapped?"tapped":"untapped"} ${w}`}if(((S=g.data.updates)==null?void 0:S.faceDown)!==void 0){const w=g.data.oracleId||"a card";return`${b} ${g.data.updates.faceDown?"turned face down":"turned face up"} ${w}`}return`${b} updated a card`;case"life_total_modified":const k=g.data.delta,c=k>0?"+":"";return`${b} ${k>0?"gained":"lost"} ${Math.abs(k)} life (${c}${k}  ${g.data.newTotal})`;case"life_total_set":return`${b} set life to ${g.data.newTotal}`;default:return`${b}: ${g.action}`}},f=g=>new Date(g).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),p=t.filter(g=>r==="all"?!0:r==="chat"?g.type==="chat":r==="game"?g.type==="game"||!g.type:!0);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#fff"},children:[h.jsxs("div",{style:{borderBottom:"2px solid #e0e0e0",padding:"0.75rem"},children:[h.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"0.875rem",color:"#666"},children:"CHAT & LOG"}),h.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","chat","game"].map(g=>h.jsx("button",{onClick:()=>o(g),style:{flex:1,padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:r===g?"#2196F3":"#f5f5f5",color:r===g?"white":"#666",border:"none",borderRadius:"4px",cursor:"pointer",textTransform:"capitalize"},children:g==="all"?"All":g==="chat"?"Chat":"Game Log"},g))})]}),h.jsx("div",{ref:l,style:{flex:1,overflowY:"auto",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:p.length===0?h.jsx("div",{style:{color:"#999",fontSize:"0.875rem",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:r==="chat"?"No chat messages yet":"No events yet"}):p.map((g,v)=>{const b=g.type==="chat",L=_e.get(g.playerId),S=Ze(g.playerId);return h.jsx("div",{style:{opacity:b?1:.6,fontSize:"0.875rem",lineHeight:1.4},children:h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"baseline"},children:[h.jsx("span",{style:{fontSize:"0.65rem",color:"#999",flexShrink:0},children:f(g.timestamp)}),b?h.jsxs(h.Fragment,{children:[h.jsxs("span",{style:{fontWeight:"bold",color:S,flexShrink:0},children:[(L==null?void 0:L.name)||"Unknown",":"]}),h.jsx("span",{style:{color:"#333"},children:y(g)})]}):h.jsx("span",{style:{color:"#666"},children:y(g)})]})},v)})}),h.jsxs("form",{onSubmit:u,style:{borderTop:"2px solid #e0e0e0",padding:"0.75rem",display:"flex",gap:"0.5rem"},children:[h.jsx("input",{type:"text",value:i,onChange:g=>s(g.target.value),placeholder:"Type a message...",style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"},onFocus:g=>{g.target.style.borderColor="#2196F3"},onBlur:g=>{g.target.style.borderColor="#ddd"}}),h.jsx("button",{type:"submit",disabled:!i.trim(),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:i.trim()?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:i.trim()?"pointer":"not-allowed"},children:"Send"})]})]})}function G1({isOpen:e,onClose:t,currentPlayerId:n}){return e?h.jsxs(h.Fragment,{children:[h.jsx("div",{onClick:t,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.3)",zIndex:999,animation:"fadeIn 0.2s ease"}}),h.jsxs("div",{style:{position:"fixed",top:0,right:0,bottom:0,width:"400px",maxWidth:"90vw",backgroundColor:"#fff",boxShadow:"-4px 0 12px rgba(0, 0, 0, 0.2)",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease"},children:[h.jsxs("div",{style:{padding:"1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[h.jsx("h3",{style:{margin:0,fontSize:"1.25rem"},children:" Chat & Log"}),h.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:r=>{r.currentTarget.style.color="#333"},onMouseLeave:r=>{r.currentTarget.style.color="#666"},children:""})]}),h.jsx("div",{style:{flex:1,overflow:"hidden"},children:h.jsx(K1,{currentPlayerId:n})})]}),h.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]}):null}function Q1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return h.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #757575":"none"},children:[h.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[h.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Graveyard (",n.length," ",n.length===1?"card":"cards",")"]}),h.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:l=>{l.currentTarget.style.color="#333"},onMouseLeave:l=>{l.currentTarget.style.color="#666"},children:""})]}),h.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:h.jsx(fr,{zoneId:`graveyard-${o}`,zoneName:"",zoneType:"graveyard",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function X1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){return h.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #9C27B0":"none"},children:[h.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[h.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Exile (",n.length," ",n.length===1?"card":"cards",")"]}),h.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:l=>{l.currentTarget.style.color="#333"},onMouseLeave:l=>{l.currentTarget.style.color="#666"},children:""})]}),h.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:h.jsx(fr,{zoneId:`exile-${o}`,zoneName:"",zoneType:"exile",cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function J1({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,viewerPlayerId:i,revealedCard:s}){const l=o===i,u=(s==null?void 0:s.revealedBy)===o;return h.jsxs("div",{style:{height:e?"300px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #607D8B":"none"},children:[h.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[h.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Deck (",n.length," ",n.length===1?"card":"cards",")"]}),h.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:d=>{d.currentTarget.style.color="#333"},onMouseLeave:d=>{d.currentTarget.style.color="#666"},children:""})]}),h.jsx("div",{style:{height:"calc(300px - 48px)",overflow:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?h.jsx("div",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Deck is empty"}):l?h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:d,card:y},f)=>{var p;return h.jsxs("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem"},children:[h.jsxs("div",{style:{fontWeight:"bold"},children:["#",f+1]}),h.jsx("div",{style:{fontSize:"0.7rem",color:"#666"},children:((p=y.metadata)==null?void 0:p.name)||y.oracleId.slice(0,8)})]},d)})}):h.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:d,card:y},f)=>{var v;const g=f===0&&u;return h.jsx("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:g?"#fff3e0":"#37474f",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem",color:g?"#000":"#fff"},children:g?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{fontWeight:"bold",color:"#ff9800"},children:" Revealed"}),h.jsx("div",{style:{fontSize:"0.7rem"},children:(s==null?void 0:s.cardName)||((v=y.metadata)==null?void 0:v.name)||y.oracleId.slice(0,8)})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{fontSize:"2rem"},children:""}),h.jsxs("div",{style:{fontSize:"0.7rem",opacity:.7},children:["#",f+1]})]})},d)})})})]})}function q1({cards:e,mode:t,onConfirm:n,onCancel:r}){const[o,i]=W.useState(e.map(p=>p.cardId)),[s,l]=W.useState([]),u=p=>{i(g=>g.filter(v=>v!==p)),l(g=>[...g,p])},d=p=>{l(g=>g.filter(v=>v!==p)),i(g=>[...g,p])},y=(p,g,v)=>{(v==="top"?i:l)(L=>{const S=L.indexOf(p);if(S===-1)return L;const k=g==="up"?S-1:S+1;if(k<0||k>=L.length)return L;const c=[...L];return[c[S],c[k]]=[c[k],c[S]],c})},f=()=>{t==="scry"&&n&&n(o,s),r()};return h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:r,children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},onClick:p=>p.stopPropagation(),children:[h.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem"},children:[t==="scry"?"Scry":"Peek"," ",e.length]}),t==="scry"&&h.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Reorder cards and choose which to put on top or bottom of your deck"}),o.length>0&&h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Top of Deck (",o.length,")"]}),h.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:o.map((p,g)=>{const v=e.find(b=>b.cardId===p);return v?h.jsx(Gf,{cardId:p,card:v.card,position:g+1,canMoveUp:t==="scry"&&g>0,canMoveDown:t==="scry"&&g<o.length-1,onMoveUp:()=>y(p,"up","top"),onMoveDown:()=>y(p,"down","top"),onMoveToBottom:t==="scry"?()=>u(p):void 0},p):null})})]}),t==="scry"&&s.length>0&&h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Bottom of Deck (",s.length,")"]}),h.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:s.map((p,g)=>{const v=e.find(b=>b.cardId===p);return v?h.jsx(Gf,{cardId:p,card:v.card,position:g+1,canMoveUp:g>0,canMoveDown:g<s.length-1,onMoveUp:()=>y(p,"up","bottom"),onMoveDown:()=>y(p,"down","bottom"),onMoveToTop:()=>d(p)},p):null})})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[h.jsx("button",{onClick:r,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer"},children:t==="peek"?"Close":"Cancel"}),t==="scry"&&h.jsx("button",{onClick:f,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Confirm"})]})]})})}function Gf({card:e,position:t,canMoveUp:n,canMoveDown:r,onMoveUp:o,onMoveDown:i,onMoveToBottom:s,onMoveToTop:l}){const{imageUrl:u,loading:d}=rd(e.oracleId);return h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},children:[h.jsxs("div",{style:{width:"150px",height:"210px",borderRadius:"8px",overflow:"hidden",border:"2px solid #333",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[d?h.jsx("div",{style:{fontSize:"0.8rem",color:"#999"},children:"Loading..."}):u?h.jsx("img",{src:u,alt:e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:e.oracleId}),h.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:t})]}),h.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",justifyContent:"center"},children:[n&&h.jsx("button",{onClick:o,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),r&&h.jsx("button",{onClick:i,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),s&&h.jsx("button",{onClick:s,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Bottom"}),l&&h.jsx("button",{onClick:l,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Top"})]})]})}function Am({cardCount:e,playerColor:t,playerId:n,revealedCard:r,onDrawOne:o,onDrawN:i,onMillOne:s,onMillN:l,onExileOne:u,onExileN:d,onRevealTop:y,onShuffle:f}){const[p,g]=W.useState(!1),[v,b]=W.useState(!1),[L,S]=W.useState(!1),[k,c]=W.useState(!1),[w,C]=W.useState(!1),[T,_]=W.useState(!1),[j,z]=W.useState(null),[R,N]=W.useState(null),[F,Y]=W.useState(null),[ie,de]=W.useState(null),[fe,xe]=W.useState(null),[B,K]=W.useState(null),[ae,ue]=W.useState(null),[G,ne]=W.useState(null),[ee,Z]=W.useState(!1),[H,le]=W.useState(null),{imageUrl:he}=rd((r==null?void 0:r.cardName)||""),be=()=>{e>0&&o()},ke=B?{position:"fixed",top:`${B.top}px`,left:`${B.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"absolute",bottom:"100%",left:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"150px"},pe={padding:"0.5rem 0.75rem",cursor:e>0?"pointer":"not-allowed",fontSize:"0.75rem",borderBottom:"1px solid #eee"};return h.jsxs("div",{style:{position:"relative"},children:[h.jsxs("div",{onDoubleClick:be,style:{width:"120px",height:"160px",backgroundColor:r&&he?"transparent":"#333",backgroundImage:r&&he?`url(${he})`:"none",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid #666",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:e>0?"pointer":"default",position:"relative",userSelect:"none"},onMouseEnter:U=>{if(!r)return;const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth;let A=re.left-320,I=re.top;A<8&&(A=re.right+20),A+300>se&&(A=Math.max(8,(se-300)/2)),I+420>window.innerHeight&&(I=Math.max(8,window.innerHeight-420-8)),le({top:I,left:A}),Z(!0)},onMouseLeave:()=>{Z(!1),le(null)},children:[!r&&h.jsxs("div",{style:{fontSize:"0.75rem",color:"#999",marginTop:"0.5rem"},children:[e," cards"]}),h.jsx("button",{onClick:U=>{if(U.stopPropagation(),!p){const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth;let A=re.left,I=re.top-8;const $=180;A+$>se&&(A=se-$-8);const X=250;I-X<8?I=re.bottom+8:I=I-X,K({top:I,left:A})}g(!p)},style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(255,255,255,0.9)",border:"1px solid #333",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:""}),h.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",backgroundColor:t,color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[" ",e]})]}),ee&&H&&r&&uo.createPortal(h.jsx("div",{style:{position:"fixed",top:`${H.top}px`,left:`${H.left}px`,width:"300px",height:"420px",borderRadius:"12px",overflow:"hidden",border:"3px solid #333",backgroundColor:"#f5f5f5",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:10001,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:he?h.jsx("img",{src:he,alt:r.cardName,style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("div",{style:{padding:"1rem",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:r.cardName})}),document.body),p&&uo.createPortal(h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>{g(!1),b(!1),S(!1),c(!1),C(!1),_(!1)}}),h.jsxs("div",{style:ke,children:[h.jsx("div",{style:{...pe,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:U=>{if(e===0)return;U.currentTarget.style.backgroundColor="#f5f5f5",S(!1),c(!1),C(!1),_(!1);const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth,A=window.innerHeight;let I=re.right+4,$=re.top;const X=180,E=100;I+X>se&&(I=re.left-X-4),$+E>A&&($=Math.max(8,A-E-8)),z({top:$,left:I}),b(!0)},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:h.jsx("span",{children:"Draw "})}),h.jsx("div",{style:{...pe,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:U=>{if(e===0)return;U.currentTarget.style.backgroundColor="#f5f5f5",b(!1),c(!1),C(!1),_(!1);const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth,A=window.innerHeight;let I=re.right+4,$=re.top;const X=180,E=100;I+X>se&&(I=re.left-X-4),$+E>A&&($=Math.max(8,A-E-8)),N({top:$,left:I}),S(!0)},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:h.jsx("span",{children:"Mill "})}),h.jsx("div",{style:{...pe,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:U=>{if(e===0)return;U.currentTarget.style.backgroundColor="#f5f5f5",b(!1),S(!1),C(!1),_(!1);const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth,A=window.innerHeight;let I=re.right+4,$=re.top;const X=200,E=180;I+X>se&&(I=re.left-X-4),$+E>A&&($=Math.max(8,A-E-8)),Y({top:$,left:I}),c(!0)},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:h.jsx("span",{children:"Exile "})}),h.jsx("div",{style:{...pe,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:U=>{if(e===0)return;U.currentTarget.style.backgroundColor="#f5f5f5",b(!1),S(!1),c(!1),_(!1);const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth,A=window.innerHeight;let I=re.right+4,$=re.top;const X=180,E=100;I+X>se&&(I=re.left-X-4),$+E>A&&($=Math.max(8,A-E-8)),de({top:$,left:I}),C(!0)},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:h.jsx("span",{children:"Scry "})}),h.jsx("div",{style:{...pe,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:U=>{if(e===0)return;U.currentTarget.style.backgroundColor="#f5f5f5",b(!1),S(!1),c(!1),C(!1);const re=U.currentTarget.getBoundingClientRect(),se=window.innerWidth,A=window.innerHeight;let I=re.right+4,$=re.top;const X=180,E=100;I+X>se&&(I=re.left-X-4),$+E>A&&($=Math.max(8,A-E-8)),xe({top:$,left:I}),_(!0)},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:h.jsx("span",{children:"Peek "})}),h.jsx("div",{style:{...pe,backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(y(),g(!1))},onMouseEnter:U=>{e>0&&(U.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:"Reveal Top Card"}),h.jsx("div",{style:{...pe,borderBottom:"none",backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(f(),g(!1))},onMouseEnter:U=>{e>0&&(U.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:U=>{e>0&&(U.currentTarget.style.backgroundColor="white")},children:"Shuffle Deck"})]}),v&&j&&h.jsxs("div",{style:{position:"fixed",top:`${j.top}px`,left:`${j.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>b(!0),onMouseLeave:()=>{b(!1),z(null)},children:[h.jsx("div",{style:pe,onClick:()=>{o(),g(!1),b(!1)},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Draw 1"}),h.jsx("div",{style:{...pe,borderBottom:"none"},onClick:()=>{ue({title:"Draw how many cards?",onConfirm:U=>{i(U),ue(null),g(!1),b(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Draw N"})]}),L&&R&&h.jsxs("div",{style:{position:"fixed",top:`${R.top}px`,left:`${R.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>S(!0),onMouseLeave:()=>{S(!1),N(null)},children:[h.jsx("div",{style:pe,onClick:()=>{s(),g(!1),S(!1)},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Mill 1"}),h.jsx("div",{style:{...pe,borderBottom:"none"},onClick:()=>{ue({title:"Mill how many cards?",onConfirm:U=>{l(U),ue(null),g(!1),S(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Mill N"})]}),k&&F&&h.jsxs("div",{style:{position:"fixed",top:`${F.top}px`,left:`${F.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>c(!0),onMouseLeave:()=>{c(!1),Y(null)},children:[h.jsx("div",{style:pe,onClick:()=>{u(!1),g(!1),c(!1)},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-up)"}),h.jsx("div",{style:pe,onClick:()=>{ue({title:"Exile how many cards (face-up)?",onConfirm:U=>{d(U,!1),ue(null),g(!1),c(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Exile N (face-up)"}),h.jsx("div",{style:pe,onClick:()=>{u(!0),g(!1),c(!1)},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-down)"}),h.jsx("div",{style:{...pe,borderBottom:"none"},onClick:()=>{ue({title:"Exile how many cards (face-down)?",onConfirm:U=>{d(U,!0),ue(null),g(!1),c(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Exile N (face-down)"})]}),w&&ie&&h.jsxs("div",{style:{position:"fixed",top:`${ie.top}px`,left:`${ie.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>C(!0),onMouseLeave:()=>{C(!1),de(null)},children:[h.jsx("div",{style:pe,onClick:()=>{const U=is(n,1);U.length>0&&(ne({cards:U,mode:"scry"}),g(!1),C(!1))},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Scry 1"}),h.jsx("div",{style:{...pe,borderBottom:"none"},onClick:()=>{ue({title:"Scry how many cards?",onConfirm:U=>{const re=is(n,U);re.length>0&&ne({cards:re,mode:"scry"}),ue(null),g(!1),C(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Scry N"})]}),T&&fe&&h.jsxs("div",{style:{position:"fixed",top:`${fe.top}px`,left:`${fe.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>_(!0),onMouseLeave:()=>{_(!1),xe(null)},children:[h.jsx("div",{style:pe,onClick:()=>{const U=is(n,1);U.length>0&&(ne({cards:U,mode:"peek"}),g(!1),_(!1))},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Peek 1"}),h.jsx("div",{style:{...pe,borderBottom:"none"},onClick:()=>{ue({title:"Peek at how many cards?",onConfirm:U=>{const re=is(n,U);re.length>0&&ne({cards:re,mode:"peek"}),ue(null),g(!1),_(!1)}})},onMouseEnter:U=>{U.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor="white"},children:" Peek N"})]})]}),document.body),ae&&h.jsx(nd,{title:ae.title,max:e,onConfirm:ae.onConfirm,onCancel:()=>ue(null)}),G&&h.jsx(q1,{cards:G.cards,mode:G.mode,onConfirm:G.mode==="scry"?(U,re)=>{E1(n,U,re),ne(null)}:void 0,onCancel:()=>ne(null)})]})}function Nm({playerId:e,lifeTotal:t,playerColor:n,currentPlayerId:r}){const[o,i]=W.useState(!1),s=()=>{jr(e,1,r)},l=()=>{jr(e,-1,r)};return h.jsxs("div",{style:{position:"relative"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fff",border:`2px solid ${n}`,borderRadius:"8px",padding:"0.5rem"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem",fontWeight:"bold",color:t<=0?"#F44336":"#333"},children:[h.jsx("span",{children:""}),h.jsx("span",{children:t})]}),h.jsx("button",{onClick:s,style:{width:"32px",height:"32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#4CAF50"},children:"+"}),h.jsx("button",{onClick:l,style:{width:"32px",height:"32px",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#da190b"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#F44336"},children:""}),h.jsx("button",{onClick:()=>i(!o),style:{width:"32px",height:"32px",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#616161"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="#757575"},children:""})]}),o&&h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>i(!1)}),h.jsxs("div",{style:{position:"absolute",bottom:"100%",right:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"180px"},children:[h.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADJUST"}),h.jsxs("div",{style:{padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",borderBottom:"1px solid #eee"},children:[h.jsx("button",{onClick:()=>{jr(e,5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+5"}),h.jsx("button",{onClick:()=>{jr(e,-5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-5"}),h.jsx("button",{onClick:()=>{jr(e,10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+10"}),h.jsx("button",{onClick:()=>{jr(e,-10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-10"})]}),h.jsx("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",backgroundColor:"white"},onClick:()=>{const u=prompt("Set life total to:",t.toString());if(u!==null){const d=parseInt(u,10);isNaN(d)||C1(e,d,r)}i(!1)},onMouseEnter:u=>{u.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor="white"},children:"Set Exact Value..."})]})]})]})}const zm="crdt-cards-recent-tokens",Z1=4;function Im(){try{const e=localStorage.getItem(zm);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load recent tokens:",e),[]}}function eb(e,t){try{const r=Im().filter(i=>i.name!==e);r.unshift({name:e,imageUrl:t,timestamp:Date.now()});const o=r.slice(0,Z1);localStorage.setItem(zm,JSON.stringify(o))}catch(n){console.error("Failed to save recent token:",n)}}const Ca=[{name:"Treasure",displayName:"Treasure",color:"#FFD700",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/d/5/d52efeb3-661d-45e9-97c3-af167f889684.jpg?1757379348"},{name:"Food",displayName:"Food",color:"#8B4513",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/f/0fb2c5a4-859e-40ac-8091-7ba44f57b878.jpg?1757379328"},{name:"Clue",displayName:"Clue",color:"#708090",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/1/5/15866ed4-1ca3-427f-99ba-ee26ede9ae18.jpg?1752946432"},{name:"Soldier",displayName:"1/1 Soldier",color:"#F0E68C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/6/3/631c2c16-132d-4607-ab7e-207a6af188e5.jpg?1757686920"},{name:"Zombie",displayName:"2/2 Zombie",color:"#2F4F4F",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/4/c/4cecd5c6-d6c8-4cd5-97a3-cddaf051af15.jpg?1749245686"},{name:"Goblin",displayName:"1/1 Goblin",color:"#DC143C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/e/2/e265ca24-96c0-4654-a8f3-bbffe288970a.jpg?1742506636"},{name:"Beast",displayName:"3/3 Beast",color:"#228B22",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/3/b/3b584d93-5681-4ecd-953c-5ef58307caab.jpg?1752946408"},{name:"Spirit",displayName:"1/1 Spirit",color:"#E6E6FA",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/0/004f2ea4-0477-49b2-ad06-5aac7991103d.jpg?1749245677"}];function tb({playerId:e,onClose:t}){const[n,r]=W.useState(Ca.reduce((c,w)=>({...c,[w.name]:1}),{})),[o,i]=W.useState([]),[s,l]=W.useState(""),[u,d]=W.useState([]),[y,f]=W.useState(!1),[p,g]=W.useState("");W.useEffect(()=>{i(Im())},[]);const v=c=>{const w=n[c]||1,C=Ca.find(_=>_.name===c),T=C==null?void 0:C.imageUrl;Sa(e,c,w,T),t()},b=(c,w)=>{r(C=>({...C,[c]:Math.max(1,Math.min(20,(C[c]||1)+w))}))},L=async()=>{if(s.trim()){f(!0),g(""),d([]);try{const c=`t:token ${s.trim()}`,w=await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(c)}&unique=prints`);if(!w.ok){w.status===404?g("No tokens found matching your search"):g("Failed to search Scryfall"),f(!1);return}const C=await w.json();d(C.data||[])}catch(c){console.error("Search error:",c),g("Network error - could not search Scryfall")}finally{f(!1)}}},S=c=>{var C,T,_;const w=((C=c.image_uris)==null?void 0:C.normal)||((T=c.image_uris)==null?void 0:T.large)||((_=c.image_uris)==null?void 0:_.small);w&&eb(c.name,w),Sa(e,c.name,1,w),t()},k=c=>{const w=n[c.name]||1;Sa(e,c.name,w,c.imageUrl),t()};return h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:t}),h.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3)",zIndex:9999,width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",padding:"1.5rem"},onClick:c=>c.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #ddd"},children:[h.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"Create Tokens"}),h.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0 0.5rem"},children:""})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"COMMON TOKENS"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:Ca.map(c=>h.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#fafafa"},children:[h.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:c.emoji}),h.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333"},children:c.displayName}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[h.jsx("button",{onClick:()=>b(c.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),h.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[c.name]||1}),h.jsx("button",{onClick:()=>b(c.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),h.jsx("button",{onClick:()=>v(c.name),style:{padding:"0.5rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},c.name))})]}),o.length>0&&h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"RECENTLY USED"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:o.map(c=>h.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#f0f8ff"},children:[h.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:""}),h.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:c.name,children:c.name}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[h.jsx("button",{onClick:()=>b(c.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),h.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[c.name]||1}),h.jsx("button",{onClick:()=>b(c.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),h.jsx("button",{onClick:()=>k(c),style:{padding:"0.5rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},c.name))})]}),h.jsxs("div",{children:[h.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"SEARCH SCRYFALL"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[h.jsx("input",{type:"text",placeholder:"Search token name (e.g., dragon, elf)",value:s,onChange:c=>l(c.target.value),onKeyDown:c=>c.key==="Enter"&&L(),style:{flex:1,padding:"0.5rem",border:"2px solid #ddd",borderRadius:"4px",fontSize:"0.875rem"}}),h.jsx("button",{onClick:L,disabled:y||!s.trim(),style:{padding:"0.5rem 1rem",backgroundColor:y?"#ccc":"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:y?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:y?"Searching...":"Search"})]}),p&&h.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",fontSize:"0.875rem"},children:p}),u.length>0&&h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"0.5rem"},children:u.slice(0,20).map(c=>{var w;return h.jsx("div",{onClick:()=>S(c),style:{cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",transition:"transform 0.2s"},onMouseEnter:C=>{C.currentTarget.style.transform="scale(1.05)",C.currentTarget.style.borderColor="#2196F3"},onMouseLeave:C=>{C.currentTarget.style.transform="scale(1)",C.currentTarget.style.borderColor="#ddd"},children:(w=c.image_uris)!=null&&w.small?h.jsx("img",{src:c.image_uris.small,alt:c.name,style:{width:"100%",display:"block"}}):h.jsx("div",{style:{aspectRatio:"5/7",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999",padding:"0.5rem",textAlign:"center"},children:c.name})},c.id)})})]})]})]})}const Qf=["swift","brave","wise","mighty","clever","bold","noble","fierce","mystic","ancient","silver","golden","crimson","azure","emerald","shadow","thunder","frost","flame","storm","lunar","solar"],Xf=["dragon","phoenix","griffin","wizard","knight","mage","sage","warrior","ranger","paladin","rogue","sorcerer","champion","guardian","sentinel","warden","keeper","seeker","voyager"];function Jf(){const e=Qf[Math.floor(Math.random()*Qf.length)],t=Xf[Math.floor(Math.random()*Xf.length)],n=Math.floor(1e3+Math.random()*9e3);return`${e}-${t}-${n}`}function nb(){const[e,t]=W.useState(Jf()),[n,r]=W.useState(""),o=()=>{window.location.hash=e},i=l=>{if(l.preventDefault(),n.trim()){const u=n.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-");window.location.hash=u}},s=()=>{t(Jf())};return h.jsx("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"3rem",maxWidth:"600px",width:"100%"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsxs("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[" ",window.location.host]}),h.jsx("p",{style:{margin:0,color:"#666",fontSize:"1.1rem"},children:"Real-time multiplayer card game"}),h.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:h.jsx("a",{href:"https://github.com/rsullivan00/crdt-cards/",target:"_blank",rel:"noopener noreferrer",style:{color:"#667eea",textDecoration:"none"},children:"View code & report bugs on GitHub "})})]}),h.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[h.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" What is this?"}),h.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#555",lineHeight:"1.6"},children:[h.jsx("li",{children:"Play Magic-style card games with friends in real-time"}),h.jsx("li",{children:"No server required - uses peer-to-peer technology (CRDTs)"}),h.jsx("li",{children:"Import decks from Moxfield, Archidekt, or use starter decks"}),h.jsx("li",{children:"Everything syncs instantly across all players"})]})]}),h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Create a New Room"}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsx("input",{type:"text",value:e,readOnly:!0,style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa",fontFamily:"monospace"}}),h.jsx("button",{onClick:s,style:{padding:"0.75rem",fontSize:"1.25rem",backgroundColor:"#f8f9fa",border:"2px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor="#e9ecef"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="#f8f9fa"},title:"Generate new room name",children:""})]}),h.jsx("button",{onClick:o,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0)"},children:"Create Room & Invite Friends"}),h.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"#888",textAlign:"center"},children:"Share the URL with friends to play together"})]}),h.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"2rem 0"}}),h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Join Existing Room"}),h.jsx("form",{onSubmit:i,children:h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("input",{type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Enter room name...",style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",fontFamily:"monospace"}}),h.jsx("button",{type:"submit",disabled:!n.trim(),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:n.trim()?"#4CAF50":"#e0e0e0",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",transition:"background-color 0.2s"},children:"Join"})]})})]}),h.jsxs("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"6px",padding:"1rem",fontSize:"0.9rem",color:"#856404"},children:[h.jsx("strong",{children:" Important:"})," Rooms are temporary and ephemeral. All game data is deleted when the last player leaves. Make sure to finish your game in one session!"]})]})})}function rb({isOpen:e,onClose:t}){return e?uo.createPortal(h.jsx(h.Fragment,{children:h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:h.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},onClick:n=>n.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[h.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"How to Use"}),h.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0",lineHeight:1},children:""})]}),h.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[h.jsxs("section",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#2196F3"},children:" Multi-Select Cards"}),h.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Ctrl+Click"})," to select/deselect individual cards"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Drag-to-select"})," on battlefield: Click and drag to create a selection rectangle"]}),h.jsxs("li",{children:["Selected cards show a ",h.jsx("span",{style:{color:"#2196F3"},children:"blue outline"})]}),h.jsx("li",{children:"Works in all zones: battlefield, hand, graveyard, and exile"})]})]}),h.jsxs("section",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#4CAF50"},children:" Batch Operations"}),h.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[h.jsxs("li",{children:["Click the ",h.jsx("strong",{children:" menu"})," on any selected card"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Move to..."})," moves all selected cards together"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Counters"})," adds/removes counters on all selected cards"]}),h.jsxs("li",{children:["Menu shows ",h.jsx("strong",{children:"(X cards)"})," when multiple are selected"]}),h.jsx("li",{children:"Selection persists after operations for multi-step workflows"})]})]}),h.jsxs("section",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#9C27B0"},children:" Group Dragging"}),h.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Drag selected cards"})," from hand/graveyard/exile to battlefield"]}),h.jsx("li",{children:"Cards arrange in a grid (5 per row) where you drop them"}),h.jsxs("li",{children:[h.jsx("strong",{children:"Drag within battlefield"})," maintains relative positions"]}),h.jsx("li",{children:"All selected cards move together"})]})]}),h.jsxs("section",{style:{marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#FF9800"},children:" Card Actions"}),h.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Click"})," battlefield cards to tap/untap"]}),h.jsxs("li",{children:[h.jsx("strong",{children:" Menu"})," for moving, adding counters, deleting tokens"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Drag"})," cards to reposition on battlefield"]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Right-click"})," opens the card menu"]})]})]}),h.jsxs("section",{style:{marginBottom:"0.5rem"},children:[h.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#666"},children:" Tips"}),h.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[h.jsx("li",{children:"Click empty space to clear selection"}),h.jsx("li",{children:"Hold Ctrl while drag-selecting to add to existing selection"}),h.jsx("li",{children:"Use batch counters to quickly set up token armies"}),h.jsx("li",{children:"Multi-select works great for moving creatures to attack"})]})]})]})]})})}),document.body):null}function Mr({playerId:e,player:t,currentPlayerId:n,isCurrentPlayer:r,position:o,getZoneCards:i,onDrawCards:s,onMillCards:l,onExileFromDeck:u,onShuffleDeck:d,onRevealTopCard:y,onOpenGraveyard:f,onOpenExile:p,onOpenDeck:g,onCreateToken:v,isCurrentTurn:b,revealedCard:L}){const S=Ze(e),k=r,c=r;return h.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",border:b?`4px solid ${S}`:"2px solid #ddd",backgroundColor:"#f9f9f9",boxShadow:b?`0 0 20px ${S}80`:"none",animation:b?"pulse 2s infinite":"none",overflow:"hidden",display:"flex",flexDirection:"column"},children:[h.jsxs("div",{style:{backgroundColor:S,color:"white",padding:"0.5rem",textAlign:"center",fontWeight:"bold",fontSize:"0.875rem",borderBottom:"2px solid rgba(0,0,0,0.1)",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[h.jsxs("div",{style:{flex:1,textAlign:"center"},children:[t.name," ",r&&"(You)",b&&" "]}),!r&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9,fontWeight:"bold"},children:[" ",t.lifeTotal]}),h.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[" ",i(`hand-${e}`).length]}),h.jsxs("button",{onClick:w=>{w.stopPropagation(),f()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Graveyard",children:[" ",i(`graveyard-${e}`).length]}),h.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Exile",children:[" ",i(`exile-${e}`).length]}),h.jsxs("button",{onClick:w=>{w.stopPropagation(),g()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Deck",children:[" ",i(`deck-${e}`).length]})]})]}),h.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:c?h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:h.jsx(fr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:S,playerId:e,isInteractive:k,viewerPlayerId:n})}),h.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"0.5rem",alignItems:"center"},children:[h.jsx("div",{style:{minWidth:0,overflow:"visible"},children:h.jsx(fr,{zoneId:`hand-${e}`,zoneName:"Hand",zoneType:"hand",cards:i(`hand-${e}`),playerColor:S,playerId:e,isInteractive:k,viewerPlayerId:n})}),h.jsx(Am,{cardCount:i(`deck-${e}`).length,playerColor:S,playerId:e,revealedCard:L,onDrawOne:()=>s(1),onDrawN:s,onMillOne:()=>l(1),onMillN:l,onExileOne:w=>u(1,w),onExileN:(w,C)=>u(w,C),onShuffle:d,onRevealTop:y}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx(Nm,{playerId:e,lifeTotal:t.lifeTotal,playerColor:S,currentPlayerId:n}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("button",{onClick:f,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Graveyard",children:""}),h.jsx("button",{onClick:p,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Exile",children:""}),h.jsx("button",{onClick:v,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Create Token",children:""})]})]})]})]}):h.jsx(h.Fragment,{children:h.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:h.jsx(fr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:S,playerId:e,isInteractive:k,viewerPlayerId:n,opponentPosition:o==="top"?"top":null})})})})]})}function ob({players:e,currentPlayerId:t,getZoneCards:n,onDrawCards:r,onMillCards:o,onExileFromDeck:i,onShuffleDeck:s,onRevealTopCard:l,onOpenGraveyard:u,onOpenExile:d,onOpenDeck:y,onCreateToken:f,revealedCard:p}){const g=Zo(),v=g==null?void 0:g.playerId,b=e.find(_=>_.id===t),L=e.filter(_=>_.id!==t),S=e.length,c=S===1?{bottom:b,top:null,left:null,right:null}:S===2?{bottom:b,top:L[0],left:null,right:null}:S===3?{bottom:b,top:null,left:L[0],right:L[1]}:{bottom:b,top:null,left:L[0],right:L[1],bottomRight:L[2]},w=S===2,C=S===3,T=S===4;return h.jsxs("div",{style:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:"0px",overflow:"hidden"},children:[w?c.top&&h.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:h.jsx(Mr,{playerId:c.top.id,player:c.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(c.top.id,_),onMillCards:_=>o(c.top.id,_),onExileFromDeck:(_,j)=>i(c.top.id,_,j),onShuffleDeck:()=>s(c.top.id),onRevealTopCard:()=>l(c.top.id),onOpenGraveyard:()=>u(c.top.id),onOpenExile:()=>d(c.top.id),onOpenDeck:()=>y(c.top.id),onCreateToken:()=>f(c.top.id),isCurrentTurn:v===c.top.id,revealedCard:p})}):h.jsxs(h.Fragment,{children:[c.left&&h.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:h.jsx(Mr,{playerId:c.left.id,player:c.left.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(c.left.id,_),onMillCards:_=>o(c.left.id,_),onExileFromDeck:(_,j)=>i(c.left.id,_,j),onShuffleDeck:()=>s(c.left.id),onRevealTopCard:()=>l(c.left.id),onOpenGraveyard:()=>u(c.left.id),onOpenExile:()=>d(c.left.id),onOpenDeck:()=>y(c.left.id),onCreateToken:()=>f(c.left.id),isCurrentTurn:v===c.left.id,revealedCard:p})}),c.right&&h.jsx("div",{style:{gridColumn:"2",gridRow:"1"},children:h.jsx(Mr,{playerId:c.right.id,player:c.right.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(c.right.id,_),onMillCards:_=>o(c.right.id,_),onExileFromDeck:(_,j)=>i(c.right.id,_,j),onShuffleDeck:()=>s(c.right.id),onRevealTopCard:()=>l(c.right.id),onOpenGraveyard:()=>u(c.right.id),onOpenExile:()=>d(c.right.id),onOpenDeck:()=>y(c.right.id),onCreateToken:()=>f(c.right.id),isCurrentTurn:v===c.right.id,revealedCard:p})}),c.top&&h.jsx("div",{style:{gridColumn:"1 / 3",gridRow:"1"},children:h.jsx(Mr,{playerId:c.top.id,player:c.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:_=>r(c.top.id,_),onMillCards:_=>o(c.top.id,_),onExileFromDeck:(_,j)=>i(c.top.id,_,j),onShuffleDeck:()=>s(c.top.id),onRevealTopCard:()=>l(c.top.id),onOpenGraveyard:()=>u(c.top.id),onOpenExile:()=>d(c.top.id),onOpenDeck:()=>y(c.top.id),onCreateToken:()=>f(c.top.id),isCurrentTurn:v===c.top.id,revealedCard:p})})]}),c.bottom&&h.jsx("div",{style:{gridColumn:w||T?"1":"1 / 3",gridRow:"2"},children:h.jsx(Mr,{playerId:c.bottom.id,player:c.bottom.player,currentPlayerId:t,isCurrentPlayer:!0,position:"bottom",getZoneCards:n,onDrawCards:_=>r(c.bottom.id,_),onMillCards:_=>o(c.bottom.id,_),onExileFromDeck:(_,j)=>i(c.bottom.id,_,j),onShuffleDeck:()=>s(c.bottom.id),onRevealTopCard:()=>l(c.bottom.id),onOpenGraveyard:()=>u(c.bottom.id),onOpenExile:()=>d(c.bottom.id),onOpenDeck:()=>y(c.bottom.id),onCreateToken:()=>f(c.bottom.id),isCurrentTurn:v===c.bottom.id,revealedCard:p})}),T&&c.bottomRight&&h.jsx("div",{style:{gridColumn:"2",gridRow:"2"},children:h.jsx(Mr,{playerId:c.bottomRight.id,player:c.bottomRight.player,currentPlayerId:t,isCurrentPlayer:!1,position:"right",getZoneCards:n,onDrawCards:_=>r(c.bottomRight.id,_),onMillCards:_=>o(c.bottomRight.id,_),onExileFromDeck:(_,j)=>i(c.bottomRight.id,_,j),onShuffleDeck:()=>s(c.bottomRight.id),onRevealTopCard:()=>l(c.bottomRight.id),onOpenGraveyard:()=>u(c.bottomRight.id),onOpenExile:()=>d(c.bottomRight.id),onOpenDeck:()=>y(c.bottomRight.id),onCreateToken:()=>f(c.bottomRight.id),isCurrentTurn:v===c.bottomRight.id,revealedCard:p})}),h.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            box-shadow: 0 0 20px var(--pulse-color, #2196F3)80;
          }
          50% {
            box-shadow: 0 0 40px var(--pulse-color, #2196F3)ff;
          }
        }
      `})]})}function ib(){if(!(window.location.hash&&window.location.hash!=="#"))return h.jsx(nb,{});const[t,n]=W.useState(null),[r,o]=W.useState(!1),[i,s]=W.useState(!1),[l,u]=W.useState(!1),[d,y]=W.useState(null),[,f]=W.useState({}),[p,g]=W.useState(!1),[v,b]=W.useState(!1),[L,S]=W.useState(!1),[k,c]=W.useState(!1),[w,C]=W.useState(!1),[T,_]=W.useState(!1),[j,z]=W.useState(null),[R,N]=W.useState(null),[F,Y]=W.useState(()=>localStorage.getItem("crdt-cards-layout-mode")==="table"?"table":"compact"),ie=()=>{const H=F==="compact"?"table":"compact";Y(H),localStorage.setItem("crdt-cards-layout-mode",H)};W.useEffect(()=>{const H=`crdt-cards-player-${Hr()}`,le=localStorage.getItem(H);le&&_e.has(le)?n(le):o(!0);const he=re=>{s(re.connected)},be=re=>{u(re.synced),re.synced&&le&&!t&&_e.has(le)&&(n(le),o(!1),console.log("Rejoined as existing player:",le))};Vr.on("status",he),Vr.on("synced",be);const ke=()=>{f({})};_e.observe(ke),Xn.observe(ke),ye.observe(ke),vo.observe(ke);const pe=()=>{const re=qo.get("current");N(re?{cardName:re.cardName,revealedBy:re.revealedBy}:null)};qo.observe(pe),pe(),ke();const U=re=>{if(re.key==="t"||re.key==="T"){const se=document.activeElement;if((se==null?void 0:se.tagName)==="INPUT"||(se==null?void 0:se.tagName)==="TEXTAREA")return;const A=Uo();if(A.size===0||!t)return;const I=ye;let $,X=!1;if(A.forEach(E=>{const a=I.get(E);a&&!$&&($=a,X=a.zoneId.startsWith("battlefield-"))}),$&&X){const E=!$.tapped;A.forEach(a=>{const m=I.get(a);m&&m.zoneId.startsWith("battlefield-")&&Mu(a,E,t)})}}};return window.addEventListener("keydown",U),()=>{_e.unobserve(ke),Xn.unobserve(ke),ye.unobserve(ke),vo.unobserve(ke),qo.unobserve(pe),Vr.off("status",he),Vr.off("synced",be),window.removeEventListener("keydown",U)}},[t]);const de=async(H,le)=>{const he=crypto.randomUUID();x1(he,H,!0);const be=_s.find(pe=>pe.id===le);if(be){const pe=await A1(be.file,be.name);pe.success&&pe.deck&&(Kf(he,pe.deck),Vf(pe.deck.id),ss(he),zo(he,7))}else{const U=to().find(re=>re.id===le);U&&(Kf(he,U),Vf(le),ss(he),zo(he,7))}const ke=`crdt-cards-player-${Hr()}`;localStorage.setItem(ke,he),localStorage.setItem("crdt-cards-username",H),n(he),o(!1),!Zo()&&_e.size===1&&Du(he,"main1")},fe=()=>{const H=Zo(),le=Array.from(_e.keys());if(H&&le.length>0){const be=(le.indexOf(H.playerId)+1)%le.length;Du(le[be],"main1")}},xe=Zo(),B=(xe==null?void 0:xe.playerId)||null,K=()=>{t&&y({message:"Leave this game? Your player and cards will be removed.",onConfirm:()=>{Wf(t);const H=`crdt-cards-player-${Hr()}`;localStorage.removeItem(H),window.location.reload()}})},ae=H=>{const le=_e.get(H);y({message:`Remove ${(le==null?void 0:le.name)||"this player"} from the game? Their cards will be removed.`,onConfirm:()=>{Wf(H)}})},ue=()=>{y({message:"Reset the entire room? This will clear all players, cards, and game state.",onConfirm:()=>{S1();const H=`crdt-cards-player-${Hr()}`;localStorage.removeItem(H),window.location.reload()}})},G=H=>{const le=[];return ye.forEach((he,be)=>{he.zoneId===H&&le.push({id:be,card:he})}),le.sort((he,be)=>he.card.order-be.card.order)},ne=[];if(_e.forEach((H,le)=>{ne.push({id:le,player:H})}),r)return h.jsx($1,{onJoin:de,playerCount:_e.size});if(!t)return h.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."});const ee=_e.get(t),Z=j||t;return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.7;
          }
        }
      `}),h.jsxs("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"#e0e0e0"},children:[h.jsxs("div",{style:{backgroundColor:"#fff",padding:"0.75rem 1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[h.jsx("h1",{style:{margin:0,fontSize:"1.25rem"},children:window.location.host}),h.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[h.jsx("strong",{children:"You:"})," ",(ee==null?void 0:ee.name)||"Unknown"]})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[h.jsx("button",{onClick:ie,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:F==="table"?"#FF9800":"#607D8B",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:`Switch to ${F==="table"?"compact":"table"} view`,children:F==="table"?" Compact":" Table"}),h.jsx("button",{onClick:()=>_(!0),style:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Help",children:"?"}),h.jsx("button",{onClick:fe,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Next Turn"}),h.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:i&&l?"#4CAF50":"#FF9800"}}),h.jsx(H1,{currentPlayerId:t||"",players:ne,onLeaveGame:K,onRemovePlayer:ae,onResetRoom:ue})]})]}),F==="compact"&&h.jsx(Y1,{players:ne,currentPlayerId:t,viewingPlayerId:j||t,currentTurnPlayerId:B,onSelectPlayer:H=>{z(H===t?null:H)},getZoneCards:G}),F==="table"?h.jsx("div",{style:{flex:1,overflow:"hidden"},children:h.jsx(ob,{players:ne,currentPlayerId:t,getZoneCards:G,onDrawCards:zo,onMillCards:xa,onExileFromDeck:ba,onShuffleDeck:ss,onRevealTopCard:Hf,onOpenGraveyard:H=>{z(H===t?null:H),b(!0)},onOpenExile:H=>{z(H===t?null:H),S(!0)},onOpenDeck:H=>{z(H===t?null:H),c(!0)},onCreateToken:()=>C(!0),revealedCard:R})}):h.jsxs("div",{style:{flex:1,overflow:"hidden",position:"relative",display:"flex",flexDirection:"column"},children:[h.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:h.jsx(fr,{zoneId:`battlefield-${Z}`,zoneName:"Battlefield",zoneType:"battlefield",cards:G(`battlefield-${Z}`),playerColor:Ze(Z),playerId:Z,isInteractive:Z===t,viewerPlayerId:t})}),h.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.75rem 1rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"1rem",alignItems:"center"},children:[h.jsx("div",{style:{minWidth:0,overflow:"visible"},children:h.jsx(fr,{zoneId:`hand-${Z}`,zoneName:"Hand",zoneType:"hand",cards:G(`hand-${Z}`),playerColor:Ze(Z),playerId:Z,isInteractive:Z===t,viewerPlayerId:t})}),ee&&Z===t&&h.jsxs(h.Fragment,{children:[h.jsx(Am,{cardCount:G(`deck-${Z}`).length,playerColor:Ze(Z),playerId:Z,revealedCard:R,onDrawOne:()=>zo(Z,1),onDrawN:H=>zo(Z,H),onMillOne:()=>xa(Z,1),onMillN:H=>xa(Z,H),onExileOne:H=>ba(Z,1,H),onExileN:(H,le)=>ba(Z,H,le),onRevealTop:()=>{Hf(Z)},onShuffle:()=>ss(Z)}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx(Nm,{playerId:Z,lifeTotal:ee.lifeTotal,playerColor:Ze(Z),currentPlayerId:t}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[h.jsx("button",{onClick:()=>b(!v),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#9C27B0"},title:"Graveyard",children:""}),h.jsx("button",{onClick:()=>S(!L),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#9C27B0"},title:"Exile",children:""}),h.jsx("button",{onClick:()=>C(!w),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#F57C00"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#FF9800"},title:"Create Tokens",children:""}),h.jsx("button",{onClick:()=>g(!p),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#4CAF50",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor="#388E3C"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="#4CAF50"},title:"Chat & Log",children:""})]})]})]})]})]}),h.jsx(Q1,{isOpen:v,onClose:()=>b(!1),cards:G(`graveyard-${Z}`),playerColor:Ze(Z),playerId:Z,isInteractive:Z===t,viewerPlayerId:t}),h.jsx(X1,{isOpen:L,onClose:()=>S(!1),cards:G(`exile-${Z}`),playerColor:Ze(Z),playerId:Z,isInteractive:Z===t,viewerPlayerId:t}),h.jsx(J1,{isOpen:k,onClose:()=>c(!1),cards:G(`deck-${Z}`),playerColor:Ze(Z),playerId:Z,viewerPlayerId:t,revealedCard:R}),h.jsx(G1,{isOpen:p,onClose:()=>g(!1),currentPlayerId:t}),w&&h.jsx(tb,{playerId:t,onClose:()=>C(!1)}),d&&h.jsx(W1,{message:d.message,onConfirm:d.onConfirm,onCancel:()=>y(null)}),h.jsx(rb,{isOpen:T,onClose:()=>_(!1)})]})]})}if(window.location.pathname!=="/"&&!window.location.hash){const e="/#"+window.location.pathname.slice(1)+window.location.search+window.location.hash;window.location.replace(e)}_a.createRoot(document.getElementById("root")).render(h.jsx(qm.StrictMode,{children:h.jsx(ib,{})}));
