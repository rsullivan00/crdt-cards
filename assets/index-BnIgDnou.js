(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wh={exports:{}},ml={},xh={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=Symbol.for("react.element"),a0=Symbol.for("react.portal"),c0=Symbol.for("react.fragment"),u0=Symbol.for("react.strict_mode"),d0=Symbol.for("react.profiler"),f0=Symbol.for("react.provider"),h0=Symbol.for("react.context"),p0=Symbol.for("react.forward_ref"),g0=Symbol.for("react.suspense"),m0=Symbol.for("react.memo"),y0=Symbol.for("react.lazy"),wd=Symbol.iterator;function v0(e){return e===null||typeof e!="object"?null:(e=wd&&e[wd]||e["@@iterator"],typeof e=="function"?e:null)}var bh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ch=Object.assign,Sh={};function jo(e,t,n){this.props=e,this.context=t,this.refs=Sh,this.updater=n||bh}jo.prototype.isReactComponent={};jo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kh(){}kh.prototype=jo.prototype;function Yc(e,t,n){this.props=e,this.context=t,this.refs=Sh,this.updater=n||bh}var Kc=Yc.prototype=new kh;Kc.constructor=Yc;Ch(Kc,jo.prototype);Kc.isPureReactComponent=!0;var xd=Array.isArray,_h=Object.prototype.hasOwnProperty,Gc={current:null},Eh={key:!0,ref:!0,__self:!0,__source:!0};function jh(e,t,n){var r,o={},i=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)_h.call(t,r)&&!Eh.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Ai,type:e,key:i,ref:s,props:o,_owner:Gc.current}}function w0(e,t){return{$$typeof:Ai,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Qc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ai}function x0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var bd=/\/+/g;function $l(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x0(""+e.key):t.toString(36)}function gs(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Ai:case a0:s=!0}}if(s)return s=e,o=o(s),e=r===""?"."+$l(s,0):r,xd(o)?(n="",e!=null&&(n=e.replace(bd,"$&/")+"/"),gs(o,t,n,"",function(d){return d})):o!=null&&(Qc(o)&&(o=w0(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(bd,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=r===""?".":r+":",xd(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+$l(i,a);s+=gs(i,t,n,c,o)}else if(c=v0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+$l(i,a++),s+=gs(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Hi(e,t,n){if(e==null)return e;var r=[],o=0;return gs(e,r,"","",function(i){return t.call(n,i,o++)}),r}function b0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},ms={transition:null},C0={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:ms,ReactCurrentOwner:Gc};function Th(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Hi,forEach:function(e,t,n){Hi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hi(e,function(){t++}),t},toArray:function(e){return Hi(e,function(t){return t})||[]},only:function(e){if(!Qc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=jo;Ce.Fragment=c0;Ce.Profiler=d0;Ce.PureComponent=Yc;Ce.StrictMode=u0;Ce.Suspense=g0;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C0;Ce.act=Th;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ch({},e.props),o=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=Gc.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)_h.call(t,c)&&!Eh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ai,type:e.type,key:o,ref:i,props:r,_owner:s}};Ce.createContext=function(e){return e={$$typeof:h0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f0,_context:e},e.Consumer=e};Ce.createElement=jh;Ce.createFactory=function(e){var t=jh.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:p0,render:e}};Ce.isValidElement=Qc;Ce.lazy=function(e){return{$$typeof:y0,_payload:{_status:-1,_result:e},_init:b0}};Ce.memo=function(e,t){return{$$typeof:m0,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=ms.transition;ms.transition={};try{e()}finally{ms.transition=t}};Ce.unstable_act=Th;Ce.useCallback=function(e,t){return pt.current.useCallback(e,t)};Ce.useContext=function(e){return pt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return pt.current.useEffect(e,t)};Ce.useId=function(){return pt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return pt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};Ce.useRef=function(e){return pt.current.useRef(e)};Ce.useState=function(e){return pt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return pt.current.useTransition()};Ce.version="18.3.1";xh.exports=Ce;var $=xh.exports;const S0=vh($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=$,_0=Symbol.for("react.element"),E0=Symbol.for("react.fragment"),j0=Object.prototype.hasOwnProperty,T0=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R0={key:!0,ref:!0,__self:!0,__source:!0};function Rh(e,t,n){var r,o={},i=null,s=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)j0.call(t,r)&&!R0.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:_0,type:e,key:i,ref:s,props:o,_owner:T0.current}}ml.Fragment=E0;ml.jsx=Rh;ml.jsxs=Rh;wh.exports=ml;var u=wh.exports,Oa={},Mh={exports:{}},Mt={},Dh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,U){var re=K.length;K.push(U);e:for(;0<re;){var ce=re-1>>>1,ve=K[ce];if(0<o(ve,U))K[ce]=U,K[re]=ve,re=ce;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var U=K[0],re=K.pop();if(re!==U){K[0]=re;e:for(var ce=0,ve=K.length,me=ve>>>1;ce<me;){var oe=2*(ce+1)-1,de=K[oe],G=oe+1,fe=K[G];if(0>o(de,re))G<ve&&0>o(fe,de)?(K[ce]=fe,K[G]=re,ce=G):(K[ce]=de,K[oe]=re,ce=oe);else if(G<ve&&0>o(fe,re))K[ce]=fe,K[G]=re,ce=G;else break e}}return U}function o(K,U){var re=K.sortIndex-U.sortIndex;return re!==0?re:K.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var c=[],d=[],m=1,h=null,p=3,y=!1,v=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(K){for(var U=n(d);U!==null;){if(U.callback===null)r(d);else if(U.startTime<=K)r(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(d)}}function w(K){if(C=!1,f(K),!v)if(n(c)!==null)v=!0,se(_);else{var U=n(d);U!==null&&ge(w,U.startTime-K)}}function _(K,U){v=!1,C&&(C=!1,b(T),T=-1),y=!0;var re=p;try{for(f(U),h=n(c);h!==null&&(!(h.expirationTime>U)||K&&!D());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var ve=ce(h.expirationTime<=U);U=e.unstable_now(),typeof ve=="function"?h.callback=ve:h===n(c)&&r(c),f(U)}else r(c);h=n(c)}if(h!==null)var me=!0;else{var oe=n(d);oe!==null&&ge(w,oe.startTime-U),me=!1}return me}finally{h=null,p=re,y=!1}}var M=!1,k=null,T=-1,z=5,E=-1;function D(){return!(e.unstable_now()-E<z)}function I(){if(k!==null){var K=e.unstable_now();E=K;var U=!0;try{U=k(!0,K)}finally{U?W():(M=!1,k=null)}}else M=!1}var W;if(typeof S=="function")W=function(){S(I)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,q=Q.port2;Q.port1.onmessage=I,W=function(){q.postMessage(null)}}else W=function(){A(I,0)};function se(K){k=K,M||(M=!0,W())}function ge(K,U){T=A(function(){K(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,se(_))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(K){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var re=p;p=U;try{return K()}finally{p=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,U){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var re=p;p=K;try{return U()}finally{p=re}},e.unstable_scheduleCallback=function(K,U,re){var ce=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ce+re:ce):re=ce,K){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=re+ve,K={id:m++,callback:U,priorityLevel:K,startTime:re,expirationTime:ve,sortIndex:-1},re>ce?(K.sortIndex=re,t(d,K),n(c)===null&&K===n(d)&&(C?(b(T),T=-1):C=!0,ge(w,re-ce))):(K.sortIndex=ve,t(c,K),v||y||(v=!0,se(_))),K},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(K){var U=p;return function(){var re=p;p=U;try{return K.apply(this,arguments)}finally{p=re}}}})(Lh);Dh.exports=Lh;var M0=Dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=$,jt=M0;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ah=new Set,ai={};function Mr(e,t){uo(e,t),uo(e+"Capture",t)}function uo(e,t){for(ai[e]=t,e=0;e<t.length;e++)Ah.add(t[e])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fa=Object.prototype.hasOwnProperty,L0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cd={},Sd={};function A0(e){return Fa.call(Sd,e)?!0:Fa.call(Cd,e)?!1:L0.test(e)?Sd[e]=!0:(Cd[e]=!0,!1)}function z0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N0(e,t,n,r){if(t===null||typeof t>"u"||z0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,o,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){it[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];it[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){it[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){it[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){it[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){it[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){it[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){it[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){it[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xc=/[\-:]([a-z])/g;function Jc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xc,Jc);it[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xc,Jc);it[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xc,Jc);it[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){it[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});it.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){it[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function qc(e,t,n,r){var o=it.hasOwnProperty(t)?it[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N0(t,n,o,r)&&(n=null),r||o===null?A0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Tn=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vi=Symbol.for("react.element"),Br=Symbol.for("react.portal"),Ur=Symbol.for("react.fragment"),Zc=Symbol.for("react.strict_mode"),Ia=Symbol.for("react.profiler"),zh=Symbol.for("react.provider"),Nh=Symbol.for("react.context"),eu=Symbol.for("react.forward_ref"),Pa=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),tu=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),Oh=Symbol.for("react.offscreen"),kd=Symbol.iterator;function zo(e){return e===null||typeof e!="object"?null:(e=kd&&e[kd]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,Wl;function Ho(e){if(Wl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wl=t&&t[1]||""}return`
`+Wl+e}var Hl=!1;function Vl(e,t){if(!e||Hl)return"";Hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var c=`
`+o[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=a);break}}}finally{Hl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ho(e):""}function O0(e){switch(e.tag){case 5:return Ho(e.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return e=Vl(e.type,!1),e;case 11:return e=Vl(e.type.render,!1),e;case 1:return e=Vl(e.type,!0),e;default:return""}}function Ua(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ur:return"Fragment";case Br:return"Portal";case Ia:return"Profiler";case Zc:return"StrictMode";case Pa:return"Suspense";case Ba:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nh:return(e.displayName||"Context")+".Consumer";case zh:return(e._context.displayName||"Context")+".Provider";case eu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tu:return t=e.displayName||null,t!==null?t:Ua(e.type)||"Memo";case Ln:t=e._payload,e=e._init;try{return Ua(e(t))}catch{}}return null}function F0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ua(t);case 8:return t===Zc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function I0(e){var t=Fh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yi(e){e._valueTracker||(e._valueTracker=I0(e))}function Ih(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Fh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function As(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $a(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _d(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ph(e,t){t=t.checked,t!=null&&qc(e,"checked",t,!1)}function Wa(e,t){Ph(e,t);var n=Qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ha(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ha(e,t.type,Qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ed(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ha(e,t,n){(t!=="number"||As(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Vo=Array.isArray;function eo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Va(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(Vo(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Qn(n)}}function Bh(e,t){var n=Qn(t.value),r=Qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Td(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ya(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ki,$h=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ki=Ki||document.createElement("div"),Ki.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ki.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ci(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P0=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(e){P0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qo[t]=Qo[e]})});function Wh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Qo.hasOwnProperty(e)&&Qo[e]?(""+t).trim():t+"px"}function Hh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Wh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var B0=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(B0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ga(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xa=null,to=null,no=null;function Rd(e){if(e=Oi(e)){if(typeof Xa!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=bl(t),Xa(e.stateNode,e.type,t))}}function Vh(e){to?no?no.push(e):no=[e]:to=e}function Yh(){if(to){var e=to,t=no;if(no=to=null,Rd(e),t)for(e=0;e<t.length;e++)Rd(t[e])}}function Kh(e,t){return e(t)}function Gh(){}var Yl=!1;function Qh(e,t,n){if(Yl)return e(t,n);Yl=!0;try{return Kh(e,t,n)}finally{Yl=!1,(to!==null||no!==null)&&(Gh(),Yh())}}function ui(e,t){var n=e.stateNode;if(n===null)return null;var r=bl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var Ja=!1;if(Cn)try{var No={};Object.defineProperty(No,"passive",{get:function(){Ja=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Ja=!1}function U0(e,t,n,r,o,i,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Xo=!1,zs=null,Ns=!1,qa=null,$0={onError:function(e){Xo=!0,zs=e}};function W0(e,t,n,r,o,i,s,a,c){Xo=!1,zs=null,U0.apply($0,arguments)}function H0(e,t,n,r,o,i,s,a,c){if(W0.apply(this,arguments),Xo){if(Xo){var d=zs;Xo=!1,zs=null}else throw Error(Y(198));Ns||(Ns=!0,qa=d)}}function Dr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Md(e){if(Dr(e)!==e)throw Error(Y(188))}function V0(e){var t=e.alternate;if(!t){if(t=Dr(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return Md(o),e;if(i===r)return Md(o),t;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function Jh(e){return e=V0(e),e!==null?qh(e):null}function qh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qh(e);if(t!==null)return t;e=e.sibling}return null}var Zh=jt.unstable_scheduleCallback,Dd=jt.unstable_cancelCallback,Y0=jt.unstable_shouldYield,K0=jt.unstable_requestPaint,$e=jt.unstable_now,G0=jt.unstable_getCurrentPriorityLevel,ru=jt.unstable_ImmediatePriority,ep=jt.unstable_UserBlockingPriority,Os=jt.unstable_NormalPriority,Q0=jt.unstable_LowPriority,tp=jt.unstable_IdlePriority,yl=null,nn=null;function X0(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(yl,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Z0,J0=Math.log,q0=Math.LN2;function Z0(e){return e>>>=0,e===0?32:31-(J0(e)/q0|0)|0}var Gi=64,Qi=4194304;function Yo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~o;a!==0?r=Yo(a):(i&=s,i!==0&&(r=Yo(i)))}else s=n&~o,s!==0?r=Yo(s):i!==0&&(r=Yo(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yt(t),o=1<<n,r|=e[n],t&=~o;return r}function ey(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ty(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-Yt(i),a=1<<s,c=o[s];c===-1?(!(a&n)||a&r)&&(o[s]=ey(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function np(){var e=Gi;return Gi<<=1,!(Gi&4194240)&&(Gi=64),e}function Kl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=n}function ny(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Yt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function ou(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Re=0;function rp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var op,iu,ip,sp,lp,ec=!1,Xi=[],Un=null,$n=null,Wn=null,di=new Map,fi=new Map,Nn=[],ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ld(e,t){switch(e){case"focusin":case"focusout":Un=null;break;case"dragenter":case"dragleave":$n=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":di.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fi.delete(t.pointerId)}}function Oo(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Oi(t),t!==null&&iu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function oy(e,t,n,r,o){switch(t){case"focusin":return Un=Oo(Un,e,t,n,r,o),!0;case"dragenter":return $n=Oo($n,e,t,n,r,o),!0;case"mouseover":return Wn=Oo(Wn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return di.set(i,Oo(di.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,fi.set(i,Oo(fi.get(i)||null,e,t,n,r,o)),!0}return!1}function ap(e){var t=ar(e.target);if(t!==null){var n=Dr(t);if(n!==null){if(t=n.tag,t===13){if(t=Xh(n),t!==null){e.blockedOn=t,lp(e.priority,function(){ip(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ys(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Qa=r,n.target.dispatchEvent(r),Qa=null}else return t=Oi(n),t!==null&&iu(t),e.blockedOn=n,!1;t.shift()}return!0}function Ad(e,t,n){ys(e)&&n.delete(t)}function iy(){ec=!1,Un!==null&&ys(Un)&&(Un=null),$n!==null&&ys($n)&&($n=null),Wn!==null&&ys(Wn)&&(Wn=null),di.forEach(Ad),fi.forEach(Ad)}function Fo(e,t){e.blockedOn===t&&(e.blockedOn=null,ec||(ec=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,iy)))}function hi(e){function t(o){return Fo(o,e)}if(0<Xi.length){Fo(Xi[0],e);for(var n=1;n<Xi.length;n++){var r=Xi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Un!==null&&Fo(Un,e),$n!==null&&Fo($n,e),Wn!==null&&Fo(Wn,e),di.forEach(t),fi.forEach(t),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)ap(n),n.blockedOn===null&&Nn.shift()}var ro=Tn.ReactCurrentBatchConfig,Is=!0;function sy(e,t,n,r){var o=Re,i=ro.transition;ro.transition=null;try{Re=1,su(e,t,n,r)}finally{Re=o,ro.transition=i}}function ly(e,t,n,r){var o=Re,i=ro.transition;ro.transition=null;try{Re=4,su(e,t,n,r)}finally{Re=o,ro.transition=i}}function su(e,t,n,r){if(Is){var o=tc(e,t,n,r);if(o===null)ra(e,t,r,Ps,n),Ld(e,r);else if(oy(o,e,t,n,r))r.stopPropagation();else if(Ld(e,r),t&4&&-1<ry.indexOf(e)){for(;o!==null;){var i=Oi(o);if(i!==null&&op(i),i=tc(e,t,n,r),i===null&&ra(e,t,r,Ps,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else ra(e,t,r,null,n)}}var Ps=null;function tc(e,t,n,r){if(Ps=null,e=nu(r),e=ar(e),e!==null)if(t=Dr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ps=e,null}function cp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G0()){case ru:return 1;case ep:return 4;case Os:case Q0:return 16;case tp:return 536870912;default:return 16}default:return 16}}var In=null,lu=null,vs=null;function up(){if(vs)return vs;var e,t=lu,n=t.length,r,o="value"in In?In.value:In.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===o[i-r];r++);return vs=o.slice(e,1<r?1-r:void 0)}function ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ji(){return!0}function zd(){return!1}function Dt(e){function t(n,r,o,i,s){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ji:zd,this.isPropagationStopped=zd,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),t}var To={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},au=Dt(To),Ni=Pe({},To,{view:0,detail:0}),ay=Dt(Ni),Gl,Ql,Io,vl=Pe({},Ni,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Io&&(Io&&e.type==="mousemove"?(Gl=e.screenX-Io.screenX,Ql=e.screenY-Io.screenY):Ql=Gl=0,Io=e),Gl)},movementY:function(e){return"movementY"in e?e.movementY:Ql}}),Nd=Dt(vl),cy=Pe({},vl,{dataTransfer:0}),uy=Dt(cy),dy=Pe({},Ni,{relatedTarget:0}),Xl=Dt(dy),fy=Pe({},To,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=Dt(fy),py=Pe({},To,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gy=Dt(py),my=Pe({},To,{data:0}),Od=Dt(my),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xy(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wy[e])?!!t[e]:!1}function cu(){return xy}var by=Pe({},Ni,{key:function(e){if(e.key){var t=yy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cy=Dt(by),Sy=Pe({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=Dt(Sy),ky=Pe({},Ni,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),_y=Dt(ky),Ey=Pe({},To,{propertyName:0,elapsedTime:0,pseudoElement:0}),jy=Dt(Ey),Ty=Pe({},vl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ry=Dt(Ty),My=[9,13,27,32],uu=Cn&&"CompositionEvent"in window,Jo=null;Cn&&"documentMode"in document&&(Jo=document.documentMode);var Dy=Cn&&"TextEvent"in window&&!Jo,dp=Cn&&(!uu||Jo&&8<Jo&&11>=Jo),Id=" ",Pd=!1;function fp(e,t){switch(e){case"keyup":return My.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function Ly(e,t){switch(e){case"compositionend":return hp(t);case"keypress":return t.which!==32?null:(Pd=!0,Id);case"textInput":return e=t.data,e===Id&&Pd?null:e;default:return null}}function Ay(e,t){if($r)return e==="compositionend"||!uu&&fp(e,t)?(e=up(),vs=lu=In=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dp&&t.locale!=="ko"?null:t.data;default:return null}}var zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zy[e.type]:t==="textarea"}function pp(e,t,n,r){Vh(r),t=Bs(t,"onChange"),0<t.length&&(n=new au("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qo=null,pi=null;function Ny(e){_p(e,0)}function wl(e){var t=Vr(e);if(Ih(t))return e}function Oy(e,t){if(e==="change")return t}var gp=!1;if(Cn){var Jl;if(Cn){var ql="oninput"in document;if(!ql){var Ud=document.createElement("div");Ud.setAttribute("oninput","return;"),ql=typeof Ud.oninput=="function"}Jl=ql}else Jl=!1;gp=Jl&&(!document.documentMode||9<document.documentMode)}function $d(){qo&&(qo.detachEvent("onpropertychange",mp),pi=qo=null)}function mp(e){if(e.propertyName==="value"&&wl(pi)){var t=[];pp(t,pi,e,nu(e)),Qh(Ny,t)}}function Fy(e,t,n){e==="focusin"?($d(),qo=t,pi=n,qo.attachEvent("onpropertychange",mp)):e==="focusout"&&$d()}function Iy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wl(pi)}function Py(e,t){if(e==="click")return wl(t)}function By(e,t){if(e==="input"||e==="change")return wl(t)}function Uy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:Uy;function gi(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Fa.call(t,o)||!Gt(e[o],t[o]))return!1}return!0}function Wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hd(e,t){var n=Wd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wd(n)}}function yp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vp(){for(var e=window,t=As();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=As(e.document)}return t}function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $y(e){var t=vp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&yp(n.ownerDocument.documentElement,n)){if(r!==null&&du(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Hd(n,i);var s=Hd(n,r);o&&s&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Wy=Cn&&"documentMode"in document&&11>=document.documentMode,Wr=null,nc=null,Zo=null,rc=!1;function Vd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rc||Wr==null||Wr!==As(r)||(r=Wr,"selectionStart"in r&&du(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&gi(Zo,r)||(Zo=r,r=Bs(nc,"onSelect"),0<r.length&&(t=new au("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Wr)))}function qi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hr={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionend:qi("Transition","TransitionEnd")},Zl={},wp={};Cn&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function xl(e){if(Zl[e])return Zl[e];if(!Hr[e])return e;var t=Hr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wp)return Zl[e]=t[n];return e}var xp=xl("animationend"),bp=xl("animationiteration"),Cp=xl("animationstart"),Sp=xl("transitionend"),kp=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){kp.set(e,t),Mr(t,[e])}for(var ea=0;ea<Yd.length;ea++){var ta=Yd[ea],Hy=ta.toLowerCase(),Vy=ta[0].toUpperCase()+ta.slice(1);er(Hy,"on"+Vy)}er(xp,"onAnimationEnd");er(bp,"onAnimationIteration");er(Cp,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(Sp,"onTransitionEnd");uo("onMouseEnter",["mouseout","mouseover"]);uo("onMouseLeave",["mouseout","mouseover"]);uo("onPointerEnter",["pointerout","pointerover"]);uo("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function Kd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,H0(r,t,void 0,e),e.currentTarget=null}function _p(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;Kd(o,a,d),i=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;Kd(o,a,d),i=c}}}if(Ns)throw e=qa,Ns=!1,qa=null,e}function Le(e,t){var n=t[ac];n===void 0&&(n=t[ac]=new Set);var r=e+"__bubble";n.has(r)||(Ep(t,e,2,!1),n.add(r))}function na(e,t,n){var r=0;t&&(r|=4),Ep(n,e,r,t)}var Zi="_reactListening"+Math.random().toString(36).slice(2);function mi(e){if(!e[Zi]){e[Zi]=!0,Ah.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||na(n,!1,e),na(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zi]||(t[Zi]=!0,na("selectionchange",!1,t))}}function Ep(e,t,n,r){switch(cp(t)){case 1:var o=sy;break;case 4:o=ly;break;default:o=su}n=o.bind(null,t,n,e),o=void 0,!Ja||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ra(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;s=s.return}for(;a!==null;){if(s=ar(a),s===null)return;if(c=s.tag,c===5||c===6){r=i=s;continue e}a=a.parentNode}}r=r.return}Qh(function(){var d=i,m=nu(n),h=[];e:{var p=kp.get(e);if(p!==void 0){var y=au,v=e;switch(e){case"keypress":if(ws(n)===0)break e;case"keydown":case"keyup":y=Cy;break;case"focusin":v="focus",y=Xl;break;case"focusout":v="blur",y=Xl;break;case"beforeblur":case"afterblur":y=Xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Nd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_y;break;case xp:case bp:case Cp:y=hy;break;case Sp:y=jy;break;case"scroll":y=ay;break;case"wheel":y=Ry;break;case"copy":case"cut":case"paste":y=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fd}var C=(t&4)!==0,A=!C&&e==="scroll",b=C?p!==null?p+"Capture":null:p;C=[];for(var S=d,f;S!==null;){f=S;var w=f.stateNode;if(f.tag===5&&w!==null&&(f=w,b!==null&&(w=ui(S,b),w!=null&&C.push(yi(S,w,f)))),A)break;S=S.return}0<C.length&&(p=new y(p,v,null,n,m),h.push({event:p,listeners:C}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&n!==Qa&&(v=n.relatedTarget||n.fromElement)&&(ar(v)||v[Sn]))break e;if((y||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=d,v=v?ar(v):null,v!==null&&(A=Dr(v),v!==A||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=d),y!==v)){if(C=Nd,w="onMouseLeave",b="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(C=Fd,w="onPointerLeave",b="onPointerEnter",S="pointer"),A=y==null?p:Vr(y),f=v==null?p:Vr(v),p=new C(w,S+"leave",y,n,m),p.target=A,p.relatedTarget=f,w=null,ar(m)===d&&(C=new C(b,S+"enter",v,n,m),C.target=f,C.relatedTarget=A,w=C),A=w,y&&v)t:{for(C=y,b=v,S=0,f=C;f;f=Nr(f))S++;for(f=0,w=b;w;w=Nr(w))f++;for(;0<S-f;)C=Nr(C),S--;for(;0<f-S;)b=Nr(b),f--;for(;S--;){if(C===b||b!==null&&C===b.alternate)break t;C=Nr(C),b=Nr(b)}C=null}else C=null;y!==null&&Gd(h,p,y,C,!1),v!==null&&A!==null&&Gd(h,A,v,C,!0)}}e:{if(p=d?Vr(d):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var _=Oy;else if(Bd(p))if(gp)_=By;else{_=Iy;var M=Fy}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=Py);if(_&&(_=_(e,d))){pp(h,_,n,m);break e}M&&M(e,p,d),e==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Ha(p,"number",p.value)}switch(M=d?Vr(d):window,e){case"focusin":(Bd(M)||M.contentEditable==="true")&&(Wr=M,nc=d,Zo=null);break;case"focusout":Zo=nc=Wr=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,Vd(h,n,m);break;case"selectionchange":if(Wy)break;case"keydown":case"keyup":Vd(h,n,m)}var k;if(uu)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $r?fp(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(dp&&n.locale!=="ko"&&($r||T!=="onCompositionStart"?T==="onCompositionEnd"&&$r&&(k=up()):(In=m,lu="value"in In?In.value:In.textContent,$r=!0)),M=Bs(d,T),0<M.length&&(T=new Od(T,e,null,n,m),h.push({event:T,listeners:M}),k?T.data=k:(k=hp(n),k!==null&&(T.data=k)))),(k=Dy?Ly(e,n):Ay(e,n))&&(d=Bs(d,"onBeforeInput"),0<d.length&&(m=new Od("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:d}),m.data=k))}_p(h,t)})}function yi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bs(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ui(e,n),i!=null&&r.unshift(yi(e,i,o)),i=ui(e,t),i!=null&&r.push(yi(e,i,o))),e=e.return}return r}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gd(e,t,n,r,o){for(var i=t._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,o?(c=ui(n,i),c!=null&&s.unshift(yi(n,c,a))):o||(c=ui(n,i),c!=null&&s.push(yi(n,c,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Ky=/\r\n?/g,Gy=/\u0000|\uFFFD/g;function Qd(e){return(typeof e=="string"?e:""+e).replace(Ky,`
`).replace(Gy,"")}function es(e,t,n){if(t=Qd(t),Qd(e)!==t&&n)throw Error(Y(425))}function Us(){}var oc=null,ic=null;function sc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lc=typeof setTimeout=="function"?setTimeout:void 0,Qy=typeof clearTimeout=="function"?clearTimeout:void 0,Xd=typeof Promise=="function"?Promise:void 0,Xy=typeof queueMicrotask=="function"?queueMicrotask:typeof Xd<"u"?function(e){return Xd.resolve(null).then(e).catch(Jy)}:lc;function Jy(e){setTimeout(function(){throw e})}function oa(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),hi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);hi(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ro,vi="__reactProps$"+Ro,Sn="__reactContainer$"+Ro,ac="__reactEvents$"+Ro,qy="__reactListeners$"+Ro,Zy="__reactHandles$"+Ro;function ar(e){var t=e[tn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Sn]||n[tn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Jd(e);e!==null;){if(n=e[tn])return n;e=Jd(e)}return t}e=n,n=e.parentNode}return null}function Oi(e){return e=e[tn]||e[Sn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function bl(e){return e[vi]||null}var cc=[],Yr=-1;function tr(e){return{current:e}}function Ae(e){0>Yr||(e.current=cc[Yr],cc[Yr]=null,Yr--)}function De(e,t){Yr++,cc[Yr]=e.current,e.current=t}var Xn={},dt=tr(Xn),vt=tr(!1),vr=Xn;function fo(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function wt(e){return e=e.childContextTypes,e!=null}function $s(){Ae(vt),Ae(dt)}function qd(e,t,n){if(dt.current!==Xn)throw Error(Y(168));De(dt,t),De(vt,n)}function jp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Y(108,F0(e)||"Unknown",o));return Pe({},n,r)}function Ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,vr=dt.current,De(dt,e),De(vt,vt.current),!0}function Zd(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=jp(e,t,vr),r.__reactInternalMemoizedMergedChildContext=e,Ae(vt),Ae(dt),De(dt,e)):Ae(vt),De(vt,n)}var gn=null,Cl=!1,ia=!1;function Tp(e){gn===null?gn=[e]:gn.push(e)}function ev(e){Cl=!0,Tp(e)}function nr(){if(!ia&&gn!==null){ia=!0;var e=0,t=Re;try{var n=gn;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gn=null,Cl=!1}catch(o){throw gn!==null&&(gn=gn.slice(e+1)),Zh(ru,nr),o}finally{Re=t,ia=!1}}return null}var Kr=[],Gr=0,Hs=null,Vs=0,Lt=[],At=0,wr=null,yn=1,vn="";function ir(e,t){Kr[Gr++]=Vs,Kr[Gr++]=Hs,Hs=e,Vs=t}function Rp(e,t,n){Lt[At++]=yn,Lt[At++]=vn,Lt[At++]=wr,wr=e;var r=yn;e=vn;var o=32-Yt(r)-1;r&=~(1<<o),n+=1;var i=32-Yt(t)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,yn=1<<32-Yt(t)+o|n<<o|r,vn=i+e}else yn=1<<i|n<<o|r,vn=e}function fu(e){e.return!==null&&(ir(e,1),Rp(e,1,0))}function hu(e){for(;e===Hs;)Hs=Kr[--Gr],Kr[Gr]=null,Vs=Kr[--Gr],Kr[Gr]=null;for(;e===wr;)wr=Lt[--At],Lt[At]=null,vn=Lt[--At],Lt[At]=null,yn=Lt[--At],Lt[At]=null}var _t=null,St=null,ze=!1,Vt=null;function Mp(e,t){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ef(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_t=e,St=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_t=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wr!==null?{id:yn,overflow:vn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,_t=e,St=null,!0):!1;default:return!1}}function uc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dc(e){if(ze){var t=St;if(t){var n=t;if(!ef(e,t)){if(uc(e))throw Error(Y(418));t=Hn(n.nextSibling);var r=_t;t&&ef(e,t)?Mp(r,n):(e.flags=e.flags&-4097|2,ze=!1,_t=e)}}else{if(uc(e))throw Error(Y(418));e.flags=e.flags&-4097|2,ze=!1,_t=e}}}function tf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_t=e}function ts(e){if(e!==_t)return!1;if(!ze)return tf(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sc(e.type,e.memoizedProps)),t&&(t=St)){if(uc(e))throw Dp(),Error(Y(418));for(;t;)Mp(e,t),t=Hn(t.nextSibling)}if(tf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=_t?Hn(e.stateNode.nextSibling):null;return!0}function Dp(){for(var e=St;e;)e=Hn(e.nextSibling)}function ho(){St=_t=null,ze=!1}function pu(e){Vt===null?Vt=[e]:Vt.push(e)}var tv=Tn.ReactCurrentBatchConfig;function Po(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function ns(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nf(e){var t=e._init;return t(e._payload)}function Lp(e){function t(b,S){if(e){var f=b.deletions;f===null?(b.deletions=[S],b.flags|=16):f.push(S)}}function n(b,S){if(!e)return null;for(;S!==null;)t(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function o(b,S){return b=Gn(b,S),b.index=0,b.sibling=null,b}function i(b,S,f){return b.index=f,e?(f=b.alternate,f!==null?(f=f.index,f<S?(b.flags|=2,S):f):(b.flags|=2,S)):(b.flags|=1048576,S)}function s(b){return e&&b.alternate===null&&(b.flags|=2),b}function a(b,S,f,w){return S===null||S.tag!==6?(S=fa(f,b.mode,w),S.return=b,S):(S=o(S,f),S.return=b,S)}function c(b,S,f,w){var _=f.type;return _===Ur?m(b,S,f.props.children,w,f.key):S!==null&&(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ln&&nf(_)===S.type)?(w=o(S,f.props),w.ref=Po(b,S,f),w.return=b,w):(w=Es(f.type,f.key,f.props,null,b.mode,w),w.ref=Po(b,S,f),w.return=b,w)}function d(b,S,f,w){return S===null||S.tag!==4||S.stateNode.containerInfo!==f.containerInfo||S.stateNode.implementation!==f.implementation?(S=ha(f,b.mode,w),S.return=b,S):(S=o(S,f.children||[]),S.return=b,S)}function m(b,S,f,w,_){return S===null||S.tag!==7?(S=fr(f,b.mode,w,_),S.return=b,S):(S=o(S,f),S.return=b,S)}function h(b,S,f){if(typeof S=="string"&&S!==""||typeof S=="number")return S=fa(""+S,b.mode,f),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vi:return f=Es(S.type,S.key,S.props,null,b.mode,f),f.ref=Po(b,null,S),f.return=b,f;case Br:return S=ha(S,b.mode,f),S.return=b,S;case Ln:var w=S._init;return h(b,w(S._payload),f)}if(Vo(S)||zo(S))return S=fr(S,b.mode,f,null),S.return=b,S;ns(b,S)}return null}function p(b,S,f,w){var _=S!==null?S.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return _!==null?null:a(b,S,""+f,w);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Vi:return f.key===_?c(b,S,f,w):null;case Br:return f.key===_?d(b,S,f,w):null;case Ln:return _=f._init,p(b,S,_(f._payload),w)}if(Vo(f)||zo(f))return _!==null?null:m(b,S,f,w,null);ns(b,f)}return null}function y(b,S,f,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return b=b.get(f)||null,a(S,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vi:return b=b.get(w.key===null?f:w.key)||null,c(S,b,w,_);case Br:return b=b.get(w.key===null?f:w.key)||null,d(S,b,w,_);case Ln:var M=w._init;return y(b,S,f,M(w._payload),_)}if(Vo(w)||zo(w))return b=b.get(f)||null,m(S,b,w,_,null);ns(S,w)}return null}function v(b,S,f,w){for(var _=null,M=null,k=S,T=S=0,z=null;k!==null&&T<f.length;T++){k.index>T?(z=k,k=null):z=k.sibling;var E=p(b,k,f[T],w);if(E===null){k===null&&(k=z);break}e&&k&&E.alternate===null&&t(b,k),S=i(E,S,T),M===null?_=E:M.sibling=E,M=E,k=z}if(T===f.length)return n(b,k),ze&&ir(b,T),_;if(k===null){for(;T<f.length;T++)k=h(b,f[T],w),k!==null&&(S=i(k,S,T),M===null?_=k:M.sibling=k,M=k);return ze&&ir(b,T),_}for(k=r(b,k);T<f.length;T++)z=y(k,b,T,f[T],w),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?T:z.key),S=i(z,S,T),M===null?_=z:M.sibling=z,M=z);return e&&k.forEach(function(D){return t(b,D)}),ze&&ir(b,T),_}function C(b,S,f,w){var _=zo(f);if(typeof _!="function")throw Error(Y(150));if(f=_.call(f),f==null)throw Error(Y(151));for(var M=_=null,k=S,T=S=0,z=null,E=f.next();k!==null&&!E.done;T++,E=f.next()){k.index>T?(z=k,k=null):z=k.sibling;var D=p(b,k,E.value,w);if(D===null){k===null&&(k=z);break}e&&k&&D.alternate===null&&t(b,k),S=i(D,S,T),M===null?_=D:M.sibling=D,M=D,k=z}if(E.done)return n(b,k),ze&&ir(b,T),_;if(k===null){for(;!E.done;T++,E=f.next())E=h(b,E.value,w),E!==null&&(S=i(E,S,T),M===null?_=E:M.sibling=E,M=E);return ze&&ir(b,T),_}for(k=r(b,k);!E.done;T++,E=f.next())E=y(k,b,T,E.value,w),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?T:E.key),S=i(E,S,T),M===null?_=E:M.sibling=E,M=E);return e&&k.forEach(function(I){return t(b,I)}),ze&&ir(b,T),_}function A(b,S,f,w){if(typeof f=="object"&&f!==null&&f.type===Ur&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Vi:e:{for(var _=f.key,M=S;M!==null;){if(M.key===_){if(_=f.type,_===Ur){if(M.tag===7){n(b,M.sibling),S=o(M,f.props.children),S.return=b,b=S;break e}}else if(M.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ln&&nf(_)===M.type){n(b,M.sibling),S=o(M,f.props),S.ref=Po(b,M,f),S.return=b,b=S;break e}n(b,M);break}else t(b,M);M=M.sibling}f.type===Ur?(S=fr(f.props.children,b.mode,w,f.key),S.return=b,b=S):(w=Es(f.type,f.key,f.props,null,b.mode,w),w.ref=Po(b,S,f),w.return=b,b=w)}return s(b);case Br:e:{for(M=f.key;S!==null;){if(S.key===M)if(S.tag===4&&S.stateNode.containerInfo===f.containerInfo&&S.stateNode.implementation===f.implementation){n(b,S.sibling),S=o(S,f.children||[]),S.return=b,b=S;break e}else{n(b,S);break}else t(b,S);S=S.sibling}S=ha(f,b.mode,w),S.return=b,b=S}return s(b);case Ln:return M=f._init,A(b,S,M(f._payload),w)}if(Vo(f))return v(b,S,f,w);if(zo(f))return C(b,S,f,w);ns(b,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,S!==null&&S.tag===6?(n(b,S.sibling),S=o(S,f),S.return=b,b=S):(n(b,S),S=fa(f,b.mode,w),S.return=b,b=S),s(b)):n(b,S)}return A}var po=Lp(!0),Ap=Lp(!1),Ys=tr(null),Ks=null,Qr=null,gu=null;function mu(){gu=Qr=Ks=null}function yu(e){var t=Ys.current;Ae(Ys),e._currentValue=t}function fc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oo(e,t){Ks=e,gu=Qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(gu!==e)if(e={context:e,memoizedValue:t,next:null},Qr===null){if(Ks===null)throw Error(Y(308));Qr=e,Ks.dependencies={lanes:0,firstContext:e}}else Qr=Qr.next=e;return t}var cr=null;function vu(e){cr===null?cr=[e]:cr.push(e)}function zp(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,vu(t)):(n.next=o.next,o.next=n),t.interleaved=n,kn(e,r)}function kn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var An=!1;function wu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Np(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,kn(e,n)}return o=r.interleaved,o===null?(t.next=t,vu(r)):(t.next=o.next,o.next=t),r.interleaved=t,kn(e,n)}function xs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ou(e,n)}}function rf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Gs(e,t,n,r){var o=e.updateQueue;An=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==s&&(a===null?m.firstBaseUpdate=d:a.next=d,m.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;s=0,m=d=c=null,a=i;do{var p=a.lane,y=a.eventTime;if((r&p)===p){m!==null&&(m=m.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,C=a;switch(p=t,y=n,C.tag){case 1:if(v=C.payload,typeof v=="function"){h=v.call(y,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=C.payload,p=typeof v=="function"?v.call(y,h,p):v,p==null)break e;h=Pe({},h,p);break e;case 2:An=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(d=m=y,c=h):m=m.next=y,s|=p;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;p=a,a=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(m===null&&(c=h),o.baseState=c,o.firstBaseUpdate=d,o.lastBaseUpdate=m,t=o.shared.interleaved,t!==null){o=t;do s|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);br|=s,e.lanes=s,e.memoizedState=h}}function of(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Y(191,o));o.call(r)}}}var Fi={},rn=tr(Fi),wi=tr(Fi),xi=tr(Fi);function ur(e){if(e===Fi)throw Error(Y(174));return e}function xu(e,t){switch(De(xi,t),De(wi,e),De(rn,Fi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ya(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ya(t,e)}Ae(rn),De(rn,t)}function go(){Ae(rn),Ae(wi),Ae(xi)}function Op(e){ur(xi.current);var t=ur(rn.current),n=Ya(t,e.type);t!==n&&(De(wi,e),De(rn,n))}function bu(e){wi.current===e&&(Ae(rn),Ae(wi))}var Oe=tr(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=[];function Cu(){for(var e=0;e<sa.length;e++)sa[e]._workInProgressVersionPrimary=null;sa.length=0}var bs=Tn.ReactCurrentDispatcher,la=Tn.ReactCurrentBatchConfig,xr=0,Ie=null,Ve=null,Je=null,Xs=!1,ei=!1,bi=0,nv=0;function lt(){throw Error(Y(321))}function Su(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function ku(e,t,n,r,o,i){if(xr=i,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bs.current=e===null||e.memoizedState===null?sv:lv,e=n(r,o),ei){i=0;do{if(ei=!1,bi=0,25<=i)throw Error(Y(301));i+=1,Je=Ve=null,t.updateQueue=null,bs.current=av,e=n(r,o)}while(ei)}if(bs.current=Js,t=Ve!==null&&Ve.next!==null,xr=0,Je=Ve=Ie=null,Xs=!1,t)throw Error(Y(300));return e}function _u(){var e=bi!==0;return bi=0,e}function Zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ie.memoizedState=Je=e:Je=Je.next=e,Je}function Bt(){if(Ve===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Je===null?Ie.memoizedState:Je.next;if(t!==null)Je=t,Ve=e;else{if(e===null)throw Error(Y(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Je===null?Ie.memoizedState=Je=e:Je=Je.next=e}return Je}function Ci(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=Bt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=Ve,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,c=null,d=i;do{var m=d.lane;if((xr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,Ie.lanes|=m,br|=m}d=d.next}while(d!==null&&d!==i);c===null?s=r:c.next=a,Gt(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,Ie.lanes|=i,br|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ca(e){var t=Bt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var s=o=o.next;do i=e(i,s.action),s=s.next;while(s!==o);Gt(i,t.memoizedState)||(yt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Fp(){}function Ip(e,t){var n=Ie,r=Bt(),o=t(),i=!Gt(r.memoizedState,o);if(i&&(r.memoizedState=o,yt=!0),r=r.queue,Eu(Up.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Si(9,Bp.bind(null,n,r,o,t),void 0,null),tt===null)throw Error(Y(349));xr&30||Pp(n,t,o)}return o}function Pp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Bp(e,t,n,r){t.value=n,t.getSnapshot=r,$p(t)&&Wp(e)}function Up(e,t,n){return n(function(){$p(t)&&Wp(e)})}function $p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function Wp(e){var t=kn(e,1);t!==null&&Kt(t,e,1,-1)}function sf(e){var t=Zt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t.queue=e,e=e.dispatch=iv.bind(null,Ie,e),[t.memoizedState,e]}function Si(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hp(){return Bt().memoizedState}function Cs(e,t,n,r){var o=Zt();Ie.flags|=e,o.memoizedState=Si(1|t,n,void 0,r===void 0?null:r)}function Sl(e,t,n,r){var o=Bt();r=r===void 0?null:r;var i=void 0;if(Ve!==null){var s=Ve.memoizedState;if(i=s.destroy,r!==null&&Su(r,s.deps)){o.memoizedState=Si(t,n,i,r);return}}Ie.flags|=e,o.memoizedState=Si(1|t,n,i,r)}function lf(e,t){return Cs(8390656,8,e,t)}function Eu(e,t){return Sl(2048,8,e,t)}function Vp(e,t){return Sl(4,2,e,t)}function Yp(e,t){return Sl(4,4,e,t)}function Kp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Gp(e,t,n){return n=n!=null?n.concat([e]):null,Sl(4,4,Kp.bind(null,t,e),n)}function ju(){}function Qp(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Su(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xp(e,t){var n=Bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Su(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jp(e,t,n){return xr&21?(Gt(n,t)||(n=np(),Ie.lanes|=n,br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function rv(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=la.transition;la.transition={};try{e(!1),t()}finally{Re=n,la.transition=r}}function qp(){return Bt().memoizedState}function ov(e,t,n){var r=Kn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zp(e))eg(t,n);else if(n=zp(e,t,n,r),n!==null){var o=ht();Kt(n,e,r,o),tg(n,t,r)}}function iv(e,t,n){var r=Kn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zp(e))eg(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,a=i(s,n);if(o.hasEagerState=!0,o.eagerState=a,Gt(a,s)){var c=t.interleaved;c===null?(o.next=o,vu(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=zp(e,t,o,r),n!==null&&(o=ht(),Kt(n,e,r,o),tg(n,t,r))}}function Zp(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function eg(e,t){ei=Xs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ou(e,n)}}var Js={readContext:Pt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},sv={readContext:Pt,useCallback:function(e,t){return Zt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:lf,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cs(4194308,4,Kp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cs(4,2,e,t)},useMemo:function(e,t){var n=Zt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ov.bind(null,Ie,e),[r.memoizedState,e]},useRef:function(e){var t=Zt();return e={current:e},t.memoizedState=e},useState:sf,useDebugValue:ju,useDeferredValue:function(e){return Zt().memoizedState=e},useTransition:function(){var e=sf(!1),t=e[0];return e=rv.bind(null,e[1]),Zt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ie,o=Zt();if(ze){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),tt===null)throw Error(Y(349));xr&30||Pp(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,lf(Up.bind(null,r,i,e),[e]),r.flags|=2048,Si(9,Bp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Zt(),t=tt.identifierPrefix;if(ze){var n=vn,r=yn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=nv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lv={readContext:Pt,useCallback:Qp,useContext:Pt,useEffect:Eu,useImperativeHandle:Gp,useInsertionEffect:Vp,useLayoutEffect:Yp,useMemo:Xp,useReducer:aa,useRef:Hp,useState:function(){return aa(Ci)},useDebugValue:ju,useDeferredValue:function(e){var t=Bt();return Jp(t,Ve.memoizedState,e)},useTransition:function(){var e=aa(Ci)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:Fp,useSyncExternalStore:Ip,useId:qp,unstable_isNewReconciler:!1},av={readContext:Pt,useCallback:Qp,useContext:Pt,useEffect:Eu,useImperativeHandle:Gp,useInsertionEffect:Vp,useLayoutEffect:Yp,useMemo:Xp,useReducer:ca,useRef:Hp,useState:function(){return ca(Ci)},useDebugValue:ju,useDeferredValue:function(e){var t=Bt();return Ve===null?t.memoizedState=e:Jp(t,Ve.memoizedState,e)},useTransition:function(){var e=ca(Ci)[0],t=Bt().memoizedState;return[e,t]},useMutableSource:Fp,useSyncExternalStore:Ip,useId:qp,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kl={isMounted:function(e){return(e=e._reactInternals)?Dr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ht(),o=Kn(e),i=wn(r,o);i.payload=t,n!=null&&(i.callback=n),t=Vn(e,i,o),t!==null&&(Kt(t,e,o,r),xs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ht(),o=Kn(e),i=wn(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Vn(e,i,o),t!==null&&(Kt(t,e,o,r),xs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ht(),r=Kn(e),o=wn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Vn(e,o,r),t!==null&&(Kt(t,e,r,n),xs(t,e,r))}};function af(e,t,n,r,o,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!gi(n,r)||!gi(o,i):!0}function ng(e,t,n){var r=!1,o=Xn,i=t.contextType;return typeof i=="object"&&i!==null?i=Pt(i):(o=wt(t)?vr:dt.current,r=t.contextTypes,i=(r=r!=null)?fo(e,o):Xn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kl,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function cf(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&kl.enqueueReplaceState(t,t.state,null)}function pc(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},wu(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Pt(i):(i=wt(t)?vr:dt.current,o.context=fo(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hc(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&kl.enqueueReplaceState(o,o.state,null),Gs(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function mo(e,t){try{var n="",r=t;do n+=O0(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var cv=typeof WeakMap=="function"?WeakMap:Map;function rg(e,t,n){n=wn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zs||(Zs=!0,_c=r),gc(e,t)},n}function og(e,t,n){n=wn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){gc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gc(e,t),typeof r!="function"&&(Yn===null?Yn=new Set([this]):Yn.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function uf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new cv;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Sv.bind(null,e,t,n),t.then(e,e))}function df(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ff(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=wn(-1,1),t.tag=2,Vn(n,t,1))),n.lanes|=1),e)}var uv=Tn.ReactCurrentOwner,yt=!1;function ft(e,t,n,r){t.child=e===null?Ap(t,null,n,r):po(t,e.child,n,r)}function hf(e,t,n,r,o){n=n.render;var i=t.ref;return oo(t,o),r=ku(e,t,n,r,i,o),n=_u(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(ze&&n&&fu(t),t.flags|=1,ft(e,t,r,o),t.child)}function pf(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Nu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ig(e,t,i,r,o)):(e=Es(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:gi,n(s,r)&&e.ref===t.ref)return _n(e,t,o)}return t.flags|=1,e=Gn(i,r),e.ref=t.ref,e.return=t,t.child=e}function ig(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(gi(i,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,_n(e,t,o)}return mc(e,t,n,r,o)}function sg(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Jr,Ct),Ct|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Jr,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(Jr,Ct),Ct|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,De(Jr,Ct),Ct|=r;return ft(e,t,o,n),t.child}function lg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mc(e,t,n,r,o){var i=wt(n)?vr:dt.current;return i=fo(t,i),oo(t,o),n=ku(e,t,n,r,i,o),r=_u(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,_n(e,t,o)):(ze&&r&&fu(t),t.flags|=1,ft(e,t,n,o),t.child)}function gf(e,t,n,r,o){if(wt(n)){var i=!0;Ws(t)}else i=!1;if(oo(t,o),t.stateNode===null)Ss(e,t),ng(t,n,r),pc(t,n,r,o),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Pt(d):(d=wt(n)?vr:dt.current,d=fo(t,d));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&cf(t,s,r,d),An=!1;var p=t.memoizedState;s.state=p,Gs(t,r,s,o),c=t.memoizedState,a!==r||p!==c||vt.current||An?(typeof m=="function"&&(hc(t,n,m,r),c=t.memoizedState),(a=An||af(t,n,a,r,p,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Np(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Wt(t.type,a),s.props=d,h=t.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=wt(n)?vr:dt.current,c=fo(t,c));var y=n.getDerivedStateFromProps;(m=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&cf(t,s,r,c),An=!1,p=t.memoizedState,s.state=p,Gs(t,r,s,o);var v=t.memoizedState;a!==h||p!==v||vt.current||An?(typeof y=="function"&&(hc(t,n,y,r),v=t.memoizedState),(d=An||af(t,n,d,r,p,v,c)||!1)?(m||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),s.props=r,s.state=v,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return yc(e,t,n,r,i,o)}function yc(e,t,n,r,o,i){lg(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return o&&Zd(t,n,!1),_n(e,t,i);r=t.stateNode,uv.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=po(t,e.child,null,i),t.child=po(t,null,a,i)):ft(e,t,a,i),t.memoizedState=r.state,o&&Zd(t,n,!0),t.child}function ag(e){var t=e.stateNode;t.pendingContext?qd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qd(e,t.context,!1),xu(e,t.containerInfo)}function mf(e,t,n,r,o){return ho(),pu(o),t.flags|=256,ft(e,t,n,r),t.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function wc(e){return{baseLanes:e,cachePool:null,transitions:null}}function cg(e,t,n){var r=t.pendingProps,o=Oe.current,i=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),De(Oe,o&1),e===null)return dc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,i?(r=t.mode,i=t.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=jl(s,r,0,null),e=fr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wc(n),t.memoizedState=vc,e):Tu(t,s));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return dv(e,t,s,r,a,o,n);if(i){i=r.fallback,s=t.mode,o=e.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Gn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=Gn(a,i):(i=fr(i,s,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,s=e.child.memoizedState,s=s===null?wc(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~n,t.memoizedState=vc,r}return i=e.child,e=i.sibling,r=Gn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Tu(e,t){return t=jl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function rs(e,t,n,r){return r!==null&&pu(r),po(t,e.child,null,n),e=Tu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dv(e,t,n,r,o,i,s){if(n)return t.flags&256?(t.flags&=-257,r=ua(Error(Y(422))),rs(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=jl({mode:"visible",children:r.children},o,0,null),i=fr(i,o,s,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&po(t,e.child,null,s),t.child.memoizedState=wc(s),t.memoizedState=vc,i);if(!(t.mode&1))return rs(e,t,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=ua(i,r,void 0),rs(e,t,s,r)}if(a=(s&e.childLanes)!==0,yt||a){if(r=tt,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,kn(e,o),Kt(r,e,o,-1))}return zu(),r=ua(Error(Y(421))),rs(e,t,s,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=kv.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,St=Hn(o.nextSibling),_t=t,ze=!0,Vt=null,e!==null&&(Lt[At++]=yn,Lt[At++]=vn,Lt[At++]=wr,yn=e.id,vn=e.overflow,wr=t),t=Tu(t,r.children),t.flags|=4096,t)}function yf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fc(e.return,t,n)}function da(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function ug(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ft(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yf(e,n,t);else if(e.tag===19)yf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(De(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Qs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),da(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Qs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}da(t,!0,n,null,i);break;case"together":da(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ss(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function _n(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=Gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function fv(e,t,n){switch(t.tag){case 3:ag(t),ho();break;case 5:Op(t);break;case 1:wt(t.type)&&Ws(t);break;case 4:xu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;De(Ys,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(De(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?cg(e,t,n):(De(Oe,Oe.current&1),e=_n(e,t,n),e!==null?e.sibling:null);De(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ug(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),De(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,sg(e,t,n)}return _n(e,t,n)}var dg,xc,fg,hg;dg=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xc=function(){};fg=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ur(rn.current);var i=null;switch(n){case"input":o=$a(e,o),r=$a(e,r),i=[];break;case"select":o=Pe({},o,{value:void 0}),r=Pe({},r,{value:void 0}),i=[];break;case"textarea":o=Va(e,o),r=Va(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Us)}Ka(n,r);var s;n=null;for(d in o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&o[d]!=null)if(d==="style"){var a=o[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ai.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=o!=null?o[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ai.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Le("scroll",e),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};hg=function(e,t,n,r){n!==r&&(t.flags|=4)};function Bo(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function hv(e,t,n){var r=t.pendingProps;switch(hu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return wt(t.type)&&$s(),at(t),null;case 3:return r=t.stateNode,go(),Ae(vt),Ae(dt),Cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ts(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vt!==null&&(Tc(Vt),Vt=null))),xc(e,t),at(t),null;case 5:bu(t);var o=ur(xi.current);if(n=t.type,e!==null&&t.stateNode!=null)fg(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return at(t),null}if(e=ur(rn.current),ts(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[tn]=t,r[vi]=i,e=(t.mode&1)!==0,n){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(o=0;o<Ko.length;o++)Le(Ko[o],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":_d(r,i),Le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Le("invalid",r);break;case"textarea":jd(r,i),Le("invalid",r)}Ka(n,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&es(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&es(r.textContent,a,e),o=["children",""+a]):ai.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Le("scroll",r)}switch(n){case"input":Yi(r),Ed(r,i,!0);break;case"textarea":Yi(r),Td(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Us)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[tn]=t,e[vi]=r,dg(e,t,!1,!1),t.stateNode=e;e:{switch(s=Ga(n,r),n){case"dialog":Le("cancel",e),Le("close",e),o=r;break;case"iframe":case"object":case"embed":Le("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ko.length;o++)Le(Ko[o],e);o=r;break;case"source":Le("error",e),o=r;break;case"img":case"image":case"link":Le("error",e),Le("load",e),o=r;break;case"details":Le("toggle",e),o=r;break;case"input":_d(e,r),o=$a(e,r),Le("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Pe({},r,{value:void 0}),Le("invalid",e);break;case"textarea":jd(e,r),o=Va(e,r),Le("invalid",e);break;default:o=r}Ka(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Hh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$h(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ci(e,c):typeof c=="number"&&ci(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ai.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Le("scroll",e):c!=null&&qc(e,i,c,s))}switch(n){case"input":Yi(e),Ed(e,r,!1);break;case"textarea":Yi(e),Td(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Qn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?eo(e,!!r.multiple,i,!1):r.defaultValue!=null&&eo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Us)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)hg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=ur(xi.current),ur(rn.current),ts(t)){if(r=t.stateNode,n=t.memoizedProps,r[tn]=t,(i=r.nodeValue!==n)&&(e=_t,e!==null))switch(e.tag){case 3:es(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&es(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tn]=t,t.stateNode=r}return at(t),null;case 13:if(Ae(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&St!==null&&t.mode&1&&!(t.flags&128))Dp(),ho(),t.flags|=98560,i=!1;else if(i=ts(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Y(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[tn]=t}else ho(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),i=!1}else Vt!==null&&(Tc(Vt),Vt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Ye===0&&(Ye=3):zu())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return go(),xc(e,t),e===null&&mi(t.stateNode.containerInfo),at(t),null;case 10:return yu(t.type._context),at(t),null;case 17:return wt(t.type)&&$s(),at(t),null;case 19:if(Ae(Oe),i=t.memoizedState,i===null)return at(t),null;if(r=(t.flags&128)!==0,s=i.rendering,s===null)if(r)Bo(i,!1);else{if(Ye!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Qs(e),s!==null){for(t.flags|=128,Bo(i,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&$e()>yo&&(t.flags|=128,r=!0,Bo(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qs(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Bo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ze)return at(t),null}else 2*$e()-i.renderingStartTime>yo&&n!==1073741824&&(t.flags|=128,r=!0,Bo(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(n=i.last,n!==null?n.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Oe.current,De(Oe,r?n&1|2:n&1),t):(at(t),null);case 22:case 23:return Au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ct&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function pv(e,t){switch(hu(t),t.tag){case 1:return wt(t.type)&&$s(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return go(),Ae(vt),Ae(dt),Cu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bu(t),null;case 13:if(Ae(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));ho()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Oe),null;case 4:return go(),null;case 10:return yu(t.type._context),null;case 22:case 23:return Au(),null;case 24:return null;default:return null}}var os=!1,ct=!1,gv=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Xr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function bc(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var vf=!1;function mv(e,t){if(oc=Is,e=vp(),du(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,m=0,h=e,p=null;t:for(;;){for(var y;h!==n||o!==0&&h.nodeType!==3||(a=s+o),h!==i||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(y=h.firstChild)!==null;)p=h,h=y;for(;;){if(h===e)break t;if(p===n&&++d===o&&(a=s),p===i&&++m===r&&(c=s),(y=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ic={focusedElem:e,selectionRange:n},Is=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var C=v.memoizedProps,A=v.memoizedState,b=t.stateNode,S=b.getSnapshotBeforeUpdate(t.elementType===t.type?C:Wt(t.type,C),A);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(w){Ue(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return v=vf,vf=!1,v}function ti(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&bc(t,n,i)}o=o.next}while(o!==r)}}function _l(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Cc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pg(e){var t=e.alternate;t!==null&&(e.alternate=null,pg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[vi],delete t[ac],delete t[qy],delete t[Zy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gg(e){return e.tag===5||e.tag===3||e.tag===4}function wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Us));else if(r!==4&&(e=e.child,e!==null))for(Sc(e,t,n),e=e.sibling;e!==null;)Sc(e,t,n),e=e.sibling}function kc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(kc(e,t,n),e=e.sibling;e!==null;)kc(e,t,n),e=e.sibling}var nt=null,Ht=!1;function Dn(e,t,n){for(n=n.child;n!==null;)mg(e,t,n),n=n.sibling}function mg(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(yl,n)}catch{}switch(n.tag){case 5:ct||Xr(n,t);case 6:var r=nt,o=Ht;nt=null,Dn(e,t,n),nt=r,Ht=o,nt!==null&&(Ht?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Ht?(e=nt,n=n.stateNode,e.nodeType===8?oa(e.parentNode,n):e.nodeType===1&&oa(e,n),hi(e)):oa(nt,n.stateNode));break;case 4:r=nt,o=Ht,nt=n.stateNode.containerInfo,Ht=!0,Dn(e,t,n),nt=r,Ht=o;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&bc(n,t,s),o=o.next}while(o!==r)}Dn(e,t,n);break;case 1:if(!ct&&(Xr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,t,a)}Dn(e,t,n);break;case 21:Dn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Dn(e,t,n),ct=r):Dn(e,t,n);break;default:Dn(e,t,n)}}function xf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new gv),t.forEach(function(r){var o=_v.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function $t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,Ht=!1;break e;case 3:nt=a.stateNode.containerInfo,Ht=!0;break e;case 4:nt=a.stateNode.containerInfo,Ht=!0;break e}a=a.return}if(nt===null)throw Error(Y(160));mg(i,s,o),nt=null,Ht=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(d){Ue(o,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yg(t,e),t=t.sibling}function yg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),Xt(e),r&4){try{ti(3,e,e.return),_l(3,e)}catch(C){Ue(e,e.return,C)}try{ti(5,e,e.return)}catch(C){Ue(e,e.return,C)}}break;case 1:$t(t,e),Xt(e),r&512&&n!==null&&Xr(n,n.return);break;case 5:if($t(t,e),Xt(e),r&512&&n!==null&&Xr(n,n.return),e.flags&32){var o=e.stateNode;try{ci(o,"")}catch(C){Ue(e,e.return,C)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,s=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ph(o,i),Ga(a,s);var d=Ga(a,i);for(s=0;s<c.length;s+=2){var m=c[s],h=c[s+1];m==="style"?Hh(o,h):m==="dangerouslySetInnerHTML"?$h(o,h):m==="children"?ci(o,h):qc(o,m,h,d)}switch(a){case"input":Wa(o,i);break;case"textarea":Bh(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?eo(o,!!i.multiple,y,!1):p!==!!i.multiple&&(i.defaultValue!=null?eo(o,!!i.multiple,i.defaultValue,!0):eo(o,!!i.multiple,i.multiple?[]:"",!1))}o[vi]=i}catch(C){Ue(e,e.return,C)}}break;case 6:if($t(t,e),Xt(e),r&4){if(e.stateNode===null)throw Error(Y(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(C){Ue(e,e.return,C)}}break;case 3:if($t(t,e),Xt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hi(t.containerInfo)}catch(C){Ue(e,e.return,C)}break;case 4:$t(t,e),Xt(e);break;case 13:$t(t,e),Xt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Du=$e())),r&4&&xf(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(d=ct)||m,$t(t,e),ct=d):$t(t,e),Xt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(ee=e,m=e.child;m!==null;){for(h=ee=m;ee!==null;){switch(p=ee,y=p.child,p.tag){case 0:case 11:case 14:case 15:ti(4,p,p.return);break;case 1:Xr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(C){Ue(r,n,C)}}break;case 5:Xr(p,p.return);break;case 22:if(p.memoizedState!==null){Cf(h);continue}}y!==null?(y.return=p,ee=y):Cf(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{o=h.stateNode,d?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Wh("display",s))}catch(C){Ue(e,e.return,C)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(C){Ue(e,e.return,C)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$t(t,e),Xt(e),r&4&&xf(e);break;case 21:break;default:$t(t,e),Xt(e)}}function Xt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gg(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ci(o,""),r.flags&=-33);var i=wf(e);kc(e,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=wf(e);Sc(e,a,s);break;default:throw Error(Y(161))}}catch(c){Ue(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yv(e,t,n){ee=e,vg(e)}function vg(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var o=ee,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||os;if(!s){var a=o.alternate,c=a!==null&&a.memoizedState!==null||ct;a=os;var d=ct;if(os=s,(ct=c)&&!d)for(ee=o;ee!==null;)s=ee,c=s.child,s.tag===22&&s.memoizedState!==null?Sf(o):c!==null?(c.return=s,ee=c):Sf(o);for(;i!==null;)ee=i,vg(i),i=i.sibling;ee=o,os=a,ct=d}bf(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ee=i):bf(e)}}function bf(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||_l(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&of(t,i,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}of(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&hi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}ct||t.flags&512&&Cc(t)}catch(p){Ue(t,t.return,p)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Cf(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Sf(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_l(4,t)}catch(c){Ue(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){Ue(t,o,c)}}var i=t.return;try{Cc(t)}catch(c){Ue(t,i,c)}break;case 5:var s=t.return;try{Cc(t)}catch(c){Ue(t,s,c)}}}catch(c){Ue(t,t.return,c)}if(t===e){ee=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ee=a;break}ee=t.return}}var vv=Math.ceil,qs=Tn.ReactCurrentDispatcher,Ru=Tn.ReactCurrentOwner,It=Tn.ReactCurrentBatchConfig,Ee=0,tt=null,He=null,rt=0,Ct=0,Jr=tr(0),Ye=0,ki=null,br=0,El=0,Mu=0,ni=null,mt=null,Du=0,yo=1/0,pn=null,Zs=!1,_c=null,Yn=null,is=!1,Pn=null,el=0,ri=0,Ec=null,ks=-1,_s=0;function ht(){return Ee&6?$e():ks!==-1?ks:ks=$e()}function Kn(e){return e.mode&1?Ee&2&&rt!==0?rt&-rt:tv.transition!==null?(_s===0&&(_s=np()),_s):(e=Re,e!==0||(e=window.event,e=e===void 0?16:cp(e.type)),e):1}function Kt(e,t,n,r){if(50<ri)throw ri=0,Ec=null,Error(Y(185));zi(e,n,r),(!(Ee&2)||e!==tt)&&(e===tt&&(!(Ee&2)&&(El|=n),Ye===4&&On(e,rt)),xt(e,r),n===1&&Ee===0&&!(t.mode&1)&&(yo=$e()+500,Cl&&nr()))}function xt(e,t){var n=e.callbackNode;ty(e,t);var r=Fs(e,e===tt?rt:0);if(r===0)n!==null&&Dd(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Dd(n),t===1)e.tag===0?ev(kf.bind(null,e)):Tp(kf.bind(null,e)),Xy(function(){!(Ee&6)&&nr()}),n=null;else{switch(rp(r)){case 1:n=ru;break;case 4:n=ep;break;case 16:n=Os;break;case 536870912:n=tp;break;default:n=Os}n=Eg(n,wg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wg(e,t){if(ks=-1,_s=0,Ee&6)throw Error(Y(327));var n=e.callbackNode;if(io()&&e.callbackNode!==n)return null;var r=Fs(e,e===tt?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=tl(e,r);else{t=r;var o=Ee;Ee|=2;var i=bg();(tt!==e||rt!==t)&&(pn=null,yo=$e()+500,dr(e,t));do try{bv();break}catch(a){xg(e,a)}while(!0);mu(),qs.current=i,Ee=o,He!==null?t=0:(tt=null,rt=0,t=Ye)}if(t!==0){if(t===2&&(o=Za(e),o!==0&&(r=o,t=jc(e,o))),t===1)throw n=ki,dr(e,0),On(e,r),xt(e,$e()),n;if(t===6)On(e,r);else{if(o=e.current.alternate,!(r&30)&&!wv(o)&&(t=tl(e,r),t===2&&(i=Za(e),i!==0&&(r=i,t=jc(e,i))),t===1))throw n=ki,dr(e,0),On(e,r),xt(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:sr(e,mt,pn);break;case 3:if(On(e,r),(r&130023424)===r&&(t=Du+500-$e(),10<t)){if(Fs(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){ht(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=lc(sr.bind(null,e,mt,pn),t);break}sr(e,mt,pn);break;case 4:if(On(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-Yt(r);i=1<<s,s=t[s],s>o&&(o=s),r&=~i}if(r=o,r=$e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vv(r/1960))-r,10<r){e.timeoutHandle=lc(sr.bind(null,e,mt,pn),r);break}sr(e,mt,pn);break;case 5:sr(e,mt,pn);break;default:throw Error(Y(329))}}}return xt(e,$e()),e.callbackNode===n?wg.bind(null,e):null}function jc(e,t){var n=ni;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=tl(e,t),e!==2&&(t=mt,mt=n,t!==null&&Tc(t)),e}function Tc(e){mt===null?mt=e:mt.push.apply(mt,e)}function wv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Gt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function On(e,t){for(t&=~Mu,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yt(t),r=1<<n;e[n]=-1,t&=~r}}function kf(e){if(Ee&6)throw Error(Y(327));io();var t=Fs(e,0);if(!(t&1))return xt(e,$e()),null;var n=tl(e,t);if(e.tag!==0&&n===2){var r=Za(e);r!==0&&(t=r,n=jc(e,r))}if(n===1)throw n=ki,dr(e,0),On(e,t),xt(e,$e()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,mt,pn),xt(e,$e()),null}function Lu(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(yo=$e()+500,Cl&&nr())}}function Cr(e){Pn!==null&&Pn.tag===0&&!(Ee&6)&&io();var t=Ee;Ee|=1;var n=It.transition,r=Re;try{if(It.transition=null,Re=1,e)return e()}finally{Re=r,It.transition=n,Ee=t,!(Ee&6)&&nr()}}function Au(){Ct=Jr.current,Ae(Jr)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Qy(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(hu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$s();break;case 3:go(),Ae(vt),Ae(dt),Cu();break;case 5:bu(r);break;case 4:go();break;case 13:Ae(Oe);break;case 19:Ae(Oe);break;case 10:yu(r.type._context);break;case 22:case 23:Au()}n=n.return}if(tt=e,He=e=Gn(e.current,null),rt=Ct=t,Ye=0,ki=null,Mu=El=br=0,mt=ni=null,cr!==null){for(t=0;t<cr.length;t++)if(n=cr[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}n.pending=r}cr=null}return e}function xg(e,t){do{var n=He;try{if(mu(),bs.current=Js,Xs){for(var r=Ie.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Xs=!1}if(xr=0,Je=Ve=Ie=null,ei=!1,bi=0,Ru.current=null,n===null||n.return===null){Ye=1,ki=t,He=null;break}e:{var i=e,s=n.return,a=n,c=t;if(t=rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=a,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=df(s);if(y!==null){y.flags&=-257,ff(y,s,a,i,t),y.mode&1&&uf(i,d,t),t=y,c=d;var v=t.updateQueue;if(v===null){var C=new Set;C.add(c),t.updateQueue=C}else v.add(c);break e}else{if(!(t&1)){uf(i,d,t),zu();break e}c=Error(Y(426))}}else if(ze&&a.mode&1){var A=df(s);if(A!==null){!(A.flags&65536)&&(A.flags|=256),ff(A,s,a,i,t),pu(mo(c,a));break e}}i=c=mo(c,a),Ye!==4&&(Ye=2),ni===null?ni=[i]:ni.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=rg(i,c,t);rf(i,b);break e;case 1:a=c;var S=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof S.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Yn===null||!Yn.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=og(i,a,t);rf(i,w);break e}}i=i.return}while(i!==null)}Sg(n)}catch(_){t=_,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function bg(){var e=qs.current;return qs.current=Js,e===null?Js:e}function zu(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),tt===null||!(br&268435455)&&!(El&268435455)||On(tt,rt)}function tl(e,t){var n=Ee;Ee|=2;var r=bg();(tt!==e||rt!==t)&&(pn=null,dr(e,t));do try{xv();break}catch(o){xg(e,o)}while(!0);if(mu(),Ee=n,qs.current=r,He!==null)throw Error(Y(261));return tt=null,rt=0,Ye}function xv(){for(;He!==null;)Cg(He)}function bv(){for(;He!==null&&!Y0();)Cg(He)}function Cg(e){var t=_g(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?Sg(e):He=t,Ru.current=null}function Sg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=pv(n,t),n!==null){n.flags&=32767,He=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ye=6,He=null;return}}else if(n=hv(n,t,Ct),n!==null){He=n;return}if(t=t.sibling,t!==null){He=t;return}He=t=e}while(t!==null);Ye===0&&(Ye=5)}function sr(e,t,n){var r=Re,o=It.transition;try{It.transition=null,Re=1,Cv(e,t,n,r)}finally{It.transition=o,Re=r}return null}function Cv(e,t,n,r){do io();while(Pn!==null);if(Ee&6)throw Error(Y(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(ny(e,i),e===tt&&(He=tt=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||is||(is=!0,Eg(Os,function(){return io(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=It.transition,It.transition=null;var s=Re;Re=1;var a=Ee;Ee|=4,Ru.current=null,mv(e,n),yg(n,e),$y(ic),Is=!!oc,ic=oc=null,e.current=n,yv(n),K0(),Ee=a,Re=s,It.transition=i}else e.current=n;if(is&&(is=!1,Pn=e,el=o),i=e.pendingLanes,i===0&&(Yn=null),X0(n.stateNode),xt(e,$e()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Zs)throw Zs=!1,e=_c,_c=null,e;return el&1&&e.tag!==0&&io(),i=e.pendingLanes,i&1?e===Ec?ri++:(ri=0,Ec=e):ri=0,nr(),null}function io(){if(Pn!==null){var e=rp(el),t=It.transition,n=Re;try{if(It.transition=null,Re=16>e?16:e,Pn===null)var r=!1;else{if(e=Pn,Pn=null,el=0,Ee&6)throw Error(Y(331));var o=Ee;for(Ee|=4,ee=e.current;ee!==null;){var i=ee,s=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(ee=d;ee!==null;){var m=ee;switch(m.tag){case 0:case 11:case 15:ti(8,m,i)}var h=m.child;if(h!==null)h.return=m,ee=h;else for(;ee!==null;){m=ee;var p=m.sibling,y=m.return;if(pg(m),m===d){ee=null;break}if(p!==null){p.return=y,ee=p;break}ee=y}}}var v=i.alternate;if(v!==null){var C=v.child;if(C!==null){v.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}ee=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,ee=s;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ti(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ee=b;break e}ee=i.return}}var S=e.current;for(ee=S;ee!==null;){s=ee;var f=s.child;if(s.subtreeFlags&2064&&f!==null)f.return=s,ee=f;else e:for(s=S;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_l(9,a)}}catch(_){Ue(a,a.return,_)}if(a===s){ee=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ee=w;break e}ee=a.return}}if(Ee=o,nr(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(yl,e)}catch{}r=!0}return r}finally{Re=n,It.transition=t}}return!1}function _f(e,t,n){t=mo(n,t),t=rg(e,t,1),e=Vn(e,t,1),t=ht(),e!==null&&(zi(e,1,t),xt(e,t))}function Ue(e,t,n){if(e.tag===3)_f(e,e,n);else for(;t!==null;){if(t.tag===3){_f(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yn===null||!Yn.has(r))){e=mo(n,e),e=og(t,e,1),t=Vn(t,e,1),e=ht(),t!==null&&(zi(t,1,e),xt(t,e));break}}t=t.return}}function Sv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(rt&n)===n&&(Ye===4||Ye===3&&(rt&130023424)===rt&&500>$e()-Du?dr(e,0):Mu|=n),xt(e,t)}function kg(e,t){t===0&&(e.mode&1?(t=Qi,Qi<<=1,!(Qi&130023424)&&(Qi=4194304)):t=1);var n=ht();e=kn(e,t),e!==null&&(zi(e,t,n),xt(e,n))}function kv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kg(e,n)}function _v(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),kg(e,n)}var _g;_g=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,fv(e,t,n);yt=!!(e.flags&131072)}else yt=!1,ze&&t.flags&1048576&&Rp(t,Vs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ss(e,t),e=t.pendingProps;var o=fo(t,dt.current);oo(t,n),o=ku(null,t,r,e,o,n);var i=_u();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(r)?(i=!0,Ws(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,wu(t),o.updater=kl,t.stateNode=o,o._reactInternals=t,pc(t,r,e,n),t=yc(null,t,r,!0,i,n)):(t.tag=0,ze&&i&&fu(t),ft(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ss(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=jv(r),e=Wt(r,e),o){case 0:t=mc(null,t,r,e,n);break e;case 1:t=gf(null,t,r,e,n);break e;case 11:t=hf(null,t,r,e,n);break e;case 14:t=pf(null,t,r,Wt(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),mc(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),gf(e,t,r,o,n);case 3:e:{if(ag(t),e===null)throw Error(Y(387));r=t.pendingProps,i=t.memoizedState,o=i.element,Np(e,t),Gs(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=mo(Error(Y(423)),t),t=mf(e,t,r,n,o);break e}else if(r!==o){o=mo(Error(Y(424)),t),t=mf(e,t,r,n,o);break e}else for(St=Hn(t.stateNode.containerInfo.firstChild),_t=t,ze=!0,Vt=null,n=Ap(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ho(),r===o){t=_n(e,t,n);break e}ft(e,t,r,n)}t=t.child}return t;case 5:return Op(t),e===null&&dc(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,s=o.children,sc(r,o)?s=null:i!==null&&sc(r,i)&&(t.flags|=32),lg(e,t),ft(e,t,s,n),t.child;case 6:return e===null&&dc(t),null;case 13:return cg(e,t,n);case 4:return xu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=po(t,null,r,n):ft(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),hf(e,t,r,o,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,s=o.value,De(Ys,r._currentValue),r._currentValue=s,i!==null)if(Gt(i.value,s)){if(i.children===o.children&&!vt.current){t=_n(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=wn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fc(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(Y(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),fc(s,n,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ft(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,oo(t,n),o=Pt(o),r=r(o),t.flags|=1,ft(e,t,r,n),t.child;case 14:return r=t.type,o=Wt(r,t.pendingProps),o=Wt(r.type,o),pf(e,t,r,o,n);case 15:return ig(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Wt(r,o),Ss(e,t),t.tag=1,wt(r)?(e=!0,Ws(t)):e=!1,oo(t,n),ng(t,r,o),pc(t,r,o,n),yc(null,t,r,!0,e,n);case 19:return ug(e,t,n);case 22:return sg(e,t,n)}throw Error(Y(156,t.tag))};function Eg(e,t){return Zh(e,t)}function Ev(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,n,r){return new Ev(e,t,n,r)}function Nu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jv(e){if(typeof e=="function")return Nu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eu)return 11;if(e===tu)return 14}return 2}function Gn(e,t){var n=e.alternate;return n===null?(n=Ot(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Es(e,t,n,r,o,i){var s=2;if(r=e,typeof e=="function")Nu(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Ur:return fr(n.children,o,i,t);case Zc:s=8,o|=8;break;case Ia:return e=Ot(12,n,t,o|2),e.elementType=Ia,e.lanes=i,e;case Pa:return e=Ot(13,n,t,o),e.elementType=Pa,e.lanes=i,e;case Ba:return e=Ot(19,n,t,o),e.elementType=Ba,e.lanes=i,e;case Oh:return jl(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zh:s=10;break e;case Nh:s=9;break e;case eu:s=11;break e;case tu:s=14;break e;case Ln:s=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Ot(s,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function fr(e,t,n,r){return e=Ot(7,e,r,t),e.lanes=n,e}function jl(e,t,n,r){return e=Ot(22,e,r,t),e.elementType=Oh,e.lanes=n,e.stateNode={isHidden:!1},e}function fa(e,t,n){return e=Ot(6,e,null,t),e.lanes=n,e}function ha(e,t,n){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tv(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ou(e,t,n,r,o,i,s,a,c){return e=new Tv(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ot(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wu(i),e}function Rv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Br,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jg(e){if(!e)return Xn;e=e._reactInternals;e:{if(Dr(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(wt(n))return jp(e,n,t)}return t}function Tg(e,t,n,r,o,i,s,a,c){return e=Ou(n,r,!0,e,o,i,s,a,c),e.context=jg(null),n=e.current,r=ht(),o=Kn(n),i=wn(r,o),i.callback=t??null,Vn(n,i,o),e.current.lanes=o,zi(e,o,r),xt(e,r),e}function Tl(e,t,n,r){var o=t.current,i=ht(),s=Kn(o);return n=jg(n),t.context===null?t.context=n:t.pendingContext=n,t=wn(i,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Vn(o,t,s),e!==null&&(Kt(e,o,s,i),xs(e,o,s)),s}function nl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ef(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fu(e,t){Ef(e,t),(e=e.alternate)&&Ef(e,t)}function Mv(){return null}var Rg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Iu(e){this._internalRoot=e}Rl.prototype.render=Iu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Tl(e,t,null,null)};Rl.prototype.unmount=Iu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){Tl(null,e,null,null)}),t[Sn]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=sp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&ap(e)}};function Pu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ml(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jf(){}function Dv(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var d=nl(s);i.call(d)}}var s=Tg(t,r,e,0,null,!1,!1,"",jf);return e._reactRootContainer=s,e[Sn]=s.current,mi(e.nodeType===8?e.parentNode:e),Cr(),s}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var d=nl(c);a.call(d)}}var c=Ou(e,0,!1,null,null,!1,!1,"",jf);return e._reactRootContainer=c,e[Sn]=c.current,mi(e.nodeType===8?e.parentNode:e),Cr(function(){Tl(t,c,n,r)}),c}function Dl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var c=nl(s);a.call(c)}}Tl(t,s,e,o)}else s=Dv(n,t,e,o,r);return nl(s)}op=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yo(t.pendingLanes);n!==0&&(ou(t,n|1),xt(t,$e()),!(Ee&6)&&(yo=$e()+500,nr()))}break;case 13:Cr(function(){var r=kn(e,1);if(r!==null){var o=ht();Kt(r,e,1,o)}}),Fu(e,1)}};iu=function(e){if(e.tag===13){var t=kn(e,134217728);if(t!==null){var n=ht();Kt(t,e,134217728,n)}Fu(e,134217728)}};ip=function(e){if(e.tag===13){var t=Kn(e),n=kn(e,t);if(n!==null){var r=ht();Kt(n,e,t,r)}Fu(e,t)}};sp=function(){return Re};lp=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Xa=function(e,t,n){switch(t){case"input":if(Wa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=bl(r);if(!o)throw Error(Y(90));Ih(r),Wa(r,o)}}}break;case"textarea":Bh(e,n);break;case"select":t=n.value,t!=null&&eo(e,!!n.multiple,t,!1)}};Kh=Lu;Gh=Cr;var Lv={usingClientEntryPoint:!1,Events:[Oi,Vr,bl,Vh,Yh,Lu]},Uo={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Av={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jh(e),e===null?null:e.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||Mv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ss=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ss.isDisabled&&ss.supportsFiber)try{yl=ss.inject(Av),nn=ss}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lv;Mt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pu(t))throw Error(Y(200));return Rv(e,t,null,n)};Mt.createRoot=function(e,t){if(!Pu(e))throw Error(Y(299));var n=!1,r="",o=Rg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ou(e,1,!1,null,null,n,!1,r,o),e[Sn]=t.current,mi(e.nodeType===8?e.parentNode:e),new Iu(t)};Mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=Jh(t),e=e===null?null:e.stateNode,e};Mt.flushSync=function(e){return Cr(e)};Mt.hydrate=function(e,t,n){if(!Ml(t))throw Error(Y(200));return Dl(null,e,t,!0,n)};Mt.hydrateRoot=function(e,t,n){if(!Pu(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",s=Rg;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=Tg(t,null,e,1,n??null,o,!1,i,s),e[Sn]=t.current,mi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Rl(t)};Mt.render=function(e,t,n){if(!Ml(t))throw Error(Y(200));return Dl(null,e,t,!1,n)};Mt.unmountComponentAtNode=function(e){if(!Ml(e))throw Error(Y(40));return e._reactRootContainer?(Cr(function(){Dl(null,null,e,!1,function(){e._reactRootContainer=null,e[Sn]=null})}),!0):!1};Mt.unstable_batchedUpdates=Lu;Mt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ml(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Dl(e,t,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function Mg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mg)}catch(e){console.error(e)}}Mg(),Mh.exports=Mt;var Sr=Mh.exports,Tf=Sr;Oa.createRoot=Tf.createRoot,Oa.hydrateRoot=Tf.hydrateRoot;const bt=()=>new Map,Rc=e=>{const t=bt();return e.forEach((n,r)=>{t.set(r,n)}),t},Tt=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},zv=(e,t)=>{const n=[];for(const[r,o]of e)n.push(t(o,r));return n},Nv=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},Jn=()=>new Set,pa=e=>e[e.length-1],Ov=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},En=Array.from,Fv=Array.isArray;class Dg{constructor(){this._observers=bt()}on(t,n){return Tt(this._observers,t,Jn).add(n),n}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return En((this._observers.get(t)||bt()).values()).forEach(r=>r(...n))}destroy(){this._observers=bt()}}class Lg{constructor(){this._observers=bt()}on(t,n){Tt(this._observers,t,Jn).add(n)}once(t,n){const r=(...o)=>{this.off(t,r),n(...o)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return En((this._observers.get(t)||bt()).values()).forEach(r=>r(...n))}destroy(){this._observers=bt()}}const ln=Math.floor,js=Math.abs,Iv=Math.log10,Bu=(e,t)=>e<t?e:t,Lr=(e,t)=>e>t?e:t,Ag=e=>e!==0?e<0:1/e<0,Rf=1,Mf=2,ga=4,ma=8,_i=32,xn=64,Et=128,Ll=31,Mc=63,hr=127,Pv=2147483647,zg=Number.MAX_SAFE_INTEGER,Bv=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&ln(e)===e),Uv=String.fromCharCode,$v=e=>e.toLowerCase(),Wv=/^\s*/g,Hv=e=>e.replace(Wv,""),Vv=/([A-Z])/g,Df=(e,t)=>Hv(e.replace(Vv,n=>`${t}${$v(n)}`)),Yv=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=t.codePointAt(o);return r},Ei=typeof TextEncoder<"u"?new TextEncoder:null,Kv=e=>Ei.encode(e),Dc=Ei?Kv:Yv;let oi=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});oi&&oi.decode(new Uint8Array).length===1&&(oi=null);class Ii{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Ze=()=>new Ii,Gv=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},Fe=e=>{const t=new Uint8Array(Gv(e));let n=0;for(let r=0;r<e.bufs.length;r++){const o=e.bufs[r];t.set(o,n),n+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},Qv=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(Lr(n,t)*2),e.cpos=0)},Qe=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},ji=Qe,ie=(e,t)=>{for(;t>hr;)Qe(e,Et|hr&t),t=ln(t/128);Qe(e,hr&t)},Uu=(e,t)=>{const n=Ag(t);for(n&&(t=-t),Qe(e,(t>Mc?Et:0)|(n?xn:0)|Mc&t),t=ln(t/64);t>0;)Qe(e,(t>hr?Et:0)|hr&t),t=ln(t/128)},Lc=new Uint8Array(3e4),Xv=Lc.length/3,Jv=(e,t)=>{if(t.length<Xv){const n=Ei.encodeInto(t,Lc).written||0;ie(e,n);for(let r=0;r<n;r++)Qe(e,Lc[r])}else Be(e,Dc(t))},qv=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;ie(e,r);for(let o=0;o<r;o++)Qe(e,n.codePointAt(o))},on=Ei&&Ei.encodeInto?Jv:qv,Al=(e,t)=>{const n=e.cbuf.length,r=e.cpos,o=Bu(n-r,t.length),i=t.length-o;e.cbuf.set(t.subarray(0,o),r),e.cpos+=o,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(Lr(n*2,i)),e.cbuf.set(t.subarray(o)),e.cpos=i)},Be=(e,t)=>{ie(e,t.byteLength),Al(e,t)},$u=(e,t)=>{Qv(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Zv=(e,t)=>$u(e,4).setFloat32(0,t,!1),ew=(e,t)=>$u(e,8).setFloat64(0,t,!1),tw=(e,t)=>$u(e,8).setBigInt64(0,t,!1),Lf=new DataView(new ArrayBuffer(4)),nw=e=>(Lf.setFloat32(0,e),Lf.getFloat32(0)===e),vo=(e,t)=>{switch(typeof t){case"string":Qe(e,119),on(e,t);break;case"number":Bv(t)&&js(t)<=Pv?(Qe(e,125),Uu(e,t)):nw(t)?(Qe(e,124),Zv(e,t)):(Qe(e,123),ew(e,t));break;case"bigint":Qe(e,122),tw(e,t);break;case"object":if(t===null)Qe(e,126);else if(Fv(t)){Qe(e,117),ie(e,t.length);for(let n=0;n<t.length;n++)vo(e,t[n])}else if(t instanceof Uint8Array)Qe(e,116),Be(e,t);else{Qe(e,118);const n=Object.keys(t);ie(e,n.length);for(let r=0;r<n.length;r++){const o=n[r];on(e,o),vo(e,t[o])}}break;case"boolean":Qe(e,t?120:121);break;default:Qe(e,127)}};class Af extends Ii{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&ie(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const zf=e=>{e.count>0&&(Uu(e.encoder,e.count===1?e.s:-e.s),e.count>1&&ie(e.encoder,e.count-2))};class Ts{constructor(){this.encoder=new Ii,this.s=0,this.count=0}write(t){this.s===t?this.count++:(zf(this),this.count=1,this.s=t)}toUint8Array(){return zf(this),Fe(this.encoder)}}const Nf=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);Uu(e.encoder,t),e.count>1&&ie(e.encoder,e.count-2)}};class ya{constructor(){this.encoder=new Ii,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Nf(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Nf(this),Fe(this.encoder)}}class rw{constructor(){this.sarr=[],this.s="",this.lensE=new Ts}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Ii;return this.sarr.push(this.s),this.s="",on(t,this.sarr.join("")),Al(t,this.lensE.toUint8Array()),Fe(t)}}const an=e=>new Error(e),sn=()=>{throw an("Method unimplemented")},cn=()=>{throw an("Unexpected case")},Ng=an("Unexpected end of array"),Og=an("Integer out of Range");class zl{constructor(t){this.arr=t,this.pos=0}}const fn=e=>new zl(e),ow=e=>e.pos!==e.arr.length,iw=(e,t)=>{const n=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Xe=e=>iw(e,pe(e)),kr=e=>e.arr[e.pos++],pe=e=>{let t=0,n=1;const r=e.arr.length;for(;e.pos<r;){const o=e.arr[e.pos++];if(t=t+(o&hr)*n,n*=128,o<Et)return t;if(t>zg)throw Og}throw Ng},Wu=e=>{let t=e.arr[e.pos++],n=t&Mc,r=64;const o=(t&xn)>0?-1:1;if(!(t&Et))return o*n;const i=e.arr.length;for(;e.pos<i;){if(t=e.arr[e.pos++],n=n+(t&hr)*r,r*=128,t<Et)return o*n;if(n>zg)throw Og}throw Ng},sw=e=>{let t=pe(e);if(t===0)return"";{let n=String.fromCodePoint(kr(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(kr(e));else for(;t>0;){const r=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,o),t-=r}return decodeURIComponent(escape(n))}},lw=e=>oi.decode(Xe(e)),bn=oi?lw:sw,Hu=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},aw=e=>Hu(e,4).getFloat32(0,!1),cw=e=>Hu(e,8).getFloat64(0,!1),uw=e=>Hu(e,8).getBigInt64(0,!1),dw=[e=>{},e=>null,Wu,aw,cw,uw,e=>!1,e=>!0,bn,e=>{const t=pe(e),n={};for(let r=0;r<t;r++){const o=bn(e);n[o]=wo(e)}return n},e=>{const t=pe(e),n=[];for(let r=0;r<t;r++)n.push(wo(e));return n},Xe],wo=e=>dw[127-kr(e)](e);class Of extends zl{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),ow(this)?this.count=pe(this)+1:this.count=-1),this.count--,this.s}}class Rs extends zl{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=Wu(this);const t=Ag(this.s);this.count=1,t&&(this.s=-this.s,this.count=pe(this)+2)}return this.count--,this.s}}class va extends zl{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=Wu(this),n=t&1;this.diff=ln(t/2),this.count=1,n&&(this.count=pe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class fw{constructor(t){this.decoder=new Rs(t),this.str=bn(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const hw=crypto.getRandomValues.bind(crypto),pw=Math.random,Fg=()=>hw(new Uint32Array(1))[0],gw="10000000-1000-4000-8000"+-1e11,Ig=()=>gw.replace(/[018]/g,e=>(e^Fg()&15>>e/4).toString(16)),jn=Date.now,Ff=e=>new Promise(e);Promise.all.bind(Promise);const mw=e=>Promise.reject(e),Vu=e=>Promise.resolve(e),If=e=>e===void 0?null:e;class yw{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let Pg=new yw,Yu=!0;try{typeof localStorage<"u"&&localStorage&&(Pg=localStorage,Yu=!1)}catch{}const Bg=Pg,vw=e=>Yu||addEventListener("storage",e),ww=e=>Yu||removeEventListener("storage",e),xw=Object.assign,Ug=Object.keys,bw=(e,t)=>{for(const n in e)t(e[n],n)},Pf=e=>Ug(e).length,Bf=e=>Ug(e).length,Cw=e=>{for(const t in e)return!1;return!0},Sw=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},$g=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),kw=(e,t)=>e===t||Bf(e)===Bf(t)&&Sw(e,(n,r)=>(n!==void 0||$g(t,r))&&t[r]===n),_w=Object.freeze,Wg=e=>{for(const t in e){const n=e[t];(typeof n=="object"||typeof n=="function")&&Wg(e[t])}return _w(e)},Uf=Symbol("Equality"),Ku=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Ku(e,t,n+1)}},Ew=()=>{},jw=e=>e,ii=(e,t)=>{if(e===t)return!0;if(e==null||t==null||e.constructor!==t.constructor)return!1;if(e[Uf]!=null)return e[Uf](t);switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!ii(e.get(n),t.get(n)))return!1;break}case Object:if(Pf(e)!==Pf(t))return!1;for(const n in e)if(!$g(e,n)||!ii(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!ii(e[n],t[n]))return!1;break;default:return!1}return!0},Tw=(e,t)=>t.includes(e);var Hg={};const xo=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Vg=typeof window<"u"&&typeof document<"u"&&!xo;let Jt;const Rw=()=>{if(Jt===void 0)if(xo){Jt=bt();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Jt.set(t,""),t=r):t!==null&&(Jt.set(t,r),t=null)}t!==null&&Jt.set(t,"")}else typeof location=="object"?(Jt=bt(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Jt.set(`--${Df(t,"-")}`,n),Jt.set(`-${Df(t,"-")}`,n)}})):Jt=bt();return Jt},Ac=e=>Rw().has(e),Ti=e=>If(xo?Hg[e.toUpperCase().replaceAll("-","_")]:Bg.getItem(e)),Yg=e=>Ac("--"+e)||Ti(e)!==null;Yg("production");const Mw=xo&&Tw(Hg.FORCE_COLOR,["true","1","2"]),Dw=Mw||!Ac("--no-colors")&&!Yg("no-color")&&(!xo||process.stdout.isTTY)&&(!xo||Ac("--color")||Ti("COLORTERM")!==null||(Ti("TERM")||"").includes("color")),Kg=e=>new Uint8Array(e),Lw=(e,t,n)=>new Uint8Array(e,t,n),Aw=e=>new Uint8Array(e),zw=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Uv(e[n]);return btoa(t)},Nw=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),Ow=e=>{const t=atob(e),n=Kg(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},Fw=e=>{const t=Buffer.from(e,"base64");return Lw(t.buffer,t.byteOffset,t.byteLength)},Gg=Vg?zw:Nw,Qg=Vg?Ow:Fw,Iw=e=>{const t=Kg(e.byteLength);return t.set(e),t};class Pw{constructor(t,n){this.left=t,this.right=n}}const hn=(e,t)=>new Pw(e,t);typeof DOMParser<"u"&&new DOMParser;const Bw=e=>zv(e,(t,n)=>`${n}:${t};`).join(""),Uw=JSON.stringify,Rn=Symbol,Ft=Rn(),_r=Rn(),Xg=Rn(),Gu=Rn(),Jg=Rn(),qg=Rn(),Zg=Rn(),Nl=Rn(),Ol=Rn(),$w=e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)t.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(t.join(""));r<e.length;r++){const i=e[r];i instanceof Symbol||n.push(i)}return n},$f=[Jg,Zg,Nl,Xg];let wa=0,Wf=jn();const Ww=(e,t)=>{const n=$f[wa],r=Ti("log"),o=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return wa=(wa+1)%$f.length,t+=": ",o?(...i)=>{var c;i.length===1&&((c=i[0])==null?void 0:c.constructor)===Function&&(i=i[0]());const s=jn(),a=s-Wf;Wf=s,e(n,t,Ol,...i.map(d=>{switch(d!=null&&d.constructor===Uint8Array&&(d=Array.from(d)),typeof d){case"string":case"symbol":return d;default:return Uw(d)}}),n," +"+a+"ms")}:Ew},Hw={[Ft]:hn("font-weight","bold"),[_r]:hn("font-weight","normal"),[Xg]:hn("color","blue"),[Jg]:hn("color","green"),[Gu]:hn("color","grey"),[qg]:hn("color","red"),[Zg]:hn("color","purple"),[Nl]:hn("color","orange"),[Ol]:hn("color","black")},Vw=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[],r=bt();let o=[],i=0;for(;i<e.length;i++){const a=e[i],c=Hw[a];if(c!==void 0)r.set(c.left,c.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const d=Bw(r);i>0||d.length>0?(t.push("%c"+a),n.push(d)):t.push(a)}else break}}for(i>0&&(o=n,o.unshift(t.join("")));i<e.length;i++){const a=e[i];a instanceof Symbol||o.push(a)}return o},em=Dw?Vw:$w,tm=(...e)=>{console.log(...em(e)),nm.forEach(t=>t.print(e))},Yw=(...e)=>{console.warn(...em(e)),e.unshift(Nl),nm.forEach(t=>t.print(e))},nm=Jn(),Kw=e=>Ww(tm,e),rm=e=>({[Symbol.iterator](){return this},next:e}),Gw=(e,t)=>rm(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),xa=(e,t)=>rm(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Qu{constructor(t,n){this.clock=t,this.len=n}}class Pi{constructor(){this.clients=new Map}}const om=(e,t,n)=>t.clients.forEach((r,o)=>{const i=e.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let c=0,d=r[c];c<r.length&&d.clock<a;d=r[++c])ym(e,i,d.clock,d.len,n)}}),Qw=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const o=ln((n+r)/2),i=e[o],s=i.clock;if(s<=t){if(t<s+i.len)return o;n=o+1}else r=o-1}return null},im=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&Qw(n,t.clock)!==null},Xu=e=>{e.clients.forEach(t=>{t.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const o=t[r-1],i=t[n];o.clock+o.len>=i.clock?o.len=Lr(o.len,i.clock+i.len-o.clock):(r<n&&(t[r]=i),r++)}t.length=r})},Xw=e=>{const t=new Pi;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,o)=>{if(!t.clients.has(o)){const i=r.slice();for(let s=n+1;s<e.length;s++)Ov(i,e[s].clients.get(o)||[]);t.clients.set(o,i)}});return Xu(t),t},rl=(e,t,n,r)=>{Tt(e.clients,t,()=>[]).push(new Qu(n,r))},Jw=()=>new Pi,qw=e=>{const t=Jw();return e.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let c=s.length;if(i+1<n.length)for(let d=n[i+1];i+1<n.length&&d.deleted;d=n[++i+1])c+=d.length;o.push(new Qu(a,c))}}o.length>0&&t.clients.set(r,o)}),t},Mo=(e,t)=>{ie(e.restEncoder,t.clients.size),En(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),ie(e.restEncoder,n);const o=r.length;ie(e.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];e.writeDsClock(s.clock),e.writeDsLen(s.len)}})},Ju=e=>{const t=new Pi,n=pe(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const o=pe(e.restDecoder),i=pe(e.restDecoder);if(i>0){const s=Tt(t.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new Qu(e.readDsClock(),e.readDsLen()))}}return t},Hf=(e,t,n)=>{const r=new Pi,o=pe(e.restDecoder);for(let i=0;i<o;i++){e.resetDsCurVal();const s=pe(e.restDecoder),a=pe(e.restDecoder),c=n.clients.get(s)||[],d=et(n,s);for(let m=0;m<a;m++){const h=e.readDsClock(),p=h+e.readDsLen();if(h<d){d<p&&rl(r,s,d,p-d);let y=un(c,h),v=c[y];for(!v.deleted&&v.id.clock<h&&(c.splice(y+1,0,ul(t,v,h-v.id.clock)),y++);y<c.length&&(v=c[y++],v.id.clock<p);)v.deleted||(p<v.id.clock+v.length&&c.splice(y,0,ul(t,v,p-v.id.clock)),v.delete(t))}else rl(r,s,h,p-h)}}if(r.clients.size>0){const i=new Er;return ie(i.restEncoder,0),Mo(i,r),i.toUint8Array()}return null},sm=Fg;class Do extends Dg{constructor({guid:t=Ig(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=sm(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new gm,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Ff(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const c=()=>Ff(d=>{const m=h=>{(h===void 0||h===!0)&&(this.off("sync",m),d())};this.on("sync",m)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Me(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(En(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Me(this,t,n)}get(t,n=ot){const r=Tt(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==ot&&o!==n)if(o===ot){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,lo)}getText(t=""){return this.get(t,So)}getMap(t=""){return this.get(t,Co)}getXmlElement(t=""){return this.get(t,ko)}getXmlFragment(t=""){return this.get(t,jr)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){this.isDestroyed=!0,En(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new Do({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,Me(t.parent.doc,r=>{const o=n.doc;t.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class lm{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return pe(this.restDecoder)}readDsLen(){return pe(this.restDecoder)}}class am extends lm{readLeftID(){return ke(pe(this.restDecoder),pe(this.restDecoder))}readRightID(){return ke(pe(this.restDecoder),pe(this.restDecoder))}readClient(){return pe(this.restDecoder)}readInfo(){return kr(this.restDecoder)}readString(){return bn(this.restDecoder)}readParentInfo(){return pe(this.restDecoder)===1}readTypeRef(){return pe(this.restDecoder)}readLen(){return pe(this.restDecoder)}readAny(){return wo(this.restDecoder)}readBuf(){return Iw(Xe(this.restDecoder))}readJSON(){return JSON.parse(bn(this.restDecoder))}readKey(){return bn(this.restDecoder)}}class Zw{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=pe(this.restDecoder),this.dsCurrVal}readDsLen(){const t=pe(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class bo extends Zw{constructor(t){super(t),this.keys=[],pe(t),this.keyClockDecoder=new va(Xe(t)),this.clientDecoder=new Rs(Xe(t)),this.leftClockDecoder=new va(Xe(t)),this.rightClockDecoder=new va(Xe(t)),this.infoDecoder=new Of(Xe(t),kr),this.stringDecoder=new fw(Xe(t)),this.parentInfoDecoder=new Of(Xe(t),kr),this.typeRefDecoder=new Rs(Xe(t)),this.lenDecoder=new Rs(Xe(t))}readLeftID(){return new so(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new so(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return wo(this.restDecoder)}readBuf(){return Xe(this.restDecoder)}readJSON(){return wo(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class cm{constructor(){this.restEncoder=Ze()}toUint8Array(){return Fe(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){ie(this.restEncoder,t)}writeDsLen(t){ie(this.restEncoder,t)}}class Bi extends cm{writeLeftID(t){ie(this.restEncoder,t.client),ie(this.restEncoder,t.clock)}writeRightID(t){ie(this.restEncoder,t.client),ie(this.restEncoder,t.clock)}writeClient(t){ie(this.restEncoder,t)}writeInfo(t){ji(this.restEncoder,t)}writeString(t){on(this.restEncoder,t)}writeParentInfo(t){ie(this.restEncoder,t?1:0)}writeTypeRef(t){ie(this.restEncoder,t)}writeLen(t){ie(this.restEncoder,t)}writeAny(t){vo(this.restEncoder,t)}writeBuf(t){Be(this.restEncoder,t)}writeJSON(t){on(this.restEncoder,JSON.stringify(t))}writeKey(t){on(this.restEncoder,t)}}class um{constructor(){this.restEncoder=Ze(),this.dsCurrVal=0}toUint8Array(){return Fe(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,ie(this.restEncoder,n)}writeDsLen(t){t===0&&cn(),ie(this.restEncoder,t-1),this.dsCurrVal+=t}}class Er extends um{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new ya,this.clientEncoder=new Ts,this.leftClockEncoder=new ya,this.rightClockEncoder=new ya,this.infoEncoder=new Af(ji),this.stringEncoder=new rw,this.parentInfoEncoder=new Af(ji),this.typeRefEncoder=new Ts,this.lenEncoder=new Ts}toUint8Array(){const t=Ze();return ie(t,0),Be(t,this.keyClockEncoder.toUint8Array()),Be(t,this.clientEncoder.toUint8Array()),Be(t,this.leftClockEncoder.toUint8Array()),Be(t,this.rightClockEncoder.toUint8Array()),Be(t,Fe(this.infoEncoder)),Be(t,this.stringEncoder.toUint8Array()),Be(t,Fe(this.parentInfoEncoder)),Be(t,this.typeRefEncoder.toUint8Array()),Be(t,this.lenEncoder.toUint8Array()),Al(t,Fe(this.restEncoder)),Fe(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){vo(this.restEncoder,t)}writeBuf(t){Be(this.restEncoder,t)}writeJSON(t){vo(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const ex=(e,t,n,r)=>{r=Lr(r,t[0].id.clock);const o=un(t,r);ie(e.restEncoder,t.length-o),e.writeClient(n),ie(e.restEncoder,r);const i=t[o];i.write(e,r-i.id.clock);for(let s=o+1;s<t.length;s++)t[s].write(e,0)},qu=(e,t,n)=>{const r=new Map;n.forEach((o,i)=>{et(t,i)>o&&r.set(i,o)}),Fl(t).forEach((o,i)=>{n.has(i)||r.set(i,0)}),ie(e.restEncoder,r.size),En(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{ex(e,t.clients.get(o),o,i)})},tx=(e,t)=>{const n=bt(),r=pe(e.restDecoder);for(let o=0;o<r;o++){const i=pe(e.restDecoder),s=new Array(i),a=e.readClient();let c=pe(e.restDecoder);n.set(a,{i:0,refs:s});for(let d=0;d<i;d++){const m=e.readInfo();switch(Ll&m){case 0:{const h=e.readLen();s[d]=new zt(ke(a,c),h),c+=h;break}case 10:{const h=pe(e.restDecoder);s[d]=new Nt(ke(a,c),h),c+=h;break}default:{const h=(m&(xn|Et))===0,p=new Ke(ke(a,c),null,(m&Et)===Et?e.readLeftID():null,null,(m&xn)===xn?e.readRightID():null,h?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,h&&(m&_i)===_i?e.readString():null,Om(e,m));s[d]=p,c+=p.length}}}}return n},nx=(e,t,n)=>{const r=[];let o=En(n.keys()).sort((y,v)=>y-v);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let y=n.get(o[o.length-1]);for(;y.refs.length===y.i;)if(o.pop(),o.length>0)y=n.get(o[o.length-1]);else return null;return y};let s=i();if(s===null)return null;const a=new gm,c=new Map,d=(y,v)=>{const C=c.get(y);(C==null||C>v)&&c.set(y,v)};let m=s.refs[s.i++];const h=new Map,p=()=>{for(const y of r){const v=y.id.client,C=n.get(v);C?(C.i--,a.clients.set(v,C.refs.slice(C.i)),n.delete(v),C.i=0,C.refs=[]):a.clients.set(v,[y]),o=o.filter(A=>A!==v)}r.length=0};for(;;){if(m.constructor!==Nt){const v=Tt(h,m.id.client,()=>et(t,m.id.client))-m.id.clock;if(v<0)r.push(m),d(m.id.client,m.id.clock-1),p();else{const C=m.getMissing(e,t);if(C!==null){r.push(m);const A=n.get(C)||{refs:[],i:0};if(A.refs.length===A.i)d(C,et(t,C)),p();else{m=A.refs[A.i++];continue}}else(v===0||v<m.length)&&(m.integrate(e,v),h.set(m.id.client,m.id.clock+m.length))}}if(r.length>0)m=r.pop();else if(s!==null&&s.i<s.refs.length)m=s.refs[s.i++];else{if(s=i(),s===null)break;m=s.refs[s.i++]}}if(a.clients.size>0){const y=new Er;return qu(y,a,new Map),ie(y.restEncoder,0),{missing:c,update:y.toUint8Array()}}return null},rx=(e,t)=>qu(e,t.doc.store,t.beforeState),ox=(e,t,n,r=new bo(e))=>Me(t,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,c=tx(r,s),d=nx(o,a,c),m=a.pendingStructs;if(m){for(const[p,y]of m.missing)if(y<et(a,p)){i=!0;break}if(d){for(const[p,y]of d.missing){const v=m.missing.get(p);(v==null||v>y)&&m.missing.set(p,y)}m.update=ol([m.update,d.update])}}else a.pendingStructs=d;const h=Hf(r,o,a);if(a.pendingDs){const p=new bo(fn(a.pendingDs));pe(p.restDecoder);const y=Hf(p,o,a);h&&y?a.pendingDs=ol([h,y]):a.pendingDs=h||y}else a.pendingDs=h;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,dm(o.doc,p)}},n,!1),dm=(e,t,n,r=bo)=>{const o=fn(t);ox(o,e,n,new r(o))},ix=(e,t,n)=>dm(e,t,n,am),sx=(e,t,n=new Map)=>{qu(e,t.store,n),Mo(e,qw(t.store))},lx=(e,t=new Uint8Array([0]),n=new Er)=>{const r=fm(t);sx(n,e,r);const o=[n.toUint8Array()];if(e.store.pendingDs&&o.push(e.store.pendingDs),e.store.pendingStructs&&o.push(Sx(e.store.pendingStructs.update,t)),o.length>1){if(n.constructor===Bi)return bx(o.map((i,s)=>s===0?i:_x(i)));if(n.constructor===Er)return ol(o)}return o[0]},ax=(e,t)=>lx(e,t,new Bi),cx=e=>{const t=new Map,n=pe(e.restDecoder);for(let r=0;r<n;r++){const o=pe(e.restDecoder),i=pe(e.restDecoder);t.set(o,i)}return t},fm=e=>cx(new lm(fn(e))),hm=(e,t)=>(ie(e.restEncoder,t.size),En(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{ie(e.restEncoder,n),ie(e.restEncoder,r)}),e),ux=(e,t)=>hm(e,Fl(t.store)),dx=(e,t=new um)=>(e instanceof Map?hm(t,e):ux(t,e),t.toUint8Array()),fx=e=>dx(e,new cm);class hx{constructor(){this.l=[]}}const Vf=()=>new hx,Yf=(e,t)=>e.l.push(t),Kf=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(o=>t!==o),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},pm=(e,t,n)=>Ku(e.l,[t,n]);class so{constructor(t,n){this.client=t,this.clock=n}}const ls=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,ke=(e,t)=>new so(e,t),px=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw cn()},Pr=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!im(t.ds,e.id),zc=(e,t)=>{const n=Tt(e.meta,zc,Jn),r=e.doc.store;n.has(t)||(t.sv.forEach((o,i)=>{o<et(r,i)&&qn(e,ke(i,o))}),om(e,t.ds,o=>{}),n.add(t))};class gm{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Fl=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const o=n[n.length-1];t.set(r,o.id.clock+o.length)}),t},et=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},mm=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw cn()}n.push(t)},un=(e,t)=>{let n=0,r=e.length-1,o=e[r],i=o.id.clock;if(i===t)return r;let s=ln(t/(i+o.length-1)*r);for(;n<=r;){if(o=e[s],i=o.id.clock,i<=t){if(t<i+o.length)return s;n=s+1}else r=s-1;s=ln((n+r)/2)}throw cn()},gx=(e,t)=>{const n=e.clients.get(t.client);return n[un(n,t.clock)]},ba=gx,Nc=(e,t,n)=>{const r=un(t,n),o=t[r];return o.id.clock<n&&o instanceof Ke?(t.splice(r+1,0,ul(e,o,n-o.id.clock)),r+1):r},qn=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Nc(e,n,t.clock)]},Gf=(e,t,n)=>{const r=t.clients.get(n.client),o=un(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==zt&&r.splice(o+1,0,ul(e,i,n.clock-i.id.clock+1)),i},mx=(e,t,n)=>{const r=e.clients.get(t.id.client);r[un(r,t.id.clock)]=n},ym=(e,t,n,r,o)=>{if(r===0)return;const i=n+r;let s=Nc(e,t,n),a;do a=t[s++],i<a.id.clock+a.length&&Nc(e,t,i),o(a);while(s<t.length&&t[s].id.clock<i)};class yx{constructor(t,n,r){this.doc=t,this.deleteSet=new Pi,this.beforeState=Fl(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Qf=(e,t)=>t.deleteSet.clients.size===0&&!Nv(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Xu(t.deleteSet),rx(e,t),Mo(e,t.deleteSet),!0),Xf=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Tt(e.changed,t,Jn).add(n)},Ms=(e,t)=>{let n=e[t],r=e[t-1],o=t;for(;o>0;n=r,r=e[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ke&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-o;return i&&e.splice(t+1-i,i),i},vx=(e,t,n)=>{for(const[r,o]of e.clients.entries()){const i=t.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],c=a.clock+a.len;for(let d=un(i,a.clock),m=i[d];d<i.length&&m.id.clock<c;m=i[++d]){const h=i[d];if(a.clock+a.len<=h.id.clock)break;h instanceof Ke&&h.deleted&&!h.keep&&n(h)&&h.gc(t,!1)}}}},wx=(e,t)=>{e.clients.forEach((n,r)=>{const o=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=Bu(o.length-1,1+un(o,s.clock+s.len-1));for(let c=a,d=o[c];c>0&&d.id.clock>=s.clock;d=o[c])c-=1+Ms(o,c)}})},vm=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{Xu(i),n.afterState=Fl(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((c,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,c)})),a.push(()=>{n.changedParentTypes.forEach((c,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(c=c.filter(m=>m.target._item===null||!m.target._item.deleted),c.forEach(m=>{m.currentTarget=d,m._path=null}),c.sort((m,h)=>m.path.length-h.path.length),pm(d._dEH,c,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),Ku(a,[]),n._needFormattingCleanup&&Px(n)}finally{r.gc&&vx(i,o,r.gcFilter),wx(i,o),n.afterState.forEach((m,h)=>{const p=n.beforeState.get(h)||0;if(p!==m){const y=o.clients.get(h),v=Lr(un(y,p),1);for(let C=y.length-1;C>=v;)C-=1+Ms(y,C)}});for(let m=s.length-1;m>=0;m--){const{client:h,clock:p}=s[m].id,y=o.clients.get(h),v=un(y,p);v+1<y.length&&Ms(y,v+1)>1||v>0&&Ms(y,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(tm(Nl,Ft,"[yjs] ",_r,qg,"Changed the client-id because another client seems to be using it."),r.clientID=sm()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const m=new Bi;Qf(m,n)&&r.emit("update",[m.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const m=new Er;Qf(m,n)&&r.emit("updateV2",[m.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:c,subdocsRemoved:d}=n;(a.size>0||d.size>0||c.size>0)&&(a.forEach(m=>{m.clientID=r.clientID,m.collectionid==null&&(m.collectionid=r.collectionid),r.subdocs.add(m)}),d.forEach(m=>r.subdocs.delete(m)),r.emit("subdocs",[{loaded:c,added:a,removed:d},r,n]),d.forEach(m=>m.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):vm(e,t+1)}}},Me=(e,t,n=null,r=!0)=>{const o=e._transactionCleanups;let i=!1,s=null;e._transaction===null&&(i=!0,e._transaction=new yx(e,n,r),o.push(e._transaction),o.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{s=t(e._transaction)}finally{if(i){const a=e._transaction===o[0];e._transaction=null,a&&vm(o,0)}}return s};function*xx(e){const t=pe(e.restDecoder);for(let n=0;n<t;n++){const r=pe(e.restDecoder),o=e.readClient();let i=pe(e.restDecoder);for(let s=0;s<r;s++){const a=e.readInfo();if(a===10){const c=pe(e.restDecoder);yield new Nt(ke(o,i),c),i+=c}else if(Ll&a){const c=(a&(xn|Et))===0,d=new Ke(ke(o,i),null,(a&Et)===Et?e.readLeftID():null,null,(a&xn)===xn?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(a&_i)===_i?e.readString():null,Om(e,a));yield d,i+=d.length}else{const c=e.readLen();yield new zt(ke(o,i),c),i+=c}}}}class Zu{constructor(t,n){this.gen=xx(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Nt);return this.curr}}class ed{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const bx=e=>ol(e,am,Bi),Cx=(e,t)=>{if(e.constructor===zt){const{client:n,clock:r}=e.id;return new zt(ke(n,r+t),e.length-t)}else if(e.constructor===Nt){const{client:n,clock:r}=e.id;return new Nt(ke(n,r+t),e.length-t)}else{const n=e,{client:r,clock:o}=n.id;return new Ke(ke(r,o+t),null,ke(r,o+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},ol=(e,t=bo,n=Er)=>{if(e.length===1)return e[0];const r=e.map(m=>new t(fn(m)));let o=r.map(m=>new Zu(m,!0)),i=null;const s=new n,a=new ed(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,y)=>{if(p.curr.id.client===y.curr.id.client){const v=p.curr.id.clock-y.curr.id.clock;return v===0?p.curr.constructor===y.curr.constructor?0:p.curr.constructor===Nt?1:-1:v}else return y.curr.id.client-p.curr.id.client}),o.length!==0;){const m=o[0],h=m.curr.id.client;if(i!==null){let p=m.curr,y=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=m.next(),y=!0;if(p===null||p.id.client!==h||y&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(h!==i.struct.id.client)Fn(a,i.struct,i.offset),i={struct:p,offset:0},m.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===Nt)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{Fn(a,i.struct,i.offset);const v=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Nt(ke(h,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-p.id.clock;v>0&&(i.struct.constructor===Nt?i.struct.length-=v:p=Cx(p,v)),i.struct.mergeWith(p)||(Fn(a,i.struct,i.offset),i={struct:p,offset:0},m.next())}}else i={struct:m.curr,offset:0},m.next();for(let p=m.curr;p!==null&&p.id.client===h&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==Nt;p=m.next())Fn(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(Fn(a,i.struct,i.offset),i=null),td(a);const c=r.map(m=>Ju(m)),d=Xw(c);return Mo(s,d),s.toUint8Array()},Sx=(e,t,n=bo,r=Er)=>{const o=fm(t),i=new r,s=new ed(i),a=new n(fn(e)),c=new Zu(a,!1);for(;c.curr;){const m=c.curr,h=m.id.client,p=o.get(h)||0;if(c.curr.constructor===Nt){c.next();continue}if(m.id.clock+m.length>p)for(Fn(s,m,Lr(p-m.id.clock,0)),c.next();c.curr&&c.curr.id.client===h;)Fn(s,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===h&&c.curr.id.clock+c.curr.length<=p;)c.next()}td(s);const d=Ju(a);return Mo(i,d),i.toUint8Array()},wm=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:Fe(e.encoder.restEncoder)}),e.encoder.restEncoder=Ze(),e.written=0)},Fn=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&wm(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),ie(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},td=e=>{wm(e);const t=e.encoder.restEncoder;ie(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];ie(t,r.written),Al(t,r.restEncoder)}},kx=(e,t,n,r)=>{const o=new n(fn(e)),i=new Zu(o,!1),s=new r,a=new ed(s);for(let d=i.curr;d!==null;d=i.next())Fn(a,t(d),0);td(a);const c=Ju(o);return Mo(s,c),s.toUint8Array()},_x=e=>kx(e,jw,bo,Bi),Jf="You must not compute changes after the event-handler fired.";class Il{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Ex(this.currentTarget,this.target))}deletes(t){return im(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw an(Jf);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let c=i.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(i))if(c!==null&&this.deletes(c))s="delete",a=pa(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",a=pa(c.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=pa(i.content.getContent());else return;t.set(o,{action:s,oldValue:a})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw an(Jf);const n=this.target,r=Jn(),o=Jn(),i=[];if(t={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const c=()=>{a&&i.push(a)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(c(),a={delete:0}),a.delete+=d.length,o.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(c(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),r.add(d)):((a===null||a.retain===void 0)&&(c(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&c()}this._changes=t}return t}}const Ex=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,o=t._item.parent._start;for(;o!==t._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}t=t._item.parent}return n},ut=()=>{Yw("Invalid access: Add Yjs type to a document before reading data.")},xm=80;let nd=0;class jx{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=nd++}}const Tx=e=>{e.timestamp=nd++},bm=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=nd++},Rx=(e,t,n)=>{if(e.length>=xm){const r=e.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return bm(r,t,n),r}else{const r=new jx(t,n);return e.push(r),r}},Pl=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,s)=>js(t-i.index)<js(t-s.index)?i:s);let r=e._start,o=0;for(n!==null&&(r=n.p,o=n.index,Tx(n));r.right!==null&&o<t;){if(!r.deleted&&r.countable){if(t<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>t;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&js(n.index-o)<r.parent.length/xm?(bm(n,r,o),n):Rx(e._searchMarker,r,o)},Ri=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const o=e[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}o.p=i,i.marker=!0}(t<o.index||n>0&&t===o.index)&&(o.index=Lr(t,o.index+n))}},Bl=(e,t,n)=>{const r=e,o=t.changedParentTypes;for(;Tt(o,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;pm(r._eH,n,t)};class ot{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Vf(),this._dEH=Vf(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw sn()}clone(){throw sn()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Yf(this._eH,t)}observeDeep(t){Yf(this._dEH,t)}unobserve(t){Kf(this._eH,t)}unobserveDeep(t){Kf(this._dEH,t)}toJSON(){}}const Cm=(e,t,n)=>{e.doc??ut(),t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const o=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=t)t-=s.length;else{for(let a=t;a<s.length&&r>0;a++)o.push(s[a]),r--;t=0}}i=i.right}return o},Sm=e=>{e.doc??ut();const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)t.push(r[o])}n=n.right}return t},Mi=(e,t)=>{let n=0,r=e._start;for(e.doc??ut();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)t(o[i],n++,e)}r=r.right}},km=(e,t)=>{const n=[];return Mi(e,(r,o)=>{n.push(t(r,o,e))}),n},Mx=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},_m=(e,t)=>{e.doc??ut();const n=Pl(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},il=(e,t,n,r)=>{let o=n;const i=e.doc,s=i.clientID,a=i.store,c=n===null?t._start:n.right;let d=[];const m=()=>{d.length>0&&(o=new Ke(ke(s,et(a,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Tr(d)),o.integrate(e,0),d=[])};r.forEach(h=>{if(h===null)d.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(h);break;default:switch(m(),h.constructor){case Uint8Array:case ArrayBuffer:o=new Ke(ke(s,et(a,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Ui(new Uint8Array(h))),o.integrate(e,0);break;case Do:o=new Ke(ke(s,et(a,s)),o,o&&o.lastId,c,c&&c.id,t,null,new $i(h)),o.integrate(e,0);break;default:if(h instanceof ot)o=new Ke(ke(s,et(a,s)),o,o&&o.lastId,c,c&&c.id,t,null,new Mn(h)),o.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),m()},Em=()=>an("Length exceeded!"),jm=(e,t,n,r)=>{if(n>t._length)throw Em();if(n===0)return t._searchMarker&&Ri(t._searchMarker,n,r.length),il(e,t,null,r);const o=n,i=Pl(t,n);let s=t._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&qn(e,ke(s.id.client,s.id.clock+n));break}n-=s.length}return t._searchMarker&&Ri(t._searchMarker,o,r.length),il(e,t,s,r)},Dx=(e,t,n)=>{let o=(t._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:t._start}).p;if(o)for(;o.right;)o=o.right;return il(e,t,o,n)},Tm=(e,t,n,r)=>{if(r===0)return;const o=n,i=r,s=Pl(t,n);let a=t._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&qn(e,ke(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&qn(e,ke(a.id.client,a.id.clock+r)),a.delete(e),r-=a.length),a=a.right;if(r>0)throw Em();t._searchMarker&&Ri(t._searchMarker,o,-i+r)},sl=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},rd=(e,t,n,r)=>{const o=t._map.get(n)||null,i=e.doc,s=i.clientID;let a;if(r==null)a=new Tr([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Tr([r]);break;case Uint8Array:a=new Ui(r);break;case Do:a=new $i(r);break;default:if(r instanceof ot)a=new Mn(r);else throw new Error("Unexpected content type")}new Ke(ke(s,et(i.store,s)),o,o&&o.lastId,null,null,t,n,a).integrate(e,0)},od=(e,t)=>{e.doc??ut();const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Rm=e=>{const t={};return e.doc??ut(),e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Mm=(e,t)=>{e.doc??ut();const n=e._map.get(t);return n!==void 0&&!n.deleted},Lx=(e,t)=>{const n={};return e._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Pr(i,t)&&(n[o]=i.content.getContent()[i.length-1])}),n},as=e=>(e.doc??ut(),Gw(e._map.entries(),t=>!t[1].deleted));class Ax extends Il{}class lo extends ot{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new lo;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new lo}clone(){const t=new lo;return t.insert(0,this.toArray().map(n=>n instanceof ot?n.clone():n)),t}get length(){return this.doc??ut(),this._length}_callObserver(t,n){super._callObserver(t,n),Bl(this,t,new Ax(this,t))}insert(t,n){this.doc!==null?Me(this.doc,r=>{jm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Me(this.doc,n=>{Dx(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Me(this.doc,r=>{Tm(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return _m(this,t)}toArray(){return Sm(this)}slice(t=0,n=this.length){return Cm(this,t,n)}toJSON(){return this.map(t=>t instanceof ot?t.toJSON():t)}map(t){return km(this,t)}forEach(t){Mi(this,t)}[Symbol.iterator](){return Mx(this)}_write(t){t.writeTypeRef(o1)}}const zx=e=>new lo;class Nx extends Il{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Co extends ot{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new Co}clone(){const t=new Co;return this.forEach((n,r)=>{t.set(r,n instanceof ot?n.clone():n)}),t}_callObserver(t,n){Bl(this,t,new Nx(this,t,n))}toJSON(){this.doc??ut();const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];t[r]=o instanceof ot?o.toJSON():o}}),t}get size(){return[...as(this)].length}keys(){return xa(as(this),t=>t[0])}values(){return xa(as(this),t=>t[1].content.getContent()[t[1].length-1])}entries(){return xa(as(this),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this.doc??ut(),this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Me(this.doc,n=>{sl(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Me(this.doc,r=>{rd(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return od(this,t)}has(t){return Mm(this,t)}clear(){this.doc!==null?Me(this.doc,t=>{this.forEach(function(n,r,o){sl(t,o,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(i1)}}const Ox=e=>new Co,Bn=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&kw(e,t);class Oc{constructor(t,n,r,o){this.left=t,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&cn(),this.right.content.constructor){case Ge:this.right.deleted||Lo(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const qf=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case Ge:t.right.deleted||Lo(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&qn(e,ke(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},cs=(e,t,n,r)=>{const o=new Map,i=r?Pl(t,n):null;if(i){const s=new Oc(i.p.left,i.p,i.index,o);return qf(e,s,n-i.index)}else{const s=new Oc(null,t._start,0,o);return qf(e,s,n)}},Dm=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Ge&&Bn(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=e.doc,i=o.clientID;r.forEach((s,a)=>{const c=n.left,d=n.right,m=new Ke(ke(i,et(o.store,i)),c,c&&c.lastId,d,d&&d.id,t,null,new Ge(a,s));m.integrate(e,0),n.right=m,n.forward()})},Lo=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},Lm=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===Ge&&Bn(t[e.right.content.key]??null,e.right.content.value)))break;e.forward()}},Am=(e,t,n,r)=>{const o=e.doc,i=o.clientID,s=new Map;for(const a in r){const c=r[a],d=n.currentAttributes.get(a)??null;if(!Bn(d,c)){s.set(a,d);const{left:m,right:h}=n;n.right=new Ke(ke(i,et(o.store,i)),m,m&&m.lastId,h,h&&h.id,t,null,new Ge(a,c)),n.right.integrate(e,0),n.forward()}}return s},Ca=(e,t,n,r,o)=>{n.currentAttributes.forEach((p,y)=>{o[y]===void 0&&(o[y]=null)});const i=e.doc,s=i.clientID;Lm(n,o);const a=Am(e,t,n,o),c=r.constructor===String?new dn(r):r instanceof ot?new Mn(r):new Ar(r);let{left:d,right:m,index:h}=n;t._searchMarker&&Ri(t._searchMarker,n.index,c.getLength()),m=new Ke(ke(s,et(i.store,s)),d,d&&d.lastId,m,m&&m.id,t,null,c),m.integrate(e,0),n.right=m,n.index=h,n.forward(),Dm(e,t,n,a)},Zf=(e,t,n,r,o)=>{const i=e.doc,s=i.clientID;Lm(n,o);const a=Am(e,t,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Ge));){if(!n.right.deleted)switch(n.right.content.constructor){case Ge:{const{key:c,value:d}=n.right.content,m=o[c];if(m!==void 0){if(Bn(m,d))a.delete(c);else{if(r===0)break e;a.set(c,d)}n.right.delete(e)}else n.currentAttributes.set(c,d);break}default:r<n.right.length&&qn(e,ke(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new Ke(ke(s,et(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new dn(c)),n.right.integrate(e,0),n.forward()}Dm(e,t,n,a)},zm=(e,t,n,r,o)=>{let i=t;const s=bt();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Ge){const d=i.content;s.set(d.key,d)}i=i.right}let a=0,c=!1;for(;t!==i;){if(n===t&&(c=!0),!t.deleted){const d=t.content;switch(d.constructor){case Ge:{const{key:m,value:h}=d,p=r.get(m)??null;(s.get(m)!==d||p===h)&&(t.delete(e),a++,!c&&(o.get(m)??null)===h&&p!==h&&(p===null?o.delete(m):o.set(m,p))),!c&&!t.deleted&&Lo(o,d);break}}}t=t.right}return a},Fx=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Ge){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},Ix=e=>{let t=0;return Me(e.doc,n=>{let r=e._start,o=e._start,i=bt();const s=Rc(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Ge:Lo(s,o.content);break;default:t+=zm(n,r,o,i,s),i=Rc(s),r=o;break}o=o.right}}),t},Px=e=>{const t=new Set,n=e.doc;for(const[r,o]of e.afterState.entries()){const i=e.beforeState.get(r)||0;o!==i&&ym(e,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===Ge&&s.constructor!==zt&&t.add(s.parent)})}Me(n,r=>{om(e,e.deleteSet,o=>{if(o instanceof zt||!o.parent._hasFormatting||t.has(o.parent))return;const i=o.parent;o.content.constructor===Ge?t.add(i):Fx(r,o)});for(const o of t)Ix(o)})},eh=(e,t,n)=>{const r=n,o=Rc(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Mn:case Ar:case dn:n<t.right.length&&qn(e,ke(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&zm(e,i,t.right,o,t.currentAttributes);const s=(t.left||t.right).parent;return s._searchMarker&&Ri(s._searchMarker,t.index,-r+n),t};class Bx extends Il{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Me(t,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const c={};let d="",m=0,h=0;const p=()=>{if(a!==null){let y=null;switch(a){case"delete":h>0&&(y={delete:h}),h=0;break;case"insert":(typeof d=="object"||d.length>0)&&(y={insert:d},o.size>0&&(y.attributes={},o.forEach((v,C)=>{v!==null&&(y.attributes[C]=v)}))),d="";break;case"retain":m>0&&(y={retain:m},Cw(c)||(y.attributes=xw({},c))),m=0;break}y&&n.push(y),a=null}};for(;s!==null;){switch(s.content.constructor){case Mn:case Ar:this.adds(s)?this.deletes(s)||(p(),a="insert",d=s.content.getContent()[0],p()):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),h+=1):s.deleted||(a!=="retain"&&(p(),a="retain"),m+=1);break;case dn:this.adds(s)?this.deletes(s)||(a!=="insert"&&(p(),a="insert"),d+=s.content.str):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),h+=s.length):s.deleted||(a!=="retain"&&(p(),a="retain"),m+=s.length);break;case Ge:{const{key:y,value:v}=s.content;if(this.adds(s)){if(!this.deletes(s)){const C=o.get(y)??null;Bn(C,v)?v!==null&&s.delete(r):(a==="retain"&&p(),Bn(v,i.get(y)??null)?delete c[y]:c[y]=v)}}else if(this.deletes(s)){i.set(y,v);const C=o.get(y)??null;Bn(C,v)||(a==="retain"&&p(),c[y]=C)}else if(!s.deleted){i.set(y,v);const C=c[y];C!==void 0&&(Bn(C,v)?C!==null&&s.delete(r):(a==="retain"&&p(),v===null?delete c[y]:c[y]=v))}s.deleted||(a==="insert"&&p(),Lo(o,s.content));break}}s=s.right}for(p();n.length>0;){const y=n[n.length-1];if(y.retain!==void 0&&y.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class So extends ot{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ut(),this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new So}clone(){const t=new So;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new Bx(this,t,n);Bl(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){this.doc??ut();let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===dn&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Me(this.doc,r=>{const o=new Oc(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const s=t[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===t.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&Ca(r,this,o,a,s.attributes||{})}else s.retain!==void 0?Zf(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&eh(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){this.doc??ut();const o=[],i=new Map,s=this.doc;let a="",c=this._start;function d(){if(a.length>0){const h={};let p=!1;i.forEach((v,C)=>{p=!0,h[C]=v});const y={insert:a};p&&(y.attributes=h),o.push(y),a=""}}const m=()=>{for(;c!==null;){if(Pr(c,t)||n!==void 0&&Pr(c,n))switch(c.content.constructor){case dn:{const h=i.get("ychange");t!==void 0&&!Pr(c,t)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(d(),i.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!Pr(c,n)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(d(),i.set("ychange",r?r("added",c.id):{type:"added"})):h!==void 0&&(d(),i.delete("ychange")),a+=c.content.str;break}case Mn:case Ar:{d();const h={insert:c.content.getContent()[0]};if(i.size>0){const p={};h.attributes=p,i.forEach((y,v)=>{p[v]=y})}o.push(h);break}case Ge:Pr(c,t)&&(d(),Lo(i,c.content));break}c=c.right}d()};return t||n?Me(s,h=>{t&&zc(h,t),n&&zc(h,n),m()},"cleanup"):m(),o}insert(t,n,r){if(n.length<=0)return;const o=this.doc;o!==null?Me(o,i=>{const s=cs(i,this,t,!r);r||(r={},s.currentAttributes.forEach((a,c)=>{r[c]=a})),Ca(i,this,s,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const o=this.doc;o!==null?Me(o,i=>{const s=cs(i,this,t,!r);Ca(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Me(r,o=>{eh(o,cs(o,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const o=this.doc;o!==null?Me(o,i=>{const s=cs(i,this,t,!1);s.right!==null&&Zf(i,this,s,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Me(this.doc,n=>{sl(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Me(this.doc,r=>{rd(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return od(this,t)}getAttributes(){return Rm(this)}_write(t){t.writeTypeRef(s1)}}const Ux=e=>new So;class Sa{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0,t.doc??ut()}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===ko||n.constructor===jr)&&n._start!==null)t=n._start;else for(;t!==null;){const r=t.next;if(r!==null){t=r;break}else t.parent===this._root?t=null:t=t.parent._item}while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class jr extends ot{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new jr}clone(){const t=new jr;return t.insert(0,this.toArray().map(n=>n instanceof ot?n.clone():n)),t}get length(){return this.doc??ut(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Sa(this,t)}querySelector(t){t=t.toUpperCase();const r=new Sa(this,o=>o.nodeName&&o.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),En(new Sa(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Bl(this,t,new Hx(this,n,t))}toString(){return km(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const o=t.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Mi(this,i=>{o.insertBefore(i.toDOM(t,n,r),null)}),o}insert(t,n){this.doc!==null?Me(this.doc,r=>{jm(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Me(this.doc,r=>{const o=t&&t instanceof ot?t._item:t;il(r,this,o,n)});else{const r=this._prelimContent,o=t===null?0:r.findIndex(i=>i===t)+1;if(o===0&&t!==null)throw an("Reference item not found");r.splice(o,0,...n)}}delete(t,n=1){this.doc!==null?Me(this.doc,r=>{Tm(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return Sm(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return _m(this,t)}slice(t=0,n=this.length){return Cm(this,t,n)}forEach(t){Mi(this,t)}_write(t){t.writeTypeRef(a1)}}const $x=e=>new jr;class ko extends jr{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new ko(this.nodeName)}clone(){const t=new ko(this.nodeName),n=this.getAttributes();return bw(n,(r,o)=>{typeof r=="string"&&t.setAttribute(o,r)}),t.insert(0,this.toArray().map(r=>r instanceof ot?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const a in t)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const c=r[a];n.push(c+'="'+t[c]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?Me(this.doc,n=>{sl(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Me(this.doc,r=>{rd(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return od(this,t)}hasAttribute(t){return Mm(this,t)}getAttributes(t){return t?Lx(this,t):Rm(this)}toDOM(t=document,n={},r){const o=t.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return Mi(this,s=>{o.appendChild(s.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(t){t.writeTypeRef(l1),t.writeKey(this.nodeName)}}const Wx=e=>new ko(e.readKey());class Hx extends Il{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class ll extends Co{constructor(t){super(),this.hookName=t}_copy(){return new ll(this.hookName)}clone(){const t=new ll(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(c1),t.writeKey(this.hookName)}}const Vx=e=>new ll(e.readKey());class al extends So{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new al}clone(){const t=new al;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const o=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(t=>{const n=[];for(const o in t.attributes){const i=[];for(const s in t.attributes[o])i.push({key:s,value:t.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=t.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(u1)}}const Yx=e=>new al;class id{constructor(t,n){this.id=t,this.length=n}get deleted(){throw sn()}mergeWith(t){return!1}write(t,n,r){throw sn()}integrate(t,n){throw sn()}}const Kx=0;class zt extends id{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),mm(t.doc.store,this)}write(t,n){t.writeInfo(Kx),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Ui{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ui(this.content)}splice(t){throw sn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const Gx=e=>new Ui(e.readBuf());class Di{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Di(this.len)}splice(t){const n=new Di(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){rl(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const Qx=e=>new Di(e.readLen()),Nm=(e,t)=>new Do({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class $i{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new $i(Nm(this.doc.guid,this.opts))}splice(t){throw sn()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Xx=e=>new $i(Nm(e.readString(),e.readAny()));class Ar{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Ar(this.embed)}splice(t){throw sn()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const Jx=e=>new Ar(e.readJSON());class Ge{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Ge(this.key,this.value)}splice(t){throw sn()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const qx=e=>new Ge(e.readKey(),e.readJSON());class cl{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new cl(this.arr)}splice(t){const n=new cl(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const Zx=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const o=e.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new cl(n)},e1=Ti("node_env")==="development";class Tr{constructor(t){this.arr=t,e1&&Wg(t)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Tr(this.arr)}splice(t){const n=new Tr(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];t.writeAny(i)}}getRef(){return 8}}const t1=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Tr(n)};class dn{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new dn(this.str)}splice(t){const n=new dn(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const n1=e=>new dn(e.readString()),r1=[zx,Ox,Ux,Wx,$x,Vx,Yx],o1=0,i1=1,s1=2,l1=3,a1=4,c1=5,u1=6;class Mn{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Mn(this.type._copy())}splice(t){throw sn()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const d1=e=>new Mn(r1[e.readTypeRef()](e)),ul=(e,t,n)=>{const{client:r,clock:o}=t.id,i=new Ke(ke(r,o+n),t,ke(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=ke(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i};class Ke extends id{constructor(t,n,r,o,i,s,a,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=c,this.info=this.content.isCountable()?Mf:0}set marker(t){(this.info&ma)>0!==t&&(this.info^=ma)}get marker(){return(this.info&ma)>0}get keep(){return(this.info&Rf)>0}set keep(t){this.keep!==t&&(this.info^=Rf)}get countable(){return(this.info&Mf)>0}get deleted(){return(this.info&ga)>0}set deleted(t){this.deleted!==t&&(this.info^=ga)}markDeleted(){this.info|=ga}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=et(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=et(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===so&&this.id.client!==this.parent.client&&this.parent.clock>=et(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Gf(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=qn(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===zt||this.right&&this.right.constructor===zt)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ke?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ke&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===so){const r=ba(n,this.parent);r.constructor===zt?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=Gf(t,t.doc.store,ke(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),ls(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(ls(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(ba(t.doc.store,o.origin)))i.has(ba(t.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),mm(t.doc.store,this),this.content.integrate(t,this),Xf(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new zt(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:ke(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&ls(t.origin,this.lastId)&&this.right===t&&ls(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),rl(t.deleteSet,this.id.client,this.id.clock,this.length),Xf(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw cn();this.content.gc(t),n?mx(t,this,new zt(this.id,this.length)):this.content=new Di(this.length)}write(t,n){const r=n>0?ke(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&Ll|(r===null?0:Et)|(o===null?0:xn)|(i===null?0:_i);if(t.writeInfo(s),r!==null&&t.writeLeftID(r),o!==null&&t.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const c=a._item;if(c===null){const d=px(a);t.writeParentInfo(!0),t.writeString(d)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else a.constructor===String?(t.writeParentInfo(!0),t.writeString(a)):a.constructor===so?(t.writeParentInfo(!1),t.writeLeftID(a)):cn();i!==null&&t.writeString(i)}this.content.write(t,n)}}const Om=(e,t)=>f1[t&Ll](e),f1=[()=>{cn()},Qx,Zx,Gx,n1,Jx,qx,d1,t1,Xx,()=>{cn()}],h1=10;class Nt extends id{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){cn()}write(t,n){t.writeInfo(h1),ie(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Im="__ $YJS$ __";Fm[Im]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Fm[Im]=!0;const p1=1200,g1=2500,dl=3e4,Fc=e=>{if(e.shouldConnect&&e.ws===null){const t=new WebSocket(e.url),n=e.binaryType;let r=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=s=>{e.lastMessageReceived=jn();const a=s.data,c=typeof a=="string"?JSON.parse(a):a;c&&c.type==="pong"&&(clearTimeout(r),r=setTimeout(i,dl/2)),e.emit("message",[c,e])};const o=s=>{e.ws!==null&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:s},e])):e.unsuccessfulReconnects++,setTimeout(Fc,Bu(Iv(e.unsuccessfulReconnects+1)*p1,g1),e)),clearTimeout(r)},i=()=>{e.ws===t&&e.send({type:"ping"})};t.onclose=()=>o(null),t.onerror=s=>o(s),t.onopen=()=>{e.lastMessageReceived=jn(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),r=setTimeout(i,dl/2)}}};class m1 extends Lg{constructor(t,{binaryType:n}={}){super(),this.url=t,this.ws=null,this.binaryType=n||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&dl<jn()-this.lastMessageReceived&&this.ws.close()},dl/2),Fc(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Fc(this)}}const Pm=new Map;class y1{constructor(t){this.room=t,this.onmessage=null,this._onChange=n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:Qg(n.newValue||"")}),vw(this._onChange)}postMessage(t){Bg.setItem(this.room,Gg(Aw(t)))}close(){ww(this._onChange)}}const v1=typeof BroadcastChannel>"u"?y1:BroadcastChannel,sd=e=>Tt(Pm,e,()=>{const t=Jn(),n=new v1(e);return n.onmessage=r=>t.forEach(o=>o(r.data,"broadcastchannel")),{bc:n,subs:t}}),w1=(e,t)=>(sd(e).subs.add(t),t),x1=(e,t)=>{const n=sd(e),r=n.subs.delete(t);return r&&n.subs.size===0&&(n.bc.close(),Pm.delete(e)),r},b1=(e,t,n=null)=>{const r=sd(e);r.bc.postMessage(t),r.subs.forEach(o=>o(t,n))},C1=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}};function us(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bm={exports:{}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Math.floor,r=Math.abs,o=Math.pow;return function(){function i(s,a,c){function d(p,y){if(!a[p]){if(!s[p]){var v=typeof us=="function"&&us;if(!y&&v)return v(p,!0);if(m)return m(p,!0);var C=new Error("Cannot find module '"+p+"'");throw C.code="MODULE_NOT_FOUND",C}var A=a[p]={exports:{}};s[p][0].call(A.exports,function(b){var S=s[p][1][b];return d(S||b)},A,A.exports,i,s,a,c)}return a[p].exports}for(var m=typeof us=="function"&&us,h=0;h<c.length;h++)d(c[h]);return d}return i}()({1:[function(i,s,a){function c(w){var _=w.length;if(0<_%4)throw new Error("Invalid string. Length must be a multiple of 4");var M=w.indexOf("=");M===-1&&(M=_);var k=M===_?0:4-M%4;return[M,k]}function d(w,_,M){return 3*(_+M)/4-M}function m(w){var _,M,k=c(w),T=k[0],z=k[1],E=new A(d(w,T,z)),D=0,I=0<z?T-4:T;for(M=0;M<I;M+=4)_=C[w.charCodeAt(M)]<<18|C[w.charCodeAt(M+1)]<<12|C[w.charCodeAt(M+2)]<<6|C[w.charCodeAt(M+3)],E[D++]=255&_>>16,E[D++]=255&_>>8,E[D++]=255&_;return z===2&&(_=C[w.charCodeAt(M)]<<2|C[w.charCodeAt(M+1)]>>4,E[D++]=255&_),z===1&&(_=C[w.charCodeAt(M)]<<10|C[w.charCodeAt(M+1)]<<4|C[w.charCodeAt(M+2)]>>2,E[D++]=255&_>>8,E[D++]=255&_),E}function h(w){return v[63&w>>18]+v[63&w>>12]+v[63&w>>6]+v[63&w]}function p(w,_,M){for(var k,T=[],z=_;z<M;z+=3)k=(16711680&w[z]<<16)+(65280&w[z+1]<<8)+(255&w[z+2]),T.push(h(k));return T.join("")}function y(w){for(var _,M=w.length,k=M%3,T=[],z=16383,E=0,D=M-k;E<D;E+=z)T.push(p(w,E,E+z>D?D:E+z));return k===1?(_=w[M-1],T.push(v[_>>2]+v[63&_<<4]+"==")):k===2&&(_=(w[M-2]<<8)+w[M-1],T.push(v[_>>10]+v[63&_>>4]+v[63&_<<2]+"=")),T.join("")}a.byteLength=function(w){var _=c(w),M=_[0],k=_[1];return 3*(M+k)/4-k},a.toByteArray=m,a.fromByteArray=y;for(var v=[],C=[],A=typeof Uint8Array>"u"?Array:Uint8Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,f=b.length;S<f;++S)v[S]=b[S],C[b.charCodeAt(S)]=S;C[45]=62,C[95]=63},{}],2:[function(){},{}],3:[function(i,s,a){(function(){(function(){var c=String.fromCharCode,d=Math.min;function m(l){if(2147483647<l)throw new RangeError('The value "'+l+'" is invalid for option "size"');var g=new Uint8Array(l);return g.__proto__=h.prototype,g}function h(l,g,x){if(typeof l=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(l)}return p(l,g,x)}function p(l,g,x){if(typeof l=="string")return A(l,g);if(ArrayBuffer.isView(l))return b(l);if(l==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(N(l,ArrayBuffer)||l&&N(l.buffer,ArrayBuffer))return S(l,g,x);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var L=l.valueOf&&l.valueOf();if(L!=null&&L!==l)return h.from(L,g,x);var F=f(l);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return h.from(l[Symbol.toPrimitive]("string"),g,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function y(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(0>l)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function v(l,g,x){return y(l),0>=l||g===void 0?m(l):typeof x=="string"?m(l).fill(g,x):m(l).fill(g)}function C(l){return y(l),m(0>l?0:0|w(l))}function A(l,g){if((typeof g!="string"||g==="")&&(g="utf8"),!h.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var x=0|_(l,g),L=m(x),F=L.write(l,g);return F!==x&&(L=L.slice(0,F)),L}function b(l){for(var g=0>l.length?0:0|w(l.length),x=m(g),L=0;L<g;L+=1)x[L]=255&l[L];return x}function S(l,g,x){if(0>g||l.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<g+(x||0))throw new RangeError('"length" is outside of buffer bounds');var L;return L=g===void 0&&x===void 0?new Uint8Array(l):x===void 0?new Uint8Array(l,g):new Uint8Array(l,g,x),L.__proto__=h.prototype,L}function f(l){if(h.isBuffer(l)){var g=0|w(l.length),x=m(g);return x.length===0||l.copy(x,0,0,g),x}return l.length===void 0?l.type==="Buffer"&&Array.isArray(l.data)?b(l.data):void 0:typeof l.length!="number"||R(l.length)?m(0):b(l)}function w(l){if(l>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|l}function _(l,g){if(h.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||N(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);var x=l.length,L=2<arguments.length&&arguments[2]===!0;if(!L&&x===0)return 0;for(var F=!1;;)switch(g){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return Z(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return Se(l).length;default:if(F)return L?-1:Z(l).length;g=(""+g).toLowerCase(),F=!0}}function M(l,g,x){var L=!1;if((g===void 0||0>g)&&(g=0),g>this.length||((x===void 0||x>this.length)&&(x=this.length),0>=x)||(x>>>=0,g>>>=0,x<=g))return"";for(l||(l="utf8");;)switch(l){case"hex":return ce(this,g,x);case"utf8":case"utf-8":return ge(this,g,x);case"ascii":return U(this,g,x);case"latin1":case"binary":return re(this,g,x);case"base64":return se(this,g,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,g,x);default:if(L)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),L=!0}}function k(l,g,x){var L=l[g];l[g]=l[x],l[x]=L}function T(l,g,x,L,F){if(l.length===0)return-1;if(typeof x=="string"?(L=x,x=0):2147483647<x?x=2147483647:-2147483648>x&&(x=-2147483648),x=+x,R(x)&&(x=F?0:l.length-1),0>x&&(x=l.length+x),x>=l.length){if(F)return-1;x=l.length-1}else if(0>x)if(F)x=0;else return-1;if(typeof g=="string"&&(g=h.from(g,L)),h.isBuffer(g))return g.length===0?-1:z(l,g,x,L,F);if(typeof g=="number")return g&=255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(l,g,x):Uint8Array.prototype.lastIndexOf.call(l,g,x):z(l,[g],x,L,F);throw new TypeError("val must be string, number or Buffer")}function z(l,g,x,L,F){function B(le,be){return te===1?le[be]:le.readUInt16BE(be*te)}var te=1,he=l.length,je=g.length;if(L!==void 0&&(L=(L+"").toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(2>l.length||2>g.length)return-1;te=2,he/=2,je/=2,x/=2}var ye;if(F){var O=-1;for(ye=x;ye<he;ye++)if(B(l,ye)!==B(g,O===-1?0:ye-O))O!==-1&&(ye-=ye-O),O=-1;else if(O===-1&&(O=ye),ye-O+1===je)return O*te}else for(x+je>he&&(x=he-je),ye=x;0<=ye;ye--){for(var X=!0,ne=0;ne<je;ne++)if(B(l,ye+ne)!==B(g,ne)){X=!1;break}if(X)return ye}return-1}function E(l,g,x,L){x=+x||0;var F=l.length-x;L?(L=+L,L>F&&(L=F)):L=F;var B=g.length;L>B/2&&(L=B/2);for(var te,he=0;he<L;++he){if(te=parseInt(g.substr(2*he,2),16),R(te))return he;l[x+he]=te}return he}function D(l,g,x,L){return xe(Z(g,l.length-x),l,x,L)}function I(l,g,x,L){return xe(ue(g),l,x,L)}function W(l,g,x,L){return I(l,g,x,L)}function Q(l,g,x,L){return xe(Se(g),l,x,L)}function q(l,g,x,L){return xe(we(g,l.length-x),l,x,L)}function se(l,g,x){return g===0&&x===l.length?P.fromByteArray(l):P.fromByteArray(l.slice(g,x))}function ge(l,g,x){x=d(l.length,x);for(var L=[],F=g;F<x;){var B=l[F],te=null,he=239<B?4:223<B?3:191<B?2:1;if(F+he<=x){var je,ye,O,X;he===1?128>B&&(te=B):he===2?(je=l[F+1],(192&je)==128&&(X=(31&B)<<6|63&je,127<X&&(te=X))):he===3?(je=l[F+1],ye=l[F+2],(192&je)==128&&(192&ye)==128&&(X=(15&B)<<12|(63&je)<<6|63&ye,2047<X&&(55296>X||57343<X)&&(te=X))):he===4&&(je=l[F+1],ye=l[F+2],O=l[F+3],(192&je)==128&&(192&ye)==128&&(192&O)==128&&(X=(15&B)<<18|(63&je)<<12|(63&ye)<<6|63&O,65535<X&&1114112>X&&(te=X)))}te===null?(te=65533,he=1):65535<te&&(te-=65536,L.push(55296|1023&te>>>10),te=56320|1023&te),L.push(te),F+=he}return K(L)}function K(l){var g=l.length;if(g<=4096)return c.apply(String,l);for(var x="",L=0;L<g;)x+=c.apply(String,l.slice(L,L+=4096));return x}function U(l,g,x){var L="";x=d(l.length,x);for(var F=g;F<x;++F)L+=c(127&l[F]);return L}function re(l,g,x){var L="";x=d(l.length,x);for(var F=g;F<x;++F)L+=c(l[F]);return L}function ce(l,g,x){var L=l.length;(!g||0>g)&&(g=0),(!x||0>x||x>L)&&(x=L);for(var F="",B=g;B<x;++B)F+=V(l[B]);return F}function ve(l,g,x){for(var L=l.slice(g,x),F="",B=0;B<L.length;B+=2)F+=c(L[B]+256*L[B+1]);return F}function me(l,g,x){if(l%1!=0||0>l)throw new RangeError("offset is not uint");if(l+g>x)throw new RangeError("Trying to access beyond buffer length")}function oe(l,g,x,L,F,B){if(!h.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>F||g<B)throw new RangeError('"value" argument is out of bounds');if(x+L>l.length)throw new RangeError("Index out of range")}function de(l,g,x,L){if(x+L>l.length)throw new RangeError("Index out of range");if(0>x)throw new RangeError("Index out of range")}function G(l,g,x,L,F){return g=+g,x>>>=0,F||de(l,g,x,4),H.write(l,g,x,L,23,4),x+4}function fe(l,g,x,L,F){return g=+g,x>>>=0,F||de(l,g,x,8),H.write(l,g,x,L,52,8),x+8}function J(l){if(l=l.split("=")[0],l=l.trim().replace(j,""),2>l.length)return"";for(;l.length%4!=0;)l+="=";return l}function V(l){return 16>l?"0"+l.toString(16):l.toString(16)}function Z(l,g){g=g||1/0;for(var x,L=l.length,F=null,B=[],te=0;te<L;++te){if(x=l.charCodeAt(te),55295<x&&57344>x){if(!F){if(56319<x){-1<(g-=3)&&B.push(239,191,189);continue}else if(te+1===L){-1<(g-=3)&&B.push(239,191,189);continue}F=x;continue}if(56320>x){-1<(g-=3)&&B.push(239,191,189),F=x;continue}x=(F-55296<<10|x-56320)+65536}else F&&-1<(g-=3)&&B.push(239,191,189);if(F=null,128>x){if(0>(g-=1))break;B.push(x)}else if(2048>x){if(0>(g-=2))break;B.push(192|x>>6,128|63&x)}else if(65536>x){if(0>(g-=3))break;B.push(224|x>>12,128|63&x>>6,128|63&x)}else if(1114112>x){if(0>(g-=4))break;B.push(240|x>>18,128|63&x>>12,128|63&x>>6,128|63&x)}else throw new Error("Invalid code point")}return B}function ue(l){for(var g=[],x=0;x<l.length;++x)g.push(255&l.charCodeAt(x));return g}function we(l,g){for(var x,L,F,B=[],te=0;te<l.length&&!(0>(g-=2));++te)x=l.charCodeAt(te),L=x>>8,F=x%256,B.push(F),B.push(L);return B}function Se(l){return P.toByteArray(J(l))}function xe(l,g,x,L){for(var F=0;F<L&&!(F+x>=g.length||F>=l.length);++F)g[F+x]=l[F];return F}function N(l,g){return l instanceof g||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===g.name}function R(l){return l!==l}var P=i("base64-js"),H=i("ieee754");a.Buffer=h,a.SlowBuffer=function(l){return+l!=l&&(l=0),h.alloc(+l)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,h.TYPED_ARRAY_SUPPORT=function(){try{var l=new Uint8Array(1);return l.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},l.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){return h.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){return h.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(l,g,x){return p(l,g,x)},h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,h.alloc=function(l,g,x){return v(l,g,x)},h.allocUnsafe=function(l){return C(l)},h.allocUnsafeSlow=function(l){return C(l)},h.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==h.prototype},h.compare=function(l,g){if(N(l,Uint8Array)&&(l=h.from(l,l.offset,l.byteLength)),N(g,Uint8Array)&&(g=h.from(g,g.offset,g.byteLength)),!h.isBuffer(l)||!h.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===g)return 0;for(var x=l.length,L=g.length,F=0,B=d(x,L);F<B;++F)if(l[F]!==g[F]){x=l[F],L=g[F];break}return x<L?-1:L<x?1:0},h.isEncoding=function(l){switch((l+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(l,g){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return h.alloc(0);var x;if(g===void 0)for(g=0,x=0;x<l.length;++x)g+=l[x].length;var L=h.allocUnsafe(g),F=0;for(x=0;x<l.length;++x){var B=l[x];if(N(B,Uint8Array)&&(B=h.from(B)),!h.isBuffer(B))throw new TypeError('"list" argument must be an Array of Buffers');B.copy(L,F),F+=B.length}return L},h.byteLength=_,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<l;g+=2)k(this,g,g+1);return this},h.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<l;g+=4)k(this,g,g+3),k(this,g+1,g+2);return this},h.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var g=0;g<l;g+=8)k(this,g,g+7),k(this,g+1,g+6),k(this,g+2,g+5),k(this,g+3,g+4);return this},h.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?ge(this,0,l):M.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(l){if(!h.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||h.compare(this,l)===0},h.prototype.inspect=function(){var l="",g=a.INSPECT_MAX_BYTES;return l=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(l+=" ... "),"<Buffer "+l+">"},h.prototype.compare=function(l,g,x,L,F){if(N(l,Uint8Array)&&(l=h.from(l,l.offset,l.byteLength)),!h.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(g===void 0&&(g=0),x===void 0&&(x=l?l.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),0>g||x>l.length||0>L||F>this.length)throw new RangeError("out of range index");if(L>=F&&g>=x)return 0;if(L>=F)return-1;if(g>=x)return 1;if(g>>>=0,x>>>=0,L>>>=0,F>>>=0,this===l)return 0;for(var B=F-L,te=x-g,he=d(B,te),je=this.slice(L,F),ye=l.slice(g,x),O=0;O<he;++O)if(je[O]!==ye[O]){B=je[O],te=ye[O];break}return B<te?-1:te<B?1:0},h.prototype.includes=function(l,g,x){return this.indexOf(l,g,x)!==-1},h.prototype.indexOf=function(l,g,x){return T(this,l,g,x,!0)},h.prototype.lastIndexOf=function(l,g,x){return T(this,l,g,x,!1)},h.prototype.write=function(l,g,x,L){if(g===void 0)L="utf8",x=this.length,g=0;else if(x===void 0&&typeof g=="string")L=g,x=this.length,g=0;else if(isFinite(g))g>>>=0,isFinite(x)?(x>>>=0,L===void 0&&(L="utf8")):(L=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-g;if((x===void 0||x>F)&&(x=F),0<l.length&&(0>x||0>g)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var B=!1;;)switch(L){case"hex":return E(this,l,g,x);case"utf8":case"utf-8":return D(this,l,g,x);case"ascii":return I(this,l,g,x);case"latin1":case"binary":return W(this,l,g,x);case"base64":return Q(this,l,g,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,l,g,x);default:if(B)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),B=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(l,g){var x=this.length;l=~~l,g=g===void 0?x:~~g,0>l?(l+=x,0>l&&(l=0)):l>x&&(l=x),0>g?(g+=x,0>g&&(g=0)):g>x&&(g=x),g<l&&(g=l);var L=this.subarray(l,g);return L.__proto__=h.prototype,L},h.prototype.readUIntLE=function(l,g,x){l>>>=0,g>>>=0,x||me(l,g,this.length);for(var L=this[l],F=1,B=0;++B<g&&(F*=256);)L+=this[l+B]*F;return L},h.prototype.readUIntBE=function(l,g,x){l>>>=0,g>>>=0,x||me(l,g,this.length);for(var L=this[l+--g],F=1;0<g&&(F*=256);)L+=this[l+--g]*F;return L},h.prototype.readUInt8=function(l,g){return l>>>=0,g||me(l,1,this.length),this[l]},h.prototype.readUInt16LE=function(l,g){return l>>>=0,g||me(l,2,this.length),this[l]|this[l+1]<<8},h.prototype.readUInt16BE=function(l,g){return l>>>=0,g||me(l,2,this.length),this[l]<<8|this[l+1]},h.prototype.readUInt32LE=function(l,g){return l>>>=0,g||me(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},h.prototype.readUInt32BE=function(l,g){return l>>>=0,g||me(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},h.prototype.readIntLE=function(l,g,x){l>>>=0,g>>>=0,x||me(l,g,this.length);for(var L=this[l],F=1,B=0;++B<g&&(F*=256);)L+=this[l+B]*F;return F*=128,L>=F&&(L-=o(2,8*g)),L},h.prototype.readIntBE=function(l,g,x){l>>>=0,g>>>=0,x||me(l,g,this.length);for(var L=g,F=1,B=this[l+--L];0<L&&(F*=256);)B+=this[l+--L]*F;return F*=128,B>=F&&(B-=o(2,8*g)),B},h.prototype.readInt8=function(l,g){return l>>>=0,g||me(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},h.prototype.readInt16LE=function(l,g){l>>>=0,g||me(l,2,this.length);var x=this[l]|this[l+1]<<8;return 32768&x?4294901760|x:x},h.prototype.readInt16BE=function(l,g){l>>>=0,g||me(l,2,this.length);var x=this[l+1]|this[l]<<8;return 32768&x?4294901760|x:x},h.prototype.readInt32LE=function(l,g){return l>>>=0,g||me(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},h.prototype.readInt32BE=function(l,g){return l>>>=0,g||me(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},h.prototype.readFloatLE=function(l,g){return l>>>=0,g||me(l,4,this.length),H.read(this,l,!0,23,4)},h.prototype.readFloatBE=function(l,g){return l>>>=0,g||me(l,4,this.length),H.read(this,l,!1,23,4)},h.prototype.readDoubleLE=function(l,g){return l>>>=0,g||me(l,8,this.length),H.read(this,l,!0,52,8)},h.prototype.readDoubleBE=function(l,g){return l>>>=0,g||me(l,8,this.length),H.read(this,l,!1,52,8)},h.prototype.writeUIntLE=function(l,g,x,L){if(l=+l,g>>>=0,x>>>=0,!L){var F=o(2,8*x)-1;oe(this,l,g,x,F,0)}var B=1,te=0;for(this[g]=255&l;++te<x&&(B*=256);)this[g+te]=255&l/B;return g+x},h.prototype.writeUIntBE=function(l,g,x,L){if(l=+l,g>>>=0,x>>>=0,!L){var F=o(2,8*x)-1;oe(this,l,g,x,F,0)}var B=x-1,te=1;for(this[g+B]=255&l;0<=--B&&(te*=256);)this[g+B]=255&l/te;return g+x},h.prototype.writeUInt8=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,1,255,0),this[g]=255&l,g+1},h.prototype.writeUInt16LE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,2,65535,0),this[g]=255&l,this[g+1]=l>>>8,g+2},h.prototype.writeUInt16BE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,2,65535,0),this[g]=l>>>8,this[g+1]=255&l,g+2},h.prototype.writeUInt32LE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,4,4294967295,0),this[g+3]=l>>>24,this[g+2]=l>>>16,this[g+1]=l>>>8,this[g]=255&l,g+4},h.prototype.writeUInt32BE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,4,4294967295,0),this[g]=l>>>24,this[g+1]=l>>>16,this[g+2]=l>>>8,this[g+3]=255&l,g+4},h.prototype.writeIntLE=function(l,g,x,L){if(l=+l,g>>>=0,!L){var F=o(2,8*x-1);oe(this,l,g,x,F-1,-F)}var B=0,te=1,he=0;for(this[g]=255&l;++B<x&&(te*=256);)0>l&&he===0&&this[g+B-1]!==0&&(he=1),this[g+B]=255&(l/te>>0)-he;return g+x},h.prototype.writeIntBE=function(l,g,x,L){if(l=+l,g>>>=0,!L){var F=o(2,8*x-1);oe(this,l,g,x,F-1,-F)}var B=x-1,te=1,he=0;for(this[g+B]=255&l;0<=--B&&(te*=256);)0>l&&he===0&&this[g+B+1]!==0&&(he=1),this[g+B]=255&(l/te>>0)-he;return g+x},h.prototype.writeInt8=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,1,127,-128),0>l&&(l=255+l+1),this[g]=255&l,g+1},h.prototype.writeInt16LE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,2,32767,-32768),this[g]=255&l,this[g+1]=l>>>8,g+2},h.prototype.writeInt16BE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,2,32767,-32768),this[g]=l>>>8,this[g+1]=255&l,g+2},h.prototype.writeInt32LE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,4,2147483647,-2147483648),this[g]=255&l,this[g+1]=l>>>8,this[g+2]=l>>>16,this[g+3]=l>>>24,g+4},h.prototype.writeInt32BE=function(l,g,x){return l=+l,g>>>=0,x||oe(this,l,g,4,2147483647,-2147483648),0>l&&(l=4294967295+l+1),this[g]=l>>>24,this[g+1]=l>>>16,this[g+2]=l>>>8,this[g+3]=255&l,g+4},h.prototype.writeFloatLE=function(l,g,x){return G(this,l,g,!0,x)},h.prototype.writeFloatBE=function(l,g,x){return G(this,l,g,!1,x)},h.prototype.writeDoubleLE=function(l,g,x){return fe(this,l,g,!0,x)},h.prototype.writeDoubleBE=function(l,g,x){return fe(this,l,g,!1,x)},h.prototype.copy=function(l,g,x,L){if(!h.isBuffer(l))throw new TypeError("argument should be a Buffer");if(x||(x=0),L||L===0||(L=this.length),g>=l.length&&(g=l.length),g||(g=0),0<L&&L<x&&(L=x),L===x||l.length===0||this.length===0)return 0;if(0>g)throw new RangeError("targetStart out of bounds");if(0>x||x>=this.length)throw new RangeError("Index out of range");if(0>L)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),l.length-g<L-x&&(L=l.length-g+x);var F=L-x;if(this===l&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(g,x,L);else if(this===l&&x<g&&g<L)for(var B=F-1;0<=B;--B)l[B+g]=this[B+x];else Uint8Array.prototype.set.call(l,this.subarray(x,L),g);return F},h.prototype.fill=function(l,g,x,L){if(typeof l=="string"){if(typeof g=="string"?(L=g,g=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!h.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(l.length===1){var F=l.charCodeAt(0);(L==="utf8"&&128>F||L==="latin1")&&(l=F)}}else typeof l=="number"&&(l&=255);if(0>g||this.length<g||this.length<x)throw new RangeError("Out of range index");if(x<=g)return this;g>>>=0,x=x===void 0?this.length:x>>>0,l||(l=0);var B;if(typeof l=="number")for(B=g;B<x;++B)this[B]=l;else{var te=h.isBuffer(l)?l:h.from(l,L),he=te.length;if(he===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(B=0;B<x-g;++B)this[B+g]=te[B%he]}return this};var j=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(i,s,a){(function(c){(function(){function d(){let h;try{h=a.storage.getItem("debug")}catch{}return!h&&typeof c<"u"&&"env"in c&&(h=c.env.DEBUG),h}a.formatArgs=function(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;h.splice(1,0,p,"color: inherit");let y=0,v=0;h[0].replace(/%[a-zA-Z%]/g,C=>{C==="%%"||(y++,C==="%c"&&(v=y))}),h.splice(v,0,p)},a.save=function(h){try{h?a.storage.setItem("debug",h):a.storage.removeItem("debug")}catch{}},a.load=d,a.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},a.storage=function(){try{return localStorage}catch{}}(),a.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],a.log=console.debug||console.log||(()=>{}),s.exports=i("./common")(a);const{formatters:m}=s.exports;m.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}).call(this)}).call(this,i("_process"))},{"./common":5,_process:12}],5:[function(i,s){s.exports=function(a){function c(h){function p(...C){if(!p.enabled)return;const A=p,b=+new Date,S=b-(y||b);A.diff=S,A.prev=y,A.curr=b,y=b,C[0]=c.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let f=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(_,M)=>{if(_==="%%")return"%";f++;const k=c.formatters[M];if(typeof k=="function"){const T=C[f];_=k.call(A,T),C.splice(f,1),f--}return _}),c.formatArgs.call(A,C),(A.log||c.log).apply(A,C)}let y,v=null;return p.namespace=h,p.useColors=c.useColors(),p.color=c.selectColor(h),p.extend=d,p.destroy=c.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>v===null?c.enabled(h):v,set:C=>{v=C}}),typeof c.init=="function"&&c.init(p),p}function d(h,p){const y=c(this.namespace+(typeof p>"u"?":":p)+h);return y.log=this.log,y}function m(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}return c.debug=c,c.default=c,c.coerce=function(h){return h instanceof Error?h.stack||h.message:h},c.disable=function(){const h=[...c.names.map(m),...c.skips.map(m).map(p=>"-"+p)].join(",");return c.enable(""),h},c.enable=function(h){c.save(h),c.names=[],c.skips=[];let p;const y=(typeof h=="string"?h:"").split(/[\s,]+/),v=y.length;for(p=0;p<v;p++)y[p]&&(h=y[p].replace(/\*/g,".*?"),h[0]==="-"?c.skips.push(new RegExp("^"+h.substr(1)+"$")):c.names.push(new RegExp("^"+h+"$")))},c.enabled=function(h){if(h[h.length-1]==="*")return!0;let p,y;for(p=0,y=c.skips.length;p<y;p++)if(c.skips[p].test(h))return!1;for(p=0,y=c.names.length;p<y;p++)if(c.names[p].test(h))return!0;return!1},c.humanize=i("ms"),c.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(a).forEach(h=>{c[h]=a[h]}),c.names=[],c.skips=[],c.formatters={},c.selectColor=function(h){let p=0;for(let y=0;y<h.length;y++)p=(p<<5)-p+h.charCodeAt(y),p|=0;return c.colors[r(p)%c.colors.length]},c.enable(c.load()),c}},{ms:11}],6:[function(i,s){function a(c,d){for(const m in d)Object.defineProperty(c,m,{value:d[m],enumerable:!0,configurable:!0});return c}s.exports=function(c,d,m){if(!c||typeof c=="string")throw new TypeError("Please pass an Error to err-code");m||(m={}),typeof d=="object"&&(m=d,d=""),d&&(m.code=d);try{return a(c,m)}catch{m.message=c.message,m.stack=c.stack;const p=function(){};return p.prototype=Object.create(Object.getPrototypeOf(c)),a(new p,m)}}},{}],7:[function(i,s){function a(E){console&&console.warn&&console.warn(E)}function c(){c.init.call(this)}function d(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}function m(E){return E._maxListeners===void 0?c.defaultMaxListeners:E._maxListeners}function h(E,D,I,W){var Q,q,se;if(d(I),q=E._events,q===void 0?(q=E._events=Object.create(null),E._eventsCount=0):(q.newListener!==void 0&&(E.emit("newListener",D,I.listener?I.listener:I),q=E._events),se=q[D]),se===void 0)se=q[D]=I,++E._eventsCount;else if(typeof se=="function"?se=q[D]=W?[I,se]:[se,I]:W?se.unshift(I):se.push(I),Q=m(E),0<Q&&se.length>Q&&!se.warned){se.warned=!0;var ge=new Error("Possible EventEmitter memory leak detected. "+se.length+" "+(D+" listeners added. Use emitter.setMaxListeners() to increase limit"));ge.name="MaxListenersExceededWarning",ge.emitter=E,ge.type=D,ge.count=se.length,a(ge)}return E}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(E,D,I){var W={fired:!1,wrapFn:void 0,target:E,type:D,listener:I},Q=p.bind(W);return Q.listener=I,W.wrapFn=Q,Q}function v(E,D,I){var W=E._events;if(W===void 0)return[];var Q=W[D];return Q===void 0?[]:typeof Q=="function"?I?[Q.listener||Q]:[Q]:I?S(Q):A(Q,Q.length)}function C(E){var D=this._events;if(D!==void 0){var I=D[E];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}function A(E,D){for(var I=Array(D),W=0;W<D;++W)I[W]=E[W];return I}function b(E,D){for(;D+1<E.length;D++)E[D]=E[D+1];E.pop()}function S(E){for(var D=Array(E.length),I=0;I<D.length;++I)D[I]=E[I].listener||E[I];return D}function f(E,D,I){typeof E.on=="function"&&w(E,"error",D,I)}function w(E,D,I,W){if(typeof E.on=="function")W.once?E.once(D,I):E.on(D,I);else if(typeof E.addEventListener=="function")E.addEventListener(D,function Q(q){W.once&&E.removeEventListener(D,Q),I(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}var _,M=typeof Reflect=="object"?Reflect:null,k=M&&typeof M.apply=="function"?M.apply:function(E,D,I){return Function.prototype.apply.call(E,D,I)};_=M&&typeof M.ownKeys=="function"?M.ownKeys:Object.getOwnPropertySymbols?function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:function(E){return Object.getOwnPropertyNames(E)};var T=Number.isNaN||function(E){return E!==E};s.exports=c,s.exports.once=function(E,D){return new Promise(function(I,W){function Q(se){E.removeListener(D,q),W(se)}function q(){typeof E.removeListener=="function"&&E.removeListener("error",Q),I([].slice.call(arguments))}w(E,D,q,{once:!0}),D!=="error"&&f(E,Q,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var z=10;Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return z},set:function(E){if(typeof E!="number"||0>E||T(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");z=E}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(E){if(typeof E!="number"||0>E||T(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},c.prototype.getMaxListeners=function(){return m(this)},c.prototype.emit=function(E){for(var D=[],I=1;I<arguments.length;I++)D.push(arguments[I]);var W=E==="error",Q=this._events;if(Q!==void 0)W=W&&Q.error===void 0;else if(!W)return!1;if(W){var q;if(0<D.length&&(q=D[0]),q instanceof Error)throw q;var se=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw se.context=q,se}var ge=Q[E];if(ge===void 0)return!1;if(typeof ge=="function")k(ge,this,D);else for(var K=ge.length,U=A(ge,K),I=0;I<K;++I)k(U[I],this,D);return!0},c.prototype.addListener=function(E,D){return h(this,E,D,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(E,D){return h(this,E,D,!0)},c.prototype.once=function(E,D){return d(D),this.on(E,y(this,E,D)),this},c.prototype.prependOnceListener=function(E,D){return d(D),this.prependListener(E,y(this,E,D)),this},c.prototype.removeListener=function(E,D){var I,W,Q,q,se;if(d(D),W=this._events,W===void 0)return this;if(I=W[E],I===void 0)return this;if(I===D||I.listener===D)--this._eventsCount==0?this._events=Object.create(null):(delete W[E],W.removeListener&&this.emit("removeListener",E,I.listener||D));else if(typeof I!="function"){for(Q=-1,q=I.length-1;0<=q;q--)if(I[q]===D||I[q].listener===D){se=I[q].listener,Q=q;break}if(0>Q)return this;Q===0?I.shift():b(I,Q),I.length===1&&(W[E]=I[0]),W.removeListener!==void 0&&this.emit("removeListener",E,se||D)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(E){var D,I,W;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[E]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete I[E]),this;if(arguments.length===0){var Q,q=Object.keys(I);for(W=0;W<q.length;++W)Q=q[W],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=I[E],typeof D=="function")this.removeListener(E,D);else if(D!==void 0)for(W=D.length-1;0<=W;W--)this.removeListener(E,D[W]);return this},c.prototype.listeners=function(E){return v(this,E,!0)},c.prototype.rawListeners=function(E){return v(this,E,!1)},c.listenerCount=function(E,D){return typeof E.listenerCount=="function"?E.listenerCount(D):C.call(E,D)},c.prototype.listenerCount=C,c.prototype.eventNames=function(){return 0<this._eventsCount?_(this._events):[]}},{}],8:[function(i,s){s.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],9:[function(i,s,a){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(c,d,m,h,p){var y,v,C=8*p-h-1,A=(1<<C)-1,b=A>>1,S=-7,f=m?p-1:0,w=m?-1:1,_=c[d+f];for(f+=w,y=_&(1<<-S)-1,_>>=-S,S+=C;0<S;y=256*y+c[d+f],f+=w,S-=8);for(v=y&(1<<-S)-1,y>>=-S,S+=h;0<S;v=256*v+c[d+f],f+=w,S-=8);if(y===0)y=1-b;else{if(y===A)return v?NaN:(_?-1:1)*(1/0);v+=o(2,h),y-=b}return(_?-1:1)*v*o(2,y-h)},a.write=function(c,d,m,h,p,y){var v,C,A,b=Math.LN2,S=Math.log,f=8*y-p-1,w=(1<<f)-1,_=w>>1,M=p===23?o(2,-24)-o(2,-77):0,k=h?0:y-1,T=h?1:-1,z=0>d||d===0&&0>1/d?1:0;for(d=r(d),isNaN(d)||d===1/0?(C=isNaN(d)?1:0,v=w):(v=n(S(d)/b),1>d*(A=o(2,-v))&&(v--,A*=2),d+=1<=v+_?M/A:M*o(2,1-_),2<=d*A&&(v++,A/=2),v+_>=w?(C=0,v=w):1<=v+_?(C=(d*A-1)*o(2,p),v+=_):(C=d*o(2,_-1)*o(2,p),v=0));8<=p;c[m+k]=255&C,k+=T,C/=256,p-=8);for(v=v<<p|C,f+=p;0<f;c[m+k]=255&v,k+=T,v/=256,f-=8);c[m+k-T]|=128*z}},{}],10:[function(i,s){s.exports=typeof Object.create=="function"?function(a,c){c&&(a.super_=c,a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:function(a,c){if(c){a.super_=c;var d=function(){};d.prototype=c.prototype,a.prototype=new d,a.prototype.constructor=a}}},{}],11:[function(i,s){var a=Math.round;function c(p){if(p+="",!(100<p.length)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(y){var v=parseFloat(y[1]),C=(y[2]||"ms").toLowerCase();return C==="years"||C==="year"||C==="yrs"||C==="yr"||C==="y"?315576e5*v:C==="weeks"||C==="week"||C==="w"?6048e5*v:C==="days"||C==="day"||C==="d"?864e5*v:C==="hours"||C==="hour"||C==="hrs"||C==="hr"||C==="h"?36e5*v:C==="minutes"||C==="minute"||C==="mins"||C==="min"||C==="m"?6e4*v:C==="seconds"||C==="second"||C==="secs"||C==="sec"||C==="s"?1e3*v:C==="milliseconds"||C==="millisecond"||C==="msecs"||C==="msec"||C==="ms"?v:void 0}}}function d(p){var y=r(p);return 864e5<=y?a(p/864e5)+"d":36e5<=y?a(p/36e5)+"h":6e4<=y?a(p/6e4)+"m":1e3<=y?a(p/1e3)+"s":p+"ms"}function m(p){var y=r(p);return 864e5<=y?h(p,y,864e5,"day"):36e5<=y?h(p,y,36e5,"hour"):6e4<=y?h(p,y,6e4,"minute"):1e3<=y?h(p,y,1e3,"second"):p+" ms"}function h(p,y,v,C){return a(p/v)+" "+C+(y>=1.5*v?"s":"")}s.exports=function(p,y){y=y||{};var v=typeof p;if(v=="string"&&0<p.length)return c(p);if(v==="number"&&isFinite(p))return y.long?m(p):d(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},{}],12:[function(i,s){function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function d(M){if(C===setTimeout)return setTimeout(M,0);if((C===a||!C)&&setTimeout)return C=setTimeout,setTimeout(M,0);try{return C(M,0)}catch{try{return C.call(null,M,0)}catch{return C.call(this,M,0)}}}function m(M){if(A===clearTimeout)return clearTimeout(M);if((A===c||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(M);try{return A(M)}catch{try{return A.call(null,M)}catch{return A.call(this,M)}}}function h(){w&&S&&(w=!1,S.length?f=S.concat(f):_=-1,f.length&&p())}function p(){if(!w){var M=d(h);w=!0;for(var k=f.length;k;){for(S=f,f=[];++_<k;)S&&S[_].run();_=-1,k=f.length}S=null,w=!1,m(M)}}function y(M,k){this.fun=M,this.array=k}function v(){}var C,A,b=s.exports={};(function(){try{C=typeof setTimeout=="function"?setTimeout:a}catch{C=a}try{A=typeof clearTimeout=="function"?clearTimeout:c}catch{A=c}})();var S,f=[],w=!1,_=-1;b.nextTick=function(M){var k=Array(arguments.length-1);if(1<arguments.length)for(var T=1;T<arguments.length;T++)k[T-1]=arguments[T];f.push(new y(M,k)),f.length!==1||w||d(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=v,b.addListener=v,b.once=v,b.off=v,b.removeListener=v,b.removeAllListeners=v,b.emit=v,b.prependListener=v,b.prependOnceListener=v,b.listeners=function(){return[]},b.binding=function(){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],13:[function(i,s){(function(a){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let c;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?a:window):d=>(c||(c=Promise.resolve())).then(d).catch(m=>setTimeout(()=>{throw m},0))}).call(this)}).call(this,typeof Qt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Qt)},{}],14:[function(i,s){(function(a,c){(function(){var d=i("safe-buffer").Buffer,m=c.crypto||c.msCrypto;s.exports=m&&m.getRandomValues?function(h,p){if(h>4294967295)throw new RangeError("requested too many random bytes");var y=d.allocUnsafe(h);if(0<h)if(65536<h)for(var v=0;v<h;v+=65536)m.getRandomValues(y.slice(v,v+65536));else m.getRandomValues(y);return typeof p=="function"?a.nextTick(function(){p(null,y)}):y}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,i("_process"),typeof Qt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Qt)},{_process:12,"safe-buffer":30}],15:[function(i,s){function a(v,C){v.prototype=Object.create(C.prototype),v.prototype.constructor=v,v.__proto__=C}function c(v,C,A){function b(f,w,_){return typeof C=="string"?C:C(f,w,_)}A||(A=Error);var S=function(f){function w(_,M,k){return f.call(this,b(_,M,k))||this}return a(w,f),w}(A);S.prototype.name=A.name,S.prototype.code=v,y[v]=S}function d(v,C){if(Array.isArray(v)){var A=v.length;return v=v.map(function(b){return b+""}),2<A?"one of ".concat(C," ").concat(v.slice(0,A-1).join(", "),", or ")+v[A-1]:A===2?"one of ".concat(C," ").concat(v[0]," or ").concat(v[1]):"of ".concat(C," ").concat(v[0])}return"of ".concat(C," ").concat(v+"")}function m(v,C,A){return v.substr(0,C.length)===C}function h(v,C,A){return(A===void 0||A>v.length)&&(A=v.length),v.substring(A-C.length,A)===C}function p(v,C,A){return typeof A!="number"&&(A=0),!(A+C.length>v.length)&&v.indexOf(C,A)!==-1}var y={};c("ERR_INVALID_OPT_VALUE",function(v,C){return'The value "'+C+'" is invalid for option "'+v+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(v,C,A){var b;typeof C=="string"&&m(C,"not ")?(b="must not be",C=C.replace(/^not /,"")):b="must be";var S;if(h(v," argument"))S="The ".concat(v," ").concat(b," ").concat(d(C,"type"));else{var f=p(v,".")?"property":"argument";S='The "'.concat(v,'" ').concat(f," ").concat(b," ").concat(d(C,"type"))}return S+=". Received type ".concat(typeof A),S},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=y},{}],16:[function(i,s){(function(a){(function(){function c(b){return this instanceof c?(p.call(this,b),y.call(this,b),this.allowHalfOpen=!0,void(b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d))))):new c(b)}function d(){this._writableState.ended||a.nextTick(m,this)}function m(b){b.end()}var h=Object.keys||function(b){var S=[];for(var f in b)S.push(f);return S};s.exports=c;var p=i("./_stream_readable"),y=i("./_stream_writable");i("inherits")(c,p);for(var v,C=h(y.prototype),A=0;A<C.length;A++)v=C[A],c.prototype[v]||(c.prototype[v]=y.prototype[v]);Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(i,s){function a(d){return this instanceof a?void c.call(this,d):new a(d)}s.exports=a;var c=i("./_stream_transform");i("inherits")(a,c),a.prototype._transform=function(d,m,h){h(null,d)}},{"./_stream_transform":19,inherits:10}],18:[function(i,s){(function(a,c){(function(){function d(j){return ve.from(j)}function m(j){return ve.isBuffer(j)||j instanceof me}function h(j,l,g){return typeof j.prependListener=="function"?j.prependListener(l,g):void(j._events&&j._events[l]?Array.isArray(j._events[l])?j._events[l].unshift(g):j._events[l]=[g,j._events[l]]:j.on(l,g))}function p(j,l,g){K=K||i("./_stream_duplex"),j=j||{},typeof g!="boolean"&&(g=l instanceof K),this.objectMode=!!j.objectMode,g&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=ue(this,j,"readableHighWaterMark",g),this.buffer=new J,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=j.emitClose!==!1,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(!de&&(de=i("string_decoder/").StringDecoder),this.decoder=new de(j.encoding),this.encoding=j.encoding)}function y(j){if(K=K||i("./_stream_duplex"),!(this instanceof y))return new y(j);var l=this instanceof K;this._readableState=new p(j,this,l),this.readable=!0,j&&(typeof j.read=="function"&&(this._read=j.read),typeof j.destroy=="function"&&(this._destroy=j.destroy)),ce.call(this)}function v(j,l,g,x,L){U("readableAddChunk",l);var F=j._readableState;if(l===null)F.reading=!1,f(j,F);else{var B;if(L||(B=A(F,l)),B)P(j,B);else if(!(F.objectMode||l&&0<l.length))x||(F.reading=!1,M(j,F));else if(typeof l=="string"||F.objectMode||Object.getPrototypeOf(l)===ve.prototype||(l=d(l)),x)F.endEmitted?P(j,new R):C(j,F,l,!0);else if(F.ended)P(j,new xe);else{if(F.destroyed)return!1;F.reading=!1,F.decoder&&!g?(l=F.decoder.write(l),F.objectMode||l.length!==0?C(j,F,l,!1):M(j,F)):C(j,F,l,!1)}}return!F.ended&&(F.length<F.highWaterMark||F.length===0)}function C(j,l,g,x){l.flowing&&l.length===0&&!l.sync?(l.awaitDrain=0,j.emit("data",g)):(l.length+=l.objectMode?1:g.length,x?l.buffer.unshift(g):l.buffer.push(g),l.needReadable&&w(j)),M(j,l)}function A(j,l){var g;return m(l)||typeof l=="string"||l===void 0||j.objectMode||(g=new Se("chunk",["string","Buffer","Uint8Array"],l)),g}function b(j){return 1073741824<=j?j=1073741824:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}function S(j,l){return 0>=j||l.length===0&&l.ended?0:l.objectMode?1:j===j?(j>l.highWaterMark&&(l.highWaterMark=b(j)),j<=l.length?j:l.ended?l.length:(l.needReadable=!0,0)):l.flowing&&l.length?l.buffer.head.data.length:l.length}function f(j,l){if(U("onEofChunk"),!l.ended){if(l.decoder){var g=l.decoder.end();g&&g.length&&(l.buffer.push(g),l.length+=l.objectMode?1:g.length)}l.ended=!0,l.sync?w(j):(l.needReadable=!1,!l.emittedReadable&&(l.emittedReadable=!0,_(j)))}}function w(j){var l=j._readableState;U("emitReadable",l.needReadable,l.emittedReadable),l.needReadable=!1,l.emittedReadable||(U("emitReadable",l.flowing),l.emittedReadable=!0,a.nextTick(_,j))}function _(j){var l=j._readableState;U("emitReadable_",l.destroyed,l.length,l.ended),!l.destroyed&&(l.length||l.ended)&&(j.emit("readable"),l.emittedReadable=!1),l.needReadable=!l.flowing&&!l.ended&&l.length<=l.highWaterMark,W(j)}function M(j,l){l.readingMore||(l.readingMore=!0,a.nextTick(k,j,l))}function k(j,l){for(;!l.reading&&!l.ended&&(l.length<l.highWaterMark||l.flowing&&l.length===0);){var g=l.length;if(U("maybeReadMore read 0"),j.read(0),g===l.length)break}l.readingMore=!1}function T(j){return function(){var l=j._readableState;U("pipeOnDrain",l.awaitDrain),l.awaitDrain&&l.awaitDrain--,l.awaitDrain===0&&re(j,"data")&&(l.flowing=!0,W(j))}}function z(j){var l=j._readableState;l.readableListening=0<j.listenerCount("readable"),l.resumeScheduled&&!l.paused?l.flowing=!0:0<j.listenerCount("data")&&j.resume()}function E(j){U("readable nexttick read 0"),j.read(0)}function D(j,l){l.resumeScheduled||(l.resumeScheduled=!0,a.nextTick(I,j,l))}function I(j,l){U("resume",l.reading),l.reading||j.read(0),l.resumeScheduled=!1,j.emit("resume"),W(j),l.flowing&&!l.reading&&j.read(0)}function W(j){var l=j._readableState;for(U("flow",l.flowing);l.flowing&&j.read()!==null;);}function Q(j,l){if(l.length===0)return null;var g;return l.objectMode?g=l.buffer.shift():!j||j>=l.length?(g=l.decoder?l.buffer.join(""):l.buffer.length===1?l.buffer.first():l.buffer.concat(l.length),l.buffer.clear()):g=l.buffer.consume(j,l.decoder),g}function q(j){var l=j._readableState;U("endReadable",l.endEmitted),l.endEmitted||(l.ended=!0,a.nextTick(se,l,j))}function se(j,l){if(U("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&j.length===0&&(j.endEmitted=!0,l.readable=!1,l.emit("end"),j.autoDestroy)){var g=l._writableState;(!g||g.autoDestroy&&g.finished)&&l.destroy()}}function ge(j,l){for(var g=0,x=j.length;g<x;g++)if(j[g]===l)return g;return-1}s.exports=y;var K;y.ReadableState=p;var U;i("events").EventEmitter;var re=function(j,l){return j.listeners(l).length},ce=i("./internal/streams/stream"),ve=i("buffer").Buffer,me=c.Uint8Array||function(){},oe=i("util");U=oe&&oe.debuglog?oe.debuglog("stream"):function(){};var de,G,fe,J=i("./internal/streams/buffer_list"),V=i("./internal/streams/destroy"),Z=i("./internal/streams/state"),ue=Z.getHighWaterMark,we=i("../errors").codes,Se=we.ERR_INVALID_ARG_TYPE,xe=we.ERR_STREAM_PUSH_AFTER_EOF,N=we.ERR_METHOD_NOT_IMPLEMENTED,R=we.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i("inherits")(y,ce);var P=V.errorOrDestroy,H=["error","close","destroy","pause","resume"];Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(j){this._readableState&&(this._readableState.destroyed=j)}}),y.prototype.destroy=V.destroy,y.prototype._undestroy=V.undestroy,y.prototype._destroy=function(j,l){l(j)},y.prototype.push=function(j,l){var g,x=this._readableState;return x.objectMode?g=!0:typeof j=="string"&&(l=l||x.defaultEncoding,l!==x.encoding&&(j=ve.from(j,l),l=""),g=!0),v(this,j,l,!1,g)},y.prototype.unshift=function(j){return v(this,j,null,!0,!1)},y.prototype.isPaused=function(){return this._readableState.flowing===!1},y.prototype.setEncoding=function(j){de||(de=i("string_decoder/").StringDecoder);var l=new de(j);this._readableState.decoder=l,this._readableState.encoding=this._readableState.decoder.encoding;for(var g=this._readableState.buffer.head,x="";g!==null;)x+=l.write(g.data),g=g.next;return this._readableState.buffer.clear(),x!==""&&this._readableState.buffer.push(x),this._readableState.length=x.length,this},y.prototype.read=function(j){U("read",j),j=parseInt(j,10);var l=this._readableState,g=j;if(j!==0&&(l.emittedReadable=!1),j===0&&l.needReadable&&((l.highWaterMark===0?0<l.length:l.length>=l.highWaterMark)||l.ended))return U("read: emitReadable",l.length,l.ended),l.length===0&&l.ended?q(this):w(this),null;if(j=S(j,l),j===0&&l.ended)return l.length===0&&q(this),null;var x=l.needReadable;U("need readable",x),(l.length===0||l.length-j<l.highWaterMark)&&(x=!0,U("length less than watermark",x)),l.ended||l.reading?(x=!1,U("reading or ended",x)):x&&(U("do read"),l.reading=!0,l.sync=!0,l.length===0&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,!l.reading&&(j=S(g,l)));var L;return L=0<j?Q(j,l):null,L===null?(l.needReadable=l.length<=l.highWaterMark,j=0):(l.length-=j,l.awaitDrain=0),l.length===0&&(!l.ended&&(l.needReadable=!0),g!==j&&l.ended&&q(this)),L!==null&&this.emit("data",L),L},y.prototype._read=function(){P(this,new N("_read()"))},y.prototype.pipe=function(j,l){function g(Te,Ne){U("onunpipe"),Te===ye&&Ne&&Ne.hasUnpiped===!1&&(Ne.hasUnpiped=!0,L())}function x(){U("onend"),j.end()}function L(){U("cleanup"),j.removeListener("close",te),j.removeListener("finish",he),j.removeListener("drain",le),j.removeListener("error",B),j.removeListener("unpipe",g),ye.removeListener("end",x),ye.removeListener("end",je),ye.removeListener("data",F),be=!0,O.awaitDrain&&(!j._writableState||j._writableState.needDrain)&&le()}function F(Te){U("ondata");var Ne=j.write(Te);U("dest.write",Ne),Ne===!1&&((O.pipesCount===1&&O.pipes===j||1<O.pipesCount&&ge(O.pipes,j)!==-1)&&!be&&(U("false write response, pause",O.awaitDrain),O.awaitDrain++),ye.pause())}function B(Te){U("onerror",Te),je(),j.removeListener("error",B),re(j,"error")===0&&P(j,Te)}function te(){j.removeListener("finish",he),je()}function he(){U("onfinish"),j.removeListener("close",te),je()}function je(){U("unpipe"),ye.unpipe(j)}var ye=this,O=this._readableState;switch(O.pipesCount){case 0:O.pipes=j;break;case 1:O.pipes=[O.pipes,j];break;default:O.pipes.push(j)}O.pipesCount+=1,U("pipe count=%d opts=%j",O.pipesCount,l);var X=(!l||l.end!==!1)&&j!==a.stdout&&j!==a.stderr,ne=X?x:je;O.endEmitted?a.nextTick(ne):ye.once("end",ne),j.on("unpipe",g);var le=T(ye);j.on("drain",le);var be=!1;return ye.on("data",F),h(j,"error",B),j.once("close",te),j.once("finish",he),j.emit("pipe",ye),O.flowing||(U("pipe resume"),ye.resume()),j},y.prototype.unpipe=function(j){var l=this._readableState,g={hasUnpiped:!1};if(l.pipesCount===0)return this;if(l.pipesCount===1)return j&&j!==l.pipes?this:(j||(j=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,j&&j.emit("unpipe",this,g),this);if(!j){var x=l.pipes,L=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var F=0;F<L;F++)x[F].emit("unpipe",this,{hasUnpiped:!1});return this}var B=ge(l.pipes,j);return B===-1?this:(l.pipes.splice(B,1),l.pipesCount-=1,l.pipesCount===1&&(l.pipes=l.pipes[0]),j.emit("unpipe",this,g),this)},y.prototype.on=function(j,l){var g=ce.prototype.on.call(this,j,l),x=this._readableState;return j==="data"?(x.readableListening=0<this.listenerCount("readable"),x.flowing!==!1&&this.resume()):j=="readable"&&!x.endEmitted&&!x.readableListening&&(x.readableListening=x.needReadable=!0,x.flowing=!1,x.emittedReadable=!1,U("on readable",x.length,x.reading),x.length?w(this):!x.reading&&a.nextTick(E,this)),g},y.prototype.addListener=y.prototype.on,y.prototype.removeListener=function(j,l){var g=ce.prototype.removeListener.call(this,j,l);return j==="readable"&&a.nextTick(z,this),g},y.prototype.removeAllListeners=function(j){var l=ce.prototype.removeAllListeners.apply(this,arguments);return(j==="readable"||j===void 0)&&a.nextTick(z,this),l},y.prototype.resume=function(){var j=this._readableState;return j.flowing||(U("resume"),j.flowing=!j.readableListening,D(this,j)),j.paused=!1,this},y.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(j){var l=this,g=this._readableState,x=!1;for(var L in j.on("end",function(){if(U("wrapped end"),g.decoder&&!g.ended){var B=g.decoder.end();B&&B.length&&l.push(B)}l.push(null)}),j.on("data",function(B){if(U("wrapped data"),g.decoder&&(B=g.decoder.write(B)),!(g.objectMode&&B==null)&&(g.objectMode||B&&B.length)){var te=l.push(B);te||(x=!0,j.pause())}}),j)this[L]===void 0&&typeof j[L]=="function"&&(this[L]=function(B){return function(){return j[B].apply(j,arguments)}}(L));for(var F=0;F<H.length;F++)j.on(H[F],this.emit.bind(this,H[F]));return this._read=function(B){U("wrapped _read",B),x&&(x=!1,j.resume())},this},typeof Symbol=="function"&&(y.prototype[Symbol.asyncIterator]=function(){return G===void 0&&(G=i("./internal/streams/async_iterator")),G(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),y._fromList=Q,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(y.from=function(j,l){return fe===void 0&&(fe=i("./internal/streams/from")),fe(y,j,l)})}).call(this)}).call(this,i("_process"),typeof Qt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Qt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(i,s){function a(b,S){var f=this._transformState;f.transforming=!1;var w=f.writecb;if(w===null)return this.emit("error",new y);f.writechunk=null,f.writecb=null,S!=null&&this.push(S),w(b);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function c(b){return this instanceof c?(A.call(this,b),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),void this.on("prefinish",d)):new c(b)}function d(){var b=this;typeof this._flush!="function"||this._readableState.destroyed?m(this,null,null):this._flush(function(S,f){m(b,S,f)})}function m(b,S,f){if(S)return b.emit("error",S);if(f!=null&&b.push(f),b._writableState.length)throw new C;if(b._transformState.transforming)throw new v;return b.push(null)}s.exports=c;var h=i("../errors").codes,p=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_MULTIPLE_CALLBACK,v=h.ERR_TRANSFORM_ALREADY_TRANSFORMING,C=h.ERR_TRANSFORM_WITH_LENGTH_0,A=i("./_stream_duplex");i("inherits")(c,A),c.prototype.push=function(b,S){return this._transformState.needTransform=!1,A.prototype.push.call(this,b,S)},c.prototype._transform=function(b,S,f){f(new p("_transform()"))},c.prototype._write=function(b,S,f){var w=this._transformState;if(w.writecb=f,w.writechunk=b,w.writeencoding=S,!w.transforming){var _=this._readableState;(w.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},c.prototype._read=function(){var b=this._transformState;b.writechunk===null||b.transforming?b.needTransform=!0:(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform))},c.prototype._destroy=function(b,S){A.prototype._destroy.call(this,b,function(f){S(f)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(i,s){(function(a,c){(function(){function d(N){var R=this;this.next=null,this.entry=null,this.finish=function(){q(R,N)}}function m(N){return U.from(N)}function h(N){return U.isBuffer(N)||N instanceof re}function p(){}function y(N,R,P){se=se||i("./_stream_duplex"),N=N||{},typeof P!="boolean"&&(P=R instanceof se),this.objectMode=!!N.objectMode,P&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=me(this,N,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=N.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){M(R,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function v(N){se=se||i("./_stream_duplex");var R=this instanceof se;return R||xe.call(v,this)?(this._writableState=new y(N,this,R),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),void K.call(this)):new v(N)}function C(N,R){var P=new ue;Se(N,P),a.nextTick(R,P)}function A(N,R,P,H){var j;return P===null?j=new Z:typeof P!="string"&&!R.objectMode&&(j=new de("chunk",["string","Buffer"],P)),!j||(Se(N,j),a.nextTick(H,j),!1)}function b(N,R,P){return N.objectMode||N.decodeStrings===!1||typeof R!="string"||(R=U.from(R,P)),R}function S(N,R,P,H,j,l){if(!P){var g=b(R,H,j);H!==g&&(P=!0,j="buffer",H=g)}var x=R.objectMode?1:H.length;R.length+=x;var L=R.length<R.highWaterMark;if(L||(R.needDrain=!0),R.writing||R.corked){var F=R.lastBufferedRequest;R.lastBufferedRequest={chunk:H,encoding:j,isBuf:P,callback:l,next:null},F?F.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else f(N,R,!1,x,H,j,l);return L}function f(N,R,P,H,j,l,g){R.writelen=H,R.writecb=g,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new V("write")):P?N._writev(j,R.onwrite):N._write(j,l,R.onwrite),R.sync=!1}function w(N,R,P,H,j){--R.pendingcb,P?(a.nextTick(j,H),a.nextTick(W,N,R),N._writableState.errorEmitted=!0,Se(N,H)):(j(H),N._writableState.errorEmitted=!0,Se(N,H),W(N,R))}function _(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function M(N,R){var P=N._writableState,H=P.sync,j=P.writecb;if(typeof j!="function")throw new fe;if(_(P),R)w(N,P,H,R,j);else{var l=E(P)||N.destroyed;l||P.corked||P.bufferProcessing||!P.bufferedRequest||z(N,P),H?a.nextTick(k,N,P,l,j):k(N,P,l,j)}}function k(N,R,P,H){P||T(N,R),R.pendingcb--,H(),W(N,R)}function T(N,R){R.length===0&&R.needDrain&&(R.needDrain=!1,N.emit("drain"))}function z(N,R){R.bufferProcessing=!0;var P=R.bufferedRequest;if(N._writev&&P&&P.next){var H=R.bufferedRequestCount,j=Array(H),l=R.corkedRequestsFree;l.entry=P;for(var g=0,x=!0;P;)j[g]=P,P.isBuf||(x=!1),P=P.next,g+=1;j.allBuffers=x,f(N,R,!0,R.length,j,"",l.finish),R.pendingcb++,R.lastBufferedRequest=null,l.next?(R.corkedRequestsFree=l.next,l.next=null):R.corkedRequestsFree=new d(R),R.bufferedRequestCount=0}else{for(;P;){var L=P.chunk,F=P.encoding,B=P.callback,te=R.objectMode?1:L.length;if(f(N,R,!1,te,L,F,B),P=P.next,R.bufferedRequestCount--,R.writing)break}P===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=P,R.bufferProcessing=!1}function E(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function D(N,R){N._final(function(P){R.pendingcb--,P&&Se(N,P),R.prefinished=!0,N.emit("prefinish"),W(N,R)})}function I(N,R){R.prefinished||R.finalCalled||(typeof N._final!="function"||R.destroyed?(R.prefinished=!0,N.emit("prefinish")):(R.pendingcb++,R.finalCalled=!0,a.nextTick(D,N,R)))}function W(N,R){var P=E(R);if(P&&(I(N,R),R.pendingcb===0&&(R.finished=!0,N.emit("finish"),R.autoDestroy))){var H=N._readableState;(!H||H.autoDestroy&&H.endEmitted)&&N.destroy()}return P}function Q(N,R,P){R.ending=!0,W(N,R),P&&(R.finished?a.nextTick(P):N.once("finish",P)),R.ended=!0,N.writable=!1}function q(N,R,P){var H=N.entry;for(N.entry=null;H;){var j=H.callback;R.pendingcb--,j(P),H=H.next}R.corkedRequestsFree.next=N}s.exports=v;var se;v.WritableState=y;var ge={deprecate:i("util-deprecate")},K=i("./internal/streams/stream"),U=i("buffer").Buffer,re=c.Uint8Array||function(){},ce=i("./internal/streams/destroy"),ve=i("./internal/streams/state"),me=ve.getHighWaterMark,oe=i("../errors").codes,de=oe.ERR_INVALID_ARG_TYPE,G=oe.ERR_METHOD_NOT_IMPLEMENTED,fe=oe.ERR_MULTIPLE_CALLBACK,J=oe.ERR_STREAM_CANNOT_PIPE,V=oe.ERR_STREAM_DESTROYED,Z=oe.ERR_STREAM_NULL_VALUES,ue=oe.ERR_STREAM_WRITE_AFTER_END,we=oe.ERR_UNKNOWN_ENCODING,Se=ce.errorOrDestroy;i("inherits")(v,K),y.prototype.getBuffer=function(){for(var N=this.bufferedRequest,R=[];N;)R.push(N),N=N.next;return R},function(){try{Object.defineProperty(y.prototype,"buffer",{get:ge.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var xe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(xe=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(N){return!!xe.call(this,N)||this===v&&N&&N._writableState instanceof y}})):xe=function(N){return N instanceof this},v.prototype.pipe=function(){Se(this,new J)},v.prototype.write=function(N,R,P){var H=this._writableState,j=!1,l=!H.objectMode&&h(N);return l&&!U.isBuffer(N)&&(N=m(N)),typeof R=="function"&&(P=R,R=null),l?R="buffer":!R&&(R=H.defaultEncoding),typeof P!="function"&&(P=p),H.ending?C(this,P):(l||A(this,H,N,P))&&(H.pendingcb++,j=S(this,H,l,N,R,P)),j},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&z(this,N))},v.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=N.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((N+"").toLowerCase())))throw new we(N);return this._writableState.defaultEncoding=N,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(N,R,P){P(new G("_write()"))},v.prototype._writev=null,v.prototype.end=function(N,R,P){var H=this._writableState;return typeof N=="function"?(P=N,N=null,R=null):typeof R=="function"&&(P=R,R=null),N!=null&&this.write(N,R),H.corked&&(H.corked=1,this.uncork()),H.ending||Q(this,H,P),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(N){this._writableState&&(this._writableState.destroyed=N)}}),v.prototype.destroy=ce.destroy,v.prototype._undestroy=ce.undestroy,v.prototype._destroy=function(N,R){R(N)}}).call(this)}).call(this,i("_process"),typeof Qt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Qt)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(i,s){(function(a){(function(){function c(T,z,E){return z in T?Object.defineProperty(T,z,{value:E,enumerable:!0,configurable:!0,writable:!0}):T[z]=E,T}function d(T,z){return{value:T,done:z}}function m(T){var z=T[C];if(z!==null){var E=T[_].read();E!==null&&(T[f]=null,T[C]=null,T[A]=null,z(d(E,!1)))}}function h(T){a.nextTick(m,T)}function p(T,z){return function(E,D){T.then(function(){return z[S]?void E(d(void 0,!0)):void z[w](E,D)},D)}}var y,v=i("./end-of-stream"),C=Symbol("lastResolve"),A=Symbol("lastReject"),b=Symbol("error"),S=Symbol("ended"),f=Symbol("lastPromise"),w=Symbol("handlePromise"),_=Symbol("stream"),M=Object.getPrototypeOf(function(){}),k=Object.setPrototypeOf((y={get stream(){return this[_]},next:function(){var T=this,z=this[b];if(z!==null)return Promise.reject(z);if(this[S])return Promise.resolve(d(void 0,!0));if(this[_].destroyed)return new Promise(function(W,Q){a.nextTick(function(){T[b]?Q(T[b]):W(d(void 0,!0))})});var E,D=this[f];if(D)E=new Promise(p(D,this));else{var I=this[_].read();if(I!==null)return Promise.resolve(d(I,!1));E=new Promise(this[w])}return this[f]=E,E}},c(y,Symbol.asyncIterator,function(){return this}),c(y,"return",function(){var T=this;return new Promise(function(z,E){T[_].destroy(null,function(D){return D?void E(D):void z(d(void 0,!0))})})}),y),M);s.exports=function(T){var z,E=Object.create(k,(z={},c(z,_,{value:T,writable:!0}),c(z,C,{value:null,writable:!0}),c(z,A,{value:null,writable:!0}),c(z,b,{value:null,writable:!0}),c(z,S,{value:T._readableState.endEmitted,writable:!0}),c(z,w,{value:function(D,I){var W=E[_].read();W?(E[f]=null,E[C]=null,E[A]=null,D(d(W,!1))):(E[C]=D,E[A]=I)},writable:!0}),z));return E[f]=null,v(T,function(D){if(D&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"){var I=E[A];return I!==null&&(E[f]=null,E[C]=null,E[A]=null,I(D)),void(E[b]=D)}var W=E[C];W!==null&&(E[f]=null,E[C]=null,E[A]=null,W(d(void 0,!0))),E[S]=!0}),T.on("readable",h.bind(null,E)),E}}).call(this)}).call(this,i("_process"))},{"./end-of-stream":24,_process:12}],22:[function(i,s){function a(f,w){var _=Object.keys(f);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(f);w&&(M=M.filter(function(k){return Object.getOwnPropertyDescriptor(f,k).enumerable})),_.push.apply(_,M)}return _}function c(f){for(var w,_=1;_<arguments.length;_++)w=arguments[_]==null?{}:arguments[_],_%2?a(Object(w),!0).forEach(function(M){d(f,M,w[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(w)):a(Object(w)).forEach(function(M){Object.defineProperty(f,M,Object.getOwnPropertyDescriptor(w,M))});return f}function d(f,w,_){return w in f?Object.defineProperty(f,w,{value:_,enumerable:!0,configurable:!0,writable:!0}):f[w]=_,f}function m(f,w){if(!(f instanceof w))throw new TypeError("Cannot call a class as a function")}function h(f,w){for(var _,M=0;M<w.length;M++)_=w[M],_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,_.key,_)}function p(f,w,_){return w&&h(f.prototype,w),f}function y(f,w,_){C.prototype.copy.call(f,w,_)}var v=i("buffer"),C=v.Buffer,A=i("util"),b=A.inspect,S=b&&b.custom||"inspect";s.exports=function(){function f(){m(this,f),this.head=null,this.tail=null,this.length=0}return p(f,[{key:"push",value:function(w){var _={data:w,next:null};0<this.length?this.tail.next=_:this.head=_,this.tail=_,++this.length}},{key:"unshift",value:function(w){var _={data:w,next:this.head};this.length===0&&(this.tail=_),this.head=_,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var _=this.head,M=""+_.data;_=_.next;)M+=w+_.data;return M}},{key:"concat",value:function(w){if(this.length===0)return C.alloc(0);for(var _=C.allocUnsafe(w>>>0),M=this.head,k=0;M;)y(M.data,_,k),k+=M.data.length,M=M.next;return _}},{key:"consume",value:function(w,_){var M;return w<this.head.data.length?(M=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?M=this.shift():M=_?this._getString(w):this._getBuffer(w),M}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var _=this.head,M=1,k=_.data;for(w-=k.length;_=_.next;){var T=_.data,z=w>T.length?T.length:w;if(k+=z===T.length?T:T.slice(0,w),w-=z,w===0){z===T.length?(++M,this.head=_.next?_.next:this.tail=null):(this.head=_,_.data=T.slice(z));break}++M}return this.length-=M,k}},{key:"_getBuffer",value:function(w){var _=C.allocUnsafe(w),M=this.head,k=1;for(M.data.copy(_),w-=M.data.length;M=M.next;){var T=M.data,z=w>T.length?T.length:w;if(T.copy(_,_.length-w,0,z),w-=z,w===0){z===T.length?(++k,this.head=M.next?M.next:this.tail=null):(this.head=M,M.data=T.slice(z));break}++k}return this.length-=k,_}},{key:S,value:function(w,_){return b(this,c({},_,{depth:0,customInspect:!1}))}}]),f}()},{buffer:3,util:2}],23:[function(i,s){(function(a){(function(){function c(h,p){m(h,p),d(h)}function d(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function m(h,p){h.emit("error",p)}s.exports={destroy:function(h,p){var y=this,v=this._readableState&&this._readableState.destroyed,C=this._writableState&&this._writableState.destroyed;return v||C?(p?p(h):h&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,a.nextTick(m,this,h)):a.nextTick(m,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(A){!p&&A?y._writableState?y._writableState.errorEmitted?a.nextTick(d,y):(y._writableState.errorEmitted=!0,a.nextTick(c,y,A)):a.nextTick(c,y,A):p?(a.nextTick(d,y),p(A)):a.nextTick(d,y)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(h,p){var y=h._readableState,v=h._writableState;y&&y.autoDestroy||v&&v.autoDestroy?h.destroy(p):h.emit("error",p)}}}).call(this)}).call(this,i("_process"))},{_process:12}],24:[function(i,s){function a(p){var y=!1;return function(){if(!y){y=!0;for(var v=arguments.length,C=Array(v),A=0;A<v;A++)C[A]=arguments[A];p.apply(this,C)}}}function c(){}function d(p){return p.setHeader&&typeof p.abort=="function"}function m(p,y,v){if(typeof y=="function")return m(p,null,y);y||(y={}),v=a(v||c);var C=y.readable||y.readable!==!1&&p.readable,A=y.writable||y.writable!==!1&&p.writable,b=function(){p.writable||f()},S=p._writableState&&p._writableState.finished,f=function(){A=!1,S=!0,C||v.call(p)},w=p._readableState&&p._readableState.endEmitted,_=function(){C=!1,w=!0,A||v.call(p)},M=function(z){v.call(p,z)},k=function(){var z;return C&&!w?(p._readableState&&p._readableState.ended||(z=new h),v.call(p,z)):A&&!S?(p._writableState&&p._writableState.ended||(z=new h),v.call(p,z)):void 0},T=function(){p.req.on("finish",f)};return d(p)?(p.on("complete",f),p.on("abort",k),p.req?T():p.on("request",T)):A&&!p._writableState&&(p.on("end",b),p.on("close",b)),p.on("end",_),p.on("finish",f),y.error!==!1&&p.on("error",M),p.on("close",k),function(){p.removeListener("complete",f),p.removeListener("abort",k),p.removeListener("request",T),p.req&&p.req.removeListener("finish",f),p.removeListener("end",b),p.removeListener("close",b),p.removeListener("finish",f),p.removeListener("end",_),p.removeListener("error",M),p.removeListener("close",k)}}var h=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;s.exports=m},{"../../../errors":15}],25:[function(i,s){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(i,s){function a(S){var f=!1;return function(){f||(f=!0,S.apply(void 0,arguments))}}function c(S){if(S)throw S}function d(S){return S.setHeader&&typeof S.abort=="function"}function m(S,f,w,_){_=a(_);var M=!1;S.on("close",function(){M=!0}),v===void 0&&(v=i("./end-of-stream")),v(S,{readable:f,writable:w},function(T){return T?_(T):(M=!0,void _())});var k=!1;return function(T){if(!M)return k?void 0:(k=!0,d(S)?S.abort():typeof S.destroy=="function"?S.destroy():void _(T||new b("pipe")))}}function h(S){S()}function p(S,f){return S.pipe(f)}function y(S){return S.length&&typeof S[S.length-1]=="function"?S.pop():c}var v,C=i("../../../errors").codes,A=C.ERR_MISSING_ARGS,b=C.ERR_STREAM_DESTROYED;s.exports=function(){for(var S=arguments.length,f=Array(S),w=0;w<S;w++)f[w]=arguments[w];var _=y(f);if(Array.isArray(f[0])&&(f=f[0]),2>f.length)throw new A("streams");var M,k=f.map(function(T,z){var E=z<f.length-1;return m(T,E,0<z,function(D){M||(M=D),D&&k.forEach(h),E||(k.forEach(h),_(M))})});return f.reduce(p)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(i,s){function a(d,m,h){return d.highWaterMark==null?m?d[h]:null:d.highWaterMark}var c=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(d,m,h,p){var y=a(m,p,h);if(y!=null){if(!(isFinite(y)&&n(y)===y)||0>y){var v=p?h:"highWaterMark";throw new c(v,y)}return n(y)}return d.objectMode?16:16384}}},{"../../../errors":15}],28:[function(i,s){s.exports=i("events").EventEmitter},{events:7}],29:[function(i,s,a){a=s.exports=i("./lib/_stream_readable.js"),a.Stream=a,a.Readable=a,a.Writable=i("./lib/_stream_writable.js"),a.Duplex=i("./lib/_stream_duplex.js"),a.Transform=i("./lib/_stream_transform.js"),a.PassThrough=i("./lib/_stream_passthrough.js"),a.finished=i("./lib/internal/streams/end-of-stream.js"),a.pipeline=i("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(i,s,a){function c(p,y){for(var v in p)y[v]=p[v]}function d(p,y,v){return h(p,y,v)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var m=i("buffer"),h=m.Buffer;h.from&&h.alloc&&h.allocUnsafe&&h.allocUnsafeSlow?s.exports=m:(c(m,a),a.Buffer=d),d.prototype=Object.create(h.prototype),c(h,d),d.from=function(p,y,v){if(typeof p=="number")throw new TypeError("Argument must not be a number");return h(p,y,v)},d.alloc=function(p,y,v){if(typeof p!="number")throw new TypeError("Argument must be a number");var C=h(p);return y===void 0?C.fill(0):typeof v=="string"?C.fill(y,v):C.fill(y),C},d.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return h(p)},d.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(p)}},{buffer:3}],31:[function(i,s,a){function c(k){if(!k)return"utf8";for(var T;;)switch(k){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return k;default:if(T)return;k=(""+k).toLowerCase(),T=!0}}function d(k){var T=c(k);if(typeof T!="string"&&(_.isEncoding===M||!M(k)))throw new Error("Unknown encoding: "+k);return T||k}function m(k){this.encoding=d(k);var T;switch(this.encoding){case"utf16le":this.text=C,this.end=A,T=4;break;case"utf8":this.fillLast=v,T=4;break;case"base64":this.text=b,this.end=S,T=3;break;default:return this.write=f,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(T)}function h(k){return 127>=k?0:k>>5==6?2:k>>4==14?3:k>>3==30?4:k>>6==2?-1:-2}function p(k,T,z){var E=T.length-1;if(E<z)return 0;var D=h(T[E]);return 0<=D?(0<D&&(k.lastNeed=D-1),D):--E<z||D===-2?0:(D=h(T[E]),0<=D?(0<D&&(k.lastNeed=D-2),D):--E<z||D===-2?0:(D=h(T[E]),0<=D?(0<D&&(D===2?D=0:k.lastNeed=D-3),D):0))}function y(k,T){if((192&T[0])!=128)return k.lastNeed=0,"";if(1<k.lastNeed&&1<T.length){if((192&T[1])!=128)return k.lastNeed=1,"";if(2<k.lastNeed&&2<T.length&&(192&T[2])!=128)return k.lastNeed=2,""}}function v(k){var T=this.lastTotal-this.lastNeed,z=y(this,k);return z===void 0?this.lastNeed<=k.length?(k.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(k.copy(this.lastChar,T,0,k.length),void(this.lastNeed-=k.length)):z}function C(k,T){if((k.length-T)%2==0){var z=k.toString("utf16le",T);if(z){var E=z.charCodeAt(z.length-1);if(55296<=E&&56319>=E)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=k[k.length-1],k.toString("utf16le",T,k.length-1)}function A(k){var T=k&&k.length?this.write(k):"";if(this.lastNeed){var z=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,z)}return T}function b(k,T){var z=(k.length-T)%3;return z==0?k.toString("base64",T):(this.lastNeed=3-z,this.lastTotal=3,z==1?this.lastChar[0]=k[k.length-1]:(this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1]),k.toString("base64",T,k.length-z))}function S(k){var T=k&&k.length?this.write(k):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function f(k){return k.toString(this.encoding)}function w(k){return k&&k.length?this.write(k):""}var _=i("safe-buffer").Buffer,M=_.isEncoding||function(k){switch(k=""+k,k&&k.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};a.StringDecoder=m,m.prototype.write=function(k){if(k.length===0)return"";var T,z;if(this.lastNeed){if(T=this.fillLast(k),T===void 0)return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<k.length?T?T+this.text(k,z):this.text(k,z):T||""},m.prototype.end=function(k){var T=k&&k.length?this.write(k):"";return this.lastNeed?T+"":T},m.prototype.text=function(k,T){var z=p(this,k,T);if(!this.lastNeed)return k.toString("utf8",T);this.lastTotal=z;var E=k.length-(z-this.lastNeed);return k.copy(this.lastChar,0,E),k.toString("utf8",T,E)},m.prototype.fillLast=function(k){return this.lastNeed<=k.length?(k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,k.length),void(this.lastNeed-=k.length))}},{"safe-buffer":30}],32:[function(i,s){(function(a){(function(){function c(d){try{if(!a.localStorage)return!1}catch{return!1}var m=a.localStorage[d];return m!=null&&(m+"").toLowerCase()==="true"}s.exports=function(d,m){function h(){if(!p){if(c("throwDeprecation"))throw new Error(m);c("traceDeprecation")?console.trace(m):console.warn(m),p=!0}return d.apply(this,arguments)}if(c("noDeprecation"))return d;var p=!1;return h}}).call(this)}).call(this,typeof Qt>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:Qt)},{}],"/":[function(i,s){function a(S){return S.replace(/a=ice-options:trickle\s\n/g,"")}function c(S){console.warn(S)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const d=i("debug")("simple-peer"),m=i("get-browser-rtc"),h=i("randombytes"),p=i("readable-stream"),y=i("queue-microtask"),v=i("err-code"),{Buffer:C}=i("buffer"),A=65536;class b extends p.Duplex{constructor(f){if(f=Object.assign({allowHalfOpen:!1},f),super(f),this._id=h(4).toString("hex").slice(0,7),this._debug("new peer %o",f),this.channelName=f.initiator?f.channelName||h(20).toString("hex"):null,this.initiator=f.initiator||!1,this.channelConfig=f.channelConfig||b.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},b.config,f.config),this.offerOptions=f.offerOptions||{},this.answerOptions=f.answerOptions||{},this.sdpTransform=f.sdpTransform||(w=>w),this.streams=f.streams||(f.stream?[f.stream]:[]),this.trickle=f.trickle===void 0||f.trickle,this.allowHalfTrickle=f.allowHalfTrickle!==void 0&&f.allowHalfTrickle,this.iceCompleteTimeout=f.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=f.wrtc&&typeof f.wrtc=="object"?f.wrtc:m(),!this._wrtc)throw v(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(w){return void this.destroy(v(w,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=w=>{this._onIceCandidate(w)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(w=>{this.destroy(v(w,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=w=>{this._setupData(w)},this.streams&&this.streams.forEach(w=>{this.addStream(w)}),this._pc.ontrack=w=>{this._onTrack(w)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(f){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof f=="string")try{f=JSON.parse(f)}catch{f={}}this._debug("signal()"),f.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),f.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(f.transceiverRequest.kind,f.transceiverRequest.init)),f.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(f.candidate):this._pendingCandidates.push(f.candidate)),f.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(f)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(w=>{this._addIceCandidate(w)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(w=>{this.destroy(v(w,"ERR_SET_REMOTE_DESCRIPTION"))}),f.sdp||f.candidate||f.renegotiate||f.transceiverRequest||this.destroy(v(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(f){const w=new this._wrtc.RTCIceCandidate(f);this._pc.addIceCandidate(w).catch(_=>{!w.address||w.address.endsWith(".local")?c("Ignoring unsupported ICE candidate."):this.destroy(v(_,"ERR_ADD_ICE_CANDIDATE"))})}send(f){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(f)}}addTransceiver(f,w){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(f,w),this._needsNegotiation()}catch(_){this.destroy(v(_,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:f,init:w}})}}addStream(f){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),f.getTracks().forEach(w=>{this.addTrack(w,f)})}}addTrack(f,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const _=this._senderMap.get(f)||new Map;let M=_.get(w);if(!M)M=this._pc.addTrack(f,w),_.set(w,M),this._senderMap.set(f,_),this._needsNegotiation();else throw M.removed?v(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):v(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(f,w,_){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const M=this._senderMap.get(f),k=M?M.get(_):null;if(!k)throw v(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");w&&this._senderMap.set(w,M),k.replaceTrack==null?this.destroy(v(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):k.replaceTrack(w)}removeTrack(f,w){if(this.destroying)return;if(this.destroyed)throw v(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const _=this._senderMap.get(f),M=_?_.get(w):null;if(!M)throw v(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{M.removed=!0,this._pc.removeTrack(M)}catch(k){k.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(M):this.destroy(v(k,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(f){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),f.getTracks().forEach(w=>{this.removeTrack(w,f)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,y(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw v(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(f){this._destroy(f,()=>{})}_destroy(f,w){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",f&&(f.message||f)),y(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",f&&(f.message||f)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,f&&this.emit("error",f),this.emit("close"),w()}))}_setupData(f){if(!f.channel)return this.destroy(v(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=f.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=A),this.channelName=this._channel.label,this._channel.onmessage=_=>{this._onChannelMessage(_)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=_=>{const M=_.error instanceof Error?_.error:new Error(`Datachannel error: ${_.message} ${_.filename}:${_.lineno}:${_.colno}`);this.destroy(v(M,"ERR_DATA_CHANNEL"))};let w=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(w&&this._onChannelClose(),w=!0):w=!1},5e3)}_read(){}_write(f,w,_){if(this.destroyed)return _(v(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(f)}catch(M){return this.destroy(v(M,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>A?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=_):_(null)}else this._debug("write before connect"),this._chunk=f,this._cb=_}_onFinish(){if(!this.destroyed){const f=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?f():this.once("connect",f)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(f=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(f.sdp=a(f.sdp)),f.sdp=this.sdpTransform(f.sdp);const w=()=>{if(!this.destroyed){const _=this._pc.localDescription||f;this._debug("signal"),this.emit("signal",{type:_.type,sdp:_.sdp})}};this._pc.setLocalDescription(f).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(_=>{this.destroy(v(_,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(f=>{this.destroy(v(f,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(f=>{f.mid||!f.sender.track||f.requested||(f.requested=!0,this.addTransceiver(f.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(f=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(f.sdp=a(f.sdp)),f.sdp=this.sdpTransform(f.sdp);const w=()=>{if(!this.destroyed){const _=this._pc.localDescription||f;this._debug("signal"),this.emit("signal",{type:_.type,sdp:_.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(f).then(()=>{this.destroyed||(this.trickle||this._iceComplete?w():this.once("_iceComplete",w))}).catch(_=>{this.destroy(v(_,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(f=>{this.destroy(v(f,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(v(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const f=this._pc.iceConnectionState,w=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",f,w),this.emit("iceStateChange",f,w),(f==="connected"||f==="completed")&&(this._pcReady=!0,this._maybeReady()),f==="failed"&&this.destroy(v(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),f==="closed"&&this.destroy(v(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(f){const w=_=>(Object.prototype.toString.call(_.values)==="[object Array]"&&_.values.forEach(M=>{Object.assign(_,M)}),_);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(_=>{const M=[];_.forEach(k=>{M.push(w(k))}),f(null,M)},_=>f(_)):0<this._pc.getStats.length?this._pc.getStats(_=>{if(this.destroyed)return;const M=[];_.result().forEach(k=>{const T={};k.names().forEach(z=>{T[z]=k.stat(z)}),T.id=k.id,T.type=k.type,T.timestamp=k.timestamp,M.push(w(T))}),f(null,M)},_=>f(_)):f(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const f=()=>{this.destroyed||this.getStats((w,_)=>{if(this.destroyed)return;w&&(_=[]);const M={},k={},T={};let z=!1;_.forEach(D=>{(D.type==="remotecandidate"||D.type==="remote-candidate")&&(M[D.id]=D),(D.type==="localcandidate"||D.type==="local-candidate")&&(k[D.id]=D),(D.type==="candidatepair"||D.type==="candidate-pair")&&(T[D.id]=D)});const E=D=>{z=!0;let I=k[D.localCandidateId];I&&(I.ip||I.address)?(this.localAddress=I.ip||I.address,this.localPort=+I.port):I&&I.ipAddress?(this.localAddress=I.ipAddress,this.localPort=+I.portNumber):typeof D.googLocalAddress=="string"&&(I=D.googLocalAddress.split(":"),this.localAddress=I[0],this.localPort=+I[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let W=M[D.remoteCandidateId];W&&(W.ip||W.address)?(this.remoteAddress=W.ip||W.address,this.remotePort=+W.port):W&&W.ipAddress?(this.remoteAddress=W.ipAddress,this.remotePort=+W.portNumber):typeof D.googRemoteAddress=="string"&&(W=D.googRemoteAddress.split(":"),this.remoteAddress=W[0],this.remotePort=+W[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(_.forEach(D=>{D.type==="transport"&&D.selectedCandidatePairId&&E(T[D.selectedCandidatePairId]),(D.type==="googCandidatePair"&&D.googActiveConnection==="true"||(D.type==="candidatepair"||D.type==="candidate-pair")&&D.selected)&&E(D)}),!z&&(!Object.keys(T).length||Object.keys(k).length))return void setTimeout(f,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(I){return this.destroy(v(I,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const D=this._cb;this._cb=null,D(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};f()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>A)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(f=>{this._pc.removeTrack(f),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(f){this.destroyed||(f.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:f.candidate.candidate,sdpMLineIndex:f.candidate.sdpMLineIndex,sdpMid:f.candidate.sdpMid}}):!f.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),f.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(f){if(this.destroyed)return;let w=f.data;w instanceof ArrayBuffer&&(w=C.from(w)),this.push(w)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const f=this._cb;this._cb=null,f(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(f){this.destroyed||f.streams.forEach(w=>{this._debug("on track"),this.emit("track",f.track,w),this._remoteTracks.push({track:f.track,stream:w}),this._remoteStreams.some(_=>_.id===w.id)||(this._remoteStreams.push(w),y(()=>{this._debug("on stream"),this.emit("stream",w)}))})}_debug(){const f=[].slice.call(arguments);f[0]="["+this._id+"] "+f[0],d.apply(null,f)}}b.WEBRTC_SUPPORT=!!m(),b.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},b.channelConfig={},s.exports=b},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Bm);var S1=Bm.exports;const k1=vh(S1),ld=0,ad=1,Um=2,$m=(e,t)=>{ie(e,ld);const n=fx(t);Be(e,n)},Wm=(e,t,n)=>{ie(e,ad),Be(e,ax(t,n))},_1=(e,t,n)=>Wm(t,n,Xe(e)),Hm=(e,t,n)=>{try{ix(t,Xe(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},E1=(e,t)=>{ie(e,Um),Be(e,t)},j1=Hm,T1=(e,t,n,r)=>{const o=pe(e);switch(o){case ld:_1(e,t,n);break;case ad:Hm(e,n,r);break;case Um:j1(e,n,r);break;default:throw new Error("Unknown message type")}return o},ka=3e4;class R1 extends Lg{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=jn();this.getLocalState()!==null&&ka/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((o,i)=>{i!==this.clientID&&ka<=n-o.lastUpdated&&this.states.has(i)&&r.push(i)}),r.length>0&&Ic(this,r,"timeout")},ln(ka/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),o=r===void 0?0:r.clock+1,i=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:o,lastUpdated:jn()});const s=[],a=[],c=[],d=[];t===null?d.push(n):i==null?t!=null&&s.push(n):(a.push(n),ii(i,t)||c.push(n)),(s.length>0||c.length>0||d.length>0)&&this.emit("change",[{added:s,updated:c,removed:d},"local"]),this.emit("update",[{added:s,updated:a,removed:d},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const Ic=(e,t,n)=>{const r=[];for(let o=0;o<t.length;o++){const i=t[o];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const s=e.meta.get(i);e.meta.set(i,{clock:s.clock+1,lastUpdated:jn()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},fl=(e,t,n=e.states)=>{const r=t.length,o=Ze();ie(o,r);for(let i=0;i<r;i++){const s=t[i],a=n.get(s)||null,c=e.meta.get(s).clock;ie(o,s),ie(o,c),on(o,JSON.stringify(a))}return Fe(o)},M1=(e,t,n)=>{const r=fn(t),o=jn(),i=[],s=[],a=[],c=[],d=pe(r);for(let m=0;m<d;m++){const h=pe(r);let p=pe(r);const y=JSON.parse(bn(r)),v=e.meta.get(h),C=e.states.get(h),A=v===void 0?0:v.clock;(A<p||A===p&&y===null&&e.states.has(h))&&(y===null?h===e.clientID&&e.getLocalState()!=null?p++:e.states.delete(h):e.states.set(h,y),e.meta.set(h,{clock:p,lastUpdated:o}),v===void 0&&y!==null?i.push(h):v!==void 0&&y===null?c.push(h):y!==null&&(ii(y,C)||a.push(h),s.push(h)))}(i.length>0||a.length>0||c.length>0)&&e.emit("change",[{added:i,updated:a,removed:c},n]),(i.length>0||s.length>0||c.length>0)&&e.emit("update",[{added:i,updated:s,removed:c},n])},D1=(e,t)=>{const n=Dc(e).buffer,r=Dc(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then(o=>crypto.subtle.deriveKey({name:"PBKDF2",salt:r,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},Vm=(e,t)=>{if(!t)return Vu(e);const n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then(r=>{const o=Ze();return on(o,"AES-GCM"),Be(o,n),Be(o,new Uint8Array(r)),Fe(o)})},L1=(e,t)=>{const n=Ze();return vo(n,e),Vm(Fe(n),t)},Ym=(e,t)=>{if(!t)return Vu(e);const n=fn(e);bn(n)!=="AES-GCM"&&mw(an("Unknown encryption algorithm"));const o=Xe(n),i=Xe(n);return crypto.subtle.decrypt({name:"AES-GCM",iv:o},t,i).then(s=>new Uint8Array(s))},A1=(e,t)=>Ym(e,t).then(n=>wo(fn(new Uint8Array(n)))),kt=Kw("y-webrtc"),ao=0,Km=3,Li=1,cd=4,hl=new Map,pr=new Map,Gm=e=>{let t=!0;e.webrtcConns.forEach(n=>{n.synced||(t=!1)}),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),kt("synced ",Ft,e.name,_r," with all peers"))},Qm=(e,t,n)=>{const r=fn(t),o=Ze(),i=pe(r);if(e===void 0)return null;const s=e.awareness,a=e.doc;let c=!1;switch(i){case ao:{ie(o,ao);const d=T1(r,o,a,e);d===ad&&!e.synced&&n(),d===ld&&(c=!0);break}case Km:ie(o,Li),Be(o,fl(s,Array.from(s.getStates().keys()))),c=!0;break;case Li:M1(s,Xe(r),e);break;case cd:{const d=kr(r)===1,m=bn(r);if(m!==e.peerId&&(e.bcConns.has(m)&&!d||!e.bcConns.has(m)&&d)){const h=[],p=[];d?(e.bcConns.add(m),p.push(m)):(e.bcConns.delete(m),h.push(m)),e.provider.emit("peers",[{added:p,removed:h,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),Xm(e)}break}default:return console.error("Unable to compute message"),o}return c?o:null},z1=(e,t)=>{const n=e.room;return kt("received message from ",Ft,e.remotePeerId,Gu," (",n.name,")",_r,Ol),Qm(n,t,()=>{e.synced=!0,kt("synced ",Ft,n.name,_r," with ",Ft,e.remotePeerId),Gm(n)})},_a=(e,t)=>{kt("send message to ",Ft,e.remotePeerId,_r,Gu," (",e.room.name,")",Ol);try{e.peer.send(Fe(t))}catch{}},N1=(e,t)=>{kt("broadcast message in ",Ft,e.name,_r),e.webrtcConns.forEach(n=>{try{n.peer.send(t)}catch{}})};class th{constructor(t,n,r,o){kt("establishing connection to ",Ft,r),this.room=o,this.remotePeerId=r,this.glareToken=void 0,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new k1({initiator:n,...o.provider.peerOpts}),this.peer.on("signal",i=>{this.glareToken===void 0&&(this.glareToken=Date.now()+Math.random()),ud(t,o,{to:r,from:o.peerId,type:"signal",token:this.glareToken,signal:i})}),this.peer.on("connect",()=>{kt("connected to ",Ft,r),this.connected=!0;const s=o.provider.doc,a=o.awareness,c=Ze();ie(c,ao),$m(c,s),_a(this,c);const d=a.getStates();if(d.size>0){const m=Ze();ie(m,Li),Be(m,fl(a,Array.from(d.keys()))),_a(this,m)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,o.webrtcConns.has(this.remotePeerId)&&(o.webrtcConns.delete(this.remotePeerId),o.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),Gm(o),this.peer.destroy(),kt("closed connection to ",Ft,r),Pc(o)}),this.peer.on("error",i=>{kt("Error in connection to ",Ft,r,": ",i),Pc(o)}),this.peer.on("data",i=>{const s=z1(this,i);s!==null&&_a(this,s)})}destroy(){this.peer.destroy()}}const zn=(e,t)=>Vm(t,e.key).then(n=>e.mux(()=>b1(e.name,n))),nh=(e,t)=>{e.bcconnected&&zn(e,t),N1(e,t)},Pc=e=>{hl.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&ud(t,e,{type:"announce",from:e.peerId}))})},Xm=e=>{if(e.provider.filterBcConns){const t=Ze();ie(t,cd),ji(t,1),on(t,e.peerId),zn(e,Fe(t))}};class O1{constructor(t,n,r,o){this.peerId=Ig(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=r,this.key=o,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=C1(),this.bcconnected=!1,this._bcSubscriber=i=>Ym(new Uint8Array(i),o).then(s=>this.mux(()=>{const a=Qm(this,s,()=>{});a&&zn(this,Fe(a))})),this._docUpdateHandler=(i,s)=>{const a=Ze();ie(a,ao),E1(a,i),nh(this,Fe(a))},this._awarenessUpdateHandler=({added:i,updated:s,removed:a},c)=>{const d=i.concat(s).concat(a),m=Ze();ie(m,Li),Be(m,fl(this.awareness,d)),nh(this,Fe(m))},this._beforeUnloadHandler=()=>{Ic(this.awareness,[t.clientID],"window unload"),pr.forEach(i=>{i.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),Pc(this);const t=this.name;w1(t,this._bcSubscriber),this.bcconnected=!0,Xm(this);const n=Ze();ie(n,ao),$m(n,this.doc),zn(this,Fe(n));const r=Ze();ie(r,ao),Wm(r,this.doc),zn(this,Fe(r));const o=Ze();ie(o,Km),zn(this,Fe(o));const i=Ze();ie(i,Li),Be(i,fl(this.awareness,[this.doc.clientID])),zn(this,Fe(i))}disconnect(){hl.forEach(n=>{n.connected&&n.send({type:"unsubscribe",topics:[this.name]})}),Ic(this.awareness,[this.doc.clientID],"disconnect");const t=Ze();ie(t,cd),ji(t,0),on(t,this.peerId),zn(this,Fe(t)),x1(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(n=>n.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const F1=(e,t,n,r)=>{if(pr.has(n))throw an(`A Yjs Doc connected to room "${n}" already exists!`);const o=new O1(e,t,n,r);return pr.set(n,o),o},ud=(e,t,n)=>{t.key?L1(n,t.key).then(r=>{e.send({type:"publish",topic:t.name,data:Gg(r)})}):e.send({type:"publish",topic:t.name,data:n})};class I1 extends m1{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{kt(`connected (${t})`);const n=Array.from(pr.keys());this.send({type:"subscribe",topics:n}),pr.forEach(r=>ud(this,r,{type:"announce",from:r.peerId}))}),this.on("message",n=>{switch(n.type){case"publish":{const r=n.topic,o=pr.get(r);if(o==null||typeof r!="string")return;const i=s=>{const a=o.webrtcConns,c=o.peerId;if(s==null||s.from===c||s.to!==void 0&&s.to!==c||o.bcConns.has(s.from))return;const d=a.has(s.from)?()=>{}:()=>o.provider.emit("peers",[{removed:[],added:[s.from],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}]);switch(s.type){case"announce":a.size<o.provider.maxConns&&(Tt(a,s.from,()=>new th(this,!0,s.from,o)),d());break;case"signal":if(s.signal.type==="offer"){const m=a.get(s.from);if(m){const h=s.token,p=m.glareToken;if(p&&p>h){kt("offer rejected: ",s.from);return}m.glareToken=void 0}}if(s.signal.type==="answer"){kt("offer answered by: ",s.from);const m=a.get(s.from);m.glareToken=void 0}s.to===c&&(Tt(a,s.from,()=>new th(this,!1,s.from,o)).peer.signal(s.signal),d());break}};o.key?typeof n.data=="string"&&A1(Qg(n.data),o.key).then(i):i(n.data)}}}),this.on("disconnect",()=>kt(`disconnect (${t})`))}}const Ea=e=>{e.emit("status",[{connected:e.connected}])};class P1 extends Dg{constructor(t,n,{signaling:r=["wss://y-webrtc-eu.fly.dev"],password:o=null,awareness:i=new R1(n),maxConns:s=20+ln(pw()*15),filterBcConns:a=!0,peerOpts:c={}}={}){super(),this.roomName=t,this.doc=n,this.filterBcConns=a,this.awareness=i,this.shouldConnect=!1,this.signalingUrls=r,this.signalingConns=[],this.maxConns=s,this.peerOpts=c,this.key=o?D1(o,t):Vu(null),this.room=null,this.key.then(d=>{this.room=F1(n,this,t,d),this.shouldConnect?this.room.connect():this.room.disconnect(),Ea(this)}),this.connect(),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const n=Tt(hl,t,()=>new I1(t));this.signalingConns.push(n),n.providers.add(this)}),this.room&&(this.room.connect(),Ea(this))}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),hl.delete(t.url))}),this.room&&(this.room.disconnect(),Ea(this))}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),pr.delete(this.roomName)}),super.destroy()}}const B1=20,Bc=new Map;function rr(e,t){let n=Bc.get(e);n||(n=[],Bc.set(e,n)),n.push(t),n.length>B1&&n.shift()}function U1(e){const t=Bc.get(e);if(!t||t.length===0)return!1;const n=t.pop();return n?(n.revert(),!0):!1}const Rt=new Do,_e=Rt.getMap("players"),Zn=Rt.getMap("zones"),ae=Rt.getMap("cards"),_o=Rt.getMap("baton"),$1=Rt.getMap("seed"),gr=Rt.getArray("log"),ds=Rt.getMap("counterTypes"),si=Rt.getMap("revealedCard"),mr=new Set,pl=[];function Go(){return new Set(mr)}function fs(e){return mr.has(e)}function W1(e){mr.has(e)?mr.delete(e):mr.add(e),dd()}function Uc(){mr.clear(),dd()}function H1(e){e.forEach(t=>mr.add(t)),dd()}function V1(e){pl.push(e)}function Y1(e){const t=pl.indexOf(e);t>-1&&pl.splice(t,1)}function dd(){pl.forEach(e=>e())}const rh=["#4CAF50","#2196F3","#F44336","#9C27B0"];function qe(e){const n=Array.from(_e.keys()).indexOf(e);return n>=0&&n<rh.length?rh[n]:"#757575"}function K1(e,t,n=!1){if(_e.size>=4){console.warn("Maximum of 4 players reached");return}_e.set(e,{name:t,lifeTotal:40}),$o(`deck-${e}`,"deck",e),$o(`hand-${e}`,"hand",e),$o(`battlefield-${e}`,"battlefield",e),$o(`graveyard-${e}`,"graveyard",e),$o(`exile-${e}`,"exile",e),n||G1(e),We(e,"player_joined",{name:t})}function G1(e){const t=["Lightning Bolt","Giant Growth","Counterspell","Swords to Plowshares","Dark Ritual","Path to Exile","Brainstorm","Llanowar Elves","Doom Blade","Cancel"];for(let n=0;n<3;n++)Ds(`${e}-card-hand-${n}`,t[n%t.length],e,`hand-${e}`,n);for(let n=0;n<2;n++)Ds(`${e}-card-battlefield-${n}`,t[(n+3)%t.length],e,`battlefield-${e}`,n);for(let n=0;n<50;n++)Ds(`${e}-card-deck-${n}`,t[n%t.length],e,`deck-${e}`,n)}function oh(e){const t=_e.get(e),n=[];Zn.forEach((i,s)=>{i.owner===e&&n.push(s)}),n.forEach(i=>Zn.delete(i));const r=[];ae.forEach((i,s)=>{i.owner===e&&r.push(s)}),r.forEach(i=>ae.delete(i)),_e.delete(e);const o=li();if(o&&o.playerId===e){const i=Array.from(_e.keys());i.length>0?Wc(i[0],"main1"):_o.delete("current")}t&&We(e,"player_removed",{name:t.name})}function Q1(){_e.clear(),Zn.clear(),ae.clear(),_o.clear(),$1.clear(),gr.delete(0,gr.length),console.log("Room reset - all state cleared")}function $o(e,t,n){Zn.set(e,{type:t,owner:n})}function Ds(e,t,n,r,o=0){ae.set(e,{oracleId:t,owner:n,zoneId:r,order:o,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{},v:0})}function Ul(e,t,n,r,o){const i=ae.get(e);if(!i)return;const s=i.zoneId;ae.set(e,{...i,zoneId:t,order:n??i.order,v:i.v+1})}function X1(e,t,n){const r=ae.get(e);r&&(ae.set(e,{...r,...t,v:r.v+1}),n&&We(n,"card_updated",{cardId:e,updates:t}))}function $c(e,t,n){const r=ae.get(e);r&&(ae.set(e,{...r,tapped:t,v:r.v+1}),n&&We(n,"card_updated",{cardId:e,oracleId:r.oracleId,updates:{tapped:t}}))}function lr(e,t,n){X1(e,{faceDown:t},n)}function ja(e,t,n,r){const o=ae.get(e);if(!o)return;const i=Ut(o.zoneId),a=(i.length>0?Math.max(...i.map(c=>c.order)):0)+1;ae.set(e,{...o,position:{x:t,y:n},order:a,v:o.v+1})}function ih(e,t,n,r){const o=ae.get(e);if(!o)return;const i={...o.counters},s=i[t]??0,a=Math.max(0,s+n);a===0?delete i[t]:i[t]=a,ae.set(e,{...o,counters:i,v:o.v+1}),r&&We(r,"counter_modified",{cardId:e,oracleId:o.oracleId,counterType:t,delta:n,newValue:a})}const en={poison:{name:"Poison",emoji:"",color:"#9C27B0"},commanderDamage:{name:"Commander Damage",emoji:"",color:"#F44336"}},Eo=Rt.getMap("playerCounters");function fd(e){return Eo.get(e)||{}}function Jm(e){const t=fd(e),n=[];for(const[r,o]of Object.entries(t))if(r==="poison")n.push({type:"poison",value:o,isBuiltin:!0});else if(r.startsWith("commanderDamage:")){const i=r.split(":")[1];n.push({type:"commanderDamage",value:o,sourcePlayerId:i,isBuiltin:!0})}else n.push({type:r,value:o,isBuiltin:!1});return n}function sh(e,t,n,r,o){const i=fd(e),s=t==="commanderDamage"&&r?`commanderDamage:${r}`:t,a=i[s]||0,c=Math.max(0,a+n),d={...i};c===0?delete d[s]:d[s]=c,Eo.set(e,d),o&&We(o,"player_counter_modified",{playerId:e,counterType:t,sourcePlayerId:r,delta:n,newValue:c})}function Ta(e,t,n){const o={...fd(e)};delete o[t],Eo.set(e,o),n&&We(n,"player_counter_deleted",{playerId:e,counterKey:t})}function J1(){const e=new Set;return Eo.forEach(t=>{Object.keys(t).forEach(n=>{n!=="poison"&&!n.startsWith("commanderDamage:")&&e.add(n)})}),Array.from(e)}function lh(e,t,n){const r=_e.get(e);r&&(_e.set(e,{...r,lifeTotal:t}),n&&We(n,"life_total_set",{playerId:e,newTotal:t}))}function ah(e,t,n){const r=_e.get(e);if(!r)return;const o=r.lifeTotal+t;_e.set(e,{...r,lifeTotal:o}),n&&We(n,"life_total_modified",{playerId:e,delta:t,newTotal:o})}function Wc(e,t){_o.set("current",{playerId:e,step:t}),We(e,"turn_changed",{step:t})}function li(){return _o.get("current")}function We(e,t,n){gr.push([{timestamp:Date.now(),playerId:e,action:t,data:n,type:"game"}])}function q1(e,t){gr.push([{timestamp:Date.now(),playerId:e,action:"chat_message",data:{message:t},type:"chat"}])}function Ut(e){const t=[];return ae.forEach(n=>{n.zoneId===e&&t.push(n)}),t.sort((n,r)=>n.order-r.order)}function Rr(e){const t=Ut(e);return t.length===0?0:Math.max(...t.map(n=>n.order))+1}function Wo(e,t){var a;const n=`deck-${e}`,r=`hand-${e}`,o=Ut(n),i=Math.min(t,o.length);if(i===0)return;const s=Rr(r);for(let c=0;c<i;c++){const d=o[c],m=(a=Array.from(ae.entries()).find(([h,p])=>p===d))==null?void 0:a[0];m&&Ul(m,r,s+c,e)}Wi(),We(e,"draw_cards",{count:i})}function Ra(e,t){var a;const n=`deck-${e}`,r=`graveyard-${e}`,o=Ut(n),i=Math.min(t,o.length);if(i===0)return;const s=Rr(r);for(let c=0;c<i;c++){const d=o[c],m=(a=Array.from(ae.entries()).find(([h,p])=>p===d))==null?void 0:a[0];m&&Ul(m,r,s+c,e)}Wi(),We(e,"mill_cards",{count:i})}function Ma(e,t,n=!1){var c;const r=`deck-${e}`,o=`exile-${e}`,i=Ut(r),s=Math.min(t,i.length);if(s===0)return;const a=Rr(o);for(let d=0;d<s;d++){const m=i[d],h=(c=Array.from(ae.entries()).find(([p,y])=>y===m))==null?void 0:c[0];h&&(Ul(h,o,a+d,e),n&&lr(h,!0))}Wi(),We(e,"exile_from_deck",{count:s,faceDown:n})}function ch(e){const t=`deck-${e}`,n=Ut(t);if(n.length===0)return null;const r=n[0],o=_e.get(e),i=(o==null?void 0:o.name)||e;return si.set("current",{cardName:r.oracleId,revealedBy:e,timestamp:Date.now()}),We(e,"reveal_top_card",{cardName:r.oracleId}),{cardName:r.oracleId,playerName:i}}function Wi(){si.delete("current")}function Or(e,t){var s;const n=`deck-${e}`,r=Ut(n),o=Math.min(t,r.length),i=[];for(let a=0;a<o;a++){const c=r[a],d=(s=Array.from(ae.entries()).find(([m,h])=>h===c))==null?void 0:s[0];d&&i.push({cardId:d,card:c})}return i}function Z1(e){var o;const t=`deck-${e}`,n=Ut(t),r=[];for(const i of n){const s=(o=Array.from(ae.entries()).find(([a,c])=>c===i))==null?void 0:o[0];s&&r.push({cardId:s,card:i})}return r}function eb(e,t,n=[]){const r=`deck-${e}`,o=Ut(r),i=o.length>0?Math.max(...o.map(s=>s.order)):0;t.forEach((s,a)=>{const c=ae.get(s);c&&c.zoneId===r&&ae.set(s,{...c,order:a,v:c.v+1})}),n.forEach((s,a)=>{const c=ae.get(s);c&&c.zoneId===r&&ae.set(s,{...c,order:i+a+1,v:c.v+1})}),Wi(),We(e,"scry",{topCount:t.length,bottomCount:n.length})}function hs(e){const t=`deck-${e}`;if(Ut(t).length===0)return;const r=[];ae.forEach((i,s)=>{i.zoneId===t&&r.push(s)});const o=[...r];for(let i=o.length-1;i>0;i--){const s=Math.floor(Math.random()*(i+1));[o[i],o[s]]=[o[s],o[i]]}o.forEach((i,s)=>{const a=ae.get(i);a&&ae.set(i,{...a,order:s,v:a.v+1})}),Wi(),We(e,"shuffle_deck",{cardCount:o.length})}const uh=20,dh=20,qm=12,Zm=15;function hd(e){var o,i;const t=Ut(e).filter(s=>s.position);if(t.length===0)return{x:uh,y:dh};let n=t[0],r=n.order;for(const s of t)s.order>r&&(r=s.order,n=s);return{x:(((o=n.position)==null?void 0:o.x)||uh)+qm,y:(((i=n.position)==null?void 0:i.y)||dh)+Zm}}function gl(e,t,n="auto",r){const o=ae.get(e);if(!o)return;let i;n==="top"?(Ut(t).forEach(m=>{var p;const h=(p=Array.from(ae.entries()).find(([y,v])=>v===m))==null?void 0:p[0];h&&ae.set(h,{...m,order:m.order+1,v:m.v+1})}),i=0):i=Rr(t);const s=o.zoneId.startsWith("battlefield-"),a=t.startsWith("battlefield-");let c=o.position;if(a&&!o.position&&(c=hd(t)),s&&!a&&o.tapped){const d=o.zoneId;ae.set(e,{...o,tapped:!1,zoneId:t,order:i,position:a?c:void 0,v:o.v+1}),r&&We(r,"card_moved",{cardId:e,oracleId:o.oracleId,from:d,to:t,order:i})}else{const d=o.zoneId;ae.set(e,{...o,zoneId:t,order:i,position:a?c:void 0,v:o.v+1}),r&&We(r,"card_moved",{cardId:e,oracleId:o.oracleId,from:d,to:t,order:i})}}function tb(e,t,n=1,r){const o=`battlefield-${e}`,i=Rr(o);let s=hd(o);for(let a=0;a<n;a++){const c=`${e}-token-${Date.now()}-${a}-${crypto.randomUUID()}`;ae.set(c,{oracleId:t,owner:e,zoneId:o,order:i+a,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{isToken:!0,imageUrl:r},position:{x:s.x,y:s.y},v:0}),s={x:s.x+qm,y:s.y+Zm}}We(e,"token_created",{tokenName:t,quantity:n})}function e0(e,t){const n=ae.get(e);n&&(ae.delete(e),t&&We(t,"card_deleted",{cardId:e,oracleId:n.oracleId}))}function qr(){return`crdt-cards-${window.location.hash.replace(/^#/,"")||"default"}`}const Zr=new P1(qr(),Rt,{signaling:["wss://crdt-cards-signaling.happyground-bfbe302d.westus2.azurecontainerapps.io"]});Zr.on("status",e=>{console.log("WebRTC status:",e.connected?"connected":"disconnected")});Zr.on("synced",e=>{console.log("YJS synced:",e.synced)});window.addEventListener("popstate",()=>{console.log("Room changed, reloading to connect to new room..."),window.location.reload()});console.log("YJS document initialized:",Rt.guid);console.log("Room name:",qr());console.log("Game state maps ready:",{players:_e.size,zones:Zn.size,cards:ae.size});const pd="crdt-cards-decks",gd="crdt-cards-last-deck",Ls=[{id:"starter-atraxa",name:"Atraxa, Praetors' Voice",file:"atraxa.txt",description:"Proliferate & Superfriends"},{id:"starter-urdragon",name:"The Ur-Dragon",file:"urdragon.txt",description:"Dragon tribal powerhouse"},{id:"starter-edgar",name:"Edgar Markov",file:"edgar-markov.txt",description:"Vampire tribal aggro"},{id:"starter-krenko",name:"Krenko, Mob Boss",file:"krenko.txt",description:"Goblin tribal combo"},{id:"starter-kaalia",name:"Kaalia of the Vast",file:"kaalia.txt",description:"Angels, Demons, Dragons"}];function co(){try{const e=localStorage.getItem(pd);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load stored decks:",e),[]}}function md(e){try{const t=co(),n=t.findIndex(r=>r.id===e.id);n>=0?t[n]=e:t.push(e),localStorage.setItem(pd,JSON.stringify(t))}catch(t){console.error("Failed to save deck:",t)}}function nb(e){try{const t=co().filter(n=>n.id!==e);localStorage.setItem(pd,JSON.stringify(t)),t0()===e&&localStorage.removeItem(gd)}catch(t){console.error("Failed to delete deck:",t)}}function t0(){return localStorage.getItem(gd)}function fh(e){localStorage.setItem(gd,e)}function rb(e){const t=e.toLowerCase();return t.includes("moxfield.com")?"moxfield":t.includes("archidekt.com")?"archidekt":t.includes("edhrec.com")?"edhrec":"unknown"}async function ob(e){switch(rb(e)){case"moxfield":return hh(e);case"archidekt":return ib(e);case"edhrec":return sb();default:return hh(e)}}async function hh(e){try{const t=ab(e);if(!t)return{success:!1,error:"Invalid Moxfield URL format"};const n=`https://api.moxfield.com/v2/decks/all/${t}`,o=`https://corsproxy.io/?${encodeURIComponent(n)}`,i=await fetch(o);if(!i.ok)return i.status===404?{success:!1,error:"Deck not found on Moxfield"}:{success:!1,error:`Failed to fetch deck (${i.status})`};const s=await i.json(),a=[];let c=0;if(s.mainboard)for(const[m,h]of Object.entries(s.mainboard)){const p=h.quantity||1;a.push({name:m,quantity:p}),c+=p}const d={id:crypto.randomUUID(),name:s.name||"Imported Deck",moxfieldUrl:e,moxfieldId:t,cardCount:c,importedAt:Date.now(),cards:a};return md(d),{success:!0,deck:d}}catch(t){return console.error("Failed to import from Moxfield:",t),{success:!1,error:"Network error or invalid deck"}}}async function ib(e){var t,n,r;try{const o=e.match(/archidekt\.com\/decks\/(\d+)/);if(!o)return{success:!1,error:"Invalid Archidekt URL format"};const i=o[1],s=`https://archidekt.com/api/decks/${i}/`,c=`https://corsproxy.io/?${encodeURIComponent(s)}`,d=await fetch(c);if(!d.ok)return d.status===404?{success:!1,error:"Deck not found on Archidekt"}:{success:!1,error:`Failed to fetch deck (${d.status})`};const m=await d.json(),h=[];let p=0;if(m.cards&&Array.isArray(m.cards))for(const v of m.cards){const C=((n=(t=v.card)==null?void 0:t.oracleCard)==null?void 0:n.name)||((r=v.card)==null?void 0:r.name),A=v.quantity||1;C&&(h.push({name:C,quantity:A}),p+=A)}const y={id:crypto.randomUUID(),name:m.name||"Imported Deck",moxfieldUrl:e,moxfieldId:i,cardCount:p,importedAt:Date.now(),cards:h};return md(y),{success:!0,deck:y}}catch(o){return console.error("Failed to import from Archidekt:",o),{success:!1,error:"Network error or invalid deck"}}}async function sb(){return{success:!1,error:"EDHRec import not yet implemented. Please use Moxfield or Archidekt URLs for now."}}async function lb(e,t){try{const n=await fetch(`/starter-decks/${e}`);if(!n.ok)return n.status===404?{success:!1,error:`Starter deck file not found: ${e}`}:{success:!1,error:`Failed to load starter deck (${n.status})`};const r=await n.text(),o=[];let i=0;const s=r.split(`
`);for(const d of s){const m=d.trim();if(!m)continue;const h=m.match(/^(\d+)\s+(.+)$/);if(h){const p=parseInt(h[1],10),y=h[2].trim();o.push({name:y,quantity:p}),i+=p}}if(o.length===0)return{success:!1,error:"No cards found in starter deck file"};const a=o.length>0?[o[0].name]:[],c={id:crypto.randomUUID(),name:t,moxfieldUrl:`local://${e}`,moxfieldId:e,cardCount:i,importedAt:Date.now(),cards:o,commanders:a};return md(c),{success:!0,deck:c}}catch(n){return console.error("Failed to import from local file:",n),{success:!1,error:"Failed to load starter deck file"}}}function ab(e){const t=e.trim();let n=t.match(/moxfield\.com\/decks\/([a-zA-Z0-9_-]+)/);return n?n[1]:/^[a-zA-Z0-9_-]+$/.test(t)?t:null}function ph(e,t){const n=`deck-${e}`,r=`battlefield-${e}`,o=[];ae.forEach((c,d)=>{c.zoneId===n&&o.push(d)}),o.forEach(c=>ae.delete(c));const i=new Set(t.commanders||[]),s=[];let a=0;for(const{name:c,quantity:d}of t.cards){const m=i.has(c);for(let h=0;h<d;h++){const p=`${e}-deck-${c}-${h}`;if(m&&s.length<i.size){const y=hd(r),v=Rr(r);ae.set(p,{oracleId:c,owner:e,zoneId:r,order:v,faceDown:!1,tapped:!1,counters:{},attachments:[],metadata:{},position:y,v:0}),s.push(p)}else Ds(p,c,e,n,a++)}}We(e,"deck_imported",{deckName:t.name,cardCount:t.cardCount,commanders:Array.from(i)})}function Hc(e,t,n){const r=ae.get(e);if(!r)return;const o=r.tapped;rr(n,{revert:()=>$c(e,o,n),description:`${t?"tap":"untap"} ${r.oracleId}`}),$c(e,t,n)}function Fr(e,t,n){rr(n,{revert:()=>ah(e,-t,n),description:`life change ${t>0?"+":""}${t}`}),ah(e,t,n)}function cb(e,t,n){const r=_e.get(e);if(!r)return;const o=r.lifeTotal;rr(n,{revert:()=>lh(e,o,n),description:`set life to ${t}`}),lh(e,t,n)}function qt(e,t,n,r){rr(r,{revert:()=>ih(e,t,-n,r),description:`counter ${t} ${n>0?"+":""}${n}`}),ih(e,t,n,r)}function or(e,t,n,r,o){rr(o,{revert:()=>sh(e,t,-n,r,o),description:`player counter ${t} ${n>0?"+":""}${n}`}),sh(e,t,n,r,o)}function Da(e,t,n,r){const o=`battlefield-${e}`,i=new Set(Array.from(ae.entries()).filter(([a,c])=>c.zoneId===o).map(([a])=>a));tb(e,t,n,r);const s=Array.from(ae.entries()).filter(([a,c])=>c.zoneId===o&&!i.has(a)).map(([a])=>a);rr(e,{revert:()=>{s.forEach(a=>e0(a,e))},description:`create ${n} ${t} token(s)`})}function mn(e,t,n="auto",r){const o=ae.get(e);if(!o)return;const i=o.zoneId,s=o.order,a=o.tapped;rr(r,{revert:()=>{Ul(e,i,s,r),$c(e,a,r)},description:`move ${o.oracleId}`}),gl(e,t,n,r)}function ub(e,t){const n=ae.get(e);if(!n)return;const r={...n};rr(t,{revert:()=>{ae.set(e,r)},description:`delete ${n.oracleId}`}),e0(e,t)}function yd({title:e,max:t,onConfirm:n,onCancel:r}){const[o,i]=$.useState("1"),s=d=>{d.preventDefault();const m=parseInt(o,10);m>0&&m<=t&&n(m)},a=parseInt(o,10),c=!isNaN(a)&&a>0&&a<=t;return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:u.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"300px",width:"90%"},onClick:d=>d.stopPropagation(),children:[u.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),u.jsxs("form",{onSubmit:s,children:[u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("input",{type:"number",value:o,onChange:d=>i(d.target.value),min:1,max:t,autoFocus:!0,style:{width:"100%",padding:"0.75rem",fontSize:"1.25rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",textAlign:"center",outline:"none"},onFocus:d=>{d.target.style.borderColor="#2196F3",d.target.select()},onBlur:d=>{d.target.style.borderColor="#ddd"}}),u.jsxs("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.75rem",color:"#666",textAlign:"center"},children:["Max: ",t]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!c,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:c?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:c?"pointer":"not-allowed"},onMouseEnter:d=>{c&&(d.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:d=>{c&&(d.currentTarget.style.backgroundColor="#4CAF50")},children:"Confirm"})]})]})]})})}function db({title:e,placeholder:t="",onConfirm:n,onCancel:r}){const[o,i]=$.useState(""),s=c=>{c.preventDefault(),o.trim()&&n(o.trim())},a=o.trim().length>0;return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:r,children:u.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:c=>c.stopPropagation(),children:[u.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:e}),u.jsxs("form",{onSubmit:s,children:[u.jsx("div",{style:{marginBottom:"1.5rem"},children:u.jsx("input",{type:"text",value:o,onChange:c=>i(c.target.value),placeholder:t,autoFocus:!0,maxLength:30,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:c=>{c.target.style.borderColor="#2196F3"},onBlur:c=>{c.target.style.borderColor="#ddd"}})}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsx("button",{type:"button",onClick:r,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:c=>{c.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:c=>{c.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),u.jsx("button",{type:"submit",disabled:!a,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:a?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:a?"pointer":"not-allowed"},onMouseEnter:c=>{a&&(c.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:c=>{a&&(c.currentTarget.style.backgroundColor="#4CAF50")},children:"Add"})]})]})]})})}const n0="crdt-cards-image-cache",fb=7,ps=new Map,La=new Map;function hb(){try{const e=localStorage.getItem(n0);return e?JSON.parse(e):{}}catch(e){return console.error("Failed to load image cache:",e),{}}}function pb(e){try{localStorage.setItem(n0,JSON.stringify(e))}catch(t){console.error("Failed to save image cache:",t)}}function gb(e){const t=Date.now(),n=fb*24*60*60*1e3;return t-e.cachedAt<n}async function mb(e){var t,n;try{const r=`https://api.scryfall.com/cards/named?fuzzy=${encodeURIComponent(e)}`,o=await fetch(r);if(!o.ok)return console.warn(`Card not found on Scryfall: ${e}`),null;const i=await o.json();return i.card_faces&&i.card_faces.length>0?((t=i.card_faces[0].image_uris)==null?void 0:t.normal)||null:((n=i.image_uris)==null?void 0:n.normal)||null}catch(r){return console.error(`Failed to fetch card image for ${e}:`,r),null}}function vd(e){const t=ps.get(e),[n,r]=$.useState(t||null),[o,i]=$.useState(!t),[s,a]=$.useState(!1);return $.useEffect(()=>{if(!e){r(null),i(!1),a(!1);return}let c=!0;async function d(){const m=ps.get(e);if(m){c&&(r(m),i(!1),a(!1));return}const h=La.get(e);if(h){const C=await h;c&&(r(C),i(!1),a(!C));return}i(!0),a(!1);const p=hb(),y=p[e];if(y&&gb(y)){ps.set(e,y.imageUrl),c&&(r(y.imageUrl),i(!1));return}const v=mb(e);La.set(e,v);try{const C=await v;c&&(C?(r(C),a(!1),ps.set(e,C),p[e]={imageUrl:C,scryfallId:"",cachedAt:Date.now()},pb(p)):(r(null),a(!0)),i(!1))}finally{La.delete(e)}}return d(),()=>{c=!1}},[e]),{imageUrl:n,loading:o,error:s}}let Aa=!1;function Vc({card:e,cardId:t,playerId:n,isInteractive:r=!0,forceFaceDown:o=!1,opponentPosition:i=null,cardSize:s="compact"}){var je,ye;const[a,c]=$.useState(!1),[d,m]=$.useState(!1),[h,p]=$.useState(!1),[y,v]=$.useState(!1),[C,A]=$.useState(null),[b,S]=$.useState(null),[f,w]=$.useState(null),[_,M]=$.useState(null),[k,T]=$.useState(null),[z,E]=$.useState([]),[D,I]=$.useState([]),[W,Q]=$.useState(!1),[q,se]=$.useState(!1),[ge,K]=$.useState(!1),[U,re]=$.useState(new Set),ce=$.useRef(null),ve=$.useRef(null),me=$.useRef(),oe=$.useRef(!1),de=o||e.faceDown,G=e.zoneId.startsWith("battlefield-"),fe=(je=e.metadata)==null?void 0:je.imageUrl,{imageUrl:J,loading:V}=vd(de||fe?"":e.oracleId),Z=fe||J;$.useEffect(()=>{const O=()=>{const X=[];ds.forEach((ne,le)=>{X.push(le)}),E(X)};return ds.observe(O),O(),()=>{ds.unobserve(O)}},[]),$.useEffect(()=>{const O=()=>{const X=[];_e.forEach((ne,le)=>{le!==e.owner&&X.push({id:le,name:ne.name})}),I(X)};return _e.observe(O),O(),()=>{_e.unobserve(O)}},[e.owner]),$.useEffect(()=>{const O=()=>{K(fs(t))};return V1(O),O(),()=>{Y1(O)}},[t]);const ue=O=>{ds.set(O,!0);const X=U.has(t);console.log("handleAddCounterType:",{cardId:t,counterType:O,currentlySelected:X,menuSelectedCardsSize:U.size,menuSelectedCardIds:Array.from(U)}),X&&U.size>1?(console.log("Applying to multiple cards:",Array.from(U)),U.forEach(ne=>{qt(ne,O,1,n)})):(console.log("Applying to single card:",t),qt(t,O,1,n))},we=s==="compact"?122:244,Se=s==="compact"?170:340,xe={width:`${we}px`,height:`${Se}px`,border:"none",borderRadius:"8px",backgroundColor:de?"#333":"#fff",padding:"0.5rem",position:"relative",transition:"transform 0.3s ease",transform:i==="top"?`scaleX(-1) rotate(180deg) rotate(${e.tapped?90:0}deg)`:`rotate(${e.tapped?90:0}deg)`,cursor:r?"pointer":"default",display:"flex",flexDirection:"column",justifyContent:"space-between"},N={width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",color:"#666"},R={position:"absolute",bottom:"5px",right:"5px",backgroundColor:"#9C27B0",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold"},P=_?{position:"fixed",top:`${_.top}px`,left:`${_.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"},H={padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},j=O=>{if(!r)return;if(O.stopPropagation(),O.ctrlKey||O.metaKey){W1(t);return}if(!G){Uc();return}const X=fs(t),ne=Go();if(X&&ne.size>1){const le=!e.tapped;ne.forEach(be=>{Hc(be,le,n)})}else Uc(),Hc(t,!e.tapped,n)},l=(O,X,ne)=>{const le=`${O}-${n}`;U.has(t)&&U.size>1?U.forEach(Te=>{mn(Te,le,X||"auto",n),ne!==void 0&&lr(Te,ne,n)}):(mn(t,le,X||"auto",n),ne!==void 0&&lr(t,ne,n)),c(!1),m(!1)},g=O=>{const X=`battlefield-${O}`;U.has(t)&&U.size>1?U.forEach(le=>{mn(le,X,"auto",n),lr(le,!1,n)}):(mn(t,X,"auto",n),lr(t,!1,n)),c(!1),m(!1),v(!1)},x=O=>{if(!r){O.preventDefault();return}Q(!0),oe.current=!0,Aa=!0;const X=O.currentTarget.getBoundingClientRect(),ne=O.clientX-X.left,le=O.clientY-X.top;O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("cardId",t),O.dataTransfer.setData("fromZoneId",e.zoneId),O.dataTransfer.setData("playerId",n),O.dataTransfer.setData("order",e.order.toString()),O.dataTransfer.setData("dragOffsetX",ne.toString()),O.dataTransfer.setData("dragOffsetY",le.toString());const be=Go();if(ge&&be.size>1){const Te=Rt.getMap("cards"),Ne=[];e.position?Te.forEach((st,Ao)=>{const zr=st;be.has(Ao)&&zr.position&&Ne.push({id:Ao,relativeX:zr.position.x-e.position.x,relativeY:zr.position.y-e.position.y})}):be.forEach(st=>{Ne.push({id:st,relativeX:0,relativeY:0})}),O.dataTransfer.setData("selectedCards",JSON.stringify(Ne))}try{O.dataTransfer.setDragImage(O.currentTarget,ne,le)}catch(Te){console.warn("Could not set custom drag image:",Te)}},L=()=>{Q(!1),oe.current=!1,Aa=!1},F=()=>{de||!Z||(me.current=window.setTimeout(()=>{!oe.current&&!Aa&&se(!0)},600))},B=()=>{me.current&&window.clearTimeout(me.current),se(!1)};$.useEffect(()=>()=>{me.current&&window.clearTimeout(me.current)},[]);const te=()=>{if(!ve.current)return null;const O=ve.current.getBoundingClientRect(),X=488,ne=680,le=16;let be=O.right+le,Te=O.top;return be+X>window.innerWidth-8&&(be=O.left-X-le),Te+ne>window.innerHeight-8&&(Te=Math.max(8,window.innerHeight-ne-8)),{top:Te,left:be}},he=G&&e.position?{position:"absolute",left:`${e.position.x}px`,top:`${e.position.y}px`,zIndex:e.order}:{position:"relative"};return u.jsxs("div",{style:he,"data-card-id":t,"data-order":e.order,"data-zone-id":e.zoneId,children:[u.jsxs("div",{ref:ve,style:{...xe,padding:0,overflow:"hidden",opacity:W?.5:1,cursor:r?"grab":"default",border:"none",outline:ge?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:ge?"0 0 12px rgba(33, 150, 243, 0.8)":"none"},title:de&&e.owner!==n?void 0:e.oracleId,draggable:r,onDragStart:x,onDragEnd:L,onClick:j,onContextMenu:O=>{if(!r)return;O.preventDefault();const X=Go(),ne=fs(t);re(X),console.log("Menu opened - captured selection:",{cardId:t,currentlySelected:ne,selectedCardsSize:X.size,selectedCardIds:Array.from(X)}),c(!a)},onMouseEnter:F,onMouseLeave:B,children:[de?u.jsx("div",{style:N,children:""}):V?u.jsx("div",{style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999"},children:"Loading..."}):Z?u.jsx("img",{src:Z,alt:de&&e.owner!==n?"Card back":e.oracleId,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"5px"}}):u.jsxs("div",{style:{width:"100%",height:"100%",padding:"0.5rem",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",wordBreak:"break-all"},children:de&&e.owner!==n?"Card back":e.oracleId}),u.jsx("div",{style:{fontSize:"0.65rem",color:"#666"},children:de&&e.owner!==n?"":"No image"})]}),Object.entries(e.counters).length>0&&u.jsxs("div",{style:{position:"absolute",top:"5px",right:"5px",display:"flex",flexDirection:"column",gap:"2px",alignItems:"flex-end"},children:[Object.entries(e.counters).slice(0,3).map(([O,X])=>{let ne=X.toString();return O==="+1/+1"?ne=`+${X}`:O==="Loyalty"?ne=`L${X}`:O==="-1/-1"?ne=`-${X}`:ne=X.toString(),u.jsx("div",{style:{backgroundColor:O==="Loyalty"?"#9C27B0":"#FF5722",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`${O}: ${X}`,children:ne},O)}),Object.entries(e.counters).length>3&&u.jsx("div",{style:{backgroundColor:"#757575",color:"white",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",fontWeight:"bold",minWidth:"20px",textAlign:"center",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},title:`+${Object.entries(e.counters).length-3} more types`,children:"..."})]}),e.attachments.length>0&&u.jsxs("div",{style:R,title:`${e.attachments.length} attachments`,children:["+",e.attachments.length]}),r&&(!de||e.owner===n)&&u.jsx("button",{ref:ce,onClick:O=>{O.stopPropagation();const X=Go(),ne=fs(t);if(re(X),console.log("Menu button clicked - captured selection:",{cardId:t,currentlySelected:ne,selectedCardsSize:X.size,selectedCardIds:Array.from(X)}),!a&&ce.current){const le=ce.current.getBoundingClientRect(),be=window.innerHeight,Te=window.innerWidth;let Ne=le.right+8,st=le.top;const Ao=150;Ne+Ao>Te&&(Ne=le.left-Ao-8);const zr=150;st+zr>be&&(st=Math.max(8,be-zr-8)),M({top:st,left:Ne})}c(!a)},style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""})]}),r&&a&&Sr.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>c(!1)}),u.jsxs("div",{style:P,children:[u.jsxs("div",{style:{...H,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5",p(!1),S(null);const X=O.currentTarget.getBoundingClientRect(),ne=window.innerWidth,le=window.innerHeight;let be=X.right+4,Te=X.top;const Ne=200,st=300;be+Ne>ne&&(be=X.left-Ne-4),Te+st>le&&(Te=Math.max(8,le-st-8)),A({top:Te,left:be}),m(!0)},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:[u.jsxs("span",{children:["Move to...",U.has(t)&&U.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),u.jsx("span",{children:""})]}),u.jsxs("div",{style:{...H,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5",m(!1),A(null);const X=O.currentTarget.getBoundingClientRect(),ne=window.innerWidth,le=window.innerHeight;let be=X.right+4,Te=X.top;const Ne=250,st=400;be+Ne>ne&&(be=X.left-Ne-4),Te+st>le&&(Te=Math.max(8,le-st-8)),S({top:Te,left:be}),p(!0)},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:[u.jsxs("span",{children:["Counters...",U.has(t)&&U.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),u.jsx("span",{children:""})]}),(G||e.zoneId.startsWith("exile-"))&&u.jsxs("div",{style:H,onClick:O=>{O.stopPropagation();const X=U.has(t),ne=!e.faceDown;X&&U.size>1?U.forEach(le=>{lr(le,ne,n)}):lr(t,ne,n),c(!1)},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:[e.faceDown?" Turn face up":" Turn face down",U.has(t)&&U.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),((ye=e.metadata)==null?void 0:ye.isToken)&&u.jsx("div",{style:{...H,backgroundColor:"#ffebee",color:"#c62828",fontWeight:"bold",borderBottom:"none"},onClick:O=>{O.stopPropagation(),ub(t,n),c(!1)},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#ffcdd2"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="#ffebee"},children:" Delete Token"})]}),h&&b&&u.jsxs("div",{style:{position:"fixed",top:`${b.top}px`,left:`${b.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"220px",maxHeight:"400px",overflowY:"auto"},onMouseEnter:()=>p(!0),onMouseLeave:()=>{p(!1),S(null)},children:[Object.entries(e.counters).length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"EXISTING COUNTERS"}),Object.entries(e.counters).map(([O,X])=>u.jsxs("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{style:{fontWeight:"bold"},children:[O,": ",X]}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{onClick:ne=>{ne.stopPropagation(),U.has(t)&&U.size>1?U.forEach(be=>{qt(be,O,1,n)}):qt(t,O,1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"+1"}),u.jsx("button",{onClick:ne=>{ne.stopPropagation(),U.has(t)&&U.size>1?U.forEach(be=>{qt(be,O,-1,n)}):qt(t,O,-1,n)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"-1"}),u.jsx("button",{onClick:ne=>{ne.stopPropagation(),T({type:"set",counterType:O}),c(!1),p(!1)},style:{padding:"2px 6px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontWeight:"bold"},children:"Set"})]})]},O))]}),u.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADD"}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",display:"flex",flexWrap:"wrap",gap:"4px",borderBottom:Object.entries(e.counters).length>0?"none":"1px solid #eee"},children:[u.jsx("button",{onClick:O=>{O.stopPropagation(),ue("+1/+1")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"+1/+1"}),u.jsx("button",{onClick:O=>{O.stopPropagation(),ue("Loyalty")},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Loyalty"}),z.filter(O=>O!=="+1/+1"&&O!=="Loyalty").map(O=>u.jsx("button",{onClick:X=>{X.stopPropagation(),ue(O)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:O},O)),u.jsx("button",{onClick:O=>{O.stopPropagation(),T({type:"add"}),c(!1),p(!1)},style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Custom..."})]})]}),d&&C&&u.jsxs("div",{style:{position:"fixed",top:`${C.top}px`,left:`${C.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>m(!0),onMouseLeave:()=>{m(!1),A(null)},children:[u.jsx("div",{style:H,onClick:()=>l("hand",void 0,!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Hand"}),u.jsx("div",{style:H,onClick:()=>l("battlefield",void 0,!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-up)"}),u.jsx("div",{style:H,onClick:()=>l("battlefield",void 0,!0),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Battlefield (face-down)"}),u.jsx("div",{style:H,onClick:()=>l("graveyard",void 0,!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Graveyard"}),u.jsx("div",{style:H,onClick:()=>l("exile",void 0,!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Exile (face-up)"}),u.jsx("div",{style:H,onClick:()=>l("exile",void 0,!0),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Exile (face-down)"}),u.jsx("div",{style:H,onClick:()=>l("deck","top",!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Deck (top)"}),u.jsx("div",{style:H,onClick:()=>l("deck","bottom",!1),onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:" Deck (bottom)"}),D.length>0&&u.jsx("div",{style:{...H,borderBottom:"none"},onMouseEnter:O=>{O.currentTarget.style.backgroundColor="#f5f5f5";const X=O.currentTarget.getBoundingClientRect(),ne=window.innerWidth,le=window.innerHeight;let be=X.right+4,Te=X.top;const Ne=180,st=150;be+Ne>ne&&(be=X.left-Ne-4),Te+st>le&&(Te=Math.max(8,le-st-8)),w({top:Te,left:be}),v(!0)},onMouseLeave:O=>{O.currentTarget.style.backgroundColor="white"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{children:[" Player",U.has(t)&&U.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",U.size," cards)"]})]}),u.jsx("span",{children:""})]})})]}),y&&f&&D.length>0&&u.jsx("div",{style:{position:"fixed",top:`${f.top}px`,left:`${f.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10001,minWidth:"160px"},onMouseEnter:()=>v(!0),onMouseLeave:()=>{v(!1),w(null)},children:D.map((O,X)=>{const ne=qe(O.id);return u.jsxs("div",{style:{...H,borderBottom:X===D.length-1?"none":"1px solid #eee",display:"flex",alignItems:"center",gap:"8px"},onClick:()=>g(O.id),onMouseEnter:le=>{le.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:le=>{le.currentTarget.style.backgroundColor="white"},children:[u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:ne,flexShrink:0}}),u.jsx("span",{children:O.name})]},O.id)})})]}),document.body),r&&(k==null?void 0:k.type)==="set"&&k.counterType&&u.jsx(yd,{title:`Set ${k.counterType} counters`,max:99,onConfirm:O=>{if(U.has(t)&&U.size>1)U.forEach(ne=>{const le=Rt.getMap("cards").get(ne);if(le){const be=le.counters[k.counterType]||0;qt(ne,k.counterType,O-be,n)}});else{const ne=e.counters[k.counterType]||0;qt(t,k.counterType,O-ne,n)}T(null)},onCancel:()=>T(null)}),r&&(k==null?void 0:k.type)==="add"&&u.jsx(db,{title:"Add Counter Type",placeholder:"e.g., +1/+1, Loyalty, Charge",onConfirm:O=>{U.has(t)&&U.size>1?U.forEach(ne=>{qt(ne,O,1,n)}):qt(t,O,1,n),T(null)},onCancel:()=>T(null)}),q&&Z&&!de&&(()=>{const O=te();if(!O)return null;const X=Object.entries(e.counters).length>0;return Sr.createPortal(u.jsxs("div",{style:{position:"fixed",top:`${O.top}px`,left:`${O.left}px`,width:"488px",zIndex:1e4,pointerEvents:"none"},children:[u.jsx("img",{src:Z,alt:de&&e.owner!==n?"Card back":e.oracleId,style:{width:"100%",height:"680px",borderRadius:"12px",border:"4px solid #fff",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",objectFit:"cover"}}),X&&u.jsxs("div",{style:{marginTop:"8px",backgroundColor:"rgba(0, 0, 0, 0.9)",border:"4px solid #fff",borderRadius:"8px",padding:"12px",boxShadow:"0 8px 32px rgba(0,0,0,0.5)"},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"bold",color:"#fff",marginBottom:"8px"},children:"Counters:"}),Object.entries(e.counters).map(([ne,le])=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",fontSize:"0.85rem",color:"#fff"},children:[u.jsx("span",{children:ne}),u.jsxs("span",{style:{fontWeight:"bold"},children:["",le]})]},ne))]})]}),document.body)})()]})}function yr({zoneName:e,zoneType:t,cards:n,playerColor:r,playerId:o,onDrawCards:i,onMillCards:s,onExileFromDeck:a,onShuffleDeck:c,isInteractive:d=!0,viewerPlayerId:m,zoneId:h,showHeader:p=!0,opponentPosition:y=null,cardSize:v="compact",hideTitle:C=!1}){const[A,b]=$.useState(null),[S,f]=$.useState(!1),[w,_]=$.useState(!1),[M,k]=$.useState(null),[T,z]=$.useState(null),[E,D]=$.useState("none"),[I,W]=$.useState({width:0,height:0}),Q=$.useRef(null),q=t==="battlefield"&&m&&o!==m;$.useEffect(()=>{if(!Q.current)return;const G=new ResizeObserver(fe=>{const J=fe[0];J&&W({width:J.contentRect.width,height:J.contentRect.height})});return G.observe(Q.current),()=>G.disconnect()},[]);const se=v==="compact"?122:244,ge=v==="compact"?170:340;$.useEffect(()=>{if(!q||n.length===0||I.width===0){D("none");return}let G=1/0,fe=1/0,J=-1/0,V=-1/0;n.forEach(({card:te})=>{var ye,O;const he=((ye=te.position)==null?void 0:ye.x)||0,je=((O=te.position)==null?void 0:O.y)||0;G=Math.min(G,he),fe=Math.min(fe,je),J=Math.max(J,he+se),V=Math.max(V,je+ge)});const Z=40,ue=J-G+Z*2,we=V-fe+Z*2,Se=(G+J)/2,xe=(fe+V)/2,N=I.width,R=I.height,P=N/ue,H=R/we,j=Math.min(Math.max(Math.min(P,H),.25),1),l=N/2,g=R/2;let x=l-Se*j;const L=g-xe*j;y==="top"&&(x=l+Se*j);const F=`translate(${x}px, ${L}px) scale(${j})`,B=y==="top"?`${F} scaleX(-1)`:F;D(B)},[q,n,o,m,I]);const K=G=>{G.preventDefault(),G.dataTransfer.dropEffect="move",f(!0)},U=()=>{f(!1)},re=G=>{G.preventDefault(),f(!1);const fe=G.dataTransfer.getData("cardId"),J=G.dataTransfer.getData("fromZoneId"),V=G.dataTransfer.getData("playerId"),Z=G.dataTransfer.getData("selectedCards");if(V!==o){console.log("Cannot drop opponent cards");return}if(t==="battlefield"&&Q.current){const ue=Q.current.getBoundingClientRect(),we=parseFloat(G.dataTransfer.getData("dragOffsetX")||"0"),Se=parseFloat(G.dataTransfer.getData("dragOffsetY")||"0"),xe=G.clientX-ue.left-we,N=G.clientY-ue.top-Se;if(Z)try{const R=JSON.parse(Z);R.some(({relativeX:H,relativeY:j})=>H!==0||j!==0)?R.forEach(({id:H,relativeX:j,relativeY:l})=>{G.dataTransfer.getData("fromZoneId")!==h&&mn(H,h,"auto",o),ja(H,xe+j,N+l,o)}):R.forEach(({id:x},L)=>{G.dataTransfer.getData("fromZoneId")!==h&&mn(x,h,"auto",o);const B=L%5,te=Math.floor(L/5),he=xe+B*130,je=N+te*170;ja(x,he,je,o)});return}catch(R){console.error("Failed to parse selected cards data:",R)}J!==h&&mn(fe,h,"auto",o),ja(fe,xe,N);return}if(Z)try{const ue=JSON.parse(Z);J!==h&&ue.forEach(({id:we})=>{mn(we,h,"auto",o)});return}catch(ue){console.error("Failed to parse selected cards data:",ue)}J!==h&&mn(fe,h,"auto",o)},ce=G=>{if(t!=="battlefield"||G.button!==0||!Q.current||G.target.closest("[data-card-id]"))return;const J=Q.current.getBoundingClientRect(),V=G.clientX-J.left,Z=G.clientY-J.top;_(!0),k({x:V,y:Z}),z({x:V,y:Z}),!G.ctrlKey&&!G.metaKey&&Uc()},ve=G=>{if(!w||!Q.current||!M)return;const fe=Q.current.getBoundingClientRect(),J=G.clientX-fe.left,V=G.clientY-fe.top;z({x:J,y:V})},me=()=>{if(!w||!M||!T||!Q.current){_(!1);return}const G=Math.min(M.x,T.x),fe=Math.max(M.x,T.x),J=Math.min(M.y,T.y),V=Math.max(M.y,T.y),Z=[],ue=se/2,we=ge/2;n.forEach(({id:Se,card:xe})=>{if(!xe.position)return;const N=xe.position.x+ue,R=xe.position.y+we;N>=G&&N<=fe&&R>=J&&R<=V&&Z.push(Se)}),Z.length>0&&H1(Z),_(!1),k(null),z(null)};if(t==="deck")return u.jsxs("div",{style:{backgroundColor:"#f5f5f5",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),u.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),u.jsx("div",{style:{backgroundColor:"#333",border:"2px solid #666",borderRadius:"8px",padding:"2rem 1rem",textAlign:"center",color:"white",marginBottom:"0.75rem",fontSize:"2rem"},children:""}),u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>i==null?void 0:i(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw 1"}),u.jsx("button",{onClick:()=>b({title:"Draw how many cards?",onConfirm:G=>{i==null||i(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#4CAF50":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Draw N"}),u.jsx("button",{onClick:()=>s==null?void 0:s(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill 1"}),u.jsx("button",{onClick:()=>b({title:"Mill how many cards?",onConfirm:G=>{s==null||s(G),b(null)}}),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#FF9800":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Mill N"}),u.jsx("button",{onClick:()=>a==null?void 0:a(1),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#9C27B0":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Exile 1"}),u.jsx("button",{onClick:()=>c==null?void 0:c(),disabled:n.length===0,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:n.length>0?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:n.length>0?"pointer":"not-allowed"},children:"Shuffle"})]}),A&&u.jsx(yd,{title:A.title,max:n.length,onConfirm:A.onConfirm,onCancel:()=>b(null)})]});if(t==="battlefield")return u.jsxs("div",{style:{backgroundColor:S?"#e3f2fd":"#f5f5f5",borderRadius:"8px",height:"100%",display:"flex",flexDirection:"column",border:S?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",position:"relative"},"data-zone-id":h,onDragOver:K,onDragLeave:U,onDrop:re,children:[!C&&u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 1rem",marginBottom:"0.5rem",flexShrink:0},children:[u.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),u.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),u.jsx("div",{ref:Q,style:{position:"relative",flex:1,minHeight:0,cursor:w?"crosshair":"default",overflow:q?"hidden":"visible"},onMouseDown:ce,onMouseMove:ve,onMouseUp:me,onMouseLeave:()=>{w&&me()},children:u.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",transform:q?E:y==="top"?"scaleX(-1)":"none",transformOrigin:"0 0",transition:"transform 0.3s ease"},children:[n.length===0?u.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards on battlefield"}):n.map(({id:G,card:fe})=>u.jsx(Vc,{cardId:G,card:fe,playerId:m||o,isInteractive:d,forceFaceDown:!1,opponentPosition:y,cardSize:v},G)),w&&M&&T&&u.jsx("div",{style:{position:"absolute",left:`${Math.min(M.x,T.x)}px`,top:`${Math.min(M.y,T.y)}px`,width:`${Math.abs(T.x-M.x)}px`,height:`${Math.abs(T.y-M.y)}px`,border:"2px dashed #2196F3",backgroundColor:"rgba(33, 150, 243, 0.1)",pointerEvents:"none",zIndex:1e4}})]})})]});const de=(G=>G<=5?100:G<=10?80:G<=15?60:50)(n.length);return u.jsxs("div",{style:{backgroundColor:S?"#e3f2fd":"#f5f5f5",borderRadius:"8px",padding:C?"0.25rem":"1rem",marginBottom:C?"0":"1rem",minHeight:C?"0":"200px",border:S?"2px dashed #2196F3":"2px solid transparent",transition:"all 0.2s ease",overflow:"visible",position:"relative"},"data-zone-id":h,onDragOver:K,onDragLeave:U,onDrop:re,children:[p&&!C&&u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"#333"},children:e}),u.jsxs("span",{style:{backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[n.length," cards"]})]}),C&&n.length>0&&u.jsxs("div",{style:{position:"absolute",right:"0.5rem",top:"0.5rem",backgroundColor:r,color:"white",padding:"0.25rem 0.5rem",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold",zIndex:100,pointerEvents:"none"},children:[" ",n.length]}),u.jsx("div",{style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"visible",minHeight:C?"0":"160px",alignItems:"flex-start",paddingTop:C?"0.25rem":"1rem",paddingBottom:"0.5rem"},children:n.length===0?u.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.875rem",padding:"1rem"},children:"No cards in this zone"}):n.map(({id:G,card:fe},J)=>{const V=t==="hand"&&!!m&&o!==m;return u.jsx("div",{style:{marginLeft:J===0?"0":`-${100-de}px`,position:"relative",zIndex:J,transition:"all 0.2s ease",isolation:"auto"},onMouseEnter:Z=>{Z.currentTarget.style.zIndex="999",Z.currentTarget.style.transform="translateY(-10px)"},onMouseLeave:Z=>{Z.currentTarget.style.zIndex=String(J),Z.currentTarget.style.transform="translateY(0)"},children:u.jsx(Vc,{cardId:G,card:fe,playerId:m||o,isInteractive:d,forceFaceDown:V,cardSize:v},G)},G)})})]})}const yb="crdt-cards-username";function vb({onJoin:e,playerCount:t}){const[n,r]=$.useState(""),[o,i]=$.useState([]),[s,a]=$.useState(""),[c,d]=$.useState(!1),[m,h]=$.useState(""),[p,y]=$.useState(!1),[v,C]=$.useState(""),A=$.useRef(null);$.useEffect(()=>{const z=localStorage.getItem(yb);z&&(r(z),setTimeout(()=>{A.current&&A.current.select()},100));const E=co();i(E);const D=t0();if(D){const I=E.find(Q=>Q.id===D),W=Ls.find(Q=>Q.id===D);(I||W)&&a(D)}},[]);const b=z=>{z.preventDefault(),n.trim()&&s&&e(n.trim(),s)},S=async()=>{if(!m.trim())return;y(!0),C("");const z=await ob(m.trim());if(z.success&&z.deck){const E=co();i(E),a(z.deck.id),d(!1),h("")}else C(z.error||"Failed to import deck");y(!1)},f=z=>{if(confirm("Delete this deck from your library?")){nb(z);const E=co();i(E),s===z&&a("")}},w=o.find(z=>z.id===s),_=Ls.find(z=>z.id===s),M=w||_,k=t>=4,T=n.trim()&&s;return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:u.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"500px",width:"90%",maxHeight:"90vh",overflowY:"auto"},children:[u.jsx("h2",{style:{marginTop:0,marginBottom:"0.5rem",textAlign:"center"},children:" Join Game"}),u.jsxs("p",{style:{margin:"0 0 1rem 0",textAlign:"center",fontSize:"0.9rem",color:"#666"},children:["Room: ",u.jsx("strong",{style:{fontFamily:"monospace",color:"#333"},children:window.location.hash.replace(/^#/,"")||"default"})]}),k?u.jsxs("div",{children:[u.jsx("p",{style:{textAlign:"center",color:"#F44336",marginBottom:"1rem"},children:"This game is full (4/4 players)"}),u.jsx("p",{style:{textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Please try a different room or wait for a player to leave."})]}):u.jsxs("form",{onSubmit:b,children:[u.jsxs("p",{style:{marginBottom:"1rem",textAlign:"center",color:"#666"},children:["Players in room: ",t,"/4"]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{htmlFor:"player-name",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Your Name"}),u.jsx("input",{ref:A,id:"player-name",type:"text",value:n,onChange:z=>r(z.target.value),placeholder:"Enter your name...",autoFocus:!0,maxLength:20,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none"},onFocus:z=>{z.target.style.borderColor="#2196F3"},onBlur:z=>{z.target.style.borderColor="#ddd"}})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{htmlFor:"deck-select",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck (Required)"}),u.jsxs("select",{id:"deck-select",value:s,onChange:z=>{const E=z.target.value;E==="__import__"?(d(!0),a("")):(a(E),d(!1))},style:{width:"100%",padding:"0.75rem",fontSize:"1rem",border:"2px solid #ddd",borderRadius:"6px",boxSizing:"border-box",outline:"none",backgroundColor:"white"},children:[u.jsx("option",{value:"",children:"Select a deck..."}),o.length>0&&u.jsx("optgroup",{label:" My Decks",children:o.map(z=>u.jsxs("option",{value:z.id,children:[z.name," (",z.cardCount," cards)"]},z.id))}),u.jsx("optgroup",{label:" Starter Decks",children:Ls.map(z=>u.jsxs("option",{value:z.id,children:[z.name," - ",z.description]},z.id))}),u.jsx("option",{value:"__import__",children:"+ Import New Deck..."})]}),M&&u.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"#f5f5f5",borderRadius:"4px",fontSize:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{style:{color:"#666"},children:[w&&`${w.cardCount} cards  `,"Will draw 7 on join",_&&`  ${_.description}`]}),w&&u.jsx("button",{type:"button",onClick:()=>f(w.id),style:{background:"none",border:"none",color:"#F44336",cursor:"pointer",fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Delete"})]})]}),c&&u.jsxs("div",{style:{marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#f9f9f9",borderRadius:"6px",border:"1px solid #ddd"},children:[u.jsx("label",{htmlFor:"import-url",style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold",fontSize:"0.875rem"},children:"Deck URL (Moxfield, Archidekt, or EDHRec)"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("input",{id:"import-url",type:"text",value:m,onChange:z=>h(z.target.value),placeholder:"Paste deck URL from Moxfield, Archidekt, or EDHRec...",disabled:p,style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"}}),u.jsx("button",{type:"button",onClick:S,disabled:!m.trim()||p,style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:m.trim()&&!p?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:m.trim()&&!p?"pointer":"not-allowed"},children:p?"Importing...":"Import"})]}),v&&u.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,color:"#F44336",fontSize:"0.75rem"},children:v}),u.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#666"},children:"Deck will be saved to your library for reuse"})]}),u.jsx("button",{type:"submit",disabled:!T,style:{width:"100%",padding:"0.75rem",fontSize:"1rem",fontWeight:"bold",color:"white",backgroundColor:T?"#4CAF50":"#ccc",border:"none",borderRadius:"6px",cursor:T?"pointer":"not-allowed",transition:"background-color 0.2s"},onMouseEnter:z=>{T&&(z.currentTarget.style.backgroundColor="#45a049")},onMouseLeave:z=>{T&&(z.currentTarget.style.backgroundColor="#4CAF50")},children:"Join Game"}),!s&&u.jsx("p",{style:{marginTop:"0.5rem",marginBottom:0,fontSize:"0.75rem",color:"#FF9800",textAlign:"center"},children:"Please select a deck to join"})]}),u.jsx("p",{style:{marginTop:"1.5rem",marginBottom:0,fontSize:"0.75rem",color:"#999",textAlign:"center"},children:"Share the URL with friends to play together!"})]})})}function wb({message:e,onConfirm:t,onCancel:n,confirmText:r="Confirm",confirmColor:o="#F44336"}){return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:n,children:u.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)",maxWidth:"400px",width:"90%"},onClick:i=>i.stopPropagation(),children:[u.jsx("p",{style:{margin:"0 0 1.5rem 0",fontSize:"1rem",textAlign:"center",lineHeight:"1.5"},children:e}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem"},children:[u.jsx("button",{onClick:n,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"#666",backgroundColor:"#f5f5f5",border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:i=>{i.currentTarget.style.backgroundColor="#f5f5f5"},children:"Cancel"}),u.jsx("button",{onClick:t,style:{flex:1,padding:"0.75rem",fontSize:"0.875rem",fontWeight:"bold",color:"white",backgroundColor:o,border:"none",borderRadius:"6px",cursor:"pointer"},onMouseEnter:i=>{i.currentTarget.style.opacity="0.9"},onMouseLeave:i=>{i.currentTarget.style.opacity="1"},children:r})]})]})})}function xb({currentPlayerId:e,players:t,onLeaveGame:n,onRemovePlayer:r,onResetRoom:o}){const[i,s]=$.useState(!1),[a,c]=$.useState(!1);return u.jsxs("div",{style:{position:"relative"},"data-danger-menu":!0,children:[u.jsxs("button",{onClick:()=>s(!i),style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem"},children:[" ",u.jsx("span",{style:{fontSize:"0.6rem"},children:""})]}),i&&u.jsxs("div",{style:{position:"absolute",top:"100%",right:0,marginTop:"0.25rem",backgroundColor:"white",border:"2px solid #F44336",borderRadius:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",zIndex:1e3,minWidth:"180px"},children:[u.jsx("button",{onClick:()=>{n(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:" Leave Game"}),u.jsxs("button",{onClick:()=>c(!a),style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#333",border:"none",borderBottom:"1px solid #eee",textAlign:"left",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:[u.jsx("span",{children:" Remove Player"}),u.jsx("span",{style:{fontSize:"0.7rem"},children:a?"":""})]}),a&&u.jsx("div",{style:{backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:t.filter(d=>d.id!==e).map(({id:d,player:m})=>u.jsxs("button",{onClick:()=>{r(d),c(!1),s(!1)},style:{width:"100%",padding:"0.5rem 1rem",fontSize:"0.75rem",backgroundColor:"transparent",color:"#666",border:"none",textAlign:"left",cursor:"pointer"},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="#e0e0e0"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[" ",m.name]},d))}),u.jsx("button",{onClick:()=>{o(),s(!1)},style:{width:"100%",padding:"0.75rem",fontSize:"0.875rem",backgroundColor:"transparent",color:"#F44336",border:"none",textAlign:"left",cursor:"pointer",fontWeight:"bold"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#ffebee"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent"},children:" Reset Room"})]})]})}const bb=$.memo(function({cards:t,playerId:n,containerWidth:r=300,containerHeight:o=180}){const[i,s]=$.useState("none"),a=$.useRef(null);return $.useEffect(()=>{if(t.length===0){s("none");return}let c=1/0,d=1/0,m=-1/0,h=-1/0;const p=120,y=160;t.forEach(({card:E})=>{var W,Q;const D=((W=E.position)==null?void 0:W.x)||0,I=((Q=E.position)==null?void 0:Q.y)||0;c=Math.min(c,D),d=Math.min(d,I),m=Math.max(m,D+p),h=Math.max(h,I+y)});const v=40,C=m-c+v*2,A=h-d+v*2,b=(c+m)/2,S=(d+h)/2,f=r/C,w=o/A,_=Math.min(Math.max(Math.min(f,w),.1),.5),M=r/2,k=o/2,T=M-b*_,z=k-S*_;s(`translate(${T}px, ${z}px) scale(${_})`)},[t,r,o]),u.jsx("div",{ref:a,style:{width:`${r}px`,height:`${o}px`,position:"relative",overflow:"hidden",pointerEvents:"none"},children:u.jsx("div",{style:{position:"relative",width:"100%",height:"100%",transform:i,transformOrigin:"0 0",transition:"transform 0.3s ease"},children:t.length===0?u.jsx("div",{style:{color:"#999",fontStyle:"italic",fontSize:"0.75rem",padding:"1rem",textAlign:"center"},children:"No cards"}):t.map(({id:c,card:d})=>u.jsx(Vc,{cardId:c,card:d,playerId:n,isInteractive:!1,forceFaceDown:!1},c))})})});function Cb({players:e,currentPlayerId:t,viewingPlayerId:n,currentTurnPlayerId:r,onSelectPlayer:o,getZoneCards:i}){return e.length===0?u.jsx("div",{style:{backgroundColor:"transparent",padding:"0.75rem 1rem",textAlign:"center",fontSize:"0.875rem",color:"#666"},children:"Waiting for players to join..."}):u.jsx("div",{style:{backgroundColor:"transparent",display:"flex",gap:"1rem",padding:"0.5rem 1rem",overflowX:"auto",overflowY:"visible",pointerEvents:"none"},children:e.map(({id:s,player:a})=>{const c=s===t,d=s===n,m=s===r,h=i(`battlefield-${s}`),p=i(`hand-${s}`),y=i(`graveyard-${s}`),v=i(`exile-${s}`);return u.jsxs("div",{onClick:()=>o(s),style:{flex:"0 0 auto",minWidth:"280px",width:"280px",height:"180px",backgroundColor:"transparent",border:m?`3px solid ${qe(s)}`:d?`3px solid ${qe(s)}`:`2px solid ${qe(s)}`,borderRadius:"12px",cursor:"pointer",transition:"all 0.2s",position:"relative",overflow:"hidden",boxShadow:d?"0 6px 16px rgba(0,0,0,0.25)":m?`0 0 20px ${qe(s)}80`:"0 2px 8px rgba(0,0,0,0.1)",pointerEvents:"auto"},onMouseEnter:C=>{C.currentTarget.style.transform="translateY(-4px)",C.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.3)"},onMouseLeave:C=>{C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow=d?"0 6px 16px rgba(0,0,0,0.25)":m?`0 0 20px ${qe(s)}80`:"0 2px 8px rgba(0,0,0,0.1)"},children:[u.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:u.jsx(bb,{cards:h,playerId:s,containerWidth:280,containerHeight:180})}),u.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0.75rem",boxSizing:"border-box",pointerEvents:"none"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[u.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:qe(s),boxShadow:"0 0 8px rgba(255,255,255,0.5)",flexShrink:0}}),u.jsx("span",{style:{fontWeight:"bold",fontSize:"0.95rem",color:"#fff"},children:a.name}),c&&u.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"normal",backgroundColor:"rgba(255,255,255,0.2)",padding:"2px 6px",borderRadius:"4px"},children:"You"}),m&&u.jsx("span",{style:{fontSize:"0.7rem",color:"#fff",fontWeight:"bold",backgroundColor:qe(s),padding:"2px 6px",borderRadius:"4px",animation:"pulse 2s infinite"},children:"Turn"})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",fontSize:"0.85rem",color:"#fff",flexWrap:"wrap",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"0.5rem 0.75rem",borderRadius:"6px",backdropFilter:"blur(4px)"},children:[u.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:[" ",a.lifeTotal]}),u.jsxs("span",{children:[" ",p.length]}),u.jsxs("span",{children:[" ",i(`deck-${s}`).length]}),u.jsxs("span",{children:[" ",y.length]}),u.jsxs("span",{children:[" ",v.length]})]})]})]},s)})})}function Sb({currentPlayerId:e}){const[t,n]=$.useState([]),[r,o]=$.useState("all"),[i,s]=$.useState(""),a=$.useRef(null);$.useEffect(()=>{const y=()=>{const v=[];gr.forEach(C=>{v.push(C)}),n(v)};return gr.observe(y),y(),()=>{gr.unobserve(y)}},[]),$.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]);const c=y=>{y.preventDefault(),i.trim()&&(q1(e,i.trim()),s(""))},d=y=>{const v=Zn.get(y);return v?v.type.charAt(0).toUpperCase()+v.type.slice(1):y},m=y=>{var A,b;const v=_e.get(y.playerId),C=(v==null?void 0:v.name)||"Unknown";if(y.type==="chat"&&y.action==="chat_message")return y.data.message;switch(y.action){case"player_joined":return`${C} joined the game`;case"player_removed":return`${C} left the game`;case"turn_changed":return`${C}'s turn - ${y.data.step}`;case"draw_cards":return`${C} drew ${y.data.count} card${y.data.count!==1?"s":""}`;case"mill_cards":return`${C} milled ${y.data.count} card${y.data.count!==1?"s":""}`;case"exile_from_deck":return`${C} exiled ${y.data.count} card${y.data.count!==1?"s":""} from deck`;case"shuffle_deck":return`${C} shuffled their deck`;case"card_moved":{const w=y.data.oracleId||"a card",_=d(y.data.to),M=d(y.data.from);return M===_?`${C} moved ${w}`:`${C} moved ${w} from ${M} to ${_}`}case"counter_modified":{const w=y.data.oracleId||"a card",_=y.data.counterType,M=y.data.delta,k=y.data.newValue;if(M>0)return`${C} added ${M===1?"a":M} ${_} counter${M!==1?"s":""} to ${w} (${k} total)`;{const T=Math.abs(M);return`${C} removed ${T} ${_} counter${T!==1?"s":""} from ${w} (${k} total)`}}case"card_updated":if(((A=y.data.updates)==null?void 0:A.tapped)!==void 0){const w=y.data.oracleId||"a card";return`${C} ${y.data.updates.tapped?"tapped":"untapped"} ${w}`}if(((b=y.data.updates)==null?void 0:b.faceDown)!==void 0){const w=y.data.oracleId||"a card";return`${C} ${y.data.updates.faceDown?"turned face down":"turned face up"} ${w}`}return`${C} updated a card`;case"life_total_modified":const S=y.data.delta,f=S>0?"+":"";return`${C} ${S>0?"gained":"lost"} ${Math.abs(S)} life (${f}${S}  ${y.data.newTotal})`;case"life_total_set":return`${C} set life to ${y.data.newTotal}`;default:return`${C}: ${y.action}`}},h=y=>new Date(y).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),p=t.filter(y=>r==="all"?!0:r==="chat"?y.type==="chat":r==="game"?y.type==="game"||!y.type:!0);return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(4px)",borderLeft:"2px solid rgba(0, 0, 0, 0.2)",boxShadow:"-4px 0 12px rgba(0, 0, 0, 0.15)"},children:[u.jsxs("div",{style:{borderBottom:"2px solid rgba(224, 224, 224, 0.8)",padding:"0.75rem",backgroundColor:"rgba(249, 249, 249, 0.9)"},children:[u.jsx("h3",{style:{margin:"0 0 0.75rem 0",fontSize:"0.875rem",color:"#666"},children:"CHAT & LOG"}),u.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["all","chat","game"].map(y=>u.jsx("button",{onClick:()=>o(y),style:{flex:1,padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:r===y?"#2196F3":"#f5f5f5",color:r===y?"white":"#666",border:"none",borderRadius:"4px",cursor:"pointer",textTransform:"capitalize"},children:y==="all"?"All":y==="chat"?"Chat":"Game Log"},y))})]}),u.jsx("div",{ref:a,style:{flex:1,overflowY:"auto",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"transparent"},children:p.length===0?u.jsx("div",{style:{color:"#999",fontSize:"0.875rem",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:r==="chat"?"No chat messages yet":"No events yet"}):p.map((y,v)=>{const C=y.type==="chat",A=_e.get(y.playerId),b=qe(y.playerId);return u.jsx("div",{style:{opacity:C?1:.6,fontSize:"0.875rem",lineHeight:1.4},children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"baseline"},children:[u.jsx("span",{style:{fontSize:"0.65rem",color:"#999",flexShrink:0},children:h(y.timestamp)}),C?u.jsxs(u.Fragment,{children:[u.jsxs("span",{style:{fontWeight:"bold",color:b,flexShrink:0},children:[(A==null?void 0:A.name)||"Unknown",":"]}),u.jsx("span",{style:{color:"#333"},children:m(y)})]}):u.jsx("span",{style:{color:"#666"},children:m(y)})]})},v)})}),u.jsxs("form",{onSubmit:c,style:{borderTop:"2px solid rgba(224, 224, 224, 0.8)",padding:"0.75rem",display:"flex",gap:"0.5rem",backgroundColor:"rgba(249, 249, 249, 0.9)"},children:[u.jsx("input",{type:"text",value:i,onChange:y=>s(y.target.value),placeholder:"Type a message...",style:{flex:1,padding:"0.5rem",fontSize:"0.875rem",border:"1px solid #ddd",borderRadius:"4px",outline:"none"},onFocus:y=>{y.target.style.borderColor="#2196F3"},onBlur:y=>{y.target.style.borderColor="#ddd"}}),u.jsx("button",{type:"submit",disabled:!i.trim(),style:{padding:"0.5rem 1rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:i.trim()?"#2196F3":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:i.trim()?"pointer":"not-allowed"},children:"Send"})]})]})}function kb({isOpen:e,onClose:t,currentPlayerId:n}){return e?u.jsxs("div",{style:{position:"absolute",top:0,right:0,bottom:0,width:"400px",maxWidth:"50vw",backgroundColor:"transparent",display:"flex",flexDirection:"column",animation:"slideInRight 0.3s ease",zIndex:100},children:[u.jsx("button",{onClick:t,style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.25rem",cursor:"pointer",color:"#666",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1,zIndex:101,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 1)",r.currentTarget.style.color="#333"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.9)",r.currentTarget.style.color="#666"},children:""}),u.jsx("div",{style:{flex:1,overflow:"hidden",minHeight:0},children:u.jsx(Sb,{currentPlayerId:n})}),u.jsx("style",{children:`
        @keyframes slideInRight {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }
      `})]}):null}function r0({isOpen:e,searchTerm:t,onSearchChange:n,onToggle:r,resultCount:o,totalCount:i}){return e?u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:1,maxWidth:"400px"},children:[u.jsx("input",{type:"text",placeholder:"Search by card name...",value:t,onChange:s=>n(s.target.value),onKeyDown:s=>{s.key==="Escape"&&(n(""),r())},autoFocus:!0,style:{flex:1,padding:"0.4rem 0.6rem",fontSize:"0.85rem",border:"2px solid #ccc",borderRadius:"6px",boxSizing:"border-box"}}),o!==void 0&&i!==void 0&&t&&u.jsxs("span",{style:{fontSize:"0.75rem",color:"#666",whiteSpace:"nowrap"},children:[o," of ",i]}),u.jsx("button",{onClick:()=>{n(""),r()},style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:s=>{s.currentTarget.style.color="#333"},onMouseLeave:s=>{s.currentTarget.style.color="#666"},title:"Close search",children:""})]}):u.jsx("button",{onClick:r,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:s=>{s.currentTarget.style.color="#333"},onMouseLeave:s=>{s.currentTarget.style.color="#666"},title:"Search",children:""})}function _b({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){const[a,c]=$.useState(!1),[d,m]=$.useState(""),h=d?n.filter(({card:p})=>{var v;return(((v=p.metadata)==null?void 0:v.name)||p.oracleId).toLowerCase().includes(d.toLowerCase())}):n;return u.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #757575":"none"},children:[u.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",alignItems:"center",backgroundColor:"#f9f9f9",gap:"0.5rem"},children:[u.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",flex:1},children:[" Graveyard (",n.length," ",n.length===1?"card":"cards",d&&`, showing ${h.length}`,")"]}),u.jsx(r0,{isOpen:a,searchTerm:d,onSearchChange:m,onToggle:()=>c(!a),resultCount:h.length,totalCount:n.length}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:p=>{p.currentTarget.style.color="#333"},onMouseLeave:p=>{p.currentTarget.style.color="#666"},children:""})]}),u.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:u.jsx(yr,{zoneId:`graveyard-${o}`,zoneName:"",zoneType:"graveyard",cards:h,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function Eb({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s}){const[a,c]=$.useState(!1),[d,m]=$.useState(""),h=d?n.filter(({card:p})=>{var v;return(((v=p.metadata)==null?void 0:v.name)||p.oracleId).toLowerCase().includes(d.toLowerCase())}):n;return u.jsxs("div",{style:{height:e?"200px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #9C27B0":"none"},children:[u.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",alignItems:"center",backgroundColor:"#f9f9f9",gap:"0.5rem"},children:[u.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold",flex:1},children:[" Exile (",n.length," ",n.length===1?"card":"cards",d&&`, showing ${h.length}`,")"]}),u.jsx(r0,{isOpen:a,searchTerm:d,onSearchChange:m,onToggle:()=>c(!a),resultCount:h.length,totalCount:n.length}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:p=>{p.currentTarget.style.color="#333"},onMouseLeave:p=>{p.currentTarget.style.color="#666"},children:""})]}),u.jsx("div",{style:{height:"calc(200px - 48px)",overflow:"visible",padding:"0.5rem"},children:u.jsx(yr,{zoneId:`exile-${o}`,zoneName:"",zoneType:"exile",cards:h,playerColor:r,playerId:o,isInteractive:i,viewerPlayerId:s,showHeader:!1})})]})}function jb({isOpen:e,onClose:t,cards:n,playerColor:r,playerId:o,viewerPlayerId:i,revealedCard:s}){const a=o===i,c=(s==null?void 0:s.revealedBy)===o;return u.jsxs("div",{style:{height:e?"300px":"0",overflow:"hidden",transition:"height 0.3s ease",flexShrink:0,backgroundColor:"#fff",borderTop:e?"2px solid #607D8B":"none"},children:[u.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"2px solid #ddd",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f9f9f9"},children:[u.jsxs("h3",{style:{margin:0,fontSize:"1rem",fontWeight:"bold"},children:[" Deck (",n.length," ",n.length===1?"card":"cards",")"]}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:"#666",padding:"0.25rem",lineHeight:1},onMouseEnter:d=>{d.currentTarget.style.color="#333"},onMouseLeave:d=>{d.currentTarget.style.color="#666"},children:""})]}),u.jsx("div",{style:{height:"calc(300px - 48px)",overflow:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:n.length===0?u.jsx("div",{style:{textAlign:"center",color:"#999",padding:"2rem"},children:"Deck is empty"}):a?u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:d,card:m},h)=>{var p;return u.jsxs("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem"},children:[u.jsxs("div",{style:{fontWeight:"bold"},children:["#",h+1]}),u.jsx("div",{style:{fontSize:"0.7rem",color:"#666"},children:((p=m.metadata)==null?void 0:p.name)||m.oracleId.slice(0,8)})]},d)})}):u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:n.map(({id:d,card:m},h)=>{var v;const y=h===0&&c;return u.jsx("div",{style:{width:"100px",height:"140px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:y?"#fff3e0":"#37474f",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",padding:"0.5rem",textAlign:"center",flexDirection:"column",gap:"0.25rem",color:y?"#000":"#fff"},children:y?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{fontWeight:"bold",color:"#ff9800"},children:" Revealed"}),u.jsx("div",{style:{fontSize:"0.7rem"},children:(s==null?void 0:s.cardName)||((v=m.metadata)==null?void 0:v.name)||m.oracleId.slice(0,8)})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{fontSize:"2rem"},children:""}),u.jsxs("div",{style:{fontSize:"0.7rem",opacity:.7},children:["#",h+1]})]})},d)})})})]})}function Tb({cards:e,mode:t,playerId:n,onConfirm:r,onCancel:o}){const[i,s]=$.useState(e.map(E=>E.cardId)),[a,c]=$.useState([]),[d,m]=$.useState([]),[h,p]=$.useState(""),[y,v]=$.useState(new Set),C=E=>{s(D=>D.filter(I=>I!==E)),c(D=>[...D,E]),m(D=>D.filter(I=>I!==E))},A=E=>{c(D=>D.filter(I=>I!==E)),s(D=>[...D,E]),m(D=>D.filter(I=>I!==E))},b=E=>{s(D=>D.filter(I=>I!==E)),c(D=>D.filter(I=>I!==E)),m(D=>[...D,E])},S=(E,D,I)=>{(I==="top"?s:I==="bottom"?c:m)(Q=>{const q=Q.indexOf(E);if(q===-1)return Q;const se=D==="up"?q-1:q+1;if(se<0||se>=Q.length)return Q;const ge=[...Q];return[ge[q],ge[se]]=[ge[se],ge[q]],ge})},f=()=>{(t==="scry"||t==="surveil")&&r&&(t==="surveil"&&n&&d.forEach(E=>{gl(E,`graveyard-${n}`,"auto",n)}),r(i,a)),o()},w=E=>{var I;const D=e.find(W=>W.cardId===E);return D?((I=D.card.metadata)==null?void 0:I.name)||D.card.oracleId:""},_=i.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),M=a.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),k=d.filter(E=>w(E).toLowerCase().includes(h.toLowerCase())),T=(E,D)=>{(D.ctrlKey||D.metaKey)&&(D.stopPropagation(),v(I=>{const W=new Set(I);return W.has(E)?W.delete(E):W.add(E),W}))},z=E=>{s(D=>D.filter(I=>I!==E)),c(D=>D.filter(I=>I!==E)),m(D=>D.filter(I=>I!==E)),v(D=>{const I=new Set(D);return I.delete(E),I})};return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:o,children:u.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 8px 32px rgba(0,0,0,0.3)"},onClick:E=>E.stopPropagation(),children:[u.jsxs("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.5rem"},children:[t==="scry"?"Scry":t==="surveil"?"Surveil":"View"," ",e.length]}),t==="peek"&&u.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Search for cards and use the menu on each card to move them. Ctrl+click to select multiple cards."}),t==="scry"&&u.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Reorder cards and choose which to put on top or bottom of your deck"}),t==="surveil"&&u.jsx("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem",color:"#666"},children:"Put any number of cards in your graveyard and the rest back on top in any order"}),u.jsx("div",{style:{marginBottom:"1rem"},children:u.jsx("input",{type:"text",placeholder:"Search by card name...",value:h,onChange:E=>p(E.target.value),style:{width:"100%",padding:"0.5rem",fontSize:"0.9rem",border:"2px solid #ccc",borderRadius:"6px",boxSizing:"border-box"}})}),_.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Top of Deck (",i.length,h?`, showing ${_.length}`:"",")"]}),u.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:_.map(E=>{const D=e.find(W=>W.cardId===E);if(!D)return null;const I=i.indexOf(E);return u.jsx(za,{cardId:E,card:D.card,position:I+1,canMoveUp:(t==="scry"||t==="surveil")&&I>0,canMoveDown:(t==="scry"||t==="surveil")&&I<i.length-1,onMoveUp:()=>S(E,"up","top"),onMoveDown:()=>S(E,"down","top"),onMoveToBottom:t==="scry"?()=>C(E):void 0,onMoveToGraveyard:t==="surveil"?()=>b(E):void 0,isSelected:y.has(E),onClick:W=>T(E,W),playerId:n,mode:t,onCardMoved:z,selectedCards:y},E)})})]}),t==="scry"&&M.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["Bottom of Deck (",a.length,h?`, showing ${M.length}`:"",")"]}),u.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:M.map(E=>{const D=e.find(W=>W.cardId===E);if(!D)return null;const I=a.indexOf(E);return u.jsx(za,{cardId:E,card:D.card,position:I+1,canMoveUp:I>0,canMoveDown:I<a.length-1,onMoveUp:()=>S(E,"up","bottom"),onMoveDown:()=>S(E,"down","bottom"),onMoveToTop:()=>A(E),isSelected:y.has(E),onClick:W=>T(E,W),playerId:n,mode:t,onCardMoved:z,selectedCards:y},E)})})]}),t==="surveil"&&k.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",color:"#333"},children:["To Graveyard (",d.length,h?`, showing ${k.length}`:"",")"]}),u.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:k.map(E=>{const D=e.find(W=>W.cardId===E);if(!D)return null;const I=d.indexOf(E);return u.jsx(za,{cardId:E,card:D.card,position:I+1,canMoveUp:I>0,canMoveDown:I<d.length-1,onMoveUp:()=>S(E,"up","graveyard"),onMoveDown:()=>S(E,"down","graveyard"),onMoveToTop:()=>A(E),isSelected:y.has(E),onClick:W=>T(E,W),playerId:n,mode:t,onCardMoved:z,selectedCards:y},E)})})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:o,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#f5f5f5",border:"1px solid #ccc",borderRadius:"6px",cursor:"pointer"},children:t==="peek"?"Close":"Cancel"}),(t==="scry"||t==="surveil")&&u.jsx("button",{onClick:f,style:{padding:"0.5rem 1rem",fontSize:"0.9rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold"},children:"Confirm"})]})]})})}function za({cardId:e,card:t,position:n,canMoveUp:r,canMoveDown:o,onMoveUp:i,onMoveDown:s,onMoveToBottom:a,onMoveToTop:c,onMoveToGraveyard:d,isSelected:m=!1,onClick:h,playerId:p,mode:y,onCardMoved:v,selectedCards:C=new Set}){const{imageUrl:A,loading:b}=vd(t.oracleId),[S,f]=$.useState(!1),[w,_]=$.useState(null),M=T=>{if(T.stopPropagation(),!S&&T.currentTarget){const z=T.currentTarget.getBoundingClientRect(),E=window.innerHeight,D=window.innerWidth;let I=z.right+8,W=z.top;const Q=180;I+Q>D&&(I=z.left-Q-8);const q=200;W+q>E&&(W=Math.max(8,E-q-8)),_({top:W,left:I})}f(!S)},k=(T,z)=>{if(!p)return;const E=`${T}-${p}`;m&&C.size>1?C.forEach(D=>{gl(D,E,z||"auto",p),v&&v(D)}):(gl(e,E,z||"auto",p),v&&v(e)),f(!1)};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",alignItems:"center"},onClick:h,children:[u.jsxs("div",{style:{width:"150px",height:"210px",borderRadius:"8px",overflow:"hidden",border:"2px solid #333",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center",position:"relative",outline:m?"4px solid #2196F3":"none",outlineOffset:"-4px",boxShadow:m?"0 0 12px rgba(33, 150, 243, 0.8)":"none",transition:"all 0.2s ease"},children:[b?u.jsx("div",{style:{fontSize:"0.8rem",color:"#999"},children:"Loading..."}):A?u.jsx("img",{src:A,alt:t.oracleId,style:{width:"100%",height:"100%",objectFit:"cover"}}):u.jsx("div",{style:{padding:"0.5rem",fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:t.oracleId}),y==="peek"&&p&&u.jsx("button",{onClick:M,style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(255,255,255,0.95)",border:"1px solid #333",borderRadius:"4px",padding:"2px 6px",fontSize:"0.7rem",cursor:"pointer",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""}),u.jsx("div",{style:{position:"absolute",top:y==="peek"&&p?"35px":"8px",left:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:n})]}),u.jsxs("div",{style:{display:"flex",gap:"4px",flexWrap:"wrap",justifyContent:"center"},children:[r&&u.jsx("button",{onClick:i,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),o&&u.jsx("button",{onClick:s,style:{padding:"4px 8px",fontSize:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:""}),a&&u.jsx("button",{onClick:a,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Bottom"}),c&&u.jsx("button",{onClick:c,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Top"}),d&&u.jsx("button",{onClick:d,style:{padding:"4px 8px",fontSize:"0.7rem",backgroundColor:"#9E9E9E",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"To Graveyard"})]}),y==="peek"&&p&&S&&Sr.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:10998},onClick:()=>f(!1)}),u.jsxs("div",{style:{position:"fixed",top:w?`${w.top}px`:"50%",left:w?`${w.left}px`:"50%",transform:w?"none":"translate(-50%, -50%)",backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:10999,minWidth:"150px"},children:[u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>k("hand"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Hand",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>k("battlefield"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Battlefield",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>k("graveyard"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Graveyard",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>k("exile"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Exile",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"1px solid #eee"},onClick:()=>k("deck","top"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Deck (top)",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]}),u.jsxs("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",borderBottom:"none"},onClick:()=>k("deck","bottom"),onMouseEnter:T=>{T.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor="white"},children:[" Deck (bottom)",m&&C.size>1&&u.jsxs("span",{style:{marginLeft:"6px",color:"#2196F3",fontWeight:"bold",fontSize:"0.9em"},children:["(",C.size," cards)"]})]})]})]}),document.body)]})}function o0({cardCount:e,playerColor:t,playerId:n,revealedCard:r,onDrawOne:o,onDrawN:i,onMillOne:s,onMillN:a,onExileOne:c,onExileN:d,onRevealTop:m,onShuffle:h,cardSize:p="compact"}){const y=p==="compact"?122:244,v=p==="compact"?170:340,[C,A]=$.useState(!1),[b,S]=$.useState(!1),[f,w]=$.useState(!1),[_,M]=$.useState(!1),[k,T]=$.useState(!1),[z,E]=$.useState(!1),[D,I]=$.useState(null),[W,Q]=$.useState(null),[q,se]=$.useState(null),[ge,K]=$.useState(null),[U,re]=$.useState(null),[ce,ve]=$.useState(null),[me,oe]=$.useState(null),[de,G]=$.useState(null),[fe,J]=$.useState(!1),[V,Z]=$.useState(null),ue=r&&r.revealedBy===n,{imageUrl:we}=vd(ue?r.cardName:""),Se=()=>{e>0&&o()},xe=ce?{position:"fixed",top:`${ce.top}px`,left:`${ce.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:9999,minWidth:"150px"}:{position:"absolute",bottom:"100%",left:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"150px"},N={padding:"0.5rem 0.75rem",cursor:e>0?"pointer":"not-allowed",fontSize:"0.75rem",borderBottom:"1px solid #eee"};return u.jsxs("div",{style:{position:"relative"},children:[u.jsxs("div",{onDoubleClick:Se,style:{width:`${y}px`,height:`${v}px`,backgroundColor:ue&&we?"transparent":"#333",backgroundImage:ue&&we?`url(${we})`:"none",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid #666",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:e>0?"pointer":"default",position:"relative",userSelect:"none"},onMouseEnter:R=>{if(!ue)return;const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth;let j=P.left-320,l=P.top;j<8&&(j=P.right+20),j+300>H&&(j=Math.max(8,(H-300)/2)),l+420>window.innerHeight&&(l=Math.max(8,window.innerHeight-420-8)),Z({top:l,left:j}),J(!0)},onMouseLeave:()=>{J(!1),Z(null)},children:[u.jsx("button",{onClick:R=>{if(R.stopPropagation(),!C){const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth;let j=P.left,l=P.top-8;const g=180;j+g>H&&(j=H-g-8);const x=250;l-x<8?l=P.bottom+8:l=l-x,ve({top:l,left:j})}A(!C)},style:{position:"absolute",top:"8px",left:"8px",backgroundColor:"rgba(255,255,255,0.9)",border:"1px solid #333",borderRadius:"4px",padding:"4px 8px",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:""}),u.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",backgroundColor:t,color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[" ",e]})]}),fe&&V&&r&&Sr.createPortal(u.jsx("div",{style:{position:"fixed",top:`${V.top}px`,left:`${V.left}px`,width:"300px",height:"420px",borderRadius:"12px",overflow:"hidden",border:"3px solid #333",backgroundColor:"#f5f5f5",boxShadow:"0 8px 16px rgba(0,0,0,0.5)",zIndex:10001,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:we?u.jsx("img",{src:we,alt:r.cardName,style:{width:"100%",height:"100%",objectFit:"cover"}}):u.jsx("div",{style:{padding:"1rem",fontSize:"1.25rem",fontWeight:"bold",textAlign:"center",wordBreak:"break-word"},children:r.cardName})}),document.body),C&&Sr.createPortal(u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9998},onClick:()=>{A(!1),S(!1),w(!1),M(!1),T(!1),E(!1)}}),u.jsxs("div",{style:xe,children:[u.jsx("div",{style:{...N,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:R=>{if(e===0)return;R.currentTarget.style.backgroundColor="#f5f5f5",w(!1),M(!1),T(!1),E(!1);const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth,j=window.innerHeight;let l=P.right+4,g=P.top;const x=180,L=100;l+x>H&&(l=P.left-x-4),g+L>j&&(g=Math.max(8,j-L-8)),I({top:g,left:l}),S(!0)},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:u.jsx("span",{children:"Draw "})}),u.jsx("div",{style:{...N,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:R=>{if(e===0)return;R.currentTarget.style.backgroundColor="#f5f5f5",S(!1),M(!1),T(!1),E(!1);const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth,j=window.innerHeight;let l=P.right+4,g=P.top;const x=180,L=100;l+x>H&&(l=P.left-x-4),g+L>j&&(g=Math.max(8,j-L-8)),Q({top:g,left:l}),w(!0)},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:u.jsx("span",{children:"Mill "})}),u.jsx("div",{style:{...N,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:R=>{if(e===0)return;R.currentTarget.style.backgroundColor="#f5f5f5",S(!1),w(!1),T(!1),E(!1);const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth,j=window.innerHeight;let l=P.right+4,g=P.top;const x=200,L=180;l+x>H&&(l=P.left-x-4),g+L>j&&(g=Math.max(8,j-L-8)),se({top:g,left:l}),M(!0)},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:u.jsx("span",{children:"Exile "})}),u.jsx("div",{style:{...N,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:R=>{if(e===0)return;R.currentTarget.style.backgroundColor="#f5f5f5",S(!1),w(!1),M(!1),E(!1);const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth,j=window.innerHeight;let l=P.right+4,g=P.top;const x=180,L=100;l+x>H&&(l=P.left-x-4),g+L>j&&(g=Math.max(8,j-L-8)),K({top:g,left:l}),T(!0)},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:u.jsx("span",{children:"Scry "})}),u.jsx("div",{style:{...N,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e>0?"white":"#f5f5f5"},onMouseEnter:R=>{if(e===0)return;R.currentTarget.style.backgroundColor="#f5f5f5",S(!1),w(!1),M(!1),T(!1);const P=R.currentTarget.getBoundingClientRect(),H=window.innerWidth,j=window.innerHeight;let l=P.right+4,g=P.top;const x=180,L=100;l+x>H&&(l=P.left-x-4),g+L>j&&(g=Math.max(8,j-L-8)),re({top:g,left:l}),E(!0)},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:u.jsx("span",{children:"View "})}),u.jsx("div",{style:{...N,backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(m(),A(!1))},onMouseEnter:R=>{e>0&&(R.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:"Reveal Top Card"}),u.jsx("div",{style:{...N,borderBottom:"none",backgroundColor:e>0?"white":"#f5f5f5"},onClick:()=>{e>0&&(h(),A(!1))},onMouseEnter:R=>{e>0&&(R.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:R=>{e>0&&(R.currentTarget.style.backgroundColor="white")},children:"Shuffle Deck"})]}),b&&D&&u.jsxs("div",{style:{position:"fixed",top:`${D.top}px`,left:`${D.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>S(!0),onMouseLeave:()=>{S(!1),I(null)},children:[u.jsx("div",{style:N,onClick:()=>{o(),A(!1),S(!1)},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Draw 1"}),u.jsx("div",{style:{...N,borderBottom:"none"},onClick:()=>{oe({title:"Draw how many cards?",onConfirm:R=>{i(R),oe(null),A(!1),S(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Draw N"})]}),f&&W&&u.jsxs("div",{style:{position:"fixed",top:`${W.top}px`,left:`${W.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>w(!0),onMouseLeave:()=>{w(!1),Q(null)},children:[u.jsx("div",{style:N,onClick:()=>{s(),A(!1),w(!1)},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Mill 1"}),u.jsx("div",{style:{...N,borderBottom:"none"},onClick:()=>{oe({title:"Mill how many cards?",onConfirm:R=>{a(R),oe(null),A(!1),w(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Mill N"})]}),_&&q&&u.jsxs("div",{style:{position:"fixed",top:`${q.top}px`,left:`${q.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>M(!0),onMouseLeave:()=>{M(!1),se(null)},children:[u.jsx("div",{style:N,onClick:()=>{c(!1),A(!1),M(!1)},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-up)"}),u.jsx("div",{style:N,onClick:()=>{oe({title:"Exile how many cards (face-up)?",onConfirm:R=>{d(R,!1),oe(null),A(!1),M(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Exile N (face-up)"}),u.jsx("div",{style:N,onClick:()=>{c(!0),A(!1),M(!1)},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Exile 1 (face-down)"}),u.jsx("div",{style:{...N,borderBottom:"none"},onClick:()=>{oe({title:"Exile how many cards (face-down)?",onConfirm:R=>{d(R,!0),oe(null),A(!1),M(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Exile N (face-down)"})]}),k&&ge&&u.jsxs("div",{style:{position:"fixed",top:`${ge.top}px`,left:`${ge.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"150px"},onMouseEnter:()=>T(!0),onMouseLeave:()=>{T(!1),K(null)},children:[u.jsx("div",{style:N,onClick:()=>{const R=Or(n,1);R.length>0&&(G({cards:R,mode:"scry"}),A(!1),T(!1))},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Scry 1"}),u.jsx("div",{style:N,onClick:()=>{oe({title:"Scry how many cards?",onConfirm:R=>{const P=Or(n,R);P.length>0&&G({cards:P,mode:"scry"}),oe(null),A(!1),T(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Scry N"}),u.jsx("div",{style:N,onClick:()=>{const R=Or(n,1);R.length>0&&(G({cards:R,mode:"surveil"}),A(!1),T(!1))},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Surveil 1"}),u.jsx("div",{style:{...N,borderBottom:"none"},onClick:()=>{oe({title:"Surveil how many cards?",onConfirm:R=>{const P=Or(n,R);P.length>0&&G({cards:P,mode:"surveil"}),oe(null),A(!1),T(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" Surveil N"})]}),z&&U&&u.jsxs("div",{style:{position:"fixed",top:`${U.top}px`,left:`${U.left}px`,backgroundColor:"white",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"180px"},onMouseEnter:()=>E(!0),onMouseLeave:()=>{E(!1),re(null)},children:[u.jsx("div",{style:N,onClick:()=>{const R=Or(n,1);R.length>0&&(G({cards:R,mode:"peek"}),A(!1),E(!1))},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" View 1"}),u.jsx("div",{style:N,onClick:()=>{oe({title:"View how many cards?",onConfirm:R=>{const P=Or(n,R);P.length>0&&G({cards:P,mode:"peek"}),oe(null),A(!1),E(!1)}})},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" View N"}),u.jsx("div",{style:{...N,borderBottom:"none"},onClick:()=>{const R=Z1(n);R.length>0&&(G({cards:R,mode:"peek"}),A(!1),E(!1))},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="white"},children:" View Whole Deck"})]})]}),document.body),me&&u.jsx(yd,{title:me.title,max:e,onConfirm:me.onConfirm,onCancel:()=>oe(null)}),de&&u.jsx(Tb,{cards:de.cards,mode:de.mode,playerId:n,onConfirm:de.mode==="scry"?(R,P)=>{eb(n,R,P),G(null)}:void 0,onCancel:()=>G(null)})]})}function Rb({playerId:e,onClick:t}){const n=Jm(e);if(n.length===0)return null;const r=n.filter(d=>d.type==="poison"),o=n.filter(d=>d.type==="commanderDamage"),i=n.filter(d=>!d.isBuiltin),s=[];if(r.length>0){const d=r[0].value;s.push({emoji:en.poison.emoji,value:d,color:en.poison.color,warning:d>=8})}if(o.length>0){const d=o.map(p=>p.value),m=Math.max(...d),h=d.length>1?d.join("/"):m.toString();s.push({emoji:en.commanderDamage.emoji,value:h,color:en.commanderDamage.color,warning:m>=18})}const a=i.slice(0,2),c=i.length-a.length;return a.forEach(d=>{s.push({emoji:d.type.charAt(0).toUpperCase(),value:d.value,color:"#2196F3",warning:!1})}),c>0&&s.push({emoji:"+",value:c,color:"#757575",warning:!1}),u.jsx("div",{onClick:t,style:{display:"flex",gap:"0.25rem",flexWrap:"wrap",cursor:"pointer",marginTop:"0.25rem"},children:s.map((d,m)=>u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.125rem",padding:"0.125rem 0.375rem",backgroundColor:d.warning?d.color:"#f5f5f5",color:d.warning?"white":"#333",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold",border:d.warning?`1px solid ${d.color}`:"1px solid #ddd",animation:d.warning?"pulse 2s infinite":"none"},children:[u.jsx("span",{children:d.emoji}),u.jsx("span",{children:d.value})]},m))})}function Mb({isOpen:e,onClose:t,playerId:n,currentPlayerId:r}){const[o,i]=$.useState(!1),[s,a]=$.useState("");if(!e)return null;const c=_e.get(n),d=(c==null?void 0:c.name)||n,m=Jm(n),h=J1(),p=m.filter(b=>b.type==="poison"),y=m.filter(b=>b.type==="commanderDamage"),v=m.filter(b=>!b.isBuiltin),C=[];_e.forEach((b,S)=>{S!==n&&C.push({id:S,name:b.name})});const A=()=>{s.trim()&&(or(n,s.trim(),1,void 0,r),a(""),i(!1))};return u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:t,children:u.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"1.5rem",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[u.jsxs("h2",{style:{margin:0,fontSize:"1.5rem"},children:["Player Counters - ",d]}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666"},children:""})]}),u.jsx("div",{style:{marginBottom:"1.5rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:"#f5f5f5",borderRadius:"8px",border:p.length>0&&p[0].value>=8?`2px solid ${en.poison.color}`:"2px solid transparent"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1.5rem"},children:en.poison.emoji}),u.jsxs("span",{style:{fontWeight:"bold"},children:[en.poison.name,":"]})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>or(n,"poison",-1,void 0,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#f44336",color:"white",fontSize:"1.25rem",cursor:"pointer",fontWeight:"bold"},children:""}),u.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"bold",minWidth:"40px",textAlign:"center"},children:p.length>0?p[0].value:0}),u.jsx("button",{onClick:()=>or(n,"poison",1,void 0,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#4CAF50",color:"white",fontSize:"1.25rem",cursor:"pointer",fontWeight:"bold"},children:"+"}),p.length>0&&p[0].value>0&&u.jsx("button",{onClick:()=>Ta(n,"poison",r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#9E9E9E",color:"white",fontSize:"1rem",cursor:"pointer"},title:"Remove counter",children:""})]})]})}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsxs("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{fontSize:"1.5rem"},children:en.commanderDamage.emoji}),u.jsxs("span",{children:[en.commanderDamage.name,":"]})]}),C.map(b=>{const S=y.find(_=>_.sourcePlayerId===b.id),f=(S==null?void 0:S.value)||0,w=S!==void 0;return u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:"#f5f5f5",borderRadius:"8px",marginBottom:"0.5rem",border:f>=18?`2px solid ${en.commanderDamage.color}`:"2px solid transparent"},children:[u.jsxs("span",{children:["from ",b.name,":"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>or(n,"commanderDamage",-1,b.id,r),disabled:!w||f===0,style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:w&&f>0?"#f44336":"#ddd",color:"white",fontSize:"1.25rem",cursor:w&&f>0?"pointer":"not-allowed",fontWeight:"bold"},children:""}),u.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"bold",minWidth:"40px",textAlign:"center"},children:f}),u.jsx("button",{onClick:()=>or(n,"commanderDamage",1,b.id,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#4CAF50",color:"white",fontSize:"1.25rem",cursor:"pointer",fontWeight:"bold"},children:"+"}),w&&f>0&&u.jsx("button",{onClick:()=>Ta(n,`commanderDamage:${b.id}`,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#9E9E9E",color:"white",fontSize:"1rem",cursor:"pointer"},title:"Remove counter",children:""})]})]},b.id)})]}),v.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",fontSize:"1.1rem"},children:"Custom Counters:"}),v.map(b=>u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",backgroundColor:"#f5f5f5",borderRadius:"8px",marginBottom:"0.5rem"},children:[u.jsxs("span",{style:{textTransform:"capitalize"},children:[b.type,":"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>or(n,b.type,-1,b.sourcePlayerId,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#f44336",color:"white",fontSize:"1.25rem",cursor:"pointer",fontWeight:"bold"},children:""}),u.jsx("span",{style:{fontSize:"1.25rem",fontWeight:"bold",minWidth:"40px",textAlign:"center"},children:b.value}),u.jsx("button",{onClick:()=>or(n,b.type,1,b.sourcePlayerId,r),style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#4CAF50",color:"white",fontSize:"1.25rem",cursor:"pointer",fontWeight:"bold"},children:"+"}),u.jsx("button",{onClick:()=>{const S=b.sourcePlayerId?`${b.type}:${b.sourcePlayerId}`:b.type;Ta(n,S,r)},style:{width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:"#9E9E9E",color:"white",fontSize:"1rem",cursor:"pointer"},title:"Remove counter",children:""})]})]},`${b.type}-${b.sourcePlayerId||"none"}`))]}),u.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #ddd"},children:[!o&&u.jsx("button",{onClick:()=>i(!0),style:{width:"100%",padding:"0.75rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"},children:"+ Add Custom Counter"}),o&&u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("input",{type:"text",value:s,onChange:b=>a(b.target.value),onKeyDown:b=>{b.key==="Enter"&&A(),b.key==="Escape"&&(i(!1),a(""))},placeholder:"Counter name (e.g., Experience, Energy)",autoFocus:!0,style:{padding:"0.75rem",border:"2px solid #2196F3",borderRadius:"8px",fontSize:"1rem"}}),h.length>0&&u.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:h.map(b=>u.jsx("button",{onClick:()=>{a(b)},style:{padding:"0.25rem 0.5rem",backgroundColor:"#E3F2FD",border:"1px solid #2196F3",borderRadius:"4px",fontSize:"0.875rem",cursor:"pointer"},children:b},b))}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:A,disabled:!s.trim(),style:{flex:1,padding:"0.75rem",backgroundColor:s.trim()?"#4CAF50":"#ddd",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:s.trim()?"pointer":"not-allowed"},children:"Add"}),u.jsx("button",{onClick:()=>{i(!1),a("")},style:{flex:1,padding:"0.75rem",backgroundColor:"#9E9E9E",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"bold",cursor:"pointer"},children:"Cancel"})]})]})]})]})})}function i0({playerId:e,lifeTotal:t,playerColor:n,currentPlayerId:r}){const[o,i]=$.useState(!1),[s,a]=$.useState(!1),c=()=>{Fr(e,1,r)},d=()=>{Fr(e,-1,r)};return u.jsxs("div",{style:{position:"relative"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#fff",border:`2px solid ${n}`,borderRadius:"8px",padding:"0.5rem"},children:[u.jsxs("div",{onClick:()=>a(!0),style:{display:"flex",alignItems:"center",gap:"0.25rem",fontSize:"1.25rem",fontWeight:"bold",color:t<=0?"#F44336":"#333",cursor:"pointer"},title:"Click to manage player counters",children:[u.jsx("span",{children:""}),u.jsx("span",{children:t})]}),u.jsx("button",{onClick:c,style:{width:"32px",height:"32px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="#45a049"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="#4CAF50"},children:"+"}),u.jsx("button",{onClick:d,style:{width:"32px",height:"32px",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1.25rem",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="#da190b"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="#F44336"},children:""}),u.jsx("button",{onClick:()=>i(!o),style:{width:"32px",height:"32px",backgroundColor:"#757575",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="#616161"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="#757575"},children:""})]}),u.jsx(Rb,{playerId:e,onClick:()=>a(!0)})]}),u.jsx(Mb,{isOpen:s,onClose:()=>a(!1),playerId:e,currentPlayerId:r}),o&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:99},onClick:()=>i(!1)}),u.jsxs("div",{style:{position:"absolute",bottom:"100%",right:0,marginBottom:"8px",backgroundColor:"#fff",border:"2px solid #333",borderRadius:"6px",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",zIndex:100,minWidth:"180px"},children:[u.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.7rem",fontWeight:"bold",color:"#666",backgroundColor:"#f9f9f9",borderBottom:"1px solid #eee"},children:"QUICK ADJUST"}),u.jsxs("div",{style:{padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem",borderBottom:"1px solid #eee"},children:[u.jsx("button",{onClick:()=>{Fr(e,5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+5"}),u.jsx("button",{onClick:()=>{Fr(e,-5,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-5"}),u.jsx("button",{onClick:()=>{Fr(e,10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"+10"}),u.jsx("button",{onClick:()=>{Fr(e,-10,r),i(!1)},style:{padding:"0.5rem",backgroundColor:"#F44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"-10"})]}),u.jsx("div",{style:{padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.75rem",backgroundColor:"white"},onClick:()=>{const m=prompt("Set life total to:",t.toString());if(m!==null){const h=parseInt(m,10);isNaN(h)||cb(e,h,r)}i(!1)},onMouseEnter:m=>{m.currentTarget.style.backgroundColor="#f5f5f5"},onMouseLeave:m=>{m.currentTarget.style.backgroundColor="white"},children:"Set Exact Value..."})]})]})]})}const s0="crdt-cards-recent-tokens",Db=4;function l0(){try{const e=localStorage.getItem(s0);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load recent tokens:",e),[]}}function Lb(e,t){try{const r=l0().filter(i=>i.name!==e);r.unshift({name:e,imageUrl:t,timestamp:Date.now()});const o=r.slice(0,Db);localStorage.setItem(s0,JSON.stringify(o))}catch(n){console.error("Failed to save recent token:",n)}}const Na=[{name:"Treasure",displayName:"Treasure",color:"#FFD700",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/d/5/d52efeb3-661d-45e9-97c3-af167f889684.jpg?1757379348"},{name:"Food",displayName:"Food",color:"#8B4513",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/f/0fb2c5a4-859e-40ac-8091-7ba44f57b878.jpg?1757379328"},{name:"Clue",displayName:"Clue",color:"#708090",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/1/5/15866ed4-1ca3-427f-99ba-ee26ede9ae18.jpg?1752946432"},{name:"Soldier",displayName:"1/1 Soldier",color:"#F0E68C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/6/3/631c2c16-132d-4607-ab7e-207a6af188e5.jpg?1757686920"},{name:"Zombie",displayName:"2/2 Zombie",color:"#2F4F4F",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/4/c/4cecd5c6-d6c8-4cd5-97a3-cddaf051af15.jpg?1749245686"},{name:"Goblin",displayName:"1/1 Goblin",color:"#DC143C",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/e/2/e265ca24-96c0-4654-a8f3-bbffe288970a.jpg?1742506636"},{name:"Beast",displayName:"3/3 Beast",color:"#228B22",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/3/b/3b584d93-5681-4ecd-953c-5ef58307caab.jpg?1752946408"},{name:"Spirit",displayName:"1/1 Spirit",color:"#E6E6FA",emoji:"",imageUrl:"https://cards.scryfall.io/normal/front/0/0/004f2ea4-0477-49b2-ad06-5aac7991103d.jpg?1749245677"}];function Ab({playerId:e,onClose:t}){const[n,r]=$.useState(Na.reduce((f,w)=>({...f,[w.name]:1}),{})),[o,i]=$.useState([]),[s,a]=$.useState(""),[c,d]=$.useState([]),[m,h]=$.useState(!1),[p,y]=$.useState("");$.useEffect(()=>{i(l0())},[]);const v=f=>{const w=n[f]||1,_=Na.find(k=>k.name===f),M=_==null?void 0:_.imageUrl;Da(e,f,w,M),t()},C=(f,w)=>{r(_=>({..._,[f]:Math.max(1,Math.min(20,(_[f]||1)+w))}))},A=async()=>{if(s.trim()){h(!0),y(""),d([]);try{const f=`t:token ${s.trim()}`,w=await fetch(`https://api.scryfall.com/cards/search?q=${encodeURIComponent(f)}&unique=prints`);if(!w.ok){w.status===404?y("No tokens found matching your search"):y("Failed to search Scryfall"),h(!1);return}const _=await w.json();d(_.data||[])}catch(f){console.error("Search error:",f),y("Network error - could not search Scryfall")}finally{h(!1)}}},b=f=>{var _,M,k;const w=((_=f.image_uris)==null?void 0:_.normal)||((M=f.image_uris)==null?void 0:M.large)||((k=f.image_uris)==null?void 0:k.small);w&&Lb(f.name,w),Da(e,f.name,1,w),t()},S=f=>{const w=n[f.name]||1;Da(e,f.name,w,f.imageUrl),t()};return u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:9998},onClick:t}),u.jsxs("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.3)",zIndex:9999,width:"90%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",padding:"1.5rem"},onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"2px solid #ddd"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"Create Tokens"}),u.jsx("button",{onClick:t,style:{backgroundColor:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",padding:"0 0.5rem"},children:""})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"COMMON TOKENS"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:Na.map(f=>u.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#fafafa"},children:[u.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:f.emoji}),u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333"},children:f.displayName}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[u.jsx("button",{onClick:()=>C(f.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),u.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[f.name]||1}),u.jsx("button",{onClick:()=>C(f.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),u.jsx("button",{onClick:()=>v(f.name),style:{padding:"0.5rem",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},f.name))})]}),o.length>0&&u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"RECENTLY USED"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.75rem"},children:o.map(f=>u.jsxs("div",{style:{border:"2px solid #ddd",borderRadius:"6px",padding:"0.75rem",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#f0f8ff"},children:[u.jsx("div",{style:{fontSize:"2rem",textAlign:"center"},children:""}),u.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"bold",textAlign:"center",color:"#333",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:f.name,children:f.name}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[u.jsx("button",{onClick:()=>C(f.name,-1),style:{width:"24px",height:"24px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:""}),u.jsx("span",{style:{width:"32px",textAlign:"center",fontSize:"0.875rem",fontWeight:"bold"},children:n[f.name]||1}),u.jsx("button",{onClick:()=>C(f.name,1),style:{width:"24px",height:"24px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:"+"})]}),u.jsx("button",{onClick:()=>S(f),style:{padding:"0.5rem",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold"},children:"Create"})]},f.name))})]}),u.jsxs("div",{children:[u.jsx("h3",{style:{fontSize:"1rem",marginBottom:"0.75rem",color:"#666"},children:"SEARCH SCRYFALL"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.75rem"},children:[u.jsx("input",{type:"text",placeholder:"Search token name (e.g., dragon, elf)",value:s,onChange:f=>a(f.target.value),onKeyDown:f=>f.key==="Enter"&&A(),style:{flex:1,padding:"0.5rem",border:"2px solid #ddd",borderRadius:"4px",fontSize:"0.875rem"}}),u.jsx("button",{onClick:A,disabled:m||!s.trim(),style:{padding:"0.5rem 1rem",backgroundColor:m?"#ccc":"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:m?"not-allowed":"pointer",fontSize:"0.875rem",fontWeight:"bold"},children:m?"Searching...":"Search"})]}),p&&u.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#ffebee",color:"#c62828",borderRadius:"4px",fontSize:"0.875rem"},children:p}),c.length>0&&u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"0.5rem",maxHeight:"300px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",padding:"0.5rem"},children:c.slice(0,20).map(f=>{var w;return u.jsx("div",{onClick:()=>b(f),style:{cursor:"pointer",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",transition:"transform 0.2s"},onMouseEnter:_=>{_.currentTarget.style.transform="scale(1.05)",_.currentTarget.style.borderColor="#2196F3"},onMouseLeave:_=>{_.currentTarget.style.transform="scale(1)",_.currentTarget.style.borderColor="#ddd"},children:(w=f.image_uris)!=null&&w.small?u.jsx("img",{src:f.image_uris.small,alt:f.name,style:{width:"100%",display:"block"}}):u.jsx("div",{style:{aspectRatio:"5/7",backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",color:"#999",padding:"0.5rem",textAlign:"center"},children:f.name})},f.id)})})]})]})]})}const gh=["swift","brave","wise","mighty","clever","bold","noble","fierce","mystic","ancient","silver","golden","crimson","azure","emerald","shadow","thunder","frost","flame","storm","lunar","solar"],mh=["dragon","phoenix","griffin","wizard","knight","mage","sage","warrior","ranger","paladin","rogue","sorcerer","champion","guardian","sentinel","warden","keeper","seeker","voyager"];function yh(){const e=gh[Math.floor(Math.random()*gh.length)],t=mh[Math.floor(Math.random()*mh.length)],n=Math.floor(1e3+Math.random()*9e3);return`${e}-${t}-${n}`}function zb(){const[e,t]=$.useState(yh()),[n,r]=$.useState(""),o=()=>{window.location.hash=e},i=a=>{if(a.preventDefault(),n.trim()){const c=n.trim().toLowerCase().replace(/[^a-z0-9-]/g,"-");window.location.hash=c}},s=()=>{t(yh())};return u.jsx("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},children:u.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",padding:"3rem",maxWidth:"600px",width:"100%"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsxs("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"2.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[" ",window.location.host]}),u.jsx("p",{style:{margin:0,color:"#666",fontSize:"1.1rem"},children:"Real-time multiplayer card game"}),u.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:u.jsx("a",{href:"https://github.com/rsullivan00/crdt-cards/",target:"_blank",rel:"noopener noreferrer",style:{color:"#667eea",textDecoration:"none"},children:"View code & report bugs on GitHub "})})]}),u.jsxs("div",{style:{backgroundColor:"#f8f9fa",borderRadius:"8px",padding:"1.5rem",marginBottom:"2rem"},children:[u.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" What is this?"}),u.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#555",lineHeight:"1.6"},children:[u.jsx("li",{children:"Play Magic-style card games with friends in real-time"}),u.jsx("li",{children:"No server required - uses peer-to-peer technology (CRDTs)"}),u.jsx("li",{children:"Import decks from Moxfield, Archidekt, or use starter decks"}),u.jsx("li",{children:"Everything syncs instantly across all players"})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Create a New Room"}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsx("input",{type:"text",value:e,readOnly:!0,style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",backgroundColor:"#f8f9fa",fontFamily:"monospace"}}),u.jsx("button",{onClick:s,style:{padding:"0.75rem",fontSize:"1.25rem",backgroundColor:"#f8f9fa",border:"2px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#e9ecef"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#f8f9fa"},title:"Generate new room name",children:""})]}),u.jsx("button",{onClick:o,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",fontWeight:"bold",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)"},children:"Create Room & Invite Friends"}),u.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem",color:"#888",textAlign:"center"},children:"Share the URL with friends to play together"})]}),u.jsx("div",{style:{height:"1px",backgroundColor:"#e0e0e0",margin:"2rem 0"}}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h2",{style:{margin:"0 0 1rem 0",fontSize:"1.2rem",color:"#333"},children:" Join Existing Room"}),u.jsx("form",{onSubmit:i,children:u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("input",{type:"text",value:n,onChange:a=>r(a.target.value),placeholder:"Enter room name...",style:{flex:1,padding:"0.75rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderRadius:"6px",fontFamily:"monospace"}}),u.jsx("button",{type:"submit",disabled:!n.trim(),style:{padding:"0.75rem 1.5rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:n.trim()?"#4CAF50":"#e0e0e0",color:"white",border:"none",borderRadius:"6px",cursor:n.trim()?"pointer":"not-allowed",transition:"background-color 0.2s"},children:"Join"})]})})]}),u.jsxs("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"6px",padding:"1rem",fontSize:"0.9rem",color:"#856404"},children:[u.jsx("strong",{children:" Important:"})," Rooms are temporary and ephemeral. All game data is deleted when the last player leaves. Make sure to finish your game in one session!"]})]})})}function Nb({isOpen:e,onClose:t}){return e?Sr.createPortal(u.jsx(u.Fragment,{children:u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center"},onClick:t,children:u.jsxs("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"2rem",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},onClick:n=>n.stopPropagation(),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[u.jsx("h2",{style:{margin:0,fontSize:"1.5rem"},children:"How to Use"}),u.jsx("button",{onClick:t,style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#666",padding:"0",lineHeight:1},children:""})]}),u.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[u.jsxs("section",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#2196F3"},children:" Multi-Select Cards"}),u.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Ctrl+Click"})," to select/deselect individual cards"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Drag-to-select"})," on battlefield: Click and drag to create a selection rectangle"]}),u.jsxs("li",{children:["Selected cards show a ",u.jsx("span",{style:{color:"#2196F3"},children:"blue outline"})]}),u.jsx("li",{children:"Works in all zones: battlefield, hand, graveyard, and exile"})]})]}),u.jsxs("section",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#4CAF50"},children:" Batch Operations"}),u.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[u.jsxs("li",{children:["Click the ",u.jsx("strong",{children:" menu"})," on any selected card"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Move to..."})," moves all selected cards together"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Counters"})," adds/removes counters on all selected cards"]}),u.jsxs("li",{children:["Menu shows ",u.jsx("strong",{children:"(X cards)"})," when multiple are selected"]}),u.jsx("li",{children:"Selection persists after operations for multi-step workflows"})]})]}),u.jsxs("section",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#9C27B0"},children:" Group Dragging"}),u.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Drag selected cards"})," from hand/graveyard/exile to battlefield"]}),u.jsx("li",{children:"Cards arrange in a grid (5 per row) where you drop them"}),u.jsxs("li",{children:[u.jsx("strong",{children:"Drag within battlefield"})," maintains relative positions"]}),u.jsx("li",{children:"All selected cards move together"})]})]}),u.jsxs("section",{style:{marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#FF9800"},children:" Card Actions"}),u.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Click"})," battlefield cards to tap/untap"]}),u.jsxs("li",{children:[u.jsx("strong",{children:" Menu"})," for moving, adding counters, deleting tokens"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Drag"})," cards to reposition on battlefield"]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Right-click"})," opens the card menu"]})]})]}),u.jsxs("section",{style:{marginBottom:"0.5rem"},children:[u.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.5rem",color:"#666"},children:" Tips"}),u.jsxs("ul",{style:{paddingLeft:"1.5rem",margin:"0.5rem 0"},children:[u.jsx("li",{children:"Click empty space to clear selection"}),u.jsx("li",{children:"Hold Ctrl while drag-selecting to add to existing selection"}),u.jsx("li",{children:"Use batch counters to quickly set up token armies"}),u.jsx("li",{children:"Multi-select works great for moving creatures to attack"})]})]})]})]})})}),document.body):null}function Ir({playerId:e,player:t,currentPlayerId:n,isCurrentPlayer:r,position:o,getZoneCards:i,onDrawCards:s,onMillCards:a,onExileFromDeck:c,onShuffleDeck:d,onRevealTopCard:m,onOpenGraveyard:h,onOpenExile:p,onOpenDeck:y,onCreateToken:v,isCurrentTurn:C,revealedCard:A}){const b=qe(e),S=r,f=r;return u.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",border:C?`4px solid ${b}`:"2px solid #ddd",backgroundColor:"#f9f9f9",boxShadow:C?`0 0 20px ${b}80`:"none",animation:C?"pulse 2s infinite":"none",overflow:"hidden",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{backgroundColor:b,color:"white",padding:"0.5rem",textAlign:"center",fontWeight:"bold",fontSize:"0.875rem",borderBottom:"2px solid rgba(0,0,0,0.1)",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem"},children:[u.jsxs("div",{style:{flex:1,textAlign:"center"},children:[t.name," ",r&&"(You)",C&&" "]}),!r&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9,fontWeight:"bold"},children:[" ",t.lifeTotal]}),u.jsxs("div",{style:{fontSize:"0.75rem",opacity:.9},children:[" ",i(`hand-${e}`).length]}),u.jsxs("button",{onClick:w=>{w.stopPropagation(),h()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Graveyard",children:[" ",i(`graveyard-${e}`).length]}),u.jsxs("button",{onClick:w=>{w.stopPropagation(),p()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Exile",children:[" ",i(`exile-${e}`).length]}),u.jsxs("button",{onClick:w=>{w.stopPropagation(),y()},style:{padding:"0.2rem 0.4rem",fontSize:"0.65rem",backgroundColor:"rgba(0,0,0,0.2)",color:"white",border:"1px solid rgba(255,255,255,0.3)",borderRadius:"3px",cursor:"pointer"},title:"View Deck",children:[" ",i(`deck-${e}`).length]})]})]}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,overflow:"hidden"},children:f?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:u.jsx(yr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:b,playerId:e,isInteractive:S,viewerPlayerId:n})}),u.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"0.5rem",alignItems:"center"},children:[u.jsx("div",{style:{minWidth:0,overflow:"visible"},children:u.jsx(yr,{zoneId:`hand-${e}`,zoneName:"Hand",zoneType:"hand",cards:i(`hand-${e}`),playerColor:b,playerId:e,isInteractive:S,viewerPlayerId:n})}),u.jsx(o0,{cardCount:i(`deck-${e}`).length,playerColor:b,playerId:e,revealedCard:A,onDrawOne:()=>s(1),onDrawN:s,onMillOne:()=>a(1),onMillN:a,onExileOne:w=>c(1,w),onExileN:(w,_)=>c(w,_),onShuffle:d,onRevealTop:m}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx(i0,{playerId:e,lifeTotal:t.lifeTotal,playerColor:b,currentPlayerId:n}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:h,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Graveyard",children:""}),u.jsx("button",{onClick:p,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Exile",children:""}),u.jsx("button",{onClick:v,style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},title:"Create Token",children:""})]})]})]})]}):u.jsx(u.Fragment,{children:u.jsx("div",{style:{flex:1,overflow:"auto",minHeight:0},children:u.jsx(yr,{zoneId:`battlefield-${e}`,zoneName:"Battlefield",zoneType:"battlefield",cards:i(`battlefield-${e}`),playerColor:b,playerId:e,isInteractive:S,viewerPlayerId:n,opponentPosition:o==="top"?"top":null})})})})]})}function Ob({players:e,currentPlayerId:t,getZoneCards:n,onDrawCards:r,onMillCards:o,onExileFromDeck:i,onShuffleDeck:s,onRevealTopCard:a,onOpenGraveyard:c,onOpenExile:d,onOpenDeck:m,onCreateToken:h,revealedCard:p}){const y=li(),v=y==null?void 0:y.playerId,C=e.find(k=>k.id===t),A=e.filter(k=>k.id!==t),b=e.length,f=b===1?{bottom:C,top:null,left:null,right:null}:b===2?{bottom:C,top:A[0],left:null,right:null}:b===3?{bottom:C,top:null,left:A[0],right:A[1]}:{bottom:C,top:null,left:A[0],right:A[1],bottomRight:A[2]},w=b===2,_=b===3,M=b===4;return u.jsxs("div",{style:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:w?"1fr":"1fr 1fr",gridTemplateRows:"1fr 1fr",gap:"0px",overflow:"hidden"},children:[w?f.top&&u.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:u.jsx(Ir,{playerId:f.top.id,player:f.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:k=>r(f.top.id,k),onMillCards:k=>o(f.top.id,k),onExileFromDeck:(k,T)=>i(f.top.id,k,T),onShuffleDeck:()=>s(f.top.id),onRevealTopCard:()=>a(f.top.id),onOpenGraveyard:()=>c(f.top.id),onOpenExile:()=>d(f.top.id),onOpenDeck:()=>m(f.top.id),onCreateToken:()=>h(f.top.id),isCurrentTurn:v===f.top.id,revealedCard:p})}):u.jsxs(u.Fragment,{children:[f.left&&u.jsx("div",{style:{gridColumn:"1",gridRow:"1"},children:u.jsx(Ir,{playerId:f.left.id,player:f.left.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:k=>r(f.left.id,k),onMillCards:k=>o(f.left.id,k),onExileFromDeck:(k,T)=>i(f.left.id,k,T),onShuffleDeck:()=>s(f.left.id),onRevealTopCard:()=>a(f.left.id),onOpenGraveyard:()=>c(f.left.id),onOpenExile:()=>d(f.left.id),onOpenDeck:()=>m(f.left.id),onCreateToken:()=>h(f.left.id),isCurrentTurn:v===f.left.id,revealedCard:p})}),f.right&&u.jsx("div",{style:{gridColumn:"2",gridRow:"1"},children:u.jsx(Ir,{playerId:f.right.id,player:f.right.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:k=>r(f.right.id,k),onMillCards:k=>o(f.right.id,k),onExileFromDeck:(k,T)=>i(f.right.id,k,T),onShuffleDeck:()=>s(f.right.id),onRevealTopCard:()=>a(f.right.id),onOpenGraveyard:()=>c(f.right.id),onOpenExile:()=>d(f.right.id),onOpenDeck:()=>m(f.right.id),onCreateToken:()=>h(f.right.id),isCurrentTurn:v===f.right.id,revealedCard:p})}),f.top&&u.jsx("div",{style:{gridColumn:"1 / 3",gridRow:"1"},children:u.jsx(Ir,{playerId:f.top.id,player:f.top.player,currentPlayerId:t,isCurrentPlayer:!1,position:"top",getZoneCards:n,onDrawCards:k=>r(f.top.id,k),onMillCards:k=>o(f.top.id,k),onExileFromDeck:(k,T)=>i(f.top.id,k,T),onShuffleDeck:()=>s(f.top.id),onRevealTopCard:()=>a(f.top.id),onOpenGraveyard:()=>c(f.top.id),onOpenExile:()=>d(f.top.id),onOpenDeck:()=>m(f.top.id),onCreateToken:()=>h(f.top.id),isCurrentTurn:v===f.top.id,revealedCard:p})})]}),f.bottom&&u.jsx("div",{style:{gridColumn:w||M?"1":"1 / 3",gridRow:"2"},children:u.jsx(Ir,{playerId:f.bottom.id,player:f.bottom.player,currentPlayerId:t,isCurrentPlayer:!0,position:"bottom",getZoneCards:n,onDrawCards:k=>r(f.bottom.id,k),onMillCards:k=>o(f.bottom.id,k),onExileFromDeck:(k,T)=>i(f.bottom.id,k,T),onShuffleDeck:()=>s(f.bottom.id),onRevealTopCard:()=>a(f.bottom.id),onOpenGraveyard:()=>c(f.bottom.id),onOpenExile:()=>d(f.bottom.id),onOpenDeck:()=>m(f.bottom.id),onCreateToken:()=>h(f.bottom.id),isCurrentTurn:v===f.bottom.id,revealedCard:p})}),M&&f.bottomRight&&u.jsx("div",{style:{gridColumn:"2",gridRow:"2"},children:u.jsx(Ir,{playerId:f.bottomRight.id,player:f.bottomRight.player,currentPlayerId:t,isCurrentPlayer:!1,position:"right",getZoneCards:n,onDrawCards:k=>r(f.bottomRight.id,k),onMillCards:k=>o(f.bottomRight.id,k),onExileFromDeck:(k,T)=>i(f.bottomRight.id,k,T),onShuffleDeck:()=>s(f.bottomRight.id),onRevealTopCard:()=>a(f.bottomRight.id),onOpenGraveyard:()=>c(f.bottomRight.id),onOpenExile:()=>d(f.bottomRight.id),onOpenDeck:()=>m(f.bottomRight.id),onCreateToken:()=>h(f.bottomRight.id),isCurrentTurn:v===f.bottomRight.id,revealedCard:p})}),u.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            box-shadow: 0 0 20px var(--pulse-color, #2196F3)80;
          }
          50% {
            box-shadow: 0 0 40px var(--pulse-color, #2196F3)ff;
          }
        }
      `})]})}function Fb(){if(!(window.location.hash&&window.location.hash!=="#"))return u.jsx(zb,{});const[t,n]=$.useState(null),[r,o]=$.useState(!1),[i,s]=$.useState(!1),[a,c]=$.useState(!1),[d,m]=$.useState(null),[,h]=$.useState({}),[p,y]=$.useState(!1),[v,C]=$.useState(!1),[A,b]=$.useState(!1),[S,f]=$.useState(!1),[w,_]=$.useState(!1),[M,k]=$.useState(!1),[T,z]=$.useState(null),[E,D]=$.useState(null),[I,W]=$.useState(()=>localStorage.getItem("crdt-cards-layout-mode")==="table"?"table":"compact"),Q=()=>{const V=I==="compact"?"table":"compact";W(V),localStorage.setItem("crdt-cards-layout-mode",V)},[q,se]=$.useState(()=>localStorage.getItem("crdt-cards-card-size")==="large"?"large":"compact"),ge=()=>{const V=q==="compact"?"large":"compact";se(V),localStorage.setItem("crdt-cards-card-size",V)};$.useEffect(()=>{const V=`crdt-cards-player-${qr()}`,Z=localStorage.getItem(V);Z&&_e.has(Z)?n(Z):o(!0);const ue=R=>{s(R.connected)},we=R=>{c(R.synced),R.synced&&Z&&!t&&_e.has(Z)&&(n(Z),o(!1),console.log("Rejoined as existing player:",Z))};Zr.on("status",ue),Zr.on("synced",we);const Se=()=>{h({})};_e.observe(Se),Zn.observe(Se),ae.observe(Se),_o.observe(Se),Eo.observe(Se);const xe=()=>{const R=si.get("current");D(R?{cardName:R.cardName,revealedBy:R.revealedBy}:null)};si.observe(xe),xe(),Se();const N=R=>{const P=document.activeElement,H=(P==null?void 0:P.tagName)==="INPUT"||(P==null?void 0:P.tagName)==="TEXTAREA";if(R.ctrlKey&&R.key==="z"&&!H&&t){R.preventDefault(),U1(t)&&console.log("Undid last action");return}if((R.key==="t"||R.key==="T")&&!H){const j=Go();if(j.size===0||!t)return;const l=ae;let g,x=!1;if(j.forEach(L=>{const F=l.get(L);F&&!g&&(g=F,x=F.zoneId.startsWith("battlefield-"))}),g&&x){const L=!g.tapped;j.forEach(F=>{const B=l.get(F);B&&B.zoneId.startsWith("battlefield-")&&Hc(F,L,t)})}}};return window.addEventListener("keydown",N),()=>{_e.unobserve(Se),Zn.unobserve(Se),ae.unobserve(Se),_o.unobserve(Se),Eo.unobserve(Se),si.unobserve(xe),Zr.off("status",ue),Zr.off("synced",we),window.removeEventListener("keydown",N)}},[t]);const K=async(V,Z)=>{const ue=crypto.randomUUID();K1(ue,V,!0);const we=Ls.find(xe=>xe.id===Z);if(we){const xe=await lb(we.file,we.name);xe.success&&xe.deck&&(ph(ue,xe.deck),fh(xe.deck.id),hs(ue),Wo(ue,7))}else{const N=co().find(R=>R.id===Z);N&&(ph(ue,N),fh(Z),hs(ue),Wo(ue,7))}const Se=`crdt-cards-player-${qr()}`;localStorage.setItem(Se,ue),localStorage.setItem("crdt-cards-username",V),n(ue),o(!1),!li()&&_e.size===1&&Wc(ue,"main1")},U=()=>{const V=li(),Z=Array.from(_e.keys());if(V&&Z.length>0){const we=(Z.indexOf(V.playerId)+1)%Z.length;Wc(Z[we],"main1")}},re=li(),ce=(re==null?void 0:re.playerId)||null,ve=()=>{t&&m({message:"Leave this game? Your player and cards will be removed.",onConfirm:()=>{oh(t);const V=`crdt-cards-player-${qr()}`;localStorage.removeItem(V),window.location.reload()}})},me=V=>{const Z=_e.get(V);m({message:`Remove ${(Z==null?void 0:Z.name)||"this player"} from the game? Their cards will be removed.`,onConfirm:()=>{oh(V)}})},oe=()=>{m({message:"Reset the entire room? This will clear all players, cards, and game state.",onConfirm:()=>{Q1();const V=`crdt-cards-player-${qr()}`;localStorage.removeItem(V),window.location.reload()}})},de=V=>{const Z=[];return ae.forEach((ue,we)=>{ue.zoneId===V&&Z.push({id:we,card:ue})}),Z.sort((ue,we)=>ue.card.order-we.card.order)},G=[];if(_e.forEach((V,Z)=>{G.push({id:Z,player:V})}),r)return u.jsx(vb,{onJoin:K,playerCount:_e.size});if(!t)return u.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading..."});const fe=_e.get(t),J=T||t;return u.jsxs(u.Fragment,{children:[u.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% {
            opacity: 1;
          }
          50% {
            opacity: 0.7;
          }
        }
      `}),u.jsxs("div",{style:{fontFamily:"system-ui, -apple-system, sans-serif",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:"#e0e0e0"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"0.75rem 1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",flexShrink:0},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsx("h1",{style:{margin:0,fontSize:"1.25rem"},children:window.location.host}),u.jsxs("div",{style:{fontSize:"0.875rem",color:"#666"},children:[u.jsx("strong",{children:"You:"})," ",(fe==null?void 0:fe.name)||"Unknown"]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsx("button",{onClick:ge,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:q==="large"?"#4CAF50":"#607D8B",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:`Card Size: ${q==="compact"?"Small":"Large"}`,children:q==="large"?" Large":" Small"}),u.jsx("button",{onClick:Q,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:I==="table"?"#FF9800":"#607D8B",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},title:`Switch to ${I==="table"?"compact":"table"} view`,children:I==="table"?" Compact":" Table"}),u.jsx("button",{onClick:()=>k(!0),style:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",fontWeight:"bold",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Help",children:"?"}),u.jsx("button",{onClick:U,style:{padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"bold",backgroundColor:"#9C27B0",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Next Turn"}),u.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:i&&a?"#4CAF50":"#FF9800"}}),u.jsx(xb,{currentPlayerId:t||"",players:G,onLeaveGame:ve,onRemovePlayer:me,onResetRoom:oe})]})]}),I==="table"?u.jsx("div",{style:{flex:1,overflow:"hidden"},children:u.jsx(Ob,{players:G,currentPlayerId:t,getZoneCards:de,onDrawCards:Wo,onMillCards:Ra,onExileFromDeck:Ma,onShuffleDeck:hs,onRevealTopCard:ch,onOpenGraveyard:V=>{z(V===t?null:V),C(!0)},onOpenExile:V=>{z(V===t?null:V),b(!0)},onOpenDeck:V=>{z(V===t?null:V),f(!0)},onCreateToken:()=>_(!0),revealedCard:E})}):u.jsxs("div",{style:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{flex:1,overflow:"visible",minHeight:0,position:"relative"},children:[u.jsx(yr,{zoneId:`battlefield-${J}`,zoneName:"Battlefield",zoneType:"battlefield",cards:de(`battlefield-${J}`),playerColor:qe(J),playerId:J,isInteractive:J===t,viewerPlayerId:t,cardSize:q,hideTitle:!0}),u.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,zIndex:10,pointerEvents:"none"},children:u.jsx(Cb,{players:G,currentPlayerId:t,viewingPlayerId:T||t,currentTurnPlayerId:ce,onSelectPlayer:V=>{z(V===t?null:V)},getZoneCards:de})}),u.jsx(kb,{isOpen:p,onClose:()=>y(!1),currentPlayerId:t})]}),u.jsxs("div",{style:{flexShrink:0,borderTop:"2px solid #ddd",backgroundColor:"#f5f5f5",padding:"0.5rem",display:"grid",gridTemplateColumns:"1fr auto auto",gap:"0.5rem",alignItems:"center"},children:[u.jsx("div",{style:{minWidth:0,overflow:"visible"},children:u.jsx(yr,{zoneId:`hand-${J}`,zoneName:"Hand",zoneType:"hand",cards:de(`hand-${J}`),playerColor:qe(J),playerId:J,isInteractive:J===t,viewerPlayerId:t,cardSize:q,hideTitle:!0})}),_e.get(J)&&u.jsxs(u.Fragment,{children:[J===t?u.jsx(o0,{cardCount:de(`deck-${J}`).length,playerColor:qe(J),playerId:J,revealedCard:E,onDrawOne:()=>Wo(J,1),onDrawN:V=>Wo(J,V),onMillOne:()=>Ra(J,1),onMillN:V=>Ra(J,V),onExileOne:V=>Ma(J,1,V),onExileN:(V,Z)=>Ma(J,V,Z),onRevealTop:()=>{ch(J)},onShuffle:()=>hs(J),cardSize:q}):(()=>{const V=E&&E.revealedBy===J,Z=V?`https://api.scryfall.com/cards/named?format=image&exact=${encodeURIComponent((E==null?void 0:E.cardName)||"")}`:"";return u.jsx("div",{style:{width:"244px",height:"340px",backgroundColor:V&&Z?"transparent":"#333",backgroundImage:V&&Z?`url(${Z})`:"none",backgroundSize:"cover",backgroundPosition:"center",border:"2px solid #666",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",userSelect:"none"},children:u.jsxs("div",{style:{position:"absolute",bottom:"8px",left:"50%",transform:"translateX(-50%)",backgroundColor:qe(J),color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"0.75rem",fontWeight:"bold"},children:[" ",de(`deck-${J}`).length]})})})(),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx(i0,{playerId:J,lifeTotal:_e.get(J).lifeTotal,playerColor:qe(J),currentPlayerId:t}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>C(!v),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#9C27B0"},title:"Graveyard",children:""}),u.jsx("button",{onClick:()=>b(!A),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#9C27B0",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#7B1FA2"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#9C27B0"},title:"Exile",children:""}),u.jsx("button",{onClick:()=>_(!w),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#FF9800",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#F57C00"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#FF9800"},title:"Create Tokens",children:""}),u.jsx("button",{onClick:()=>y(!p),style:{width:"50px",height:"40px",borderRadius:"6px",backgroundColor:"#4CAF50",color:"white",border:"none",fontSize:"1.25rem",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="#388E3C"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="#4CAF50"},title:"Chat & Log",children:""})]})]})]})]})]}),u.jsx(_b,{isOpen:v,onClose:()=>C(!1),cards:de(`graveyard-${J}`),playerColor:qe(J),playerId:J,isInteractive:J===t,viewerPlayerId:t}),u.jsx(Eb,{isOpen:A,onClose:()=>b(!1),cards:de(`exile-${J}`),playerColor:qe(J),playerId:J,isInteractive:J===t,viewerPlayerId:t}),u.jsx(jb,{isOpen:S,onClose:()=>f(!1),cards:de(`deck-${J}`),playerColor:qe(J),playerId:J,viewerPlayerId:t,revealedCard:E}),w&&u.jsx(Ab,{playerId:t,onClose:()=>_(!1)}),d&&u.jsx(wb,{message:d.message,onConfirm:d.onConfirm,onCancel:()=>m(null)}),u.jsx(Nb,{isOpen:M,onClose:()=>k(!1)})]})]})}if(window.location.pathname!=="/"&&!window.location.hash){const e="/#"+window.location.pathname.slice(1)+window.location.search+window.location.hash;window.location.replace(e)}Oa.createRoot(document.getElementById("root")).render(u.jsx(S0.StrictMode,{children:u.jsx(Fb,{})}));
